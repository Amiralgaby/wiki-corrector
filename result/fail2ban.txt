5 Mot inconnu : fail2ban => ====== Bannir des IP avec fail2ban - v2020 ======
5 Tiret d’incise : un tiret demi-cadratin [1] ou cadratin [2] est requis. (Ou éventuellement le signe “moins” [3], s’il s’agit d’une soustraction.) => ====== Bannir des IP avec fail2ban - v2020 ======
5 Mot inconnu : v2020 => ====== Bannir des IP avec fail2ban - v2020 ======

7 Mot inconnu : fail2ban_logo => {{ :fail2ban_logo.png?90}}
7 Mot inconnu : png => {{ :fail2ban_logo.png?90}}
7 Il manque un espace insécable. => {{ :fail2ban_logo.png?90}}
7 Il manque un espace. => {{ :fail2ban_logo.png?90}}

8 Mot inconnu : fail2ban => **fail2ban** est une application qui analyse les logs de divers services (SSH, Apache, FTP...)  en cherchant des correspondances entre des motifs définis dans ses filtres et les entrées des logs. Lorsqu'une correspondance est trouvée une ou plusieurs actions sont exécutées. Typiquement, fail2ban cherche des tentatives répétées de connexions infructueuses dans les fichiers journaux et procède à un bannissement en ajoutant une règle au pare-feu [[:iptables]] ou [[:nftables]] pour bannir l'adresse IP de la source.
8 Mot inconnu : SSH => **fail2ban** est une application qui analyse les logs de divers services (SSH, Apache, FTP...)  en cherchant des correspondances entre des motifs définis dans ses filtres et les entrées des logs. Lorsqu'une correspondance est trouvée une ou plusieurs actions sont exécutées. Typiquement, fail2ban cherche des tentatives répétées de connexions infructueuses dans les fichiers journaux et procède à un bannissement en ajoutant une règle au pare-feu [[:iptables]] ou [[:nftables]] pour bannir l'adresse IP de la source.
8 Typographie : points de suspension. Utilisez le caractère dédié. => **fail2ban** est une application qui analyse les logs de divers services (SSH, Apache, FTP...)  en cherchant des correspondances entre des motifs définis dans ses filtres et les entrées des logs. Lorsqu'une correspondance est trouvée une ou plusieurs actions sont exécutées. Typiquement, fail2ban cherche des tentatives répétées de connexions infructueuses dans les fichiers journaux et procède à un bannissement en ajoutant une règle au pare-feu [[:iptables]] ou [[:nftables]] pour bannir l'adresse IP de la source.
8 Mot inconnu : fail2ban => **fail2ban** est une application qui analyse les logs de divers services (SSH, Apache, FTP...)  en cherchant des correspondances entre des motifs définis dans ses filtres et les entrées des logs. Lorsqu'une correspondance est trouvée une ou plusieurs actions sont exécutées. Typiquement, fail2ban cherche des tentatives répétées de connexions infructueuses dans les fichiers journaux et procède à un bannissement en ajoutant une règle au pare-feu [[:iptables]] ou [[:nftables]] pour bannir l'adresse IP de la source.
8 Mot inconnu : iptables => **fail2ban** est une application qui analyse les logs de divers services (SSH, Apache, FTP...)  en cherchant des correspondances entre des motifs définis dans ses filtres et les entrées des logs. Lorsqu'une correspondance est trouvée une ou plusieurs actions sont exécutées. Typiquement, fail2ban cherche des tentatives répétées de connexions infructueuses dans les fichiers journaux et procède à un bannissement en ajoutant une règle au pare-feu [[:iptables]] ou [[:nftables]] pour bannir l'adresse IP de la source.
8 Mot inconnu : nftables => **fail2ban** est une application qui analyse les logs de divers services (SSH, Apache, FTP...)  en cherchant des correspondances entre des motifs définis dans ses filtres et les entrées des logs. Lorsqu'une correspondance est trouvée une ou plusieurs actions sont exécutées. Typiquement, fail2ban cherche des tentatives répétées de connexions infructueuses dans les fichiers journaux et procède à un bannissement en ajoutant une règle au pare-feu [[:iptables]] ou [[:nftables]] pour bannir l'adresse IP de la source.

11 Il manque un espace. => [[tutoriel:comment_installer_un_paquet|Installez le paquet]] **[[apt>fail2ban]]** disponible dans les [[:depots#universe_et_multiverse|dépôts Universe]]. \\
11 Mot inconnu : comment_installer_un_paquet => [[tutoriel:comment_installer_un_paquet|Installez le paquet]] **[[apt>fail2ban]]** disponible dans les [[:depots#universe_et_multiverse|dépôts Universe]]. \\
11 Mot inconnu : apt => [[tutoriel:comment_installer_un_paquet|Installez le paquet]] **[[apt>fail2ban]]** disponible dans les [[:depots#universe_et_multiverse|dépôts Universe]]. \\
11 Mot inconnu : fail2ban => [[tutoriel:comment_installer_un_paquet|Installez le paquet]] **[[apt>fail2ban]]** disponible dans les [[:depots#universe_et_multiverse|dépôts Universe]]. \\
11 Mot inconnu : depots => [[tutoriel:comment_installer_un_paquet|Installez le paquet]] **[[apt>fail2ban]]** disponible dans les [[:depots#universe_et_multiverse|dépôts Universe]]. \\
11 Mot inconnu : Universe => [[tutoriel:comment_installer_un_paquet|Installez le paquet]] **[[apt>fail2ban]]** disponible dans les [[:depots#universe_et_multiverse|dépôts Universe]]. \\

13 Mot inconnu : fail2ban => Il convient ensuite de lancer le service fail2ban

14 Mot inconnu : systemctl => <code>systemctl start fail2ban</code>
14 Mot inconnu : start => <code>systemctl start fail2ban</code>
14 Mot inconnu : fail2ban => <code>systemctl start fail2ban</code>

17 Mot inconnu : systemctl => <code>systemctl enable fail2ban</code>
17 Mot inconnu : enable => <code>systemctl enable fail2ban</code>
17 Mot inconnu : fail2ban => <code>systemctl enable fail2ban</code>

20 Mot inconnu : systemctl => <code>systemctl status fail2ban</code>
20 Mot inconnu : fail2ban => <code>systemctl status fail2ban</code>

22 Guillemets typographiques ouvrants. => Si la réponse comporte du rouge et le mot "failed" " sur la ligne commençant par "Active :", les dernières lignes du message indiquent les raisons de l'échec et permettent sa correction avant un nouvel essai, à tenter après lecture du reste de cet article.
22 Mot inconnu : failed => Si la réponse comporte du rouge et le mot "failed" " sur la ligne commençant par "Active :", les dernières lignes du message indiquent les raisons de l'échec et permettent sa correction avant un nouvel essai, à tenter après lecture du reste de cet article.
22 Guillemets typographiques fermants. => Si la réponse comporte du rouge et le mot "failed" " sur la ligne commençant par "Active :", les dernières lignes du message indiquent les raisons de l'échec et permettent sa correction avant un nouvel essai, à tenter après lecture du reste de cet article.
22 Guillemets isolés. => Si la réponse comporte du rouge et le mot "failed" " sur la ligne commençant par "Active :", les dernières lignes du message indiquent les raisons de l'échec et permettent sa correction avant un nouvel essai, à tenter après lecture du reste de cet article.
22 Guillemets typographiques ouvrants. => Si la réponse comporte du rouge et le mot "failed" " sur la ligne commençant par "Active :", les dernières lignes du message indiquent les raisons de l'échec et permettent sa correction avant un nouvel essai, à tenter après lecture du reste de cet article.

24 Guillemets typographiques ouvrants. => Si la réponse comporte du vert et les mots "active (running)" sur la ligne commençant par "Active :", le service est installé et actif. 
24 Guillemets typographiques ouvrants. => Si la réponse comporte du vert et les mots "active (running)" sur la ligne commençant par "Active :", le service est installé et actif. 
24 Espace(s) en fin de ligne à supprimer. => Si la réponse comporte du vert et les mots "active (running)" sur la ligne commençant par "Active :", le service est installé et actif. 

27 Si « car » est la conjonction de coordination, une virgule est peut-être souhaitable. => <note important>Il est vivement déconseillé de modifier les fichiers de configuration **/etc/fail2ban/fail2ban.conf** et **/etc/fail2ban/jail.conf** (notamment car ils peuvent être écrasés par une mise à jour). Ces fichiers contiennent les configurations de base qu'on peut **surcharger** au moyen d'un ou plusieurs fichiers enregistrés dans **/etc/fail2ban/jail.d**\\ Le fichier **/etc/fail2ban/jail.conf**  doit servir uniquement de référence et de documentation.</note>

30 Mot inconnu : Fail2ban => **Fail2ban ne doit pas être considéré comme un outil de sécurisation absolu d'un service**. Ses objectifs sont d'éviter de surcharger les logs du système avec des milliers de tentatives de connexion et de limiter la portée des attaques répétées provenant d'une même machine.\\

31 Mot inconnu : SSH => Un serveur avec un accès SSH sur le port standard, par exemple, recevra très rapidement des centaines, voire des milliers de tentatives de connexions provenant de différentes machines. Ce sont généralement des attaques par force brute lancées par des robots.\\

32 Mot inconnu : Fail2ban => Fail2ban en analysant les logs permet de bannir les IP au bout d'un certain nombre de tentatives ce qui limitera le remplissage des logs et l'utilisation de la bande passante. \\

33 Accord de nombre erroné avec « difficiles ». => Ceci va également rendre les attaques par force brute ou par dictionnaire beaucoup plus difficiles mais ce n'est pas une sécurité absolue contre ce type d'attaque.
33 Accord de nombre erroné avec « dictionnaire ». => Ceci va également rendre les attaques par force brute ou par dictionnaire beaucoup plus difficiles mais ce n'est pas une sécurité absolue contre ce type d'attaque.

35 Mot inconnu : SSH => **Mais cela n'améliore en rien la sécurité du service concerné**. Si l'accès SSH n'est pas suffisamment sécurisé (mot de passe faible par exemple) fail2ban n'empêchera pas un attaquant d'arriver à ses fins.\\
35 Mot inconnu : fail2ban => **Mais cela n'améliore en rien la sécurité du service concerné**. Si l'accès SSH n'est pas suffisamment sécurisé (mot de passe faible par exemple) fail2ban n'empêchera pas un attaquant d'arriver à ses fins.\\

42 Mot inconnu : bantime => La durée de bannissement d'une IP est définie par la directive **bantime** avec une valeur en secondes. La valeur par défaut est de 600 s, soit 10 minutes, ce qui est beaucoup trop court. Il est plus réaliste d'avoir des durées de bannissement d'une ou plusieurs heures, voir plusieurs jours.\\
42 Avec une unité de mesure, mettez un espace insécable. => La durée de bannissement d'une IP est définie par la directive **bantime** avec une valeur en secondes. La valeur par défaut est de 600 s, soit 10 minutes, ce qui est beaucoup trop court. Il est plus réaliste d'avoir des durées de bannissement d'une ou plusieurs heures, voir plusieurs jours.\\

44 Mot inconnu : findtime => Une autre directive importante est **findtime** qui définit en secondes le temps depuis lequel une anomalie est recherchée dans les logs. Il ne faut pas mettre une valeur trop élevée (1 heure suffit) sans quoi la quantité de logs à analyser pourrait devenir très importante et donc avoir un impact sur les performances.
44 Avec une unité de mesure, mettez un espace insécable. => Une autre directive importante est **findtime** qui définit en secondes le temps depuis lequel une anomalie est recherchée dans les logs. Il ne faut pas mettre une valeur trop élevée (1 heure suffit) sans quoi la quantité de logs à analyser pourrait devenir très importante et donc avoir un impact sur les performances.

46 Mot inconnu : ignoreip => La directive **ignoreip** permet de définir la liste des IP à ignorer. Il est utile d'y mettre sa propre IP afin de ne pas risquer de se faire bannir.

48 Il manque un espace insécable. => Il faut créer le fichier dans **/etc/fail2ban/jail.d/custom.conf** (ou un autre nom de votre choix) contenant :

50 Mot inconnu : DEFAULT => <code>[DEFAULT]

51 Mot inconnu : ignoreip => ignoreip = 127.0.0.1 124.32.5.48

52 Mot inconnu : findtime => findtime = 10m
52 Avec une unité de mesure, mettez un espace insécable. => findtime = 10m

53 Mot inconnu : bantime => bantime = 24h
53 Avec une unité de mesure, mettez un espace insécable. => bantime = 24h

54 Mot inconnu : maxretry => maxretry = 3</code>

56 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * ignoreip ⇒ votre IP (ici 124.32.5.48) en plus de l'interface de bouclage ;
56 Mot inconnu : ignoreip =>   * ignoreip ⇒ votre IP (ici 124.32.5.48) en plus de l'interface de bouclage ;
56 Il manque un espace insécable. =>   * ignoreip ⇒ votre IP (ici 124.32.5.48) en plus de l'interface de bouclage ;

57 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * findtime = 10m (10 minutes), 3600 secondes (une heure)
57 Mot inconnu : findtime =>   * findtime = 10m (10 minutes), 3600 secondes (une heure)
57 Avec une unité de mesure, mettez un espace insécable. =>   * findtime = 10m (10 minutes), 3600 secondes (une heure)

58 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * bantime = 24h (24 heures) ou 86400 secondes 
58 Mot inconnu : bantime =>   * bantime = 24h (24 heures) ou 86400 secondes 
58 Avec une unité de mesure, mettez un espace insécable. =>   * bantime = 24h (24 heures) ou 86400 secondes 
58 Avec une unité de mesure, mettez un espace insécable. =>   * bantime = 24h (24 heures) ou 86400 secondes 
58 Formatage des grands nombres. =>   * bantime = 24h (24 heures) ou 86400 secondes 
58 Espace(s) en fin de ligne à supprimer. =>   * bantime = 24h (24 heures) ou 86400 secondes 

59 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * maxretry = 3 (une IP sera bannie après 3 tentatives de connexion avortées).
59 Mot inconnu : maxretry =>   * maxretry = 3 (une IP sera bannie après 3 tentatives de connexion avortées).

61 Mot inconnu : fail2ban => ==== Configurer fail2ban pour les services actifs ====

63 Mot inconnu : fail2ban => Pour spécifier à **fail2ban** quels services il doit surveiller, il faut activer les « jails » (prisons) correspondantes.
63 Il manque un espace insécable. => Pour spécifier à **fail2ban** quels services il doit surveiller, il faut activer les « jails » (prisons) correspondantes.
63 Mot inconnu : jails => Pour spécifier à **fail2ban** quels services il doit surveiller, il faut activer les « jails » (prisons) correspondantes.
63 Il manque un espace insécable. => Pour spécifier à **fail2ban** quels services il doit surveiller, il faut activer les « jails » (prisons) correspondantes.

65 Mot inconnu : jail => Si vous regardez le fichier **/etc/fail2ban/jail.conf**, dans la partie //jail// vous trouverez des blocs du type :
65 Il manque un espace insécable. => Si vous regardez le fichier **/etc/fail2ban/jail.conf**, dans la partie //jail// vous trouverez des blocs du type :

67 Mot inconnu : sshd => [sshd]

69 Espace(s) surnuméraire(s) à supprimer. => port    = ssh
69 Mot inconnu : ssh => port    = ssh

70 Mot inconnu : logpath => logpath = %(sshd_log)s
70 Il manque un espace. => logpath = %(sshd_log)s
70 Mot inconnu : sshd_log => logpath = %(sshd_log)s

71 Mot inconnu : backend => backend = %(sshd_backend)s
71 Il manque un espace. => backend = %(sshd_backend)s
71 Mot inconnu : sshd_backend => backend = %(sshd_backend)s

73 Il manque un espace insécable. => Il indique :

74 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * **port** = les ports à bloquer au moyen des règles [[:iptables]] ;
74 Mot inconnu : iptables =>   * **port** = les ports à bloquer au moyen des règles [[:iptables]] ;
74 Il manque un espace insécable. =>   * **port** = les ports à bloquer au moyen des règles [[:iptables]] ;

75 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * **logpath** = l'emplacement des fichiers de log à surveiller ; 
75 Mot inconnu : logpath =>   * **logpath** = l'emplacement des fichiers de log à surveiller ; 
75 Il manque un espace insécable. =>   * **logpath** = l'emplacement des fichiers de log à surveiller ; 
75 Espace(s) en fin de ligne à supprimer. =>   * **logpath** = l'emplacement des fichiers de log à surveiller ; 

76 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * **backend** = le moteur de surveillance des logs.
76 Mot inconnu : backend =>   * **backend** = le moteur de surveillance des logs.

77 Il manque un espace. => Les valeurs représentées ainsi **%(sshd_logs)s** sont des variables qui sont définies dans d'autres fichiers de configuration : **paths_common.conf** et **paths_debian.conf** notamment.
77 Mot inconnu : sshd_logs => Les valeurs représentées ainsi **%(sshd_logs)s** sont des variables qui sont définies dans d'autres fichiers de configuration : **paths_common.conf** et **paths_debian.conf** notamment.
77 Il manque un espace insécable. => Les valeurs représentées ainsi **%(sshd_logs)s** sont des variables qui sont définies dans d'autres fichiers de configuration : **paths_common.conf** et **paths_debian.conf** notamment.
77 Mot inconnu : paths_common => Les valeurs représentées ainsi **%(sshd_logs)s** sont des variables qui sont définies dans d'autres fichiers de configuration : **paths_common.conf** et **paths_debian.conf** notamment.
77 Il manque un espace. => Les valeurs représentées ainsi **%(sshd_logs)s** sont des variables qui sont définies dans d'autres fichiers de configuration : **paths_common.conf** et **paths_debian.conf** notamment.
77 Mot inconnu : paths_debian => Les valeurs représentées ainsi **%(sshd_logs)s** sont des variables qui sont définies dans d'autres fichiers de configuration : **paths_common.conf** et **paths_debian.conf** notamment.
77 Il manque un espace. => Les valeurs représentées ainsi **%(sshd_logs)s** sont des variables qui sont définies dans d'autres fichiers de configuration : **paths_common.conf** et **paths_debian.conf** notamment.

79 Accord de nombre erroné : « connexion » devrait être au pluriel. => Pour activer la surveillance des connexion SSH, il suffit d'ajouter dans le fichier /etc/fail2ban/jail.d/custom.conf :
79 Mot inconnu : SSH => Pour activer la surveillance des connexion SSH, il suffit d'ajouter dans le fichier /etc/fail2ban/jail.d/custom.conf :
79 Il manque un espace insécable. => Pour activer la surveillance des connexion SSH, il suffit d'ajouter dans le fichier /etc/fail2ban/jail.d/custom.conf :

81 Mot inconnu : sshd => [sshd]

82 Mot inconnu : enabled => enabled = true
82 Mot inconnu : true => enabled = true

85 Accord de nombre erroné avec « services ». => Procédez de même pour les autres services.\\
85 Accord de nombre erroné avec « même ». => Procédez de même pour les autres services.\\

88 Mot inconnu : SSH => Si vous avez besoin de spécifier un port (par exemple, quand SSH n'est pas en écoute sur un port standard, un fichier de log particulier, ou un nombre de tentatives différent de la valeur par défaut, précisez-le :
88 Il manque un espace insécable. => Si vous avez besoin de spécifier un port (par exemple, quand SSH n'est pas en écoute sur un port standard, un fichier de log particulier, ou un nombre de tentatives différent de la valeur par défaut, précisez-le :

91 Mot inconnu : sshd => [sshd]

92 Mot inconnu : enabled => enabled = true
92 Mot inconnu : true => enabled = true

94 Mot inconnu : logpath => logpath = /var/log/auth.log

95 Mot inconnu : maxretry => maxretry = 5

98 Mot inconnu : fail2ban => <note tip>D'une manière générale, il est important d'effectuer des tests pour vérifier le bon fonctionnement de fail2ban ! Voir ci-dessous comment procéder.</note>
98 Il manque un espace insécable. => <note tip>D'une manière générale, il est important d'effectuer des tests pour vérifier le bon fonctionnement de fail2ban ! Voir ci-dessous comment procéder.</note>

102 Mot inconnu : sudo => <code>sudo systemctl restart fail2ban</code>
102 Mot inconnu : systemctl => <code>sudo systemctl restart fail2ban</code>
102 Mot inconnu : restart => <code>sudo systemctl restart fail2ban</code>
102 Mot inconnu : fail2ban => <code>sudo systemctl restart fail2ban</code>

104 Il manque un espace insécable. => Vous pouvez alors vérifier si les prisons ont été correctement lancées avec :

105 Mot inconnu : sudo => <code>sudo fail2ban-client status
105 Mot inconnu : fail2ban-client => <code>sudo fail2ban-client status

107 Mot inconnu : Number => |- Number of jail:      3
107 Mot inconnu : of => |- Number of jail:      3
107 Mot inconnu : jail => |- Number of jail:      3
107 Il manque un espace insécable. => |- Number of jail:      3
107 Espace(s) surnuméraire(s) à supprimer. => |- Number of jail:      3

108 Mot inconnu : Jail => `- Jail list:           apache, proftpd, sshd
108 Mot inconnu : list => `- Jail list:           apache, proftpd, sshd
108 Il manque un espace insécable. => `- Jail list:           apache, proftpd, sshd
108 Espace(s) surnuméraire(s) à supprimer. => `- Jail list:           apache, proftpd, sshd
108 Mot inconnu : proftpd => `- Jail list:           apache, proftpd, sshd
108 Mot inconnu : sshd => `- Jail list:           apache, proftpd, sshd

112 Mot inconnu : start => Les prisons peuvent être contrôlées séparément avec les mots clés //start//,//stop//,//status//

113 Il manque un espace insécable. => Par exemple :

114 Mot inconnu : sudo => <code>sudo fail2ban-client stop sshd
114 Mot inconnu : fail2ban-client => <code>sudo fail2ban-client stop sshd
114 Mot inconnu : sshd => <code>sudo fail2ban-client stop sshd

115 Mot inconnu : Jail => Jail stopped
115 Mot inconnu : stopped => Jail stopped

120 Mot inconnu : Fail2Ban => ==== Vérifier le bon fonctionnement de votre configuration Fail2Ban  ====
120 Espace(s) surnuméraire(s) à supprimer. => ==== Vérifier le bon fonctionnement de votre configuration Fail2Ban  ====

122 Mot inconnu : fail2ban => Pour vérifier le bon fonctionnement de fail2ban  vous pouvez essayer de vous identifier plusieurs fois en saisissant un mauvais mot de passe.
122 Espace(s) surnuméraire(s) à supprimer. => Pour vérifier le bon fonctionnement de fail2ban  vous pouvez essayer de vous identifier plusieurs fois en saisissant un mauvais mot de passe.

123 Mot inconnu : Fail2ban => Si Fail2ban fonctionne, vous devriez être interdit d'accès au serveur au bout d'un certain nombre d'essais (précisés dans la configuration à la ligne maxretry) à condition de ne pas avoir mis votre IP dans la directive **ignoreip**.\\
123 Mot inconnu : maxretry => Si Fail2ban fonctionne, vous devriez être interdit d'accès au serveur au bout d'un certain nombre d'essais (précisés dans la configuration à la ligne maxretry) à condition de ne pas avoir mis votre IP dans la directive **ignoreip**.\\
123 Mot inconnu : ignoreip => Si Fail2ban fonctionne, vous devriez être interdit d'accès au serveur au bout d'un certain nombre d'essais (précisés dans la configuration à la ligne maxretry) à condition de ne pas avoir mis votre IP dans la directive **ignoreip**.\\

124 Il manque un espace insécable. => Attention ! Pensez à régler la valeur de **bantime** sur un temps assez court si vous faites ce genre d’essais afin de pouvoir vous reconnecter à votre serveur.
124 Mot inconnu : bantime => Attention ! Pensez à régler la valeur de **bantime** sur un temps assez court si vous faites ce genre d’essais afin de pouvoir vous reconnecter à votre serveur.

126 Espace(s) en fin de ligne à supprimer. => Côté serveur vous pouvez également surveiller ce qu'il se passe avec la commande 

127 Mot inconnu : sudo => <code>sudo fail2ban-client status sshd</code>
127 Mot inconnu : fail2ban-client => <code>sudo fail2ban-client status sshd</code>
127 Mot inconnu : sshd => <code>sudo fail2ban-client status sshd</code>

128 Il manque un espace insécable. => qui dans ce cas vous retournera le statut de la prison « sshd » (avec le nombre de tentatives échouées et la liste des IP bannies)
128 Mot inconnu : sshd => qui dans ce cas vous retournera le statut de la prison « sshd » (avec le nombre de tentatives échouées et la liste des IP bannies)
128 Il manque un espace insécable. => qui dans ce cas vous retournera le statut de la prison « sshd » (avec le nombre de tentatives échouées et la liste des IP bannies)

130 Mot inconnu : sshd => Si vous utilisez un service sujet à de nombreuses attaques par force brute, comme sshd sur le port standard 22, vous devriez très rapidement voir les premiers bannissements.

132 Mot inconnu : fail2ban => Vous pouvez aussi examiner les logs de fail2ban pour voir les actions effectuées :
132 Il manque un espace insécable. => Vous pouvez aussi examiner les logs de fail2ban pour voir les actions effectuées :

133 Mot inconnu : tail => <code>tail -f /var/log/fail2ban.log</code>
133 Il manque un espace à côté du tiret. => <code>tail -f /var/log/fail2ban.log</code>

139 Espace(s) surnuméraire(s) à supprimer. => Les actions  exécutées par fail2ban lorsqu'une correspondance est trouvée entre un filtre et une entrée de log sont définies par la directive **action**. Pour plus d'information consultez la partie **ACTIONS** du fichier **/etc/fail2ban/jail.conf**.\\
139 Mot inconnu : fail2ban => Les actions  exécutées par fail2ban lorsqu'une correspondance est trouvée entre un filtre et une entrée de log sont définies par la directive **action**. Pour plus d'information consultez la partie **ACTIONS** du fichier **/etc/fail2ban/jail.conf**.\\

140 Mot inconnu : iptables => L'action par défaut est un simple bannissement par ajout d'une règle iptables.\\

142 Accord erroné : “actions” et “définis” ne sont pas accordés. Mettez au féminin pluriel. => Les actions peuvent être définis globalement dans la section [DEFAULT] ou par « jails » dans leur propre .section
142 Mot inconnu : DEFAULT => Les actions peuvent être définis globalement dans la section [DEFAULT] ou par « jails » dans leur propre .section
142 Il manque un espace insécable. => Les actions peuvent être définis globalement dans la section [DEFAULT] ou par « jails » dans leur propre .section
142 Mot inconnu : jails => Les actions peuvent être définis globalement dans la section [DEFAULT] ou par « jails » dans leur propre .section
142 Il manque un espace insécable. => Les actions peuvent être définis globalement dans la section [DEFAULT] ou par « jails » dans leur propre .section
142 L’espace se place après le point, et non avant (ou bien sert de liant entre deux lettres). => Les actions peuvent être définis globalement dans la section [DEFAULT] ou par « jails » dans leur propre .section

145 Mot inconnu : DEFAULT => Pour cela vous pouvez définir globalement l'adresse du destinataire dans la section [DEFAULT] du fichier **/etc/fail2ban/jail.d/custom.conf** : 
145 Il manque un espace insécable. => Pour cela vous pouvez définir globalement l'adresse du destinataire dans la section [DEFAULT] du fichier **/etc/fail2ban/jail.d/custom.conf** : 
145 Espace(s) en fin de ligne à supprimer. => Pour cela vous pouvez définir globalement l'adresse du destinataire dans la section [DEFAULT] du fichier **/etc/fail2ban/jail.d/custom.conf** : 

146 Mot inconnu : destemail => <code>destemail = adresse@example.com</code>

147 Mot inconnu : ssmtp => Il faut que le système soit correctement configuré pour l'envoi de courriels, par exemple avec [[ssmtp|ssmtp]].
147 Mot inconnu : ssmtp => Il faut que le système soit correctement configuré pour l'envoi de courriels, par exemple avec [[ssmtp|ssmtp]].

149 Mot inconnu : root => La valeur par défaut est root@localhost dans la section [DEFAULT] de /etc/fail2ban/jail.conf et concerne donc toutes les prisons. Il reste cependant possible de spécifier un //destemail// particulier dans une prison donnée.
149 Mot inconnu : DEFAULT => La valeur par défaut est root@localhost dans la section [DEFAULT] de /etc/fail2ban/jail.conf et concerne donc toutes les prisons. Il reste cependant possible de spécifier un //destemail// particulier dans une prison donnée.
149 Mot inconnu : destemail => La valeur par défaut est root@localhost dans la section [DEFAULT] de /etc/fail2ban/jail.conf et concerne donc toutes les prisons. Il reste cependant possible de spécifier un //destemail// particulier dans une prison donnée.

151 Guillemets typographiques ouvrants. => Pour voir les messages locaux (si vous avez laissé une adresse e-mail du type @localhost), il vous faudra ouvrir un terminal et taper la commande "mail" ou, plus simplement encore, consulter le fichier **/var/mail/votrelogin**.
151 Guillemets typographiques fermants. => Pour voir les messages locaux (si vous avez laissé une adresse e-mail du type @localhost), il vous faudra ouvrir un terminal et taper la commande "mail" ou, plus simplement encore, consulter le fichier **/var/mail/votrelogin**.

153 Mot inconnu : DEFAULT => **Pour activer l'envoi de courriels**, ajoutez la ligne dans la section [DEFAULT] du fichier **/etc/fail2ban/jail.d/custom.conf**

155 Il manque un espace. => <code>action = %(action_mw)s </code>
155 Mot inconnu : action_mw => <code>action = %(action_mw)s </code>

157 Il manque un espace insécable. => ou : (pour envoyer un mail avec le whois ainsi que les logs)
157 Mot inconnu : whois => ou : (pour envoyer un mail avec le whois ainsi que les logs)

159 Il manque un espace. => <code>action = %(action_mwl)s </code>
159 Mot inconnu : action_mwl => <code>action = %(action_mwl)s </code>

161 Mot inconnu : fail2ban => Pensez à redémarrer fail2ban pour que cette modification soit prise en compte

162 Mot inconnu : sudo => <code>sudo systemctl restart fail2ban</code>
162 Mot inconnu : systemctl => <code>sudo systemctl restart fail2ban</code>
162 Mot inconnu : restart => <code>sudo systemctl restart fail2ban</code>
162 Mot inconnu : fail2ban => <code>sudo systemctl restart fail2ban</code>

164 Mot inconnu : Fail2ban => Des informations complémentaires sont disponibles sur le site officiel de Fail2ban : 
164 Il manque un espace insécable. => Des informations complémentaires sont disponibles sur le site officiel de Fail2ban : 
164 Espace(s) en fin de ligne à supprimer. => Des informations complémentaires sont disponibles sur le site officiel de Fail2ban : 

165 Mot inconnu : Fail2ban => [[http://www.fail2ban.org/wiki/index.php/FAQ_french#J.27utilise_Postfix_sur_mon_syst.C3.A8me_mais_je_n.27ai_pas_de_commande_.22mail.22._Comment_recevoir_les_notifications_par_mail.3F|FAQ Fail2ban]]

167 Il manque un espace insécable. => Il existe de nombreuses autres possibilités de configuration des actions : envoi automatiques de courriels au service « //abuse// » concerné, bannissement d'utilisateur, envoi des IP et du motif de bannissement à des service externes comme [[https://www.abuseipdb.com/|AbuseIPDB]], etc.
167 Accord de nombre erroné avec « automatiques ». => Il existe de nombreuses autres possibilités de configuration des actions : envoi automatiques de courriels au service « //abuse// » concerné, bannissement d'utilisateur, envoi des IP et du motif de bannissement à des service externes comme [[https://www.abuseipdb.com/|AbuseIPDB]], etc.
167 Accord de nombre erroné avec « envoi ». => Il existe de nombreuses autres possibilités de configuration des actions : envoi automatiques de courriels au service « //abuse// » concerné, bannissement d'utilisateur, envoi des IP et du motif de bannissement à des service externes comme [[https://www.abuseipdb.com/|AbuseIPDB]], etc.
167 Il manque un espace insécable. => Il existe de nombreuses autres possibilités de configuration des actions : envoi automatiques de courriels au service « //abuse// » concerné, bannissement d'utilisateur, envoi des IP et du motif de bannissement à des service externes comme [[https://www.abuseipdb.com/|AbuseIPDB]], etc.
167 Il manque un espace insécable. => Il existe de nombreuses autres possibilités de configuration des actions : envoi automatiques de courriels au service « //abuse// » concerné, bannissement d'utilisateur, envoi des IP et du motif de bannissement à des service externes comme [[https://www.abuseipdb.com/|AbuseIPDB]], etc.
167 Accord de nombre erroné : « service » devrait être au pluriel. => Il existe de nombreuses autres possibilités de configuration des actions : envoi automatiques de courriels au service « //abuse// » concerné, bannissement d'utilisateur, envoi des IP et du motif de bannissement à des service externes comme [[https://www.abuseipdb.com/|AbuseIPDB]], etc.
167 Mot inconnu : AbuseIPDB => Il existe de nombreuses autres possibilités de configuration des actions : envoi automatiques de courriels au service « //abuse// » concerné, bannissement d'utilisateur, envoi des IP et du motif de bannissement à des service externes comme [[https://www.abuseipdb.com/|AbuseIPDB]], etc.

173 Mot inconnu : failregex => Ces fichiers contiennent une ou plusieurs expressions rationnelles qui servent de motif de recherche pour les lignes correspondantes dans les logs. Les expressions rationnelles sont définies par la directive **failregex**.

175 Il manque un espace insécable. => Exemple dans le fichier /etc/fail2ban/filter.d/sshd.conf :

177 Mot inconnu : failregex => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Il manque un espace. => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : __prefix_line => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Il manque un espace avant la parenthèse. => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : error => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Il manque un espace insécable. => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : PAM => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Il manque un espace insécable. => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Pas d’espace avant ce signe. => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : uthentication => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : failure => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : error => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : failed => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Mot inconnu : from => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>
177 Pas d’espace après ce signe. => <code>failregex = ^%(__prefix_line)s(?:error: PAM: )?[aA]uthentication (?:failure|error|failed) for .* from <HOST>( via \S+)?\s*$</code>

181 Mot inconnu : fail2ban => Vous pouvez ajouter ou modifier des expressions rationnelles dans ces fichiers (attention au risque d'écrasement lors d'une mise à jour). Mais cela exige une bonne maîtrise des expressions rationnelles et de la syntaxe particulière de fail2ban. D'autre part fail2ban a beaucoup évolué et des configurations personnalisées faîtes sur une version risquent de ne plus fonctionner sur la suivante…
181 Mot inconnu : fail2ban => Vous pouvez ajouter ou modifier des expressions rationnelles dans ces fichiers (attention au risque d'écrasement lors d'une mise à jour). Mais cela exige une bonne maîtrise des expressions rationnelles et de la syntaxe particulière de fail2ban. D'autre part fail2ban a beaucoup évolué et des configurations personnalisées faîtes sur une version risquent de ne plus fonctionner sur la suivante…

185 Mot inconnu : fail2ban-regex => Si vous avez créé vos propres filtres, modifié des filtres existants, ou si vous voulez simplement tester un filtre sur un fichier de log particulier, l'outil fail2ban-regex est fait pour vous.\\

187 Mot inconnu : apache-badbots => Par exemple, pour tester le filtre apache-badbots sur le fichier journal d'Apache :
187 Il manque un espace insécable. => Par exemple, pour tester le filtre apache-badbots sur le fichier journal d'Apache :

189 Mot inconnu : fail2ban-regex => <code>fail2ban-regex /var/log/apache2/access.log /etc/fail2ban/filter.d/apache-badbots.conf</code>

192 Sigle. Il est recommandé d’ôter les points pour les sigles. => :-) Il est possible de spécifier une plage d'adresses. Par exemple, x.y.z.0/24 désigne les adresses de x.y.z.0 à x.y.z.255.
192 Sigle. Il est recommandé d’ôter les points pour les sigles. => :-) Il est possible de spécifier une plage d'adresses. Par exemple, x.y.z.0/24 désigne les adresses de x.y.z.0 à x.y.z.255.
192 Sigle. Il est recommandé d’ôter les points pour les sigles. => :-) Il est possible de spécifier une plage d'adresses. Par exemple, x.y.z.0/24 désigne les adresses de x.y.z.0 à x.y.z.255.

193 Mot inconnu : jails => ==== Voir le status des jails ====

194 Mot inconnu : jail => Pour savoir si votre jail est actif, vous devriez le voir affiché, après avoir taper cette commande :
194 Incohérence probable avec “avoir” : “taper” n’est pas un participe passé. => Pour savoir si votre jail est actif, vous devriez le voir affiché, après avoir taper cette commande :
194 Il manque un espace insécable. => Pour savoir si votre jail est actif, vous devriez le voir affiché, après avoir taper cette commande :

195 Mot inconnu : fail2ban-client => <code>fail2ban-client status</code>

196 Mot inconnu : jails => //Cette commande affiche tous les jails que fail2ban traite.//
196 Mot inconnu : fail2ban => //Cette commande affiche tous les jails que fail2ban traite.//

199 Mot inconnu : jails => Pour savoir si une de vos jails de votre fail2ban a bannis une ou plusieurs IP, taper cette commande :
199 Mot inconnu : fail2ban => Pour savoir si une de vos jails de votre fail2ban a bannis une ou plusieurs IP, taper cette commande :
199 Il manque un espace insécable. => Pour savoir si une de vos jails de votre fail2ban a bannis une ou plusieurs IP, taper cette commande :

200 Mot inconnu : fail2ban-client => <code>fail2ban-client status [Nom du jail]</code>
200 Mot inconnu : jail => <code>fail2ban-client status [Nom du jail]</code>

201 Mot inconnu : IPs => //Cette commande va afficher le nombre de tentative lu dans vos logs, le nombre de bannis et, le plus intéressant, les IPs qui sont bannis temporairement.//

203 Mot inconnu : jails => ==== Dé-bannir une IP de l'un de vos jails ====

204 Accord de nombre erroné : « adresse » devrait être au pluriel. => Une de vos adresse IP se retrouve blacklisté suite à une mauvaise manips répété ou un test de sécurité. Vous pouvez le retirer de la liste des IP blacklisté de fail2ban avec cette commande :
204 Accord de nombre erroné avec « une mauvaise » : « manips » devrait être au singulier. => Une de vos adresse IP se retrouve blacklisté suite à une mauvaise manips répété ou un test de sécurité. Vous pouvez le retirer de la liste des IP blacklisté de fail2ban avec cette commande :
204 Mot inconnu : fail2ban => Une de vos adresse IP se retrouve blacklisté suite à une mauvaise manips répété ou un test de sécurité. Vous pouvez le retirer de la liste des IP blacklisté de fail2ban avec cette commande :
204 Il manque un espace insécable. => Une de vos adresse IP se retrouve blacklisté suite à une mauvaise manips répété ou un test de sécurité. Vous pouvez le retirer de la liste des IP blacklisté de fail2ban avec cette commande :

205 Mot inconnu : fail2ban-client => <code>fail2ban-client set [nom du jail] unbanip [IP concerné]</code>
205 Mot inconnu : jail => <code>fail2ban-client set [nom du jail] unbanip [IP concerné]</code>
205 Mot inconnu : unbanip => <code>fail2ban-client set [nom du jail] unbanip [IP concerné]</code>

207 Mot inconnu : jails => ==== Bannir manuellement une IP sur l'un de vos jails ====

208 Espace(s) en fin de ligne à supprimer. => Vous voulez tester plus rapidement l'interdiction d'un accès d'un PC, ou bloquer une personne malveillante. Renseignez son IP dans cette commande : 

209 Mot inconnu : fail2ban-client => <code>fail2ban-client set [nom du jail] banip [IP à bannir]</code>
209 Mot inconnu : jail => <code>fail2ban-client set [nom du jail] banip [IP à bannir]</code>
209 Mot inconnu : banip => <code>fail2ban-client set [nom du jail] banip [IP à bannir]</code>

210 Mot inconnu : iptables => <note important>Une fois la commande validée, votre pare-feu, iptables, va empêcher la machine en question de se connecter. ATTENTION, de ne pas mettre votre propre adresse IP, si vous le faites à distance.</note>

212 Mot inconnu : fail2ban => ===== Alternatives à fail2ban =====

214 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * [[https://yalis.fr/git/yves/pyruse/|Pyruse]] Pyruse est une alternative légère à fail2ban qui utilise systemd-journal
214 Mot inconnu : Pyruse =>   * [[https://yalis.fr/git/yves/pyruse/|Pyruse]] Pyruse est une alternative légère à fail2ban qui utilise systemd-journal
214 Mot inconnu : Pyruse =>   * [[https://yalis.fr/git/yves/pyruse/|Pyruse]] Pyruse est une alternative légère à fail2ban qui utilise systemd-journal
214 Mot inconnu : fail2ban =>   * [[https://yalis.fr/git/yves/pyruse/|Pyruse]] Pyruse est une alternative légère à fail2ban qui utilise systemd-journal
214 Mot inconnu : systemd-journal =>   * [[https://yalis.fr/git/yves/pyruse/|Pyruse]] Pyruse est une alternative légère à fail2ban qui utilise systemd-journal

215 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * [[https://github.com/clearlinux/tallow|Tallow]] Tallow est une alternative légère à fail2ban qui utilise systemd-journal
215 Mot inconnu : Tallow =>   * [[https://github.com/clearlinux/tallow|Tallow]] Tallow est une alternative légère à fail2ban qui utilise systemd-journal
215 Mot inconnu : Tallow =>   * [[https://github.com/clearlinux/tallow|Tallow]] Tallow est une alternative légère à fail2ban qui utilise systemd-journal
215 Mot inconnu : fail2ban =>   * [[https://github.com/clearlinux/tallow|Tallow]] Tallow est une alternative légère à fail2ban qui utilise systemd-journal
215 Mot inconnu : systemd-journal =>   * [[https://github.com/clearlinux/tallow|Tallow]] Tallow est une alternative légère à fail2ban qui utilise systemd-journal

218 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * (en) [[https://github.com/fail2ban/fail2ban|fail2ban sur github (depuis 2011) avec un wiki!]]
218 Mot inconnu : fail2ban =>   * (en) [[https://github.com/fail2ban/fail2ban|fail2ban sur github (depuis 2011) avec un wiki!]]
218 Mot inconnu : github =>   * (en) [[https://github.com/fail2ban/fail2ban|fail2ban sur github (depuis 2011) avec un wiki!]]
218 Il manque un espace insécable. =>   * (en) [[https://github.com/fail2ban/fail2ban|fail2ban sur github (depuis 2011) avec un wiki!]]

219 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * (en) [[http://www.fail2ban.org/wiki/index.php/Main_Page|Le site de fail2ban]]
219 Mot inconnu : fail2ban =>   * (en) [[http://www.fail2ban.org/wiki/index.php/Main_Page|Le site de fail2ban]]

221 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * (fr) [[https://wiki.visionduweb.fr/index.php?title=Installer_et_utiliser_Fail2ban|Wiki non officiel de fail2ban]] (Commandes fail2ban, Exemples fail2ban, ressources complémentaires...)
221 Mot inconnu : fail2ban =>   * (fr) [[https://wiki.visionduweb.fr/index.php?title=Installer_et_utiliser_Fail2ban|Wiki non officiel de fail2ban]] (Commandes fail2ban, Exemples fail2ban, ressources complémentaires...)
221 Mot inconnu : fail2ban =>   * (fr) [[https://wiki.visionduweb.fr/index.php?title=Installer_et_utiliser_Fail2ban|Wiki non officiel de fail2ban]] (Commandes fail2ban, Exemples fail2ban, ressources complémentaires...)
221 Mot inconnu : fail2ban =>   * (fr) [[https://wiki.visionduweb.fr/index.php?title=Installer_et_utiliser_Fail2ban|Wiki non officiel de fail2ban]] (Commandes fail2ban, Exemples fail2ban, ressources complémentaires...)
221 Typographie : points de suspension. Utilisez le caractère dédié. =>   * (fr) [[https://wiki.visionduweb.fr/index.php?title=Installer_et_utiliser_Fail2ban|Wiki non officiel de fail2ban]] (Commandes fail2ban, Exemples fail2ban, ressources complémentaires...)

224 Il manque un espace. => --- //[[:utilisateurs:bruno|bruno]] Le 15/03/2018, 10:24//
224 Mot inconnu : bruno => --- //[[:utilisateurs:bruno|bruno]] Le 15/03/2018, 10:24//
224 Mot inconnu : bruno => --- //[[:utilisateurs:bruno|bruno]] Le 15/03/2018, 10:24//

225 Il manque un espace. => --- //[[:utilisateurs:Zer00CooL|Zer00CooL]] Le 25/03/2020, 15:45//
225 Mot inconnu : Zer00CooL => --- //[[:utilisateurs:Zer00CooL|Zer00CooL]] Le 25/03/2020, 15:45//
225 Mot inconnu : Zer00CooL => --- //[[:utilisateurs:Zer00CooL|Zer00CooL]] Le 25/03/2020, 15:45//

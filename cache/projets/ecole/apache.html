<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>projets:ecole:apache [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="projets,ecole,apache"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/projets/ecole/apache?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns=projets:ecole"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/projets/ecole/apache"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/projets/ecole/apache"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/projets/ecole/apache"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='projets:ecole';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"projets:ecole:apache","namespace":"projets:ecole","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="projets:ecole:apache">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/projets/ecole/apache?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/projets/ecole/apache?do=media&amp;ns=projets%3Aecole"  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/projets/ecole/apache?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/projets/ecole/apache?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Afficher le texte source [V]">Modifier cette page</a></li><li><a href="/projets/ecole/apache?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/projets/ecole/apache?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/projets/ecole/apache?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">projets:ecole:apache</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/projets/ecole/apache?do=edit"  class="action text-muted source" accesskey="v" rel="nofollow" title="Afficher le texte source [V]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/projets/ecole/apache?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/projets/ecole/apache?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#introductionhttp","title":"Introduction : HTTP","level":1},{"link":"#qu_est-ce_que_le_web","title":"Qu'est-ce que le Web ?","level":2},{"link":"#http_et_navigation","title":"HTTP et Navigation","level":2},{"link":"#apache","title":"Apache","level":1},{"link":"#histoire1","title":"Histoire","level":2},{"link":"#installation","title":"Installation","level":2},{"link":"#configuration","title":"Configuration","level":2},{"link":"#bonusmod_php","title":"Bonus : mod_php","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#introductionhttp">Introduction : HTTP</a>
<ul class="nav toc">
<li class="level2"><a href="#qu_est-ce_que_le_web">Qu&#039;est-ce que le Web ?</a></li>
<li class="level2"><a href="#http_et_navigation">HTTP et Navigation</a></li>
</ul>
</li>
<li class="level1"><a href="#apache">Apache</a>
<ul class="nav toc">
<li class="level2"><a href="#histoire1">Histoire</a></li>
<li class="level2"><a href="#installation">Installation</a></li>
<li class="level2"><a href="#configuration">Configuration</a></li>
</ul>
</li>
<li class="level1"><a href="#bonusmod_php">Bonus : mod_php</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content">
<p>
Transcription du cours de <a href="http://blog.skateinmars.net" class="urlextern" title="http://blog.skateinmars.net" rel="nofollow">skateinmars</a> pour <a href="http://u-classroom.net" class="urlextern" title="http://u-classroom.net" rel="nofollow">u-classroom</a>.
</p>

<h2 class="sectionedit1 page-header" id="introductionhttp">Introduction : HTTP</h2>
<div class="level2">

</div>

<h3 class="sectionedit2" id="qu_est-ce_que_le_web">Qu&#039;est-ce que le Web ?</h3>
<div class="level3">

<p>
Le Web est (de manière simple) un réseau composé de l&#039;ensemble des sites Internet disponibles publiquement, reliés entre eux par des hyperliens. Un site Internet (ou site Web) est quand à lui un ensemble de pages Web, liées entre elles.
</p>

<p>
Un site web a une adresse, comme celle du site Ubuntu-fr : <a href="http://ubuntu-fr.org" class="urlextern" title="http://ubuntu-fr.org" rel="nofollow">http://ubuntu-fr.org</a>. La page Web principale de ce site propose des liens hypertextes vers d&#039;autres pages et d&#039;autres sites, par exemple : <a href="http://ubuntu-fr.org/telechargement" class="urlextern" title="http://ubuntu-fr.org/telechargement" rel="nofollow">http://ubuntu-fr.org/telechargement</a>.
</p>

<p>
Attention à ne pas faire d&#039;amalgame entre Web et Internet. Le salon <abbr title="Internet Relay Chat">IRC</abbr> sur lequel s&#039;est déroulée cette séance utilise Internet, pas le Web.
</p>

</div>

<h3 class="sectionedit3" id="http_et_navigation">HTTP et Navigation</h3>
<div class="level3">

<p>
Pour accéder à un site web, il vous faut utiliser un client Web, appelé communément Navigateur, par exemple : firefox, lynx, opera, konqueror, w3m…
</p>

</div>

<h4 id="telnet">Telnet</h4>
<div class="level4">

<p>
C&#039;est la qu&#039;intervient le protocole HTTP. Voyez par exemple le site suivant <a href="http://test.skateinmars.net/" class="urlextern" title="http://test.skateinmars.net/" rel="nofollow">http://test.skateinmars.net/</a>. Visitez le avec votre navigateur et vous verrez une page toute simple qui s&#039;affiche. Comment votre navigateur peut-il afficher cette page ? Il l&#039;a en fait demandée au serveur qui s&#039;occupe de ce site.
</p>

<p>
Faisons la même chose à la main. Ouvrez une console et saisissez (après avoir installé le paquet <code>telnet</code> si nécessaire) :
</p>
<pre class="code">telnet test.skateinmars.net 80</pre>

<p>
Vous verrez s&#039;afficher : 
</p>
<pre class="code">Trying 82.228.105.196...
Connected to skateinmars.net.</pre>

<p>
Vous êtes donc connecté au serveur identifié par le nom <code>skateinmars.net</code> et l&#039;adresse IP 82.228.105.196. Le serveur attend une action de votre part. Saisissez : 
</p>
<pre class="code">GET / HTTP/1.1
Host: test.skateinmars.net</pre>

<p>
Puis 2 fois &lt;entrée&gt;
Vous voyez alors s&#039;afficher du texte <abbr title="HyperText Markup Language">HTML</abbr>. C&#039;est la même page que le navigateur vous a affiché précédemment. La connexion est coupée après l&#039;affichage du texte.
</p>

<p>
Ce texte que vous pouvez voir, c&#039;est le même que vous avez vu dans votre navigateur tout à l&#039;heure : c&#039;est une page Web. Vérifiez dans votre navigateur en regardant la source de la page : bouton droit de la souris, &quot;Code source de la page&quot; sous Firefox.
</p>

<p>
Vous venez donc d&#039;utiliser le protocole HTTP. HTTP est un protocole de communication. C&#039;est à dire une spécification qui définit comment 2 machines doivent dialoguer entre elles. HTTP est le protocole choisi pour le Web. Il y a en d&#039;autres pour d&#039;autres usages, <abbr title="File Transfer Protocol">FTP</abbr> par exemple. Vous pouvez d&#039;ailleurs reconnaître le protocole dans l&#039;adresse d&#039;une page web : <strong>http:</strong>
</p>

</div>

<h4 id="histoire">Histoire</h4>
<div class="level4">

<p>
HTTP veut dire Hypertext Transfer Procotol, soit « protocole de transfert hypertexte ». Hypertexte, en raison des liens hypertextes qui pointent vers les ressources accessibles par HTTP. On utilise donc HTTP à chaque fois que l&#039;on visite une page Web.
</p>

<p>
HTTP est apparu dans les années 89/90, sur une proposition de Tim Berners-Lee, aujourd&#039;hui président du <a href="http://w3.org" class="urlextern" title="http://w3.org" rel="nofollow">W3C</a>, l&#039;organisme qui produit des recommandations qui servent de standards pour le Web (XML, <abbr title="HyperText Markup Language">HTML</abbr>, <abbr title="Cascading Style Sheets">CSS</abbr> entre autres). Comme pour de nombreux protocoles, il en existe plusieurs versions. La première version est appelée HTTP/0.9, et la version 1.0 est devenue un standard IETF en mars 1996. Elle est definie dans la <abbr title="Request for Comments">RFC</abbr> 1945. La norme actuelle est HTTP/1.1 et elle est décrite dans les <abbr title="Request for Comments">RFC</abbr>  <a href="http://tools.ietf.org/html/rfc2616" class="urlextern" title="http://tools.ietf.org/html/rfc2616" rel="nofollow">2616</a> et <a href="http://tools.ietf.org/html/rfc2068" class="urlextern" title="http://tools.ietf.org/html/rfc2068" rel="nofollow">2068</a>.
</p>

</div>

<h4 id="le_protocole">Le protocole</h4>
<div class="level4">

<p>
Comme vous avez pu le remarquer lors de l&#039;utilisation de telnet, HTTP utilise par défaut le port 80. Votre navigateur le sait et c&#039;est pour cela que vous n&#039;avez pas à taper <a href="http://www.google.fr:80/" class="urlextern" title="http://www.google.fr:80/" rel="nofollow">http://www.google.fr:80/</a> (vous pouvez néanmoins essayer, ca marche).
</p>

<p>
Quand on utilise HTTP, il faut définir deux choses essentielles : la ressource sur laquelle on agit, représentée par l&#039;url, &quot;/bob&quot; par exemple, puis la méthode à utiliser.
</p>

<p>
Il y a plusieurs méthodes disponibles, la plus utilisée étant <code>GET</code>. C&#039;est celle que les navigateurs utilisent pas défaut quand vous cliquez sur un lien ou tapez l&#039;adresse d&#039;un site à consulter. Une autre méthode, très utilisée, et la méthode <code>POST</code>. Elle est souvent utilisée avec des formulaire, pour envoyer un message sur un forum par exemple. Ceux qui ont deja touché à PHP ou au développement web connaissent ces deux méthodes, il y en a d&#039;autres mais elles sont beaucoup moins courantes : <code>HEAD</code>, <code>PUT</code>, <code>DELETE</code>, etc.
</p>

<p>
Reprenons telnet : 
</p>
<pre class="code">telnet test.skateinmars.net 80
GET /test/test.txt HTTP/1.0
Host: test.skateinmars.net

Connection: close</pre>

<p>
Vous obtenez la ressource test/test.txt, qui est un simple fichier texte, après avoir utilisé la méthode GET. Vous avez également utilisé HTTP en version 1.0.
</p>

<p>
Recommencez maintenant ces étapes mais en terminant par : 
</p>
<pre class="code">Connection: keep-alive</pre>

<p>
Vous pouvez voir que telnet reste connecté au serveur et vous pouvez ainsi envoyer une autre requete.
</p>

<p>
Analysons un peu plus ce que l&#039;on vient de faire :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> sur la première ligne, on choisit la méthode à utiliser (GET), l&#039;adresse de la ressource (/test/test.txt), et la version de HTTP à utiliser</div>
</li>
<li class="level1"><div class="li"> sur la deuxième ligne on choisit l&#039;hôte à contacter. C&#039;est obligatoire dans la norme HTTP supérieure à 0.9, et très utile pour un serveur qui hébergerait plusieurs sites sur la même IP</div>
</li>
<li class="level1"><div class="li"> sur la troisième ligne on a défini une option supplémentaire que l&#039;on avait ignoré la première fois. L&#039;option <code>Connection</code> permet de spécifier si l&#039;on veut rester connecté au serveur après avoir recu la ressource ou si l&#039;on souhaite se déconnecter (on peut voir la différence avec <code>keep-alive</code>). Il y a bien d&#039;autre options disponibles, chacune étant un &quot;en-tête&quot;.</div>
</li>
</ul>

<p>
Regardons maintenant les quelques lignes renvoyées par notre action :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>HTTP/1.1 200 OK</strong></div>
</li>
</ul>

<p>
Ici on peut voir le protocole utilisé, et le code de retour. Le code de retour est très important, il nous permet de savoir si la requête a reussi ou non. Ici le code est 200, soit OK. Le code 200, vous le recevez à peu prêt tout le temps, il signifie que la requête a réussi. Bien sur vous ne le voyez pas dans votre navigateur puisque celui-ci affiche la ressource reçue (ce qui vous interresse plus d&#039;habitude que de savoir simplement si elle a été recue !). Si vous êtes curieux vous pouvez essayer un telnet sur une ressource non existante, et vous verrez le code 404 bien connu qui signifie que la ressource n&#039;existe pas. Les codes d&#039;erreur en 2XX sont des codes de réussite, en 3XX ce sont des redirections, en 4XX des erreurs de requête et en 5XX des erreurs du serveur. Une liste de tous les codes est bien sûr disponible dans la <abbr title="Request for Comments">RFC</abbr>.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>Server: Apache/2.2.3 (Debian) DAV/2 SVN/1.4.2 mod_python/3.2.10 Python/2.4.4 PHP/5.2.0-8+etch7 proxy_html/2.5 mod_ssl/2.2.3 OpenSSL/0.9.8c</strong></div>
</li>
</ul>

<p>
C&#039;est simplement le nom et les informations sur le serveur qui vous a répondu. Ici Apache version 2.2.3. On peut configurer son serveur pour cacher ces options et éviter les crackers qui recherchent une version précise d&#039;apache vulnérable à certaines failles (notez qu&#039;il vaut mieux corriger la faille dans ce cas ;).
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>Last-Modified</strong></div>
</li>
</ul>

<p>
C&#039;est la date à laquelle la ressource a été modifiée pour la dernière fois.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>ETag</strong></div>
</li>
</ul>

<p>
Etag représente un identifiant du fichier. Ces deux options permettent au navigateur de les comparer avec les fichiers qu&#039;il a dans son cache pour ne pas retélécharger inutilement un fichier qu&#039;il a déjà demandé auparavant.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>Content-Length</strong></div>
</li>
</ul>

<p>
Content-Length définit la taille du contenu que le serveur vous envoie, et
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>Content-Type</strong></div>
</li>
</ul>

<p>
C&#039;est le type MIME du contenu (texte, image, etc.).
</p>

<p>
Notez qu&#039;il est inutile de se servir de ETag et Last-Modified si l&#039;on télécharge tout de même la ressource ; on peut donc utiliser <code>HEAD</code> au lieu de <code>GET</code> pour demander ce genre d&#039;informations.
</p>

</div>

<h2 class="sectionedit4 page-header" id="apache">Apache</h2>
<div class="level2">

</div>

<h3 class="sectionedit5" id="histoire1">Histoire</h3>
<div class="level3">

<p>
Apache a été concu en 1995 a partir d&#039;une série de patchs sur le serveur NCSA HTTPd, un des premiers serveurs existants, d&#039;ou son nom : &quot;A patchy server&quot; (qui ressemble a la prononciation d&#039;Apache en anglais).  C&#039;est un logiciel libre, distribué sous la licence Apache, version 2.0. La version courante est la 2.2.6, et 1.3.39 pour la branche &quot;legacy&quot; 1.X qui est parfois préférée pour éviter de migrer d&#039;une branche à l&#039;autre. Nous allons utiliser la version 2.X, n&#039;ayant pas de contraintes à ce niveau.
</p>

</div>

<h3 class="sectionedit6" id="installation">Installation</h3>
<div class="level3">

<p>
Ouvrez une console et installez apache avec la commande suivante :
</p>
<pre class="code">sudo apt-get install apache2 apache2-mpm-prefork</pre>

<p>
Vous pouvez donc voir une fois cela terminé qu&#039;apache a été démarré :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Starting web server (apache2)…</div>
</li>
</ul>

<p>
Vérifions son bon fonctionnement, en ouvrant votre navigateur et vous rendant sur <a href="http://localhost/" class="urlextern" title="http://localhost/" rel="nofollow">http://localhost/</a>. Vous verrez une page vous informant que le serveur marche correctement :)
</p>

<p>
le message suivant apparaît : It works!
</p>

</div>

<h3 class="sectionedit7" id="configuration">Configuration</h3>
<div class="level3">

<p>
Maintenant que le serveur est installé et fonctionne correctement, nous allons voir les bases à connaître de sa configuration.
</p>

</div>

<h4 id="etcapache2">/etc/apache2</h4>
<div class="level4">

<p>
Rendez-vous dans le répertoire /etc/apache2/, et regardez les fichiers le composant :
</p>
<pre class="code">.conf  conf.d  envvars  httpd.conf  mods-available  mods-enabled  ports.conf  sites-available  sites-enabled</pre>

<p>
La plupart de ces fichiers sont plus ou moins spécifiques à debian/ubuntu et nous permettent de séparer la configuration en plusieurs parties.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>httpd.conf</code> est le fichier utilisé par apache1, il est conservé vide dans apache2 pour assurer la rétrocompatibilité. Il ne nous servira pas ;</div>
</li>
<li class="level1"><div class="li"> <code>envvars</code> est utilisé pour définir des variables d&#039;environnement propres à apache ;</div>
</li>
<li class="level1"><div class="li"> <code>ports.conf</code> est plus interressant. Regardez son contenu :</div>
</li>
</ul>
<pre class="code">Listen 80</pre>

<p>
Cette option de configuration (appelée directive) demande à apache d&#039;écouter sur le port 80. Si vous utilisez <abbr title="Hypertext Transfert Protocol Secured">HTTPS</abbr> vous aurez à y spécifier le port 443. Bien sûr on peut utiliser n&#039;importe quel port mais restons dans les standards.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>apache2.conf</code> est le fichier principal de configuration ;</div>
</li>
<li class="level1"><div class="li"> <code>conf.d</code> est un répertoire qui contient plusieurs petits fichiers qui seront analysés par apache. Le seul fichier pour le moment est <code>charset</code>, qui spécifie l&#039;encodage à utiliser par défaut ;</div>
</li>
<li class="level1"><div class="li"> <code>mods-available</code> contient la liste des modules d&#039;apache installés ;</div>
</li>
<li class="level1"><div class="li"> <code>mods-enabled</code> celle des modules utilisés ;</div>
</li>
<li class="level1"><div class="li"> <code>sites-available</code> contient la liste des vhosts installés ;</div>
</li>
<li class="level1"><div class="li"> <code>sites-enabled</code> celle des vhosts utilisés.</div>
</li>
</ul>

</div>

<h4 id="apache2conf">apache2.conf</h4>
<div class="level4">

<p>
Ce fichier est par défaut allègrement commenté. Un commentaire commence par # (le texte qui suit est ignoré par apache). Voyons un peu les premières options :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>ServerRoot &quot;/etc/apache2&quot;</code> : définit le dossier de base qui contient la configuration d&#039;apache. A ne pas toucher donc ;</div>
</li>
<li class="level1"><div class="li"> <code>Timeout</code> : nombre de secondes maximum au bout duquel une connection au serveur est interrompue ;</div>
</li>
<li class="level1"><div class="li"> <code>KeepAlive</code> : on a vu son utilité tout à l&#039;heure, vous pouvez ici le désactiver. Il y a également d&#039;autres options pour KeepAlive pour l&#039;affiner ;</div>
</li>
<li class="level1"><div class="li"> <code>User</code> et <code>Group</code> déterminent l&#039;utilisateur avec lequel seront exécutés les processus d&#039;apache ;</div>
</li>
</ul>

</div>

<h4 id="sites-available">sites-available</h4>
<div class="level4">

<p>
Ce répertoire contient les différents vhosts que vous utiliserez. Les vhosts (Virtual Hosts) vous permettent de définir plusieurs sites différents sur une même machine, le plus souvent des sous-domaines (www.chose.fr, machin.chose.fr, etc.). Éditez le seul vhost existant pour le moment : <code>default</code> (en root).
</p>

<p>
<code>NameVirtualHost</code> définit les IPs à utiliser par apache, ici * signifie qu&#039;on utilise n&#039;importe quel IP pour acceder au serveur : 127.0.0.1 (ip locale), 192.168.x.x (ip du reseau local), ou une IP externe. Cette directive est en dehors du Vhost, on pourrait donc la déplacer dans apache2.conf. Dans tous les cas elle ne doit pas être reprise dans les autres vhosts si elle est déjà définie à *
</p>

<p>
Ensuite vient le vhost proprement dit : il est compris dans un bloc &lt;VirtualHost&gt;, un peu à la manière d&#039;une balise XML. Ces blocs définissent la &quot;portée&quot; de la validité des directives qui y sont définies. Le * derrière VirtualHost définit ici également que le vhost est valable pour toutes les IPs sur lesquelles apache écoute.
</p>

<p>
La directive <code>ServerAdmin</code> vous permet de spécifier un email à utiliser en cas de problème, sur une page d&#039;erreur 404 par exemple.
</p>

<p>
Il manque une directive importante que l&#039;on va ajouter :
</p>
<pre class="code">ServerName machin</pre>

<p>
Remplacez machin par le nom que vous souhaitez utiliser pour le vhost. Si vous possedez un compte dyndns ou d&#039;un service du genre vous pouvez l&#039;utiliser, sinon mettez ce qui vous passe par la tête, comme truc.com.
</p>

<p>
<code>DocumentRoot</code> définit le dossier dans lequel seront stockés les fichiers du site.
</p>

<p>
Les sous-blocs suivants définissent des options spécifiques au dossier du site. <code>Options FollowSymLinks</code> par exemple demande à apache de suivre les liens symboliques si necessaire.
</p>

<p>
<code>AllowOverride</code> permet de définir si l&#039;on peut changer certaines options en utilisant des fichiers .htaccess dans le répertoire du site.
</p>

<p>
<code>Indexes</code> permet d&#039;autoriser le listage de fichiers d&#039;un répertoire qui ne contient pas d&#039;index.
</p>

<p>
<code>Alias</code> permet de définir un répertoire précis pour certaines requêtes. Ici <code>/doc</code> correspondra au dossier <code>/usr/share/doc/</code>, mais selon la directive <code>Allow</code>, seul les IPs locales y ont accès.
</p>

<p>
Enregistrons les changements et fermons le fichier.
</p>

<p>
Il faut maintenant que le vhost soit actif. Pour activer un vhost il faut créer un lien symbolique du fichier vhost vers le dossier sites-enabled/, mais une commande est là pour nous aider dans cette tâche.
</p>

<p>
(Tout d&#039;abord faites un <code>sudo rm sites-enabled/000-default</code>, c&#039;est une configuration d&#039;origine d&#039;apache plus génante qu&#039;autre chose.)
</p>

<p>
Utilisez donc
</p>
<pre class="code">sudo a2ensite nomduvhost</pre>

<p>
Notez que <code>a2dissite</code> va logiquement réaliser le contraire. Cette méthode du lien symbolique permet de réaliser rapidement des changements dans la configuration d&#039;apache.
</p>

<p>
Comme vous l&#039;indique le résultat de la commande, vous devez recharger la configuration d&#039;apache avec un
</p>
<pre class="code">sudo /etc/init.d/apache2 reload</pre>

<p>
Vous devrez recharger apache à chaque changement de configuration. Notez aussi l&#039;option force-reload du script. Après cela votre vhost est actif. Reste encore une modif à faire : ouvrez le fichier /etc/hosts, et entrez une nouvelle ligne :
</p>
<pre class="code">127.0.0.1 nomduvhost</pre>

<p>
Avec nomduvhost le ServerName que vous avez choisi. Cela permettra à votre système de faire la correspondance entre le nom de l&#039;host et votre machine locale.
</p>

<p>
Testez maintenant votre vhost ! Ouvrez votre navigateur (ou telnet) et entrez votre ServerName dans la barre d&#039;adresse. Ca devrait marcher :)
</p>

<p>
Notez que sous debian/ubuntu 2 les pages a utiliser comme index sous spéficiées dans le module dir (<code>mods-available/dir.conf</code>).
</p>

</div>

<h2 class="sectionedit8 page-header" id="bonusmod_php">Bonus : mod_php</h2>
<div class="level2">

<p>
On a donc maintenant un apache fonctionnel, mais on va terminer avec un petit bonus et installer mod_php pour rapidement aborder les modules. Les modules sont des extensions d&#039;apache qui ajoutent des fonctionnalités diverses, du support d&#039;un langage aux réécritures d&#039;urls. On va ainsi installer mod_php5 qui ajoutera comme son nom l&#039;indique le support de php5 directement dans apache. Installez le paquet <code>libapache2-mod-php5</code>, attendez le redemarrage d&#039;apache, et voila !
</p>

<p>
On va vérifier que cela marche. Regardez le dossier <code>mods-enabled</code>, vous pourrez y voir les fichiers <code>php5.conf</code> et <code>php5.load</code>. Là aussi, il s&#039;agit de liens symboliques vers <code>mods-available</code> comme pour les vhosts, et vous devinerez l&#039;utilité des commandes <code>a2enmod</code> et <code>a2dismod</code>.
</p>

<p>
Créez ensuite le fichier /var/www/test.php, et écrivez-y le contenu suivant :
</p>
<pre class="code">&lt;?php phpinfo(); ?&gt;</pre>

<p>
Ouvrez ensuite cette page dans votre navigateur (<a href="http://servername/test.php" class="urlextern" title="http://servername/test.php" rel="nofollow">http://servername/test.php</a>), vous y verrez la page interprétée (la fonction phpinfo affiche une page html d&#039;informations sur votre installation de php).
</p>

</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="projets/ecole/apache.txt">projets/ecole/apache.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 30/09/2009, 17:18">Le 30/09/2009, 17:18</span></li><li class="text-muted">par 213.95.41.13</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=projets%3Aecole%3Aapache&amp;1635530384" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

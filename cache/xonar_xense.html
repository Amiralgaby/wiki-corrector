<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>xonar_xense [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="trusty,materiel,audio,asus"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/xonar_xense?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/xonar_xense?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/xonar_xense"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/xonar_xense"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/xonar_xense"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"xonar_xense","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="xonar_xense">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/xonar_xense?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/xonar_xense?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/xonar_xense?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/xonar_xense?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/xonar_xense?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/xonar_xense?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/xonar_xense?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">xonar_xense</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/xonar_xense?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/xonar_xense?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/xonar_xense?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#specifications_techniques","title":"Sp\u00e9cifications techniques","level":1},{"link":"#support_de_la_carte_son_sous_le_noyau_linux","title":"Support de la carte son sous le noyau Linux","level":1},{"link":"#paquet_pret_a_l_emploi_depend_de_dkms","title":"Paquet pr\u00eat \u00e0 l'emploi (d\u00e9pend de DKMS)","level":1},{"link":"#code_source","title":"Code source","level":1},{"link":"#limitations_et_bugs","title":"Limitations et bugs","level":1},{"link":"#liens","title":"Liens","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#specifications_techniques">Spécifications techniques</a></li>
<li class="level1"><a href="#support_de_la_carte_son_sous_le_noyau_linux">Support de la carte son sous le noyau Linux</a></li>
<li class="level1"><a href="#paquet_pret_a_l_emploi_depend_de_dkms">Paquet prêt à l&#039;emploi (dépend de DKMS)</a></li>
<li class="level1"><a href="#code_source">Code source</a></li>
<li class="level1"><a href="#limitations_et_bugs">Limitations et bugs</a></li>
<li class="level1"><a href="#liens">Liens</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Selon les <a href="/tags">tags</a> présents sur cette page, les informations qu'elle contient  n'ont pas été vérifiées pour les dernières versions LTS depuis <a href="/trusty">Ubuntu 14.04 LTS.</a><br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/trusty" class="wikilink1" title="trusty" rel="tag">Trusty</a>,
	<a href="/materiel" class="wikilink1" title="materiel" rel="tag">matériel</a>,
	<a href="/audio" class="wikilink1" title="audio" rel="tag">audio</a>,
	<a href="/asus" class="wikilink1" title="asus" rel="tag">asus</a>
</span></div>

<h1 class="sectionedit1 page-header" id="carte_sonxonar_xense">Carte son : Xonar Xense</h1>
<div class="level1">

<p>
La carte son d&#039;Asus, <a href="http://www.ldlc.com/fiche/PB00107269.html" class="urlextern" title="http://www.ldlc.com/fiche/PB00107269.html" rel="nofollow">Xonar Xense</a>, propose un équipement parfait pour tout audiophile polyvalent, amateur de musique en format sans perte ou qualité studio, comme cinéphile ou gamer, celle ci répond à toutes les attentes, néanmoins, son support a beaucoup tardé sous Linux, celle ci proposant un bundle carte son +  Micro Casque <a href="http://www.lesnumeriques.com/casque-audio/sennheiser-pc-350-p5987/test.html" class="urlextern" title="http://www.lesnumeriques.com/casque-audio/sennheiser-pc-350-p5987/test.html" rel="nofollow">Sennheiser PC 350</a> pour un prix se situant entre 200€ et 250€ selon les boutiques, ce qui n&#039;est guère facilement accessible aux développeurs d&#039;Alsa, le casque pouvant en plus faire double emploi pour ceux ci.
</p>

<p>
<a href="/lib/exe/fetch.php?tok=fd4641&amp;media=http%3A%2F%2Fpix.toile-libre.org%2Fupload%2Foriginal%2F1379109323.jpg" class="media" title="http://pix.toile-libre.org/upload/original/1379109323.jpg"><img src="/lib/exe/fetch.php?w=440&amp;tok=510671&amp;media=http%3A%2F%2Fpix.toile-libre.org%2Fupload%2Foriginal%2F1379109323.jpg" class="media img-responsive" title="1379109323.jpg" alt="1379109323.jpg" width="440" /></a>                                 <a href="/lib/exe/fetch.php?tok=541b2e&amp;media=http%3A%2F%2Fpix.toile-libre.org%2Fupload%2Foriginal%2F1379109344.jpg" class="media" title="http://pix.toile-libre.org/upload/original/1379109344.jpg"><img src="/lib/exe/fetch.php?w=440&amp;tok=bffcbe&amp;media=http%3A%2F%2Fpix.toile-libre.org%2Fupload%2Foriginal%2F1379109344.jpg" class="media img-responsive" title="1379109344.jpg" alt="1379109344.jpg" width="440" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/xonar_xense"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1496431233" /><input type="hidden" name="summary" value="[Carte son : Xonar Xense] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="carte_sonxonar_xense" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="37-915" /><button type="submit" title="Carte son : Xonar Xense" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="specifications_techniques">Spécifications techniques</h2>
<div class="level2">

<p>
<strong>Chip / DSP</strong> : ASUS AV100
</p>

<p>
<strong>Bus</strong>	: PCI Express 1x
</p>

<p>
<strong>Nombre de canaux audio</strong> : 7,1
</p>

<p>
<strong>Convertisseur N/A</strong> : 24 bits / 192 kHz
</p>

<p>
<strong>Convertisseur A/N</strong> : 24 bits / 192 kHz
</p>

<p>
<strong>Fréquence des tests</strong> : 44.1 kHz (min.) - 192 kHz (maximum)
</p>

<p>
<strong>Rapport signal / bruit</strong> : 118 dB / 64 - 300 ohms
</p>

<p>
<strong>Bande passante en réponse</strong> : 10 - 46000 Hz
</p>

<p>
<strong>Normes audio supportées</strong> : ASIO2,  EAX 2.0, EAX 1.0, OpenAL, Dolby Digital Live, DirectSound3D GX 2.5, DirectSound3D GX 1.0, High Definition Audio, DirectSound3D GX 2.0
</p>

<p>
<strong>Caractéristiques</strong> : Décodeur Dolby Pro Logic II intégré, technologie casque Dolby, technologie Dolby Virtual Speaker, Smart Volume Normalizer, FlexBass, Xear 3D Virtual Speaker Shifter
</p>

<p>
<strong>Entrées externes</strong> : Line IN / Micro (Jack 6.35mm)
</p>

<p>
<strong>Sorties externes</strong> : Sortie 7.1 (câble splitter <abbr title="Digital Video Interface">DVI</abbr> vers multi Jack 3.5mm), Casque (Jack 6.35mm), Audio numérique S/PDIF Coaxiale
</p>

<p>
<strong>Entrées et sorties internes</strong> : Auxiliaire (pour boitier PC)
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/xonar_xense"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1496431233" /><input type="hidden" name="summary" value="[Spécifications techniques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="specifications_techniques" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="916-1919" /><button type="submit" title="Spécifications techniques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="support_de_la_carte_son_sous_le_noyau_linux">Support de la carte son sous le noyau Linux</h2>
<div class="level2">
<div class="notetip">Depuis la sortie du Noyau Linux 3.18 fin 2014, le support de la carte son Asus Xonar Xense via ces pilotes à été intégré au noyau et ne nécessite plus aucune manipulation, par contre comme ici, le support se limite au stéréo pour l&#039;instant, jusqu&#039;à ce que quelqu&#039;un contribue a améliorer le support de la carte
</div>
<p>
J&#039;ai tenté à plusieurs reprises de contacter Asus à ce sujet, sans succès, la hotline se contentant de répondre à côté de la plaque, en évoquant à la limite, le support de MacOS pour la carte, mais ne mentionnant rien du tout pour le noyau Linux.
De même j&#039;ai fait chou blanc en tentant de rentrer en contact avec les développeurs d&#039;Alsa et ai appris via un forum que le mainteneur principal du module &quot;oxygen&quot; prenant en charge les cartes d&#039;ASUS, n&#039;avait pas le temps de s&#039;en occuper.
C&#039;est là qu&#039;en juillet 2013, ô surprise, je suis tombé un peu par hasard, sur une contribution incomplète sur mailing list du projet ALSA, du développeur Ian Dawes , que j&#039;ai finit par contacter par mail, malgré mon anglais plus que douteux, et auprès duquel je me suis manifesté pour effectuer les divers tests de ses patchs.
Le support préliminaire ne prenait en charge que la sortie 7.1 en stéréo, mais pas la sortie audio Jack 6.35mm proposée sur la carte, enfin en mi Aout 2013; ce dernier a apporté des modifications significatives à son patch, assez pour pouvoir être qualifié d&#039;utilisable sans problèmes.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/xonar_xense"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1496431233" /><input type="hidden" name="summary" value="[Support de la carte son sous le noyau Linux] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="support_de_la_carte_son_sous_le_noyau_linux" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1920-3444" /><button type="submit" title="Support de la carte son sous le noyau Linux" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="paquet_pret_a_l_emploi_depend_de_dkms">Paquet prêt à l&#039;emploi (dépend de DKMS)</h2>
<div class="level2">

<p>
Un paquet recompilant automatiquement le module à chaque mise à jour du noyau linux, est <a href="http://vavar60.online.fr/share/oxygen-xense-dkms_0.1~git.b044dfe_all.deb" class="urlextern" title="http://vavar60.online.fr/share/oxygen-xense-dkms_0.1~git.b044dfe_all.deb" rel="nofollow">disponible au téléchargement</a>.
</p>

<p>
Installez le, puis redémarrez votre système.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/xonar_xense"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1496431233" /><input type="hidden" name="summary" value="[Paquet prêt à l&#039;emploi (dépend de DKMS)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="paquet_pret_a_l_emploi_depend_de_dkms" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="3445-3749" /><button type="submit" title="Paquet prêt à l&#039;emploi (dépend de DKMS)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="code_source">Code source</h2>
<div class="level2">
<pre class="code"> Signed-off-by: Ian Dawes &lt;madeallup.gen@gmail.com&gt;

diff --git a/sound/pci/oxygen/virtuoso.c b/sound/pci/oxygen/virtuoso.c
index 64b9fda..df99ec9 100644
--- a/sound/pci/oxygen/virtuoso.c
+++ b/sound/pci/oxygen/virtuoso.c
@@ -52,6 +52,7 @@ static DEFINE_PCI_DEVICE_TABLE(xonar_ids) = {
     { OXYGEN_PCI_SUBID(0x1043, 0x835d) },
     { OXYGEN_PCI_SUBID(0x1043, 0x835e) },
     { OXYGEN_PCI_SUBID(0x1043, 0x838e) },
+    { OXYGEN_PCI_SUBID(0x1043, 0x8428) },
     { OXYGEN_PCI_SUBID(0x1043, 0x8522) },
     { OXYGEN_PCI_SUBID_BROKEN_EEPROM },
     { }
diff --git a/sound/pci/oxygen/xonar_pcm179x.c
b/sound/pci/oxygen/xonar_pcm179x.c
index c8c7f2c..7f31df8 100644
--- a/sound/pci/oxygen/xonar_pcm179x.c
+++ b/sound/pci/oxygen/xonar_pcm179x.c
@@ -212,6 +212,11 @@
 #define GPIO_ST_MAGIC        0x0040
 #define GPIO_ST_HP        0x0080
 
+#define GPIO_XENSE_OUTPUT_ENABLE (0x0001 | 0x0010 | 0x0020)
+#define GPIO_XENSE_HP_REAR       0x0002
+#define GPIO_XENSE_MAGIC         0x0040
+#define GPIO_XENSE_SPEAKERS      0x0080
+
 #define I2C_DEVICE_PCM1796(i)    (0x98 + ((i) &lt;&lt; 1))    /* 10011, ii,
/W=0 */
 #define I2C_DEVICE_CS2000    0x9c            /* 100111, 0, /W=0 */
 
@@ -499,6 +504,52 @@ static void xonar_stx_init(struct oxygen *chip)
     xonar_st_init_common(chip);
 }
 
+static void xonar_xense_init(struct oxygen *chip)
+{
+    struct xonar_pcm179x *data = chip-&gt;model_data;
+
+    data-&gt;generic.ext_power_reg = OXYGEN_GPI_DATA;
+    data-&gt;generic.ext_power_int_reg = OXYGEN_GPI_INTERRUPT_MASK;
+    data-&gt;generic.ext_power_bit = GPI_EXT_POWER;
+    xonar_init_ext_power(chip);
+   
+    data-&gt;generic.anti_pop_delay = 100;
+    data-&gt;h6 = chip-&gt;model.dac_channels_mixer &gt; 2;
+    data-&gt;has_cs2000 = 1;
+    data-&gt;cs2000_regs[CS2000_FUN_CFG_1] = CS2000_REF_CLK_DIV_1;
+    data-&gt;broken_i2c = true;
+
+    oxygen_write16(chip, OXYGEN_I2S_A_FORMAT,
+               OXYGEN_RATE_48000 |
+               OXYGEN_I2S_FORMAT_I2S |
+               OXYGEN_I2S_MCLK(data-&gt;h6 ? MCLK_256 : MCLK_512) |
+               OXYGEN_I2S_BITS_16 |
+               OXYGEN_I2S_MASTER |
+               OXYGEN_I2S_BCLK_64);
+
+    xonar_st_init_i2c(chip);
+    cs2000_registers_init(chip);
+   
+    data-&gt;generic.output_enable_bit = GPIO_XENSE_OUTPUT_ENABLE;
+    data-&gt;dacs = chip-&gt;model.dac_channels_mixer / 2;
+    data-&gt;hp_gain_offset = 2*-18;
+
+    pcm1796_init(chip);
+
+    oxygen_set_bits16(chip, OXYGEN_GPIO_CONTROL,
+              GPIO_INPUT_ROUTE | GPIO_XENSE_HP_REAR |
+              GPIO_XENSE_MAGIC | GPIO_XENSE_SPEAKERS);
+    oxygen_clear_bits16(chip, OXYGEN_GPIO_DATA,
+                GPIO_INPUT_ROUTE | GPIO_XENSE_HP_REAR | GPIO_XENSE_SPEAKERS);
+
+    xonar_init_cs53x1(chip);
+    xonar_enable_output(chip);
+
+    snd_component_add(chip-&gt;card, &quot;PCM1792A&quot;);
+    snd_component_add(chip-&gt;card, &quot;CS5381&quot;);
+    snd_component_add(chip-&gt;card, &quot;CS2000&quot;);
+}
+
 static void xonar_d2_cleanup(struct oxygen *chip)
 {
     xonar_disable_output(chip);
@@ -763,7 +814,6 @@ static int st_output_switch_get(struct snd_kcontrol
*ctl,
     return 0;
 }
 
-
 static int st_output_switch_put(struct snd_kcontrol *ctl,
                 struct snd_ctl_elem_value *value)
 {
@@ -859,6 +909,67 @@ static const struct snd_kcontrol_new st_controls[] = {
     },
 };
 
+static int xense_output_switch_get(struct snd_kcontrol *ctl,
+                struct snd_ctl_elem_value *value)
+{
+    struct oxygen *chip = ctl-&gt;private_data;
+    u16 gpio;
+
+    gpio = oxygen_read16(chip, OXYGEN_GPIO_DATA);
+    if (gpio &amp; GPIO_XENSE_SPEAKERS)
+        value-&gt;value.enumerated.item[0] = 0;
+    else if (!(gpio &amp; GPIO_XENSE_SPEAKERS) &amp;&amp; (gpio &amp; GPIO_XENSE_HP_REAR))
+        value-&gt;value.enumerated.item[0] = 1;
+    else
+        value-&gt;value.enumerated.item[0] = 2;
+    return 0;
+}
+
+static int xense_output_switch_put(struct snd_kcontrol *ctl,
+                struct snd_ctl_elem_value *value)
+{
+    struct oxygen *chip = ctl-&gt;private_data;
+    struct xonar_pcm179x *data = chip-&gt;model_data;
+    u16 gpio_old, gpio;
+
+    mutex_lock(&amp;chip-&gt;mutex);
+    gpio_old = oxygen_read16(chip, OXYGEN_GPIO_DATA);
+    gpio = gpio_old;
+    switch (value-&gt;value.enumerated.item[0]) {
+    case 0:
+        gpio |= GPIO_XENSE_SPEAKERS | GPIO_XENSE_HP_REAR;
+        break;
+    case 1:
+        gpio = (gpio | GPIO_XENSE_HP_REAR) &amp; ~GPIO_XENSE_SPEAKERS;
+        break;
+    case 2:
+        gpio &amp;= ~(GPIO_XENSE_SPEAKERS | GPIO_XENSE_HP_REAR);
+        break;
+    }
+    oxygen_write16(chip, OXYGEN_GPIO_DATA, gpio);
+    data-&gt;hp_active = !(gpio &amp; GPIO_XENSE_SPEAKERS);
+    update_pcm1796_volume(chip);
+    mutex_unlock(&amp;chip-&gt;mutex);
+    return gpio != gpio_old;
+}
+
+static const struct snd_kcontrol_new xense_controls[] = {
+    {
+        .iface = SNDRV_CTL_ELEM_IFACE_MIXER,
+        .name = &quot;Analog Output&quot;,
+        .info = st_output_switch_info,
+        .get = xense_output_switch_get,
+        .put = xense_output_switch_put,
+    },
+    {
+        .iface = SNDRV_CTL_ELEM_IFACE_MIXER,
+        .name = &quot;Headphones Impedance Playback Enum&quot;,
+        .info = st_hp_volume_offset_info,
+        .get = st_hp_volume_offset_get,
+        .put = st_hp_volume_offset_put,
+    },
+};
+
 static void xonar_line_mic_ac97_switch(struct oxygen *chip,
                        unsigned int reg, unsigned int mute)
 {
@@ -946,6 +1057,23 @@ static int xonar_st_mixer_init(struct oxygen *chip)
     return 0;
 }
 
+static int xonar_xense_mixer_init(struct oxygen *chip)
+{
+    unsigned int i;
+    int err;
+
+    for (i = 0; i &lt; ARRAY_SIZE(xense_controls); ++i) {
+        err = snd_ctl_add(chip-&gt;card,
+                  snd_ctl_new1(&amp;xense_controls[i], chip));
+        if (err &lt; 0)
+            return err;
+    }
+    err = add_pcm1796_controls(chip);
+    if (err &lt; 0)
+        return err;
+    return 0;
+}
+
 static void dump_pcm1796_registers(struct oxygen *chip,
                    struct snd_info_buffer *buffer)
 {
@@ -1138,6 +1266,13 @@ int get_xonar_pcm179x_model(struct oxygen *chip,
         chip-&gt;model.resume = xonar_stx_resume;
         chip-&gt;model.set_dac_params = set_pcm1796_params;
         break;
+    case 0x8428:
+        chip-&gt;model = model_xonar_st;
+        chip-&gt;model.shortname = &quot;Xonar Xense&quot;;
+        chip-&gt;model.chip = &quot;AV100&quot;;
+        chip-&gt;model.init = xonar_xense_init;
+        chip-&gt;model.mixer_init = xonar_xense_mixer_init;
+        break;
     default:
         return -EINVAL;
     }</pre>

<p>
Il vous incombera désormais de patcher les sources du noyau Linux et de compiler uniquement les modules nécessaires au bon fonctionnement de la carte (pour ça, vous aurez déjà besoin d&#039;installer le paquet linux-source, et d&#039;extraire les sources du fichier compressé situé dans /usr/src/ )
</p>

<p>
Déplacez vous dans le dossier des sources des modules pour appliquer le patch ( cd linux-3.**/sound/pci/oxygen ) puis appliquez le patch
</p>
<pre class="code">sudo patch -p1 -i /chemin/xonar-xense.patch</pre>

<p>
Une fois ces dernières patchées retournez à la racine du dossier des sources du noyau Linux à l&#039;aide de la commande &quot;cd&quot;
</p>

<p>
Exécutez ces commandes à adapter selon votre version du noyau :
</p>
<pre class="code">cd /usr/src/linux-source-3.8.0-27/
sudo cp /usr/src/linux-headers-3.8.0-27-generic/Module.symvers Module.symvers
sudo cp /boot/config-3.8.0-27-generic .config
sudo make prepare
sudo make scripts
sudo make -j4 M=sound/pci/oxygen/
sudo rm /lib/modules/3.8.0-27-generic/kernel/sound/pci/oxygen/*.ko
sudo cp sound/pci/oxygen/*.ko /lib/modules/3.8.0-27-generic/kernel/sound/pci/oxygen/</pre>

<p>
Ensuite, redémarrez le système et chargez le module :
</p>
<pre class="code">sudo modprobe snd-virtuoso</pre>

<p>
En gros, avec ces commandes, on copie les fichiers de configuration pour compiler le noyau tel que ça a été fait pour le noyau présentement utilisé au sein du système, ensuite on prépare le nécessaire pour la prise en charge des options en question, puis on compile, pour obtenir 3 fichiers distincts ( snd-oxygen.ko / snd-oxygen-lib.ko / snd-virtuoso.ko ) qui sont nos fameux modules (drivers) patchés pour le support de la Xonar Xense, et enfin la copie de ces dernier en remplacement de ceux actuellement présents, et leur chargement pour utilisation courante.
</p>

<p>
Un petit test rapide avec l&#039;outil alsamixer vous montrera que la carte est bien accessible et utilisable, et l&#039;applet sonore pulseaudio pourra également vous l&#039;indiquer (pensez à configurer la bonne sortie utilisée quand nécessaire !)
</p>

<p>
<a href="/lib/exe/fetch.php?tok=1537c7&amp;media=http%3A%2F%2Fpix.toile-libre.org%2Fupload%2Foriginal%2F1379108518.png" class="media" title="http://pix.toile-libre.org/upload/original/1379108518.png"><img src="/lib/exe/fetch.php?w=853&amp;tok=c9c288&amp;media=http%3A%2F%2Fpix.toile-libre.org%2Fupload%2Foriginal%2F1379108518.png" class="media img-responsive" alt="" width="853" /></a>
</p>

<p>
Voilà, profitez bien de votre carte Xonar Xense sous Linux ! 
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/xonar_xense"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1496431233" /><input type="hidden" name="summary" value="[Code source] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="code_source" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="3750-12325" /><button type="submit" title="Code source" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="limitations_et_bugs">Limitations et bugs</h2>
<div class="level2">

<p>
Ce patch est le prémisse du support officiel de cette carte son, actuellement une seule limitation est connue par rapport aux pilotes, et pas des moindres, toutes les sorties, 7.1 analagique et spdif comprises, ne fonctionnent pour le moment qu&#039;en Stéréo.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/xonar_xense"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1496431233" /><input type="hidden" name="summary" value="[Limitations et bugs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="limitations_et_bugs" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="12326-12618" /><button type="submit" title="Limitations et bugs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="liens">Liens</h2>
<div class="level2">

<p>
<a href="http://mailman.alsa-project.org/pipermail/alsa-devel/2013-July/064706.html" class="urlextern" title="http://mailman.alsa-project.org/pipermail/alsa-devel/2013-July/064706.html" rel="nofollow">http://mailman.alsa-project.org/pipermail/alsa-devel/2013-July/064706.html</a>
</p>

<p>
<a href="http://www.alsa-project.org/main/index.php/Matrix:Vendor-Asus" class="urlextern" title="http://www.alsa-project.org/main/index.php/Matrix:Vendor-Asus" rel="nofollow">http://www.alsa-project.org/main/index.php/Matrix:Vendor-Asus</a>
</p>

<p>
<a href="http://www.alsa-project.org/main/index.php/Matrix:Module-virtuoso" class="urlextern" title="http://www.alsa-project.org/main/index.php/Matrix:Module-virtuoso" rel="nofollow">http://www.alsa-project.org/main/index.php/Matrix:Module-virtuoso</a>
</p>

<p>
<a href="http://www.alsa-project.org/main/index.php/Matrix:Module-oxygen" class="urlextern" title="http://www.alsa-project.org/main/index.php/Matrix:Module-oxygen" rel="nofollow">http://www.alsa-project.org/main/index.php/Matrix:Module-oxygen</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/xonar_xense"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1496431233" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="12619-" /><button type="submit" title="Liens" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="xonar_xense.txt">xonar_xense.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 02/06/2017, 21:20">Le 02/06/2017, 21:20</span></li><li class="text-muted">par YoBoY</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=xonar_xense&amp;1635568302" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>openstack [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="precise,virtualisation,serveur,tutoriel"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/openstack?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/openstack?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/openstack"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/openstack"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/openstack"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"openstack","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="openstack">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/openstack?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/openstack?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/openstack?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/openstack?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/openstack?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/openstack?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/openstack?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">openstack</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/openstack?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/openstack?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/openstack?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#preparation_du_systeme","title":"Pr\u00e9paration du syst\u00e8me","level":1},{"link":"#reseau","title":"R\u00e9seau","level":2},{"link":"#serveur_ntp","title":"Serveur NTP","level":2},{"link":"#lvm","title":"LVM","level":2},{"link":"#rabbitmq","title":"RabbitMQ","level":2},{"link":"#mysql","title":"Mysql","level":2},{"link":"#keystone","title":"Keystone","level":1},{"link":"#preparation_de_la_base_de_donnees_mysql","title":"Pr\u00e9paration de la base de donn\u00e9es Mysql","level":2},{"link":"#installation","title":"Installation","level":2},{"link":"#configuration","title":"Configuration","level":2},{"link":"#creation_des_utilisateurs","title":"Cr\u00e9ation des utilisateurs","level":2},{"link":"#creation_des_roles","title":"Cr\u00e9ation des r\u00f4les","level":2},{"link":"#creation_des_tenants","title":"Cr\u00e9ation des Tenants","level":2},{"link":"#definition_des_roles","title":"D\u00e9finition des r\u00f4les","level":2},{"link":"#creation_d_un_utilisateur_supplementaire","title":"Cr\u00e9ation d'un utilisateur suppl\u00e9mentaire","level":2},{"link":"#creation_des_services_et_leurs_points_d_acces","title":"Cr\u00e9ation des services et leurs points d'acc\u00e8s","level":2},{"link":"#utilisation","title":"Utilisation","level":2},{"link":"#glance","title":"Glance","level":1},{"link":"#preparation_de_la_base_de_donnees_mysql1","title":"Pr\u00e9paration de la base de donn\u00e9es Mysql","level":2},{"link":"#installation1","title":"Installation","level":2},{"link":"#configuration1","title":"Configuration","level":2},{"link":"#utilisation1","title":"Utilisation","level":2},{"link":"#nova","title":"Nova","level":1},{"link":"#preparation_de_la_base_de_donnees_mysql2","title":"Pr\u00e9paration de la base de donn\u00e9es Mysql","level":2},{"link":"#installation2","title":"Installation","level":2},{"link":"#configuration2","title":"Configuration","level":2},{"link":"#utilisation2","title":"Utilisation","level":2},{"link":"#premiere_machine_virtuelle","title":"Premi\u00e8re machine virtuelle","level":2},{"link":"#dashboard_horizon","title":"Dashboard Horizon","level":1},{"link":"#installation3","title":"Installation","level":2},{"link":"#utilisation3","title":"Utilisation","level":2},{"link":"#creez_vos_propres_images","title":"Cr\u00e9ez vos propres images","level":1},{"link":"#desinstallation","title":"D\u00e9sinstallation","level":1},{"link":"#voir_aussi","title":"Voir aussi","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis</a></li>
<li class="level1"><a href="#preparation_du_systeme">Préparation du système</a>
<ul class="nav toc">
<li class="level2"><a href="#reseau">Réseau</a></li>
<li class="level2"><a href="#serveur_ntp">Serveur NTP</a></li>
<li class="level2"><a href="#lvm">LVM</a></li>
<li class="level2"><a href="#rabbitmq">RabbitMQ</a></li>
<li class="level2"><a href="#mysql">Mysql</a></li>
</ul>
</li>
<li class="level1"><a href="#keystone">Keystone</a>
<ul class="nav toc">
<li class="level2"><a href="#preparation_de_la_base_de_donnees_mysql">Préparation de la base de données Mysql</a></li>
<li class="level2"><a href="#installation">Installation</a></li>
<li class="level2"><a href="#configuration">Configuration</a></li>
<li class="level2"><a href="#creation_des_utilisateurs">Création des utilisateurs</a></li>
<li class="level2"><a href="#creation_des_roles">Création des rôles</a></li>
<li class="level2"><a href="#creation_des_tenants">Création des Tenants</a></li>
<li class="level2"><a href="#definition_des_roles">Définition des rôles</a></li>
<li class="level2"><a href="#creation_d_un_utilisateur_supplementaire">Création d&#039;un utilisateur supplémentaire</a></li>
<li class="level2"><a href="#creation_des_services_et_leurs_points_d_acces">Création des services et leurs points d&#039;accès</a></li>
<li class="level2"><a href="#utilisation">Utilisation</a></li>
</ul>
</li>
<li class="level1"><a href="#glance">Glance</a>
<ul class="nav toc">
<li class="level2"><a href="#preparation_de_la_base_de_donnees_mysql1">Préparation de la base de données Mysql</a></li>
<li class="level2"><a href="#installation1">Installation</a></li>
<li class="level2"><a href="#configuration1">Configuration</a></li>
<li class="level2"><a href="#utilisation1">Utilisation</a></li>
</ul>
</li>
<li class="level1"><a href="#nova">Nova</a>
<ul class="nav toc">
<li class="level2"><a href="#preparation_de_la_base_de_donnees_mysql2">Préparation de la base de données Mysql</a></li>
<li class="level2"><a href="#installation2">Installation</a></li>
<li class="level2"><a href="#configuration2">Configuration</a></li>
<li class="level2"><a href="#utilisation2">Utilisation</a></li>
<li class="level2"><a href="#premiere_machine_virtuelle">Première machine virtuelle</a></li>
</ul>
</li>
<li class="level1"><a href="#dashboard_horizon">Dashboard Horizon</a>
<ul class="nav toc">
<li class="level2"><a href="#installation3">Installation</a></li>
<li class="level2"><a href="#utilisation3">Utilisation</a></li>
</ul>
</li>
<li class="level1"><a href="#creez_vos_propres_images">Créez vos propres images</a></li>
<li class="level1"><a href="#desinstallation">Désinstallation</a></li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Selon les <a href="/tags">tags</a> présents sur cette page, celle-ci n'a pas été vérifiée pour une des <a href="/versions">versions LTS supportées d'Ubuntu</a>.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/precise" class="wikilink1" title="precise" rel="tag">Precise</a>,
	<a href="/virtualisation" class="wikilink1" title="virtualisation" rel="tag">virtualisation</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="openstack">OpenStack</h1>
<div class="level1">

<p>
OpenStack est un logiciel libre <sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup> qui permet la construction de <a href="/cloud" class="wikilink1" title="cloud">cloud</a> privé et public. OpenStack est aussi une communauté et un projet en plus d&#039;un logiciel qui a pour but d&#039;aider les organisations à mettre en oeuvre un système de serveur et de stockage virtuel.<br/>

OpenStack est composé d&#039;une série de logiciels et de projets au code source libre qui sont maintenus par la communauté incluant: OpenStack Compute (nommé Nova), OpenStack Object Storage (nommé Swift), et OpenStack Image Service (nommé Glance).<br/>

Ce document présente l&#039;installation des composants d&#039;identité, d&#039;images et virtualisation sur une seule machine.<br/>

Il s&#039;agit plutôt d&#039;une configuration de développement mais néanmoins fonctionnelle. Les services réseau avancé et stockage que sont respectivement Quantum et Swift ne seront pas abordés dans ce document.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[OpenStack] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="openstack" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="56-957" /><button type="submit" title="OpenStack" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Disposer des <a href="/sudo" class="wikilink1" title="sudo">droits d&#039;administration</a>.</div>
</li>
<li class="level1"><div class="li"> Disposer d&#039;une connexion à Internet configurée et activée.</div>
</li>
<li class="level1"><div class="li"> Avoir les <a href="/depots" class="wikilink1" title="depots">dépôts</a> d&#039;activés</div>
</li>
<li class="level1"><div class="li"> Un processeur supportant la virtualisation matérielle (<a href="/kvm#mise_en_place" class="wikilink1" title="kvm">test sur la page KVM</a>)</div>
</li>
<li class="level1"><div class="li"> Disposer d&#039;un disque dur ou d&#039;une partition non formatée pour <a href="/lvm" class="wikilink1" title="lvm">LVM</a></div>
</li>
<li class="level1"><div class="li"> Ne pas avoir peur de la ligne de <a href="/commande_shell" class="wikilink1" title="commande_shell">commande</a></div>
</li>
<li class="level1 node"><div class="li"> Avoir <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installé les paquets</a>:</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> <strong><a href="apt://kvm,libvirt-bin,virtinst" class="interwiki iw_apt" title="apt://kvm,libvirt-bin,virtinst">kvm,libvirt-bin,virtinst</a></strong>.</div>
</li>
<li class="level2"><div class="li"> <strong><a href="apt://mysql-server,python-mysqldb" class="interwiki iw_apt" title="apt://mysql-server,python-mysqldb">mysql-server,python-mysqldb</a></strong></div>
</li>
<li class="level2"><div class="li"> <strong><a href="apt://bridge-utils" class="interwiki iw_apt" title="apt://bridge-utils">bridge-utils</a></strong></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Il est nécessaire de configurer le réseau en IP Fixe. Supprimez les paquets Network-Manager ou Wicd et resolvconf.</div>
</li>
</ul>

<p>
Tous les services OpenStack seront installés sur la même machine.<br/>

La configuration abordée suppose l&#039;utilisation de 2 interfaces réseau.<br/>

</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="958-1864" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="preparation_du_systeme">Préparation du système</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Préparation du système] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="preparation_du_systeme" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1865-1904" /><button type="submit" title="Préparation du système" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="reseau">Réseau</h3>
<div class="level3">
<div class="noteimportant">l&#039;utilisation d&#039;une interface wifi pour les bridges peut se révéler très complexe voire impossible. Préférez une interface virtuelle
</div>
<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Modifiez avec les droits d&#039;administration</a> votre fichier <strong>/etc/network/interfaces</strong> comme ci-dessous en adaptant a votre configuration.
</p>
<pre class="file">auto lo
iface lo inet loopback

auto eth0
iface eth0 inet manual

auto eth1
iface eth1 inet manual

auto br0
iface br0 inet static
	bridge_ports eth0
	address 192.168.1.250
	netmask 255.255.255.0
	gateway 192.168.1.254
	broadcast 192.168.1.255

auto br1
iface br1 inet manual
	bridge_ports eth1
</pre>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Modifiez avec les droits d&#039;administration</a> votre fichier <strong>/etc/resolv.conf</strong> comme ci-dessous et ajoutez vos <a href="https://fr.wikipedia.org/wiki/Domain_Name_System" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Domain_Name_System">DNS</a> habituels.<br/>

Les <abbr title="Domain Name System">DNS</abbr> ci dessous sont ceux de Google
</p>
<pre class="file">nameserver 8.8.8.8
nameserver 8.8.4.4</pre>

<p>
Relancez les cartes réseau pour que les modifications soient prises en compte.<br/>

</p>
<pre class="code">for a in `ifconfig | awk &#039;/Link/ { if ($1 != &quot;lo&quot;) print $1 }&#039;`; do sudo ifdown $a ; done
sudo ifup -e lo -av</pre>
<div class="notetip"> Assurez-vous d&#039;avoir décommenté l&#039;option permettant le forward des paquets en <abbr title="Internet Protocol Version 4">IPV4</abbr> dans le fichier /etc/sysctl.conf
 : 
<pre class="file">net.ipv4.ip_forward=1 </pre>

<p>
puis lancez la commande : 
</p>
<pre class="code">sysctl -p</pre>

</div>
</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Réseau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="reseau" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1905-3303" /><button type="submit" title="Réseau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="serveur_ntp">Serveur NTP</h3>
<div class="level3">

<p>
Le serveur <a href="/ntp" class="wikilink1" title="ntp">NTP</a> étant nécessaire à la bonne synchronisation du cloud,  <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://ntp" class="interwiki iw_apt" title="apt://ntp">ntp</a></strong>.<br/>

Ensuite, <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/ntp.conf</strong> et ajoutez les lignes
</p>
<pre class="file">server ntp.ubuntu.com iburst
server 127.127.1.0
fudge 127.127.1.0 stratum 10</pre>

<p>
redémarrez le service 
</p>
<pre class="code">sudo service ntp restart</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Serveur NTP] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="serveur_ntp" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="3304-3794" /><button type="submit" title="Serveur NTP" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="lvm">LVM</h3>
<div class="level3">

<p>
Les volumes <a href="/lvm" class="wikilink1" title="lvm">LVM</a> serviront de disques durs supplémentaires pour les serveurs virtuels.
</p>

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://tgt,open-iscsi,open-iscsi-utils,lvm2" class="interwiki iw_apt" title="apt://tgt,open-iscsi,open-iscsi-utils,lvm2">tgt,open-iscsi,open-iscsi-utils,lvm2</a></strong> <br/>

</p>

<p>
Les commandes qui suivent supposent que vous avez un disque dur <strong>/dev/sdc</strong> vide sans <a href="/partitions" class="wikilink1" title="partitions">partition</a>. Adaptez les commandes en fonction de votre configuration.<br/>

Créez une <a href="/partitions" class="wikilink1" title="partitions">partition</a> non formatée de 100Gigas sur <strong>/dev/sdc</strong> en adaptant à votre configuration:
</p>
<pre class="code">sudo fdisk /dev/sdc
n p 1 &lt;return&gt; +100G w</pre>

<p>
Vous avez maintenant une partition primaire vide de 100 Gigas <strong>/dev/sdc1</strong>.<br/>

Créez maintenant le volume LVM. Attention, le nom <strong>nova-volumes</strong> doit être respecté:
</p>
<pre class="code">sudo pvcreate /dev/sdc1
sudo vgcreate nova-volumes /dev/sdc1</pre>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[LVM] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="lvm" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="3795-4616" /><button type="submit" title="LVM" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="rabbitmq">RabbitMQ</h3>
<div class="level3">

<p>
RabbitMQ est un courtier de messages se basant sur le standard <a href="https://fr.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol">AMQP</a> afin d&#039;échanger avec différents clients.<br/>

Pour faire simple: c&#039;est le service qui permet aux composants OpenStack de communiquer entre eux.
</p>

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://rabbitmq-server,memcached,python-memcache" class="interwiki iw_apt" title="apt://rabbitmq-server,memcached,python-memcache">rabbitmq-server,memcached,python-memcache</a></strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[RabbitMQ] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="rabbitmq" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="4617-5009" /><button type="submit" title="RabbitMQ" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="mysql">Mysql</h3>
<div class="level3">

<p>
Chaque composant possède sa base de données <a href="/mysql" class="wikilink1" title="mysql">MySQL</a>, contenant toutes les données modifiables à chaud (ID des images disques, des instances virtuelles, réseaux, identités…). Les données de configuration fixes sont stockées dans des fichiers texte.<br/>

</p>
<div class="notetip">Il est possible d&#039;utiliser un autre <a href="/sgbd" class="wikilink1" title="sgbd">SGBD</a>, MySQL étant recommandé dans la documentation OpenStack.
</div>
<p>
Pour indiquer a MySQL que le serveur doit écouter sur toutes les adresses et pas seulement sur la boucle locale, modifiez sa configuration en <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">ouvrant avec les droits d&#039;administration</a> le fichier <strong>/etc/mysql/my.cnf</strong> pour remplacer:
</p>
<pre class="file">bind-address		= 127.0.0.1</pre>

<p>
par
</p>
<pre class="file">bind-address		= 0.0.0.0</pre>

<p>
et redémarrez MySQL
</p>
<pre class="code">sudo service mysql restart</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Mysql] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="mysql" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="5010-5845" /><button type="submit" title="Mysql" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="keystone">Keystone</h2>
<div class="level2">

<p>
Le composant Keystone est chargé de la gestion des utilisateurs et des services.
</p>

</div>

<h4 id="gestion_des_utilisateurs">Gestion des utilisateurs</h4>
<div class="level4">

<p>
La gestion des utilisateurs s&#039;articule autour de 3 objets:
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> l&#039;objet <em><a href="#creation_des_utilisateurs" title="openstack ↵" class="wikilink1">User</a></em> représentant l&#039;utilisateur final.</div>
</li>
<li class="level1"><div class="li"> L&#039;objet <em><a href="#creation_des_tenants" title="openstack ↵" class="wikilink1">Tenant</a></em> que l&#039;on peut représenter par un projet, une organisation au sein duquel les instances seront regroupées et administrées par les utilisateurs.</div>
</li>
<li class="level1"><div class="li"> L&#039;objet <em><a href="#creation_des_roles" title="openstack ↵" class="wikilink1">Role</a></em> qui définit le rôle de l&#039;utilisateur sur un <em>Tenant</em>. Un utilisateur peut avoir un ou plusieurs rôles sur différents Tenants.</div>
</li>
</ul>

</div>

<h4 id="gestion_des_services_et_points_d_acces">Gestion des services et points d&#039;accès</h4>
<div class="level4">

<p>
La gestion des différents services, comme Glance pour les images ou Swift pour le stockage.<br/>

La définition des points d&#039;accès a ces différents services, les url et ports pour y accéder<br/>

</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Keystone] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="keystone" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="5846-6748" /><button type="submit" title="Keystone" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="preparation_de_la_base_de_donnees_mysql">Préparation de la base de données Mysql</h3>
<div class="level3">

<p>
Commencez par créer la base MySQL.<br/>

La commande suivante crée un utilisateur et sa base de données nommés &quot;keystone&quot;. Changez SQLPASSWD par un mot de passe de votre choix.
</p>
<pre class="code">mysql -u root -p &lt;&lt;EOF
CREATE DATABASE keystone;
GRANT ALL PRIVILEGES ON keystone.* TO &#039;keystone&#039;@&#039;%&#039; IDENTIFIED BY &#039;SQLPASSWD&#039;;
FLUSH PRIVILEGES;
EOF</pre>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Préparation de la base de données Mysql] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="preparation_de_la_base_de_donnees_mysql" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="6749-7145" /><button type="submit" title="Préparation de la base de données Mysql" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="installation">Installation</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://keystone,python-keystone,python-keystoneclient,python-mysqldb" class="interwiki iw_apt" title="apt://keystone,python-keystone,python-keystoneclient,python-mysqldb">keystone,python-keystone,python-keystoneclient,python-mysqldb</a></strong>
</p>

<p>
Puis supprimer la base de donnée SQlite :
</p>
<pre class="code">rm /var/lib/keystone/keystone.db</pre>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="13" /><input type="hidden" name="range" value="7146-7399" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="configuration">Configuration</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/keystone/keystone.conf</strong> pour modifier les sections suivantes:
Remplacez ADMPASSWD par un mot de passe de votre choix et et SQLPASSWD par le mot de passe MySQL défini ci dessus
</p>
<pre class="file">[DEFAULT]
bind_host = 0.0.0.0
public_port = 5000
admin_port = 35357
# Mot de passe d&#039;administration
admin_token = ADMPASSWD
compute_port = 8774
verbose = True
debug = True
log_config = /etc/keystone/logging.conf


[sql]
connection = mysql://keystone:SQLPASSWD@192.168.1.250:3306/keystone
idle_timeout = 200</pre>

<p>
Redémarrez keystone:
</p>
<pre class="code">sudo service keystone restart</pre>

<p>
Synchronisez la base de données:
</p>
<pre class="code">sudo keystone-manage db_sync</pre>

<p>
et donnez les droits en lecture / écriture à keystone
</p>
<pre class="code">chown keystone:keystone /var/lib/keystone/keystone.db</pre>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="7400-8300" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="creation_des_utilisateurs">Création des utilisateurs</h3>
<div class="level3">

<p>
Chaque commande ci-dessous contient l&#039;authentification définie dans le fichier <strong>keystone.conf</strong> et utilisée par le client python sous la forme <code>--token admin_token &lt;mot de passe d&#039;administration&gt; --endpoint url_du_service_keystone &lt;adresse du serveur:port/directory/&gt;</code>.<br/>

</p>

</div>

<h4 id="creation_du_compte_administrateur">Création du compte administrateur</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ user-create --name=admin --pass=ADMPASSWD --email=admin@example.com</pre>

<p>
Répondra quelque chose comme
</p>
<pre class="code">+----------+-------------------------------------------------------------------------------------------------------------------------+
| Property |                                                          Value                                                          |
+----------+-------------------------------------------------------------------------------------------------------------------------+
| email    | admin@example.com                                                                                                       |
| enabled  | True                                                                                                                    |
| id       | c97c87b3ed894401975dd6d757b40330                                                                                        |
| name     | admin                                                                                                                   |
| password | $6$rounds=40000$cZhg187ypC6hMMD1$YQAxiXspmMVsu1di.o3UlZjvjlEO9WXii48Q29tyIXTzDpT5e92XBij9Pz4A5YLoGaccf8PBf1jcAan9YLDOl. |
| tenantId | None                                                                                                                    |
+----------+-------------------------------------------------------------------------------------------------------------------------+</pre>

</div>

<h4 id="creation_du_compte_interne_du_service_glance">Création du compte interne du service Glance</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ user-create --name=glance --pass=ADMPASSWD --email=glance@example.com</pre>

<p>
Répondra
</p>
<pre class="code">+----------+-------------------------------------------------------------------------------------------------------------------------+
| Property |                                                          Value                                                          |
+----------+-------------------------------------------------------------------------------------------------------------------------+
| email    | glance@example.com                                                                                                      |
| enabled  | True                                                                                                                    |
| id       | 876ef0a6c0c048039f847e61da7260b4                                                                                        |
| name     | glance                                                                                                                  |
| password | $6$rounds=40000$pYJjQYtDJGdFB/nl$UOmryhbqCIROSPNhs8/svbPg2JIns31yImcAXTh/CXT3o9GOZTNYadZe2zp7M0.XeHqJD5bI1lhZYM09uSrmN0 |
| tenantId | None                                                                                                                    |
+----------+-------------------------------------------------------------------------------------------------------------------------+</pre>

</div>

<h4 id="creation_du_compte_interne_du_service_nova">Création du compte interne du service Nova</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ user-create --name=nova --pass=ADMPASSWD --email=nova@example.com</pre>

<p>
Répondra
</p>
<pre class="code">+----------+-------------------------------------------------------------------------------------------------------------------------+
| Property |                                                          Value                                                          |
+----------+-------------------------------------------------------------------------------------------------------------------------+
| email    | nova@example.com                                                                                                        |
| enabled  | True                                                                                                                    |
| id       | 5c54624fef2242e185af10b7a2a2768f                                                                                        |
| name     | nova                                                                                                                    |
| password | $6$rounds=40000$ogH/.VbZJgp2pDF8$w7TCuRu95Q8c6PMR5Zmbs7Osjk8tXfkDKixzRY.t/Ghv/WvOoLD1au/cCbMWVfaEhr14RAGheTA2E2rPoVEjd1 |
| tenantId | None                                                                                                                    |
+----------+-------------------------------------------------------------------------------------------------------------------------+</pre>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Création des utilisateurs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creation_des_utilisateurs" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="8301-13382" /><button type="submit" title="Création des utilisateurs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="creation_des_roles">Création des rôles</h3>
<div class="level3">

<p>
Pour les rôles utilisateurs vous avez le choix entre :
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <em><a href="#role_admin" title="openstack ↵" class="wikilink1">admin</a></em>: donne le droit de modifier la configuration des services (ex:allouer une plage d&#039;adresse IP, un quota d&#039;espace disque pour un projet etc…)</div>
</li>
<li class="level1"><div class="li"> <em><a href="#role_membre" title="openstack ↵" class="wikilink1">Member</a></em>: permet de gérer le contenu du projet (création d&#039;instances de machines, ajout d&#039;un disque virtuel a l&#039;une d&#039;elles etc…)</div>
</li>
</ol>

<p>
Les rôles <em><a href="#role_keystoneadmin" title="openstack ↵" class="wikilink1">KeystoneAdmin</a></em> et <em><a href="#role_keystoneserviceadmin" title="openstack ↵" class="wikilink1">KeystoneServiceAdmin</a></em> sont des rôles internes <em class="u">nécessaires</em>.
</p>

</div>

<h4 id="role_admin">Rôle admin</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ role-create --name=admin</pre>
<pre class="code">+----------+----------------------------------+
| Property |              Value               |
+----------+----------------------------------+
| id       | 3d945f41e08e4e2db1584fdb8f05d333 |
| name     | admin                            |
+----------+----------------------------------+</pre>

</div>

<h4 id="role_membre">Rôle Membre</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ role-create --name=Member</pre>
<pre class="code">+----------+----------------------------------+
| Property |              Value               |
+----------+----------------------------------+
| id       | 84697b61736c439288900904bdf4a48d |
| name     | Member                           |
+----------+----------------------------------+</pre>

</div>

<h4 id="role_keystoneadmin">Rôle KeystoneAdmin</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ role-create --name=KeystoneAdmin</pre>
<pre class="code">+----------+----------------------------------+
| Property |              Value               |
+----------+----------------------------------+
| id       | d4d6482b0ec04e0fa24aa8263c182d08 |
| name     | KeystoneAdmin                    |
+----------+----------------------------------+</pre>

</div>

<h4 id="role_keystoneserviceadmin">Rôle KeystoneServiceAdmin</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ role-create --name=KeystoneServiceAdmin</pre>
<pre class="code">+----------+----------------------------------+
| Property |              Value               |
+----------+----------------------------------+
| id       | 46590e32dbbe40f29253b5b928b83d1b |
| name     | KeystoneServiceAdmin             |
+----------+----------------------------------+</pre>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Création des rôles] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creation_des_roles" /><input type="hidden" name="codeblockOffset" value="24" /><input type="hidden" name="range" value="13383-15743" /><button type="submit" title="Création des rôles" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="creation_des_tenants">Création des Tenants</h3>
<div class="level3">

</div>

<h4 id="tenant_admin">Tenant admin</h4>
<div class="level4">

<p>
Le Tenant admin permet à ses membres d&#039;administrer les services.
</p>
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ tenant-create --name=admin</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description | None                             |
| enabled     | True                             |
| id          | 0f71e86d30e247d3b1216fe5f2f3aa50 |
| name        | admin                            |
+-------------+----------------------------------+</pre>

</div>

<h4 id="tenant_service">Tenant service</h4>
<div class="level4">

<p>
Le Tenant interne des services.
</p>
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ tenant-create --name=service</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description | None                             |
| enabled     | True                             |
| id          | 1a3515e468f14e0ebb4a4e83447e7bf7 |
| name        | service                          |
+-------------+----------------------------------+</pre>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Création des Tenants] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creation_des_tenants" /><input type="hidden" name="codeblockOffset" value="32" /><input type="hidden" name="range" value="15744-16992" /><button type="submit" title="Création des Tenants" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="definition_des_roles">Définition des rôles</h3>
<div class="level3">

<p>
Il faut pour cela utiliser les ID affichés lors de la création des <em><a href="#creation_des_utilisateurs" title="openstack ↵" class="wikilink1">Users</a><sup><a href="#fn__2" id="fnt__2" class="fn_top">2)</a></sup>, <a href="#creation_des_roles" title="openstack ↵" class="wikilink1">Roles</a><sup><a href="#fn__3" id="fnt__3" class="fn_top">3)</a></sup></em> et <em><a href="#creation_des_tenants" title="openstack ↵" class="wikilink1">Tenants</a></em>.<br/>

L&#039;<em>User</em> &quot;admin&quot; a un <em>Role</em> admin sur le <em>Tenant</em> &quot;admin&quot;.<br/>

</p>
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ user-role-add --user-id c97c87b3ed894401975dd6d757b40330 --role-id 3d945f41e08e4e2db1584fdb8f05d333 --tenant_id 0f71e86d30e247d3b1216fe5f2f3aa50</pre>

<p>
Comme ce n&#039;est pas pratique de recopier les IDs, les erreurs de frappe seront évitées grâce à l&#039;outil <em>awk</em>. Il s&#039;agira de définir les rôles ainsi:
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> L&#039;<em>User</em> &quot;admin&quot; a un <em>Role</em> &quot;KeystoneAdmin&quot; sur le <em>Tenant</em> &quot;admin&quot;.</div>
</li>
<li class="level1"><div class="li"> L&#039;<em>User</em> &quot;admin&quot; a un <em>Role</em> &quot;KeystoneServiceAdmin&quot; sur le <em>Tenant</em> &quot;admin&quot;.</div>
</li>
<li class="level1"><div class="li"> L&#039;<em>User</em> &quot;glance&quot; a un <em>Role</em> &quot;admin&quot; sur le <em>Tenant</em> &quot;service&quot;.</div>
</li>
<li class="level1"><div class="li"> L&#039;<em>User</em> &quot;nova&quot; a un <em>Role</em> &quot;admin&quot; sur le <em>Tenant</em> &quot;service&quot;.</div>
</li>
</ul>

<p>
Voici les commandes correspondantes :
</p>
<pre class="code">keystone user-role-add --user-id `keystone user-list | awk &#039;/ admin / { print $2 }&#039;` --role-id `keystone role-list | awk &#039;/ KeystoneAdmin / { print $2 }&#039;` --tenant_id `keystone tenant-list | awk &#039;/ admin / { print $2 }&#039;`
keystone user-role-add --user-id `keystone user-list | awk &#039;/ admin / { print $2 }&#039;` --role-id `keystone role-list | awk &#039;/ KeystoneServiceAdmin / { print $2 }&#039;` --tenant_id `keystone tenant-list | awk &#039;/ admin / { print $2 }&#039;`
keystone user-role-add --user-id `keystone user-list | awk &#039;/ glance / { print $2 }&#039;` --role-id `keystone role-list | awk &#039;/ admin / { print $2 }&#039;` --tenant_id `keystone tenant-list | awk &#039;/ service / { print $2 }&#039;`
keystone user-role-add --user-id `keystone user-list | awk &#039;/ nova / { print $2 }&#039;` --role-id `keystone role-list | awk &#039;/ admin / { print $2 }&#039;` --tenant_id `keystone tenant-list | awk &#039;/ service / { print $2 }&#039;`</pre>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Définition des rôles] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="definition_des_roles" /><input type="hidden" name="codeblockOffset" value="36" /><input type="hidden" name="range" value="16993-18946" /><button type="submit" title="Définition des rôles" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit17" id="creation_d_un_utilisateur_supplementaire">Création d&#039;un utilisateur supplémentaire</h3>
<div class="level3">

<p>
Il s&#039;agira dans l&#039;exemple qui suit de la création d&#039;un compte utilisateur, d&#039;un projet supplémentaire et définition du role avec la variable d&#039;environnement $USER (remplacer par ce que vous voulez, c&#039;est juste un exemple)<br/>

Le rôle &quot;Member&quot; est suffisant. Remplacez USRPASSWD par un mot de passe de votre choix.
L&#039;User $USER (xavier ici) a un Role &quot;Member&quot; sur le Tenant $USER (xavier ici).
</p>

</div>

<h4 id="user">User</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ user-create --name=$USER --pass=USRPASSWD --email=$USER@example.com</pre>
<pre class="code">+----------+-------------------------------------------------------------------------------------------------------------------------+
| Property |                                                          Value                                                          |
+----------+-------------------------------------------------------------------------------------------------------------------------+
| email    | xavier@example.com                                                                                                      |
| enabled  | True                                                                                                                    |
| id       | 13247a59ad844458ad36c0bd06451376                                                                                        |
| name     | xavier                                                                                                                  |
| password | $6$rounds=40000$3YPS4NJ1DqKdzEjc$XPGFlqCfu2ZCNUMJCjFMkvFfXrOkixuVq1I6.mjd9PXzU.4u6ELHYeNbvYJyiCGvUHaggIgo9rMESeA8v4x3Y1 |
| tenantId | None                                                                                                                    |
+----------+-------------------------------------------------------------------------------------------------------------------------+</pre>

</div>

<h4 id="tenant">Tenant</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ tenant-create --name=$USER</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description | None                             |
| enabled     | True                             |
| id          | c6f05a03b4aa482c91b61a2230356618 |
| name        | xavier                           |
+-------------+----------------------------------+</pre>

</div>

<h4 id="role">Rôle</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ user-role-add --user-id 13247a59ad844458ad36c0bd06451376 --role-id 84697b61736c439288900904bdf4a48d --tenant_id c6f05a03b4aa482c91b61a2230356618</pre>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Création d&#039;un utilisateur supplémentaire] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creation_d_un_utilisateur_supplementaire" /><input type="hidden" name="codeblockOffset" value="38" /><input type="hidden" name="range" value="18947-21727" /><button type="submit" title="Création d&#039;un utilisateur supplémentaire" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit18" id="creation_des_services_et_leurs_points_d_acces">Création des services et leurs points d&#039;accès</h3>
<div class="level3">

</div>

<h4 id="le_service_keystone">Le service Keystone</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ service-create --name=keystone --type=identity --description=&#039;Keystone Identity Service&#039;</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description | Keystone Identity Service        |
| id          | 41905e02540d48228166c6d06ddcd9f0 |
| name        | keystone                         |
| type        | identity                         |
+-------------+----------------------------------+</pre>

</div>

<h4 id="le_point_d_acces_keystone">Le point d&#039;accès Keystone</h4>
<div class="level4">
<pre class="code">keystone --token ADMPASSWD --endpoint http://192.168.1.250:35357/v2.0/ endpoint-create --region RegionOne --service_id=41905e02540d48228166c6d06ddcd9f0 --publicurl=http://192.168.1.250:5000/v2.0 --internalurl=http://192.168.1.250:5000/v2.0 --adminurl=http://192.168.1.250:35357/v2.0</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| adminurl    | http://192.168.2.250:35357/v2.0  |
| id          | f1c517d5754a493fa67fc21b3f4264c4 |
| internalurl | http://192.168.2.250:5000/v2.0   |
| publicurl   | http://192.168.2.250:5000/v2.0   |
| region      | RegionOne                        |
| service_id  | 41905e02540d48228166c6d06ddcd9f0 |
+-------------+----------------------------------+</pre>

<p>
Les services et points d&#039;accès des autres services seront ajoutés après l&#039;installation du composant bien qu&#039;il soit possible de les définir dès maintenant.
</p>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Création des services et leurs points d&#039;accès] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creation_des_services_et_leurs_points_d_acces" /><input type="hidden" name="codeblockOffset" value="43" /><input type="hidden" name="range" value="21728-23433" /><button type="submit" title="Création des services et leurs points d&#039;accès" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit19" id="utilisation">Utilisation</h3>
<div class="level3">

<p>
Il y a plusieurs façons possibles de s&#039;identifier en lançant une commande keystone.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> La méthode d&#039;identification utilisée précédemment avec le mot de passe d&#039;administration (variable <em>admin_token</em> définie dans le fichier <strong>keystone.conf</strong>) avec les arguments <code>--endpoint</code> et <code>--token</code></div>
</li>
</ul>
<pre class="code">keystone --endpoint http://localhost:35357/v2.0 --token  ADMPASSWD user-list</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> La méthode user/password avec les arguments <code>--username</code>, <code>--tenant_name</code>, <code>--password</code>, après définition des utilisateurs, rôles et projets, et l&#039;argument  <code>--auth_url</code>.</div>
</li>
</ul>
<pre class="code">keystone --username admin --password ADMPASSWD --tenant_name admin --auth_url http://localhost:5000/v2.0 user-list</pre>

<p>
Pour les deux méthodes, il est possible d&#039;utiliser des variables d&#039;environnement pour éviter de ressaisir tous les arguments à chaque commande.
</p>

<p>
<em class="u">1ère méthode</em>:
</p>
<pre class="code">export SERVICE_ENDPOINT=http://localhost:5000/v2.0/
export SERVICE_TOKEN=ADMPASSWD
keystone user-list</pre>

<p>
<em class="u">2ème méthode</em>:
</p>
<pre class="code">export OS_TENANT_NAME=admin 
export OS_USERNAME=admin 
export OS_PASSWORD=ADMPASSWD 
export OS_AUTH_URL=&quot;http://localhost:5000/v2.0/&quot;
keystone user-list</pre>

<p>
Pour éviter de refaire un export des variables à chaque ouverture de terminal, vous pouvez les exporter automatiquement.<br/>

Il suffit de <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">créer</a> un fichier <strong>.novarc</strong> dans votre <em>Dossier Personnel</em> contenant les lignes suivantes 
</p>
<pre class="file">export OS_TENANT_NAME=admin
export OS_USERNAME=admin
export OS_PASSWORD=ADMPASSWD
export OS_AUTH_URL=&quot;http://192.168.1.250:5000/v2.0/&quot;</pre>

<p>
Ajoutez ensuite la ligne suivante a la fin de votre fichier <strong>.bashrc</strong>
</p>
<pre class="code">source ~/.novarc</pre>

<p>
Les variables seront exportées comme variables d&#039;environnement et vous pourrez utiliser toutes les commandes sous la forme simple sans ressaisir les informations d&#039;authentification.
</p>
<pre class="code">keystone user-list</pre>
<pre class="code">+----------------------------------+---------+--------------------------+--------+
|                id                | enabled |          email           |  name  |
+----------------------------------+---------+--------------------------+--------+
| 13247a59ad844458ad36c0bd06451376 | True    | xavier@example.com       | xavier |
| 5c54624fef2242e185af10b7a2a2768f | True    | nova@example.com         | nova   |
| 876ef0a6c0c048039f847e61da7260b4 | True    | glance@example.com       | glance |
| c97c87b3ed894401975dd6d757b40330 | True    | admin@example.com        | admin  |
+----------------------------------+---------+--------------------------+--------+</pre>

<p>
Les commandes <code>keystone role-list</code> et <code> keystone tenant-list</code> affichent respectivement la liste des rôles et tenants.
</p>

<p>
Il est bien sûr possible d&#039;envoyer des commandes à partir de n&#039;importe quel autre ordinateur où le paquet <strong><a href="apt://python-keystoneclient" class="interwiki iw_apt" title="apt://python-keystoneclient">python-keystoneclient</a></strong> est installé.<br/>

</p>

<p>
Pour voir la liste des commandes disponibles et les détails utilisez : 
</p>
<pre class="code">keystone help [NOM DE LA COMMANDE]</pre>

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation" /><input type="hidden" name="codeblockOffset" value="47" /><input type="hidden" name="range" value="23434-26525" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit20 page-header" id="glance">Glance</h2>
<div class="level2">

<p>
La prochaine étape est l&#039;installation du service d&#039;images Glance.<br/>

C&#039;est le service chargé de distribuer les images de disque dur système utilisées par les machines virtuelles.
</p>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Glance] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="glance" /><input type="hidden" name="codeblockOffset" value="56" /><input type="hidden" name="range" value="26526-26727" /><button type="submit" title="Glance" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit21" id="preparation_de_la_base_de_donnees_mysql1">Préparation de la base de données Mysql</h3>
<div class="level3">

<p>
La commande suivante crée un utilisateur et sa base de données nommés &quot;glance&quot;. Changez SQLPASSWD par un mot de passe de votre choix.
</p>
<pre class="code">mysql -u root -p &lt;&lt;EOF
CREATE DATABASE glance;
GRANT ALL PRIVILEGES ON glance.* TO &#039;glance&#039;@&#039;%&#039; IDENTIFIED BY &#039;SQLPASSWD&#039;;
FLUSH PRIVILEGES;
EOF</pre>

</div>
<div class='secedit editbutton_section editbutton_21'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Préparation de la base de données Mysql] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="preparation_de_la_base_de_donnees_mysql1" /><input type="hidden" name="codeblockOffset" value="56" /><input type="hidden" name="range" value="26728-27078" /><button type="submit" title="Préparation de la base de données Mysql" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit22" id="installation1">Installation</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://glance,glance-api,glance-client,glance-common,glance-registry,python-glance" class="interwiki iw_apt" title="apt://glance,glance-api,glance-client,glance-common,glance-registry,python-glance">glance,glance-api,glance-client,glance-common,glance-registry,python-glance</a></strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_22'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation1" /><input type="hidden" name="codeblockOffset" value="57" /><input type="hidden" name="range" value="27079-27255" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit23" id="configuration1">Configuration</h3>
<div class="level3">

<p>
Il faut aussi créer les services et points d&#039;accès correspondants pour Keystone
</p>
<pre class="code">keystone service-create  --name=glance --type=image --description=&#039;Glance Image Service&#039;</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description | Glance Image Service             |
| id          | 39bbd3107c4c4153a408a3b6a34ef931 |
| name        | glance                           |
| type        | image                            |
+-------------+----------------------------------+</pre>
<pre class="code">keystone endpoint-create --region RegionOne --service_id=39bbd3107c4c4153a408a3b6a34ef931 --publicurl=http://192.168.1.250:9292/v1 --internalurl=http://192.168.1.250:9292/v1 --adminurl=http://192.168.1.250:9292/v1</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| adminurl    | http://192.168.1.250:9292/v1     |
| id          | 8fa4c9092dbb4ce989fdcbaceddec45d |
| internalurl | http://192.168.1.250:9292/v1     |
| publicurl   | http://192.168.1.250:9292/v1     |
| region      | RegionOne                        |
| service_id  | 39bbd3107c4c4153a408a3b6a34ef931 |
+-------------+----------------------------------+</pre>

<p>
Dans les fichiers ci-dessous, SQLPASSWD est le mot de passe MySQL <a href="#glance" title="openstack ↵" class="wikilink1">Glance</a>, ADMPASSWD le mot de passe du <a href="#creation_du_compte_interne_du_service_glance" title="openstack ↵" class="wikilink1">compte de service Glance</a>
</p>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/glance/glance-api-paste.ini</strong>, allez à la fin pour modifier ces lignes avec les valeurs correspondant à votre installation:
</p>
<pre class="file">admin_tenant_name = service
admin_user = glance
admin_password = ADMPASSWD</pre>

<p>
La section [pipeline:glance-api] doit contenir
</p>
<pre class="file">[pipeline:glance-api]
pipeline = versionnegotiation authtoken auth-context apiv1app</pre>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/glance/glance-api.conf</strong> pour y ajouter les lignes suivantes:
</p>
<pre class="file">[paste_deploy]
flavor = keystone</pre>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/glance/glance-registry.conf</strong> et modifiez la ligne suivante:
</p>
<pre class="file">sql_connection = mysql://glance:SQLPASSWD@192.168.1.250:3306/glance</pre>

<p>
et ajoutez à la fin
</p>
<pre class="file">[paste_deploy]
flavor = keystone</pre>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/glance/glance-scrubber.conf</strong> pour ajouter les lignes suivantes:
</p>
<pre class="file">sql_connection = mysql://glance:SQLPASSWD@192.168.1.250:3306/glance
sql_idle_timeout = 3600</pre>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/glance/glance-registry-paste.ini</strong> et modifiez les lignes suivantes:
</p>
<pre class="file">admin_tenant_name = service
admin_user = glance
admin_password = ADMPASSWD</pre>

<p>
et la section 
</p>
<pre class="file">[pipeline:glance-registry]
pipeline = authtoken auth-context context registryapp</pre>

<p>
Synchronisez maintenant la base de données MySQL
</p>
<pre class="code">sudo glance-manage version_control 0
sudo glance-manage db_sync</pre>

<p>
Si message d&#039;erreur &quot;CRITICAL glance [-] ValueError: Tables &quot;migrate_version&quot; have non utf8 collation, please make sure all tables are CHARSET=utf8&quot; : 
</p>
<pre class="code">mysql -u root -p glance
alter table migrate_version convert to character set utf8 collate utf8_unicode_ci;
flush privileges;
quit</pre>

<p>
Redémarrez les services pour la prise en compte des modifications
</p>
<pre class="code">sudo service glance-api restart &amp;&amp; sudo service glance-registry restart</pre>

</div>
<div class='secedit editbutton_section editbutton_23'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration1" /><input type="hidden" name="codeblockOffset" value="57" /><input type="hidden" name="range" value="27256-31055" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit24" id="utilisation1">Utilisation</h3>
<div class="level3">

<p>
Vérifiez maintenant si tout fonctionne correctement. Téléchargez une première <a href="https://fr.wikipedia.org/wiki/Image_disque" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Image_disque">image</a> pour tester:
</p>
<pre class="code">wget http://uec-images.ubuntu.com/releases/precise/release/ubuntu-12.04-server-cloudimg-amd64-disk1.img</pre>

<p>
Ajoutez maintenant l&#039;image téléchargée aux images Glance
</p>
<pre class="code">glance add name=&quot;Ubuntu 12.04 cloudimg amd64&quot; is_public=true container_format=ovf disk_format=qcow2 &lt; ubuntu-12.04-server-cloudimg-amd64-disk1.img</pre>
<pre class="code">Uploading image &#039;Ubuntu 12.04 cloudimg amd64&#039;
=====================================================================================================================================================================================================================================[100%] 136.648660M/s, ETA  0h  0m  0s
Added new image with ID: d1b7defa-0c35-4e8c-aef5-0d58c8d80a52</pre>

<p>
La commande <code>glance index</code> donne une liste des images:
</p>
<pre class="code">glance index</pre>
<pre class="code">ID                                   Name                           Disk Format          Container Format     Size          
------------------------------------ ------------------------------ -------------------- -------------------- --------------
d1b7defa-0c35-4e8c-aef5-0d58c8d80a52 Ubuntu 12.04 cloudimg amd64    qcow2                ovf                       230490112</pre>

<p>
La commande <code>glance details</code> affiche des informations détaillées sur toutes les images.
</p>
<pre class="code">glance details</pre>
<pre class="code">================================================================================
URI: http://192.168.1.250:9292/v1/images/d1b7defa-0c35-4e8c-aef5-0d58c8d80a52
Id: d1b7defa-0c35-4e8c-aef5-0d58c8d80a52
Public: Yes
Protected: No
Name: Ubuntu 12.04 cloudimg amd64
Status: active
Size: 230490112
Disk format: qcow2
Container format: ovf
Minimum Ram Required (MB): 0
Minimum Disk Required (GB): 0
Owner: 0f71e86d30e247d3b1216fe5f2f3aa50
================================================================================</pre>

<p>
La syntaxe de la commande <strong>glance add</strong> est la suivante :
</p>
<pre class="code">glance add name=&quot;&lt;Image name&gt;&quot; is_public=true container_format=&lt;container_format&gt; disk_format=&lt;disk_format&gt; &lt; &lt;filename&gt;</pre>

<p>
où:
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> &lt;Image name&gt; : Nom que l&#039;on veut donner a l&#039;image</div>
</li>
<li class="level1"><div class="li"> is_public=true : L&#039;image est visible (true) ou non (false) dans tous les projets</div>
</li>
<li class="level1"><div class="li"> &lt;container_format&gt; : Container Type de container bare pas de container, ovf OVF Container, aki ari ami Amazon kernel ramdisk ou machine</div>
</li>
<li class="level1"><div class="li"> &lt;disk_format&gt; : Format de l&#039;image raw, qcow2, vmdk, iso etc…</div>
</li>
<li class="level1"><div class="li"> &lt;filename&gt; : Le nom de l&#039;image a uploader</div>
</li>
</ul>

<p>
Pour voir la liste des commandes disponibles et les détails utilisez : 
</p>
<pre class="code">glance help [NOM DE LA COMMANDE]</pre>

</div>
<div class='secedit editbutton_section editbutton_24'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation1" /><input type="hidden" name="codeblockOffset" value="72" /><input type="hidden" name="range" value="31056-33781" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit25 page-header" id="nova">Nova</h2>
<div class="level2">

<p>
Passez maintenant à l&#039;installation de Nova, la gestion des instances des machines virtuelles, de leur espace disque et du réseau.
</p>

</div>
<div class='secedit editbutton_section editbutton_25'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Nova] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="nova" /><input type="hidden" name="codeblockOffset" value="81" /><input type="hidden" name="range" value="33782-33931" /><button type="submit" title="Nova" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit26" id="preparation_de_la_base_de_donnees_mysql2">Préparation de la base de données Mysql</h3>
<div class="level3">

<p>
La commande suivante crée un utilisateur et sa base de données nommés &quot;nova&quot;. Changez SQLPASSWD par un mot de passe de votre choix
</p>
<pre class="code">mysql -u root -p &lt;&lt;EOF
CREATE DATABASE nova;
GRANT ALL PRIVILEGES ON nova.* TO &#039;nova&#039;@&#039;%&#039; IDENTIFIED BY &#039;SQLPASSWD&#039;;
EOF</pre>

</div>
<div class='secedit editbutton_section editbutton_26'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Préparation de la base de données Mysql] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="preparation_de_la_base_de_donnees_mysql2" /><input type="hidden" name="codeblockOffset" value="81" /><input type="hidden" name="range" value="33932-34257" /><button type="submit" title="Préparation de la base de données Mysql" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit27" id="installation2">Installation</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://nova-api,nova-cert,nova-common,nova-compute,nova-compute-kvm,nova-doc,nova-network,nova-objectstore,nova-scheduler,novnc,nova-consoleauth,nova-volume,python-nova,python-novaclient" class="interwiki iw_apt" title="apt://nova-api,nova-cert,nova-common,nova-compute,nova-compute-kvm,nova-doc,nova-network,nova-objectstore,nova-scheduler,novnc,nova-consoleauth,nova-volume,python-nova,python-novaclient">nova-api nova-cert nova-common nova-compute nova-compute-kvm nova-doc nova-network nova-objectstore nova-scheduler novnc nova-consoleauth nova-volume python-nova python-novaclient</a></strong>.
</p>

</div>
<div class='secedit editbutton_section editbutton_27'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation2" /><input type="hidden" name="codeblockOffset" value="82" /><input type="hidden" name="range" value="34258-34719" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit28" id="configuration2">Configuration</h3>
<div class="level3">

<p>
Création des services et points d&#039;accès pour Keystone, au nombre de 2: les services de type <a href="#service_compute" title="openstack ↵" class="wikilink1">compute</a> (auquel on donne le nom de &quot;nova&quot;) et de type <a href="#service_volume" title="openstack ↵" class="wikilink1">volume</a> (auquel on donne le nom de &quot;volume&quot;).
</p>

</div>

<h5 id="service_compute">Service compute</h5>
<div class="level5">
<pre class="code">keystone service-create --name=nova --type=compute --description=&#039;OpenStack Compute Service&#039;</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description | OpenStack Compute Service        |
| id          | 4ba6c7149dd1421f8c429afc0c8dbdfe |
| name        | nova                             |
| type        | compute                          |
+-------------+----------------------------------+</pre>
<pre class="code">keystone endpoint-create --region RegionOne --service_id=4ba6c7149dd1421f8c429afc0c8dbdfe --publicurl=&#039;http://192.168.1.250:8774/v2/%(tenant_id)s&#039; --internalurl=&#039;http://192.168.1.250:8774/v2/%(tenant_id)s&#039; --adminurl=&#039;http://192.168.1.250:8774/v2/%(tenant_id)s&#039;</pre>
<pre class="code">+-------------+--------------------------------------------+
|   Property  |                   Value                    |
+-------------+--------------------------------------------+
| adminurl    | http://192.168.1.250:8774/v2/%(tenant_id)s |
| id          | f783461a1d0f4d9fb8e6dabc0fd0a177           |
| internalurl | http://192.168.1.250:8774/v2/%(tenant_id)s |
| publicurl   | http://192.168.1.250:8774/v2/%(tenant_id)s |
| region      | RegionOne                                  |
| service_id  | 4ba6c7149dd1421f8c429afc0c8dbdfe           |
+-------------+--------------------------------------------+</pre>

</div>

<h5 id="service_volume">Service volume</h5>
<div class="level5">
<pre class="code">keystone service-create --name=volume --type=volume --description=&#039;OpenStack Volume Service&#039;</pre>
<pre class="code">+-------------+----------------------------------+
|   Property  |              Value               |
+-------------+----------------------------------+
| description | OpenStack Volume Service         |
| id          | de65a68c5ae34737bc6678f6c7bc884a |
| name        | volume                           |
| type        | volume                           |
+-------------+----------------------------------+</pre>
<pre class="code">keystone endpoint-create --region RegionOne --service_id=de65a68c5ae34737bc6678f6c7bc884a --publicurl=&#039;http://192.168.1.250:8776/v1/%(tenant_id)s&#039; --internalurl=&#039;http://192.168.1.250:8776/v1/%(tenant_id)s&#039; --adminurl=&#039;http://192.168.1.250:8776/v1/%(tenant_id)s&#039;</pre>
<pre class="code">+-------------+--------------------------------------------+
|   Property  |                   Value                    |
+-------------+--------------------------------------------+
| adminurl    | http://192.168.1.250:8776/v1/%(tenant_id)s |
| id          | 36834fdc7ce3410a8442dffd90c3d3e2           |
| internalurl | http://192.168.1.250:8776/v1/%(tenant_id)s |
| publicurl   | http://192.168.1.250:8776/v1/%(tenant_id)s |
| region      | RegionOne                                  |
| service_id  | de65a68c5ae34737bc6678f6c7bc884a           |
+-------------+--------------------------------------------+</pre>

<p>
<br/>

</p>

<p>
Dans les fichiers ci-dessous, SQLPASSWD est le mot de passe MySQL <a href="#nova" title="openstack ↵" class="wikilink1">Nova</a>, ADMPASSWD le mot de passe du <a href="#creation_du_compte_interne_du_service_nova" title="openstack ↵" class="wikilink1">compte de service Nova</a>
</p>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/nova/api-paste.ini</strong> et modifiez les lignes:
</p>
<pre class="file">admin_tenant_name = service
admin_user = nova
admin_password = ADMPASSWD</pre>

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/nova/nova.conf</strong> et remplacer tout avec les lignes ci dessous.<br/>

La configuration obtenue utilisera le mode <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>. La ligne &quot;nova.scheduler.simple.SimpleScheduler&quot; définit une utilisation avec un seul serveur.<br/>

Pour un mode VLAN, pour utiliser plusieurs serveurs ou d&#039;autres options, reportez-vous à la <a href="http://docs.openstack.org/" class="urlextern" title="http://docs.openstack.org/" rel="nofollow">documentation OpenStack</a> <strong>(en)</strong>.
</p>
<pre class="file"># LOGS/STATE
--verbose
--logdir=/var/log/nova
--state_path=/var/lib/nova
--lock_path=/var/lock/nova
--allow_admin_api=true
--use_deprecated_auth=false
--cc_host=192.168.1.250
--nova_url=http://192.168.1.250:8774/v1.1/
--routing_source_ip=192.168.1.250
--s3_host=192.168.1.250
--ec2_host=192.168.1.250
--ec2_url=http://192.168.1.250:8773/services/Cloud
--keystone_ec2_url=http://192.168.1.250:5000/v2.0/ec2tokens
--scheduler_driver=nova.scheduler.simple.SimpleScheduler
#root_helper est deprecie, rootwrap_config=/etc/nova/rootwrap.conf
--root_helper=sudo nova-rootwrap
# AUTHENTICATION
--auth_strategy=keystone
# VOLUMES
--iscsi_helper=tgtadm
--iscsi_ip_prefix=172.16.0
# DATABASE
--sql_connection=mysql://nova:SQLPASSWD@192.168.1.250/nova
# COMPUTE
--libvirt_type=kvm
--connection_type=libvirt
--libvirt_use_virtio_for_bridges=true
--api_paste_config=/etc/nova/api-paste.ini
--allow_resize_to_same_host=True
--start_guests_on_host_boot=true
--resume_guests_state_on_host_boot=true
# RABBITMQ
--rabbit_host=192.168.1.250
# GLANCE
--image_service=nova.image.glance.GlanceImageService
--glance_api_servers=192.168.1.250:9292
# NETWORK
--network_manager=nova.network.manager.FlatDHCPManager
--dhcpbridge_flagfile=/etc/nova/nova.conf
--dhcpbridge=/usr/bin/nova-dhcpbridge
--fixed_range=172.16.0.0/24
--flat_network_dhcp_start=172.16.0.2
--flat_network_bridge=br1
--flat_interface=eth1
--network_size=256
--flat_injected=False
--my_ip=192.168.1.250
--floating_range=192.168.1.0/24 
--force_dhcp_release
--public_interface=br0
# NOVNC CONSOLE
--vnc_enabled=true
--novncproxy_base_url=http://192.168.1.250:6080/vnc_auto.html
--vncserver_proxyclient_address=127.0.0.1
--vncserver_listen=127.0.0.1</pre>

<p>
Toutes les entrées <em>--flat…</em> correspondent au réseau privé(172.16.0.0/24, début 172.16.0.2), destiné aux communications entre les VMs (pour Virtual Machine ou machines virtuelles), les autres serveurs Nova ou de stockage s&#039;il y a…<br/>

</p>

<p>
<em>--floating_range</em> est le réseau public (<abbr title="Réseau Local">LAN</abbr> ou Internet) sur lequel est branché l&#039;interface br0, pour attribuer une adresse aux VMs sur le réseau public. L&#039;adresse 192.168.1.250 est celle de l&#039;interface br0, ne remplacez pas par 127.0.0.1, ça ne fonctionnera pas.<br/>

</p>

<p>
Modifiez les <a href="/droits" class="wikilink1" title="droits">droits</a> sur le répertoire <strong>/etc/nova</strong>
</p>
<pre class="code">sudo chown -R nova:nova /etc/nova/</pre>

<p>
Redémarrez tous les services nova
</p>
<pre class="code">for a in libvirt-bin nova-network nova-compute nova-api nova-objectstore nova-scheduler nova-volume nova-cert nova-consoleauth novnc; do sudo service &quot;$a&quot; stop; done
for a in libvirt-bin nova-network nova-compute nova-api nova-objectstore nova-scheduler nova-volume nova-cert nova-consoleauth novnc; do sudo service &quot;$a&quot; start; done</pre>

<p>
Synchronisez la base de données
</p>
<pre class="code">sudo nova-manage db sync</pre>

<p>
Redémarrez de nouveau tous les services
</p>
<pre class="code">for a in libvirt-bin nova-network nova-compute nova-api nova-objectstore nova-scheduler nova-volume nova-cert nova-consoleauth novnc; do sudo service &quot;$a&quot; stop; done
for a in libvirt-bin nova-network nova-compute nova-api nova-objectstore nova-scheduler nova-volume nova-cert nova-consoleauth novnc; do sudo service &quot;$a&quot; start; done</pre>

</div>
<div class='secedit editbutton_section editbutton_28'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration2" /><input type="hidden" name="codeblockOffset" value="82" /><input type="hidden" name="range" value="34720-41973" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit29" id="utilisation2">Utilisation</h3>
<div class="level3">

<p>
Vous pouvez maintenant vérifier que tous les services fonctionnent, le résultat dans la colonne <em>STATE</em> doit être
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> un smiley, représenté par :-), pour &quot;OK&quot;. </div>
</li>
<li class="level1"><div class="li"> un XXX : quelque chose n&#039;as pas fonctionné, consultez les logs dans <strong>/var/log/nova/nova-le_nom_du_service_KO</strong>.</div>
</li>
</ul>
<pre class="code">sudo nova-manage service list</pre>
<pre class="code">2012-05-16 00:20:09 DEBUG nova.utils [req-527f4f50-f02e-41da-bc96-43d3d9070807 None None] backend &lt;module &#039;nova.db.sqlalchemy.api&#039; from &#039;/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.pyc&#039;&gt; from (pid=9869) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:658
Binary           Host                                 Zone             Status     State Updated_At
nova-scheduler   myhost                                 nova             enabled    :-)   2012-05-15 22:20:04
nova-volume      myhost                                 nova             enabled    :-)   2012-05-15 22:20:03
nova-compute     myhost                                 nova             enabled    :-)   2012-05-15 22:20:05
nova-network     myhost                                 nova             enabled    :-)   2012-05-15 22:20:03
nova-consoleauth myhost                                 nova             enabled    :-)   2012-05-15 22:20:03
nova-cert        myhost                                 nova             enabled    :-)   2012-05-15 22:20:04</pre>
<div class="noteimportant">L&#039;affichage du résultat d&#039;une commande est beaucoup plus rapide que son exécution réelle. Si vous n&#039;obtenez pas de message d&#039;erreur, patientez quelques instants et vérifiez avec une commande d&#039;affichage que l&#039;action a bien été prise en compte.<br/>

Relancer une commande ou demander son annulation alors qu&#039;elle est en cours d&#039;exécution peut rendre le composant Nova instable et empêcher la suppression de l&#039;action demandée ou laisser des entrées indésirables dans la base de données. Exemples: l&#039;attribution d&#039;une adresse IP publique ou la création d&#039;un disque virtuel.<br/>

N&#039;hésitez pas à… patienter
</div>
</div>

<h4 id="images_disques">Images disques</h4>
<div class="level4">

<p>
Listez les images disque fournies par le service Glance
</p>
<pre class="code">nova image-list</pre>
<pre class="code">+--------------------------------------+-----------------------------+--------+--------+
|                  ID                  |             Name            | Status | Server |
+--------------------------------------+-----------------------------+--------+--------+
| d1b7defa-0c35-4e8c-aef5-0d58c8d80a52 | Ubuntu 12.04 cloudimg amd64 | ACTIVE |        |
+--------------------------------------+-----------------------------+--------+--------+</pre>

</div>

<h4 id="reseaux">Réseaux</h4>
<div class="level4">

<p>
Profitez-en pour créer les réseaux privés et publics. Les adresses seront enregistrées dans la base MySQL.
Le réseau public
</p>
<pre class="code">sudo nova-manage floating create --ip_range=192.168.1.0/24</pre>

<p>
Le réseau privé, destiné aux communications entre les VMs, les autres serveurs Nova ou de stockage s&#039;il y a…
</p>
<pre class="code">sudo nova-manage network create private --fixed_range_v4=172.16.0.0/24 --num_networks=1 --bridge=br1 --bridge_interface=eth1 --network_size=256</pre>

</div>

<h4 id="parefeu">Parefeu</h4>
<div class="level4">

<p>
Par défaut, les règles de parefeu bloquent les paquets entrants sur l&#039;interface publique à destination des VMs. Il est possible de créer des ensembles de règles. L&#039;ensemble des règles utilisées devra être spécifié au lancement de chaque instance. Ci-dessous un exemple de création de règles sur l&#039;ensemble &quot;default&quot; créé automatiquement à l&#039;installation, si vous voulez autoriser le ping et <a href="/ssh" class="wikilink1" title="ssh">SSH</a> pour toutes les VMs sur l&#039;interface publique ( icmp -1 correspond a tout ).
</p>
<pre class="code">nova secgroup-add-rule default icmp -1 -1  0.0.0.0/0</pre>
<pre class="code">+-------------+-----------+---------+-----------+--------------+
| IP Protocol | From Port | To Port |  IP Range | Source Group |
+-------------+-----------+---------+-----------+--------------+
| icmp        | -1        | -1      | 0.0.0.0/0 |              |
+-------------+-----------+---------+-----------+--------------+</pre>
<pre class="code">nova secgroup-add-rule default tcp 22 22 0.0.0.0/0</pre>
<pre class="code">+-------------+-----------+---------+-----------+--------------+
| IP Protocol | From Port | To Port |  IP Range | Source Group |
+-------------+-----------+---------+-----------+--------------+
| tcp         | 22        | 22      | 0.0.0.0/0 |              |
+-------------+-----------+---------+-----------+--------------+</pre>

<p>
Listez les règles de ports autorisés sur le groupe de règles &quot;default&quot;
</p>
<pre class="code">nova secgroup-list-rules default</pre>
<pre class="code">+-------------+-----------+---------+-----------+--------------+
| IP Protocol | From Port | To Port |  IP Range | Source Group |
+-------------+-----------+---------+-----------+--------------+
| icmp        | -1        | -1      | 0.0.0.0/0 |              |
| tcp         | 22        | 22      | 0.0.0.0/0 |              |
+-------------+-----------+---------+-----------+--------------+</pre>

</div>
<div class='secedit editbutton_section editbutton_29'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation2" /><input type="hidden" name="codeblockOffset" value="96" /><input type="hidden" name="range" value="41974-46947" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit30" id="premiere_machine_virtuelle">Première machine virtuelle</h3>
<div class="level3">

<p>
Maintenant que tout fonctionne, vous allez pouvoir créez votre première VM.<br/>

Assurez-vous d&#039;avoir créé une clé <a href="/ssh" class="wikilink1" title="ssh">SSH</a>:
</p>
<pre class="code">ssh-keygen -t rsa</pre>

<p>
Ajoutez-la au serveur
</p>
<pre class="code">nova keypair-add --pub_key ~/.ssh/id_rsa.pub key1</pre>

<p>
Il faut définir les spécifications de la future VM, pour voir les possibilités, utilisez la commande ci-dessous, la création de vos propres définitions étant bien sûr possible:
</p>
<pre class="code">nova flavor-list</pre>
<pre class="code">+----+-----------+-----------+------+-----------+------+-------+-------------+
| ID |    Name   | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |
+----+-----------+-----------+------+-----------+------+-------+-------------+
| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         |
| 2  | m1.small  | 2048      | 10   | 20        |      | 1     | 1.0         |
| 3  | m1.medium | 4096      | 10   | 40        |      | 2     | 1.0         |
| 4  | m1.large  | 8192      | 10   | 80        |      | 4     | 1.0         |
| 5  | m1.xlarge | 16384     | 10   | 160       |      | 8     | 1.0         |
+----+-----------+-----------+------+-----------+------+-------+-------------+</pre>

<p>
Pour la suite, il sera utilisé l&#039;ID 1 correspondant à une machine disposant de 512 Mb de RAM, 1 CPU virtuel et aucun disque supplémentaire.
</p>

<p>
Lancez votre première VM avec la commande <code>nova boot</code>, le paramètre <em>--flavor</em> indique les spécifications choisies, <em>--image</em> l&#039;ID de l&#039;image fournie par glance, vient ensuite le nom et la clé ssh utilisée. Indiquez aussi l&#039;ensemble de règles de <a href="#parefeu" title="openstack ↵" class="wikilink1">parefeu</a>, sinon c&#039;est l&#039;ensemble &quot;default&quot; qui est appliqué.
</p>
<pre class="code">nova boot --flavor 1 --image d1b7defa-0c35-4e8c-aef5-0d58c8d80a52 myfirstvm --key_name key1 &amp;</pre>
<pre class="code">[1] 5472
+-------------------------------------+--------------------------------------+
|               Property              |                Value                 |
+-------------------------------------+--------------------------------------+
| OS-DCF:diskConfig                   | MANUAL                               |
| OS-EXT-SRV-ATTR:host                | myhost                               |
| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                 |
| OS-EXT-SRV-ATTR:instance_name       | instance-00000003                    |
| OS-EXT-STS:power_state              | 0                                    |
| OS-EXT-STS:task_state               | scheduling                           |
| OS-EXT-STS:vm_state                 | building                             |
| accessIPv4                          |                                      |
| accessIPv6                          |                                      |
| adminPass                           | 4BMRzdXgtLvF                         |
| config_drive                        |                                      |
| created                             | 2012-07-09T17:09:18Z                 |
| flavor                              | m1.tiny                              |
| hostId                              |                                      |
| id                                  | 9360ae16-6b3a-4eb6-9b15-6b05d3f83989 |
| image                               | Ubuntu 12.04 cloudimg amd64          |
| key_name                            | key1                                 |
| metadata                            | {}                                   |
| name                                | myfirstvm                            |
| progress                            | 0                                    |
| status                              | BUILD                                |
| tenant_id                           | 0f71e86d30e247d3b1216fe5f2f3aa50     |
| updated                             | 2012-07-09T17:09:19Z                 |
| user_id                             | c97c87b3ed894401975dd6d757b40330     |
+-------------------------------------+--------------------------------------+

[1]+  Fini                    nova boot --flavor 1 --image d1b7defa-0c35-4e8c-aef5-0d58c8d80a52 myfirstvm --key_name key1
</pre>

<p>
Un récapitulatif des propriétés de la machine s&#039;affiche. Pour le réafficher, utilisez la commande 
</p>
<pre class="code">nova show myfirstvm</pre>

<p>
Pour lister les VM existantes
</p>
<pre class="code">nova list</pre>
<pre class="code">+--------------------------------------+-----------+--------+--------------------+
|                  ID                  |    Name   | Status |      Networks      |
+--------------------------------------+-----------+--------+--------------------+
| 9360ae16-6b3a-4eb6-9b15-6b05d3f83989 | myfirstvm | ACTIVE | private=172.16.0.2 |
+--------------------------------------+-----------+--------+--------------------+</pre>

<p>
Connectez-vous sur la VM
</p>
<pre class="code">ssh ubuntu@172.16.0.2</pre>
<pre class="code">Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-25-virtual x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Mon Jul  9 17:10:53 UTC 2012
.
.
.
To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.
See &quot;man sudo_root&quot; for details.

ubuntu@myfirstvm:~$ exit
logout
Connection to 172.16.0.2 closed.</pre>

<p>
Vous pouvez créez un disque dur supplémentaire
</p>
<pre class="code">nova volume-create --display_name &quot;volume1&quot; 10</pre>

<p>
Attachez-le à la VM
</p>
<pre class="code">nova volume-attach myfirstvm 1 /dev/vdb</pre>

<p>
Vérifiez le rattachement
</p>
<pre class="code">nova volume-list</pre>
<pre class="code">+----+--------+--------------+------+-------------+--------------------------------------+
| ID | Status | Display Name | Size | Volume Type |             Attached to              |
+----+--------+--------------+------+-------------+--------------------------------------+
| 1  | in-use | volume1      | 10   | None        | 9360ae16-6b3a-4eb6-9b15-6b05d3f83989 |
+----+--------+--------------+------+-------------+--------------------------------------+</pre>

<p>
Vous pouvez maintenant vous reconnecter à la VM pour partitionner ce disque et l&#039;utiliser.
</p>

<p>
Connectez maintenant cette instance virtuelle à votre <abbr title="Réseau Local">LAN</abbr>.<br/>

Il faut tout d&#039;abord allouer une adresse IP 
</p>
<pre class="code">nova floating-ip-create</pre>
<pre class="code">+-------------+-------------+----------+------+
|      Ip     | Instance Id | Fixed Ip | Pool |
+-------------+-------------+----------+------+
| 192.168.1.1 | None        | None     | nova |
+-------------+-------------+----------+------+</pre>

<p>
Puis attachez cette adresse à la VM
</p>
<pre class="code">nova add-floating-ip myfirstvm 192.168.1.1</pre>

<p>
Patientez quelques secondes et vérifiez la présence sur votre <abbr title="Réseau Local">LAN</abbr> d&#039;une machine à cette adresse
</p>
<pre class="code">ping -c 2 192.168.1.1</pre>
<pre class="code">PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.
64 bytes from 192.168.1.1: icmp_req=1 ttl=64 time=0.589 ms
64 bytes from 192.168.1.1: icmp_req=2 ttl=64 time=0.452 ms

--- 192.168.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.452/0.520/0.589/0.072 ms</pre>

<p>
La commande nova list vous confirme l&#039;attribution
</p>
<pre class="code">nova list</pre>
<pre class="code">+--------------------------------------+-----------+--------+---------------------------------+
|                  ID                  |    Name   | Status |             Networks            |
+--------------------------------------+-----------+--------+---------------------------------+
| 9360ae16-6b3a-4eb6-9b15-6b05d3f83989 | myfirstvm | ACTIVE | private=172.16.0.2, 192.168.1.1 |
+--------------------------------------+-----------+--------+---------------------------------+</pre>

<p>
Il est bien sûr possible d&#039;envoyer des commandes à partir de n&#039;importe quel autre ordinateur où les paquets <strong><a href="apt://python-novaclient,python-nova-adminclient" class="interwiki iw_apt" title="apt://python-novaclient,python-nova-adminclient">python-novaclient,python-nova-adminclient</a></strong> sont installés.<br/>

</p>

<p>
Pour voir la liste des commandes disponibles et les détails utilisez : 
</p>
<pre class="code">nova help [NOM DE LA COMMANDE]</pre>

</div>
<div class='secedit editbutton_section editbutton_30'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Première machine virtuelle] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="premiere_machine_virtuelle" /><input type="hidden" name="codeblockOffset" value="108" /><input type="hidden" name="range" value="46948-54842" /><button type="submit" title="Première machine virtuelle" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit31 page-header" id="dashboard_horizon">Dashboard Horizon</h2>
<div class="level2">

<p>
L&#039;interface graphique, le Dashboard Horizon, a été développée pour simplifier l&#039;administration du serveur et des projets. L&#039;accès se fait à partir d&#039;un <a href="/navigateur" class="wikilink1" title="navigateur">navigateur</a> web pointant à l&#039;adresse du serveur.<br/>

Les différents services doivent être installés et configurés avant de pouvoir l&#039;utiliser. Une grande partie des commandes est alors à portée d&#039;un clic de souris.<br/>

</p>

</div>
<div class='secedit editbutton_section editbutton_31'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Dashboard Horizon] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="dashboard_horizon" /><input type="hidden" name="codeblockOffset" value="131" /><input type="hidden" name="range" value="54843-55257" /><button type="submit" title="Dashboard Horizon" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit32" id="installation3">Installation</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://apache2,libapache2-mod-wsgi,openstack-dashboard" class="interwiki iw_apt" title="apt://apache2,libapache2-mod-wsgi,openstack-dashboard">apache2,libapache2-mod-wsgi,openstack-dashboard</a></strong>
</p>

<p>
Redémarrez le serveur web <a href="/apache2" class="wikilink1" title="apache2">Apache</a> pour vérifier que tout est OK
</p>
<pre class="code">sudo service apache2 restart</pre>

</div>
<div class='secedit editbutton_section editbutton_32'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation3" /><input type="hidden" name="codeblockOffset" value="131" /><input type="hidden" name="range" value="55258-55530" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit33" id="utilisation3">Utilisation</h3>
<div class="level3">

<p>
Ouvrez votre <a href="/navigateur" class="wikilink1" title="navigateur">navigateur</a> favori à l&#039;adresse de votre interface publique ou 127.0.0.1<br/>

</p>

<p>
<a href="/_detail/dashboard.png?id=openstack" class="media" title="dashboard.png"><img src="/_media/dashboard.png?w=600&amp;tok=cbefa9" class="mediacenter img-responsive" title="Interface de dashboard Horizon" alt="Interface de dashboard Horizon" width="600" /></a>
</p>
<div class="noteimportant">Comme pour les commandes shell, l&#039;affichage du résultat d&#039;une commande ne garantit pas qu&#039;elle soit entièrement exécutée. Si vous n&#039;obtenez pas de message d&#039;erreur, la mise à jour de la page peut demander quelques secondes supplémentaires.<br/>

Relancer une commande ou demander son annulation alors qu&#039;elle est en cours d&#039;exécution peut rendre le composant Nova instable et empêcher la suppression de l&#039;action demandée ou laisser des entrées indésirables dans la base de données. Exemple: lors de la suppression d&#039;un disque virtuel, les données sont supprimées avant que l&#039;espace ne soit libéré.<br/>

N&#039;hésitez pas à… patienter
</div><div class="noteimportant">L&#039;url par défaut est <a href="http://IP/horizon" class="urlextern" title="http://IP/horizon" rel="nofollow">http://IP/horizon</a>
</div>
<p>
Les identifiants de connexion de l&#039;administrateur sont les mêmes que ceux du fichier <strong>.novarc</strong>. Si vous avez suivi ce document sans rien changer, il s&#039;agit donc pour le compte d&#039;administration de:<br/>

<em>Username </em>:	<a href="#creation_du_compte_administrateur" title="openstack ↵" class="wikilink1">admin</a>    <em>Password</em>: 	<a href="#creation_du_compte_administrateur" title="openstack ↵" class="wikilink1">ADMPASSWD</a>.<br/>

Les comptes qui ont pour rôle &quot;admin&quot; ont accès à l&#039;interface d&#039;administration sur le Dashboard, ainsi qu&#039;à leur(s) projet(s). Les rôles &quot;Member&quot; n&#039;ont accès qu&#039;à leur(s) projet(s).
</p>

</div>

<h4 id="acces_admin">Accès Admin</h4>
<div class="level4">

<p>
Dans l&#039;ordre les différents menus :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <em>Overview</em> : Récapitulatif de l&#039;usage des serveurs par projet, utilisation actuelle en nombre de CPU virtuels, RAM et Disques puis compteur en CPU et espace disque(<abbr title="Gigabyte">GB</abbr>) par heures.</div>
</li>
<li class="level1"><div class="li"> <em>Instances</em> : Liste des instances de machines virtuelles actuelles plus quelques infos globales comme le projet auquel elles appartiennent, le serveur hôte, l&#039;adresse IP, la taille, le statut et les actions en cours.</div>
</li>
<li class="level1"><div class="li"> <em>Services</em> : Liste des services activés et le serveur hôte.</div>
</li>
<li class="level1"><div class="li"> <em>Flavors</em> : La liste des types d&#039;instances disponibles, leurs spécifications en nombre de CPUs, mémoire, espace disque. La création de nouvelles définitions d&#039;instance est possible.</div>
</li>
<li class="level1"><div class="li"> <em>Images</em> : Les images disques stockées par le service Glance.</div>
</li>
<li class="level1"><div class="li"> <em>Projects</em> : les projets existants et leur statut. Il est possible de créer de nouveaux projets.</div>
</li>
<li class="level1"><div class="li"> <em>Users</em> : La liste des utilisateurs enregistrés, avec la possibilité d&#039;ajouter ou d&#039;éditer les détails mais pas d&#039;ajouter l&#039;utilisateur à plusieurs projets.</div>
</li>
<li class="level1"><div class="li"> <em>Quotas</em> : Les quotas définis sur les ressources des serveurs, pas de modification possible.</div>
</li>
</ul>

</div>

<h4 id="acces_projets">Accès projets</h4>
<div class="level4">

<p>
Un bouton permet de basculer entre les différents projets dont l&#039;utilisateur est membre, si il y a.
Puis viennent les menus :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <em>Overview</em> : Récapitulatif, comme dans la partie Admin, mais ne concernant que le projet sélectionné.</div>
</li>
<li class="level1"><div class="li"> <em>Instances &amp; Volumes</em> : La liste des instances existantes et les possibilités de les éditer, la création ou modification des volumes disques virtuels.</div>
</li>
<li class="level1"><div class="li"> <em>Images &amp; Snapshots</em> : Liste des images autorisées pour le projet, sert a lancer de nouvelles instances. Regroupe aussi les instantanés disponibles, instances et volumes disques.</div>
</li>
<li class="level1"><div class="li"> <em>Acces &amp; Security</em> : Les adresses IP disponibles pour connecter les instances au réseau public avec possibilité de création, les groupes de règles de pare-feu et leur interface d&#039;édition, et enfin la liste des clés SSH avec l&#039;import ou la création de certificat.</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_33'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation3" /><input type="hidden" name="codeblockOffset" value="132" /><input type="hidden" name="range" value="55531-59018" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit34 page-header" id="creez_vos_propres_images">Créez vos propres images</h2>
<div class="level2">

<p>
L&#039;intérêt d&#039;OpenStack étant de déployer rapidement des instances de machines virtuelles, ça ne servirait à rien de devoir passer ensuite des heures à les configurer. La création de vos propres images vous permettra de gagner un temps précieux.<br/>

Plusieurs grandes distributions ont été testées avec succès, dont Ubuntu et Debian, RedHat et Centos mais aussi Mandriva. D&#039;autres systèmes peuvent aussi servir comme FreeBSD ou encore Windows.<br/>

Pour un système Linux, les pré-requis sont : un système à jour, Curl et un serveur SSH. Pour FreeBSD ou Windows, prévoyez l&#039;installation du pilote <em>Virtio</em>.(driver Windows signé disponible <a href="http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/" class="urlextern" title="http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/" rel="nofollow">ici</a>).<br/>

</p>

<p>
Installez et configurez une VM avec <a href="/kvm" class="wikilink1" title="kvm">KVM</a>, installez les logiciels et services voulus et les comptes utilisateurs. Gardez à l&#039;esprit que tout ce que vous faites sur cette image se retrouvera sur chaque instance. Et à l&#039;inverse, tout ce que vous n&#039;aurez pas fait sera aussi à refaire à chaque nouvelle VM.<br/>

</p>

<p>
Pour simplifier l&#039;administration des comptes sur les instances, l&#039;utilisation d&#039;un annuaire <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> facilite grandement le travail. Il suffira ensuite de faire les changements sur l&#039;annuaire pour ne pas être obligé de remettre ses images à jour.<br/>

Pour finir, pour les images Linux, <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/rc.local</strong> et ajoutez les lignes suivantes avant la ligne &quot;exit 0&quot; (ou avant &quot;/var/lock/subsys/local&quot; pour Centos). Ceci permettra à l&#039;instance de récupérer les clés SSH au lancement.
</p>
<pre class="file">echo &gt;&gt; /root/.ssh/authorized_keys
curl -m 10 -s http://169.254.169.254/latest/meta-data/public-keys/0/openssh-key | grep &#039;ssh-rsa&#039; &gt;&gt; /root/.ssh/authorized_keys
echo &quot;AUTHORIZED_KEYS:&quot;
echo &quot;************************&quot;
cat /root/.ssh/authorized_keys
echo &quot;************************&quot;</pre>

<p>
Une dernière précaution à prendre pour éviter les conflits de nommage des interfaces réseau: effacer la règle <a href="/udev" class="wikilink1" title="udev">udev</a> y faisant référence:
</p>
<pre class="code">sudo rm -rf /etc/udev/rules.d/70-persistent-net.rules</pre>

<p>
Votre image disque est maintenant prête à être exportée sur le serveur Glance.
</p>

</div>
<div class='secedit editbutton_section editbutton_34'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Créez vos propres images] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creez_vos_propres_images" /><input type="hidden" name="codeblockOffset" value="132" /><input type="hidden" name="range" value="59019-61277" /><button type="submit" title="Créez vos propres images" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit35 page-header" id="desinstallation">Désinstallation</h2>
<div class="level2">

<p>
Pour supprimer cette application, <a href="/tutoriel/comment_supprimer_un_paquet" class="wikilink1" title="tutoriel:comment_supprimer_un_paquet">supprimer les paquets</a>. Selon la méthode choisie, la configuration globale de l&#039;application est conservée ou supprimée. Les journaux du système, et les fichiers de préférence des utilisateurs dans leurs dossiers personnels sont toujours conservés.<br/>

Supprimez ensuite les bases de données keystone, glance et nova<br/>

</p>

</div>
<div class='secedit editbutton_section editbutton_35'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Désinstallation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="desinstallation" /><input type="hidden" name="codeblockOffset" value="134" /><input type="hidden" name="range" value="61278-61709" /><button type="submit" title="Désinstallation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit36 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>(en)</strong> <a href="http://openstack.org/" class="urlextern" title="http://openstack.org/" rel="nofollow">Le site du Projet</a></div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs principaux : <a href="/utilisateurs/xavier4811" class="wikilink1" title="utilisateurs:xavier4811">Xavier4811</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_36'><form class="button btn_secedit form-inline" method="post" action="/openstack"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1472405840" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="voir_aussi" /><input type="hidden" name="codeblockOffset" value="134" /><input type="hidden" name="range" value="61710-" /><button type="submit" title="Voir aussi" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div><hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">license Apache 2.0</div></div>
<div class="fn"><sup><a href="#fnt__2" id="fn__2" class="fn_bot">2)</a></sup> 
<div class="content">utilisateurs</div></div>
<div class="fn"><sup><a href="#fnt__3" id="fn__3" class="fn_bot">3)</a></sup> 
<div class="content">rôles</div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="openstack.txt">openstack.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 28/08/2016, 19:37">Le 28/08/2016, 19:37</span></li><li class="text-muted">par Ysera</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=openstack&amp;1635559659" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

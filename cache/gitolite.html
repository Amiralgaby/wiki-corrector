<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>gitolite [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="serveur"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/gitolite?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/gitolite?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/gitolite"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/gitolite"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/gitolite"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"gitolite","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="gitolite">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/gitolite?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/gitolite?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/gitolite?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/gitolite?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/gitolite?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/gitolite?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/gitolite?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">gitolite</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/gitolite?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/gitolite?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/gitolite?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#installation","title":"Installation","level":1},{"link":"#configuration","title":"Configuration","level":1},{"link":"#creer_un_depot","title":"Cr\u00e9er un d\u00e9p\u00f4t","level":2},{"link":"#ajouter_un_utilisateur","title":"Ajouter un utilisateur","level":2},{"link":"#ajouter_un_groupe","title":"Ajouter un groupe","level":2},{"link":"#gestion_des_droits","title":"Gestion des droits","level":2},{"link":"#rendre_un_depot_public","title":"Rendre un d\u00e9p\u00f4t public","level":2},{"link":"#changer_le_masque_des_depots","title":"Changer le masque des d\u00e9p\u00f4ts","level":2},{"link":"#utilisation","title":"Utilisation","level":1},{"link":"#acces_a_un_depot","title":"Acc\u00e8s \u00e0 un d\u00e9p\u00f4t","level":2},{"link":"#desinstallation","title":"D\u00e9sinstallation","level":1},{"link":"#voir_aussi","title":"Voir aussi","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis</a></li>
<li class="level1"><a href="#installation">Installation</a></li>
<li class="level1"><a href="#configuration">Configuration</a>
<ul class="nav toc">
<li class="level2"><a href="#creer_un_depot">Créer un dépôt</a></li>
<li class="level2"><a href="#ajouter_un_utilisateur">Ajouter un utilisateur</a></li>
<li class="level2"><a href="#ajouter_un_groupe">Ajouter un groupe</a></li>
<li class="level2"><a href="#gestion_des_droits">Gestion des droits</a></li>
<li class="level2"><a href="#rendre_un_depot_public">Rendre un dépôt public</a></li>
<li class="level2"><a href="#changer_le_masque_des_depots">Changer le masque des dépôts</a></li>
</ul>
</li>
<li class="level1"><a href="#utilisation">Utilisation</a>
<ul class="nav toc">
<li class="level2"><a href="#acces_a_un_depot">Accès à un dépôt</a></li>
</ul>
</li>
<li class="level1"><a href="#desinstallation">Désinstallation</a></li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="gitolite">Gitolite</h1>
<div class="level1">

<p>
Gitolite est une réécriture de Gitosis, par Sitaram Chamarty. Il permet de gérer des dépôts <a href="/git" class="wikilink1" title="git">Git</a> à l&#039;aide d&#039;un utilisateur spécifique sur un serveur, en leur attribuant des utilisateurs ou groupes d&#039;utilisateurs, des droits spécifiques comme la lecture, écriture, etc. Il possède un fichier de configuration complètement diffèrent qui permet le contrôle d&#039;accès sur chaque branche, incluant des spécifications comme qui peut ou ne peut pas revenir sur une branche donnée.
</p>

<p>
Gitolite utilise évidement les clés publiques ssh pour l&#039;ajout d&#039;utilisateur, mais il est intéressant car il interdit ses utilisateurs de se connecter à un shell de l&#039;utilisateur des dépôts. C&#039;est l&#039;un des points importants de sécurité auxquels répond Gitolite.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Gitolite] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="gitolite" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="23-811" /><button type="submit" title="Gitolite" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">

<p>
Gitolite utilise un utilisateur spécifique sur le serveur pour gérer les dépôts.
</p>

<p>
Dans cette documentation nous considérerons les termes suivants :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong><code>server</code></strong> : serveur ;</div>
</li>
<li class="level1"><div class="li"> <strong><code>admin</code></strong> : administrateur du serveur ;</div>
</li>
<li class="level1"><div class="li"> <strong><code>git</code></strong> : utilisateur Git du serveur (s&#039;il n&#039;est pas créé, il peut l&#039;être avec <code>sudo adduser git</code>).</div>
</li>
</ul>

<p>
Nous considérons donc que les utilisateurs <strong><code>admin</code></strong> et <strong><code>git</code></strong> sont sur <strong><code>server</code></strong>.
</p>

<p>
<strong><code>admin</code></strong> doit avoir un accès ssh autorisé sur le compte de l&#039;utilisateur <strong><code>git</code></strong>. Si ce n&#039;est pas le cas, sur <strong><code>server</code></strong>, créez une paire de clés (publique et privée) pour <strong><code>admin</code></strong> avec :
</p>
<pre class="code">ssh-keygen</pre>

<p>
Puis ajoutez la clé publique aux clés autorisées de <strong><code>git</code></strong> avec :
</p>
<pre class="code">ssh-copy-id -i ~/.ssh/id_rsa.pub git@localhost</pre>

<p>
Cette commande a pour effet d&#039;ajouter votre clé au fichier <code>~/.ssh/authorized_keys</code> de <strong><code>git</code></strong>.
</p>

<p>
Gitolite nécessite évidement Git. Si ce n&#039;est pas fait, <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez donc le paquet</a> <a href="apt://git-core" class="interwiki iw_apt" title="apt://git-core">git-core</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="812-1889" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="installation">Installation</h2>
<div class="level2">

<p>
L&#039;installation se fera depuis le dossier personnel de l&#039;utilisateur <strong><code>admin</code></strong> de votre serveur <strong><code>server</code></strong>.
</p>

<p>
Récupérez les sources de Gitolite sur Github, avec :
</p>
<pre class="code">git clone http://github.com/sitaramc/gitolite.git</pre>

<p>
Déplacez-vous dans le dossier des sources :
</p>
<pre class="code">cd gitolite</pre>

<p>
Lancez à présent le script d&#039;installation de Gitolite :
</p>
<pre class="code">src/gl-easy-install git localhost admin</pre>
<div class="noteimportant">La commande précédente n&#039;est plus bonne avec la version actuelle du répertoire github. Les changements semble d&#039;ailleurs assez important il n&#039;est plus sur que cette page ne soit pas obsolète !
</div>
<p>
Cela signifie que vous lancez l&#039;installation en utilisant <strong><code>git</code></strong> comme utilisateur contenant les dépôts Git, sur votre serveur (ici la machine sur laquelle vous êtes connectée, donc <code>localhost</code> représente <strong><code>server</code></strong>) et utilisez <strong><code>admin</code></strong> comme administrateur des dépôts.
</p>

<p>
Il vous sera demandé plusieurs choses au cours de l&#039;exécution du script. Si vous n&#039;êtes pas familier avec Git, utilisez les propositions par défaut.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1890-2974" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="configuration">Configuration</h2>
<div class="level2">

<p>
La configuration de Gitolite est simple. Un dépôt de configuration nommé <code>gitolite-admin</code> est créé sur le serveur, ainsi que son clône dans le répertoire personnel de <strong><code>admin</code></strong>. C&#039;est dans celui-ci que nous configurerons nos dépôts. Cette configuration comprend un fichier et un dossier :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong><code>conf/gitolite.conf</code></strong> : fichier de configuration de Gitolite, contenant les dépôts, leurs utilisateurs/groupes et leurs droits associés ;</div>
</li>
<li class="level1"><div class="li"> <strong><code>keydir/</code></strong> : dossier contenant les clés publiques des utilisateurs, sous la forme <code>user_name.pub</code>.</div>
</li>
</ul>

<p>
La configuration de Gitolite utilisant un dépôt Git spécifique, il sera nécessaire de <em>commiter</em> les changements effectués pour qu&#039;ils prennent effet, c&#039;est pour cela qu&#039;il est nécessaire de se situer dans le dossier de configuration pour appliquer des changements.
</p>

<p>
Rendez-vous donc dans le dépôt <code>gitolite-admin</code> de votre utilisateur <strong><code>admin</code></strong> :
</p>
<pre class="code">cd ~/gitolite-admin</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2975-3956" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="creer_un_depot">Créer un dépôt</h3>
<div class="level3">

<p>
Pour créer un dépôt, <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditez votre fichier</a> <code>conf/gitolite.conf</code>. Ce fichier se présente sous la forme :
</p>
<pre class="code">repo repo1
    RW+            = admin</pre>

<p>
ce qui signifie que le dépôt <code>repo1</code> (<em>repository</em> en anglais) admet un utilisateur (<strong><code>admin</code></strong>) qui possède les droits de lecture (<code>R</code>) et d&#039;écriture (<code>W</code>).
</p>

<p>
Pour ajouter un dépôt <em>my_repo</em>, ajoutez donc :
</p>
<pre class="code">repo my_repo
    RW+                 = user1 user2 user3</pre>

<p>
Une fois votre fichier édité, sauvegardez puis <em>commitez</em> les changements :
</p>
<pre class="code">git add conf/gitolite.conf
git commit -m &quot;add repository my_repo&quot;
git push</pre>

<p>
<em>my_repo</em> sera automatiquement créé après le <em>push</em> dans <code>/home/git/repositories/</code>.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Créer un dépôt] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creer_un_depot" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="3957-4747" /><button type="submit" title="Créer un dépôt" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="ajouter_un_utilisateur">Ajouter un utilisateur</h3>
<div class="level3">

<p>
Pour ajouter un utilisateur, il suffit d&#039;ajouter sa clé publique au dossier <code>keydir/</code> dans un fichier nommé <code>username.pub</code>.
</p>

<p>
Pour ajouter par exemple l&#039;utilisateur <code>user1</code>, <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">créez le fichier</a> <code>keydir/user1.pub</code> contenant sa clé publique.
</p>
<div class="noteclassic">Cette clé publique est habituellement créée avec la commande <code>ssh-keygen</code> (exécutée depuis le poste de l&#039;utilisateur à ajouter) et est contenue dans le fichier <code>~/.ssh/id_rsa.pub</code> de l&#039;utilisateur.

</div>
<p>
Une fois son fichier ajouté, <em>commitez</em> les changements :
</p>
<pre class="code">git add keydir/user1.pub
git commit -m &quot;add user user1&quot;
git push</pre>
<div class="notetip">Un utilisateur peut avoir plusieurs clés publiques, pratique dans deux cas :<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong><code>admin</code></strong> est le nom utilisé pour l&#039;administration de <strong><code>server</code></strong>, mais aussi le nom utilisé sur une machine de développement ;</div>
</li>
<li class="level1"><div class="li"> un utilisateur peut développer sur plusieurs machine, par exemple son pc et son portable.</div>
</li>
</ul>

<p>
Vous pouvez donc définir plusieurs clés pour un même utilisateur en créant des fichiers <code>user1.pub</code>, <code>user1@laptop.pub</code>, <code>user1@foo.pub</code>, etc.
</p>

</div>
</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Ajouter un utilisateur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ajouter_un_utilisateur" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="4748-5917" /><button type="submit" title="Ajouter un utilisateur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="ajouter_un_groupe">Ajouter un groupe</h3>
<div class="level3">

<p>
Pour ajouter un groupe, il suffit de le définir dans le fichier <code>gitolite.conf</code>. <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez donc le fichier</a> <code>conf/gitolite.conf</code> et ajoutez-y un groupe au début du fichier comme ceci :
</p>
<pre class="code">@group1 = user1 user2 user3</pre>
<div class="noteclassic">Le groupe <code>@all</code> est un groupe pré-définit, représentant tous les utilisateurs.

</div>
<p>
Pour assigner un groupe à un dépôt, il suffit de le définir comme pour un utilisateur :
</p>
<pre class="code">repo my_repo
    RW+                 = @group1</pre>

<p>
Puis <em>commitez</em> les changements avec :
</p>
<pre class="code">git add conf/gitolite.conf
git commit -m &quot;add group group1 and assign it to repo my_repo&quot;
git push</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Ajouter un groupe] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ajouter_un_groupe" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="5918-6611" /><button type="submit" title="Ajouter un groupe" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="gestion_des_droits">Gestion des droits</h3>
<div class="level3">

<p>
Comme vous l&#039;avez remarqué, les droits sont définis à des utilisateurs pour un dépôt donné. Il existe 3 types de droits :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>R</strong> : droit de lecture uniquement (l&#039;utilisateur peut effectuer un <code>git clone</code>, etc) ;</div>
</li>
<li class="level1"><div class="li"> <strong>RW</strong> : droit de lecture et écriture (l&#039;utilisateur peut effectuer un <code>git clone</code>, <code>git push</code>, etc) ;</div>
</li>
<li class="level1"><div class="li"> <strong>RW+</strong> : droit de lecture et écriture, ainsi que les <em>rewind permissions</em>, c&#039;est-à-dire le droit de supprimer des étapes du projet, comme par exemple permettre la commande <code>git reset –hard HEAD^</code>.</div>
</li>
</ul>
<div class="noteclassic">Pour une configuration plus poussée, comme les permissions sur les branches, Gitweb, etc, voir le <a href="https://github.com/sitaramc/gitolite/blob/master/README.txt" class="urlextern" title="https://github.com/sitaramc/gitolite/blob/master/README.txt" rel="nofollow">README</a> de Gitolite.

</div>
</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Gestion des droits] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="gestion_des_droits" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="6612-7392" /><button type="submit" title="Gestion des droits" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="rendre_un_depot_public">Rendre un dépôt public</h3>
<div class="level3">

<p>
Pour permettre à n&#039;importe qui d&#039;accéder en lecture à votre dépôt, il vous faudra installer le <code>git daemon</code>.
</p>

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez donc le paquet</a> <a href="apt://git-daemon-run" class="urlextern" title="apt://git-daemon-run" rel="nofollow">git-daemon-run</a>.
</p>

<p>
Il faut indiquer au <code>git daemon</code> où sont situés les dépôts. Pour cela, <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditez votre fichier</a> <code>/etc/sv/git-daemon/run</code>.
</p>

<p>
Changez la ligne :
</p>
<pre class="code">exec chpst -ugitdaemon git daemon --verbose --base-path=/var/cache /var/cache/git</pre>

<p>
par :
</p>
<pre class="code">exec chpst -u git git daemon --verbose --base-path=/home/git/repositories</pre>

<p>
puis redémarrez le <code>git daemon</code> avec :
</p>
<pre class="code">sudo /etc/init.d/git-daemon restart</pre>

<p>
Pour donner le droit de lecture au public pour un dépôt, il suffit d&#039;attribuer le droit de lecture à l&#039;utilisateur <code>daemon</code> pour ce dépôt. C&#039;est-à-dire, ajouter la ligne :
</p>
<pre class="code">R                   = daemon</pre>

<p>
à votre configuration, puis appliquer les changements, comme décrit dans la section <a href="#creer_un_depot" title="gitolite ↵" class="wikilink1">Configuration</a>.
</p>
<div class="noteimportant">Notez que <code>git daemon</code> écoute sur le port <strong>9418</strong>. Donc celui-ci devra être accessible depuis l&#039;extérieur pour permettre au public d&#039;accéder à vos dépots.

</div>
</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Rendre un dépôt public] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="rendre_un_depot_public" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="7393-8617" /><button type="submit" title="Rendre un dépôt public" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="changer_le_masque_des_depots">Changer le masque des dépôts</h3>
<div class="level3">

<p>
Il peut être utile de changer le masque des dépôts, c&#039;est-à-dire attribuer des droits différents aux nouveaux dépôts. Par exemple, <em>Gitweb</em> ou <a href="/redmine" class="wikilink1" title="redmine">Redmine</a> ont besoin de lire les dépôts pour les parcourir. Souvent, la plus propre méthode consistera à ajouter leur utilisateur au groupe <em>git</em> et ajouter le droit de lecture à ce groupe.
</p>

<p>
<a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez le fichier</a> <strong><code>/home/git/.gitolite.rc</code></strong> (sur <strong><code>server</code></strong>) pour y changer la valeur de la variable <code>REPO_UMASK</code> comme ceci (commentez la valeur actuelle et décommentez celle voulue) :
</p>
<pre class="code">$REPO_UMASK = 0027;       # gets you &#039;rwxr-x---&#039;</pre>

<p>
Ce n&#039;est pas tout. Cette modification affectera les nouveaux dépôts créés, pas ceux déjà existants. Pour attribuer les bonnes permissions sur un dépôt existant, procédez comme ceci (dans le cas ou nous voulons attribuer le droit de lecture au groupe) :
</p>
<pre class="code">sudo chmod -R g+Xr /home/git/repositories/&lt;mon_depot&gt;.git/</pre>
<div class="noteimportant">Notez le <strong>&#039;X&#039;</strong> et non pas <strong>&#039;x&#039;</strong>, qui aura pour effet d&#039;attribuer le droit d&#039;exécution seulement sur un dossier, ou sur un fichier si celui-ci est déjà exécutable (par le propriétaire par exemple).

</div>
</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Changer le masque des dépôts] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="changer_le_masque_des_depots" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="8618-9869" /><button type="submit" title="Changer le masque des dépôts" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit11 page-header" id="utilisation">Utilisation</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="9870-9894" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="acces_a_un_depot">Accès à un dépôt</h3>
<div class="level3">

</div>

<h4 id="par_un_utilisateur">Par un utilisateur</h4>
<div class="level4">

<p>
Après avoir ajouté un utilisateur, celui-ci peut <em>cloner</em> un dépôt avec :
</p>
<pre class="code">git clone git@server:my_repo</pre>

</div>

<h4 id="par_le_public">Par le public</h4>
<div class="level4">

<p>
Si vous avez <a href="#rendre_un_depot_public" title="gitolite ↵" class="wikilink1">rendu un dépôt public</a>, n&#039;importe qui pourra <em>cloner</em> ce dépôt avec :
</p>
<pre class="code">git clone git://server/my_repo</pre>

</div>

<h4 id="par_l_administrateur">Par l&#039;administrateur</h4>
<div class="level4">

<p>
Dans le cas où l&#039;utilisateur <strong><code>admin</code></strong> veut développer sur <strong><code>server</code></strong>, il doit <em>cloner</em> un dépôt avec :
</p>
<pre class="code">git clone gitolite:my_repo</pre>
<div class="noteclassic">Si votre version de Git de <strong><code>server</code></strong>  est inférieure à <code>1.6.2</code>, vous obtiendrez une erreur au <em>clone</em> d&#039;un dépôt <strong>vide</strong>. Pour contourner ce problème, vous pouvez mettre à jour votre la version de Git de <strong><code>server</code></strong>, ou contourner le problème chez le client en <em>clonant</em> le dépôt de cette manière :
<pre class="code">mkdir repo1
cd repo1
git init
git commit --allow-empty -m &quot;initial repository&quot;
git remote add origin git@server:repo1
git push origin master
git config push.default matching</pre>

</div>
</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Accès à un dépôt] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="acces_a_un_depot" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="9895-10949" /><button type="submit" title="Accès à un dépôt" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit13 page-header" id="desinstallation">Désinstallation</h2>
<div class="level2">

<p>
Pour désinstaller Gitolite, il faut supprimer des fichiers de <strong><code>server</code></strong> et <strong><code>admin</code></strong>.
</p>

<p>
Dossier à supprimer du dossier personnel de <strong><code>admin</code></strong> :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>~/gitolite-admin</code></div>
</li>
</ul>

<p>
Fichiers ou dossiers à supprimer du dossier personnel de <strong><code>git</code></strong> sur <strong><code>server</code></strong> :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>~/.gitolite</code></div>
</li>
<li class="level1"><div class="li"> <code>~/.gitolite.rc</code></div>
</li>
<li class="level1"><div class="li"> <code>~/gitolite-install</code></div>
</li>
<li class="level1"><div class="li"> <code>~/repositories/gitolite-admin.git</code></div>
</li>
</ul>

<p>
Il ne reste plus qu&#039;à supprimer les accès SSH des utilisateurs sur <strong><code>server</code></strong> :
</p>

<p>
dans le fichiers <code>~/.ssh/authorized_keys</code> de l&#039;utilisateur <strong><code>git</code></strong>, supprimez les clés des utilisateurs, ou supprimez la partie <code>&quot;command=…&quot;</code>.
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Désinstallation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="desinstallation" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="10950-11611" /><button type="submit" title="Désinstallation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit14 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>(en)</strong> <a href="http://github.com/sitaramc/gitolite" class="urlextern" title="http://github.com/sitaramc/gitolite" rel="nofollow">page de Gitolite</a> sur Github ;</div>
</li>
<li class="level1"><div class="li"> <strong>(fr)</strong> documentation de <a href="/git" class="wikilink1" title="git">Git</a> du wiki ;</div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs : <a href="/utilisateurs/v0n" class="wikilink1" title="utilisateurs:v0n">v0n</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/gitolite"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1504770007" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="voir_aussi" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="11612-" /><button type="submit" title="Voir aussi" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="gitolite.txt">gitolite.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 07/09/2017, 09:40">Le 07/09/2017, 09:40</span></li><li class="text-muted">par 46.35.17.250</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=gitolite&amp;1635551886" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

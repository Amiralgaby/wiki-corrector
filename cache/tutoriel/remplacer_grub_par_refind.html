<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>tutoriel:remplacer_grub_par_refind [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="bionic,xenial,tutoriel,brouillon"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/tutoriel/remplacer_grub_par_refind?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="/tutoriel/remplacer_grub_par_refind?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/tutoriel/remplacer_grub_par_refind"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/tutoriel/remplacer_grub_par_refind"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/tutoriel/remplacer_grub_par_refind"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"tutoriel:remplacer_grub_par_refind","namespace":"tutoriel","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="tutoriel:remplacer_grub_par_refind">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/tutoriel/remplacer_grub_par_refind?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/tutoriel/remplacer_grub_par_refind?do=media&amp;ns=tutoriel"  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/tutoriel/remplacer_grub_par_refind?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/tutoriel/remplacer_grub_par_refind?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/tutoriel/remplacer_grub_par_refind?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/tutoriel/remplacer_grub_par_refind?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/tutoriel/remplacer_grub_par_refind?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">tutoriel:remplacer_grub_par_refind</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/tutoriel/remplacer_grub_par_refind?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/tutoriel/remplacer_grub_par_refind?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/tutoriel/remplacer_grub_par_refind?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#environnement","title":"Environnement","level":1},{"link":"#les_motivations","title":"Les motivations","level":2},{"link":"#installation","title":"Installation","level":2},{"link":"#activation_standard","title":"Activation standard","level":2},{"link":"#activation_complementaire_pour_efi_standard","title":"Activation compl\u00e9mentaire pour EFI standard","level":2},{"link":"#installation_complementaire_efi_microsoft","title":"installation compl\u00e9mentaire EFI Microsoft","level":2},{"link":"#conclusion","title":"Conclusion.","level":2}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#environnement">Environnement</a>
<ul class="nav toc">
<li class="level2"><a href="#les_motivations">Les motivations</a></li>
<li class="level2"><a href="#installation">Installation</a></li>
<li class="level2"><a href="#activation_standard">Activation standard</a></li>
<li class="level2"><a href="#activation_complementaire_pour_efi_standard">Activation complémentaire pour EFI standard</a></li>
<li class="level2"><a href="#installation_complementaire_efi_microsoft">installation complémentaire EFI Microsoft</a></li>
<li class="level2"><a href="#conclusion">Conclusion.</a></li>
</ul></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/bionic" class="wikilink1" title="bionic" rel="tag">Bionic</a>,
	<a href="/xenial" class="wikilink1" title="xenial" rel="tag">Xenial</a>,
	<a href="/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />
<div class="notetip">Tutoriel à mettre à jour en suivant le modèle <a href="https://doc.ubuntu-fr.org/wiki/modeles/tutoriel" class="urlextern" title="https://doc.ubuntu-fr.org/wiki/modeles/tutoriel" rel="nofollow">https://doc.ubuntu-fr.org/wiki/modeles/tutoriel</a> 
</div>
<h1 class="sectionedit1 page-header" id="remplacer_grub_par_refind">Remplacer grub par Refind</h1>
<div class="level1">

<p>
L&#039;option &quot;Purger GRUB&quot; de <a href="/boot-repair" class="wikilink1" title="boot-repair">Boot-Repair</a> est fait en deux séquences qui donnent la main à l&#039;utilisateur, la première pour purger, la seconde pour réinstaller. Dans ce tutoriel, nous allons utiliser cette fonctionnalité pour purger et installer  <a href="/refind" class="wikilink1" title="refind">rEFInd</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[Remplacer grub par Refind] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="remplacer_grub_par_refind" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="165-479" /><button type="submit" title="Remplacer grub par Refind" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="environnement">Environnement</h2>
<div class="level2">

<p>
<strong>Nécessité de booter en technique EFI.</strong>
</p>

<p>
Le mode secure du EFI doit être déactivé: Il est très compliqué d&#039;installer un  refind sécurisé qui refuse d&#039;utiliser le logiciel windows pour se certifier auprès des ordinateurs EFI. La séquence de certification existe. Elle est complexe. 
</p>

<p>
Les logiciels libres doivent être installés dans des partitions EXT4.  Le pilote  BTRFS existe mais il faut l&#039;ajouter. Le pilote ZFS n&#039; existe pas.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[Environnement] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="environnement" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="480-952" /><button type="submit" title="Environnement" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="les_motivations">Les motivations</h3>
<div class="level3">

<p>
La principale raison est certainement le fait que certains ordinateurs refusent que leur NVRAM soit modifiée: L&#039;installation du  grub est alors plantée. L&#039;installation de ubuntu se termine sans aucun moyen de l&#039;utiliser. Il est nécessaire d&#039;utiliser des moyens manuels pour fabriquer un structure de boot. Il est actuellement encore impossible d&#039;utiliser boot-repair car il s&#039;appuie pour l&#039;essentiel sur la même séquence d&#039;installation. 
</p>

<p>
Lorsque plusieurs logiciels libres sont installés dans le même ordinateur, ils veulent tous être responsable du démarrage.  L&#039;utilisateur doit bien maîtriser:    Utiliser  une autre façon de booter résout ce problème de hiérarchie.
</p>

<p>
Le choix des logiciels proposés au boot par <strong>refind</strong> est exactement ce qui est présent dans l&#039;ordinateur. Il n&#039;y a aucun travail de préparation en amont. Le choix de boot est possible en utilisant la souris et même le doigt si présence d&#039;écran tactile. L&#039;ajout d&#039;une photo d&#039;arrière-plan est facile. 
</p>

<p>
Le logiciel de refind est <strong>intégralement dans la partition de boot EFI</strong>.  Il n&#039;y a donc aucun risque qu&#039;il en manque un morceau. Cela arrive avec le grub si la partition contenant le second morceau n&#039;est pas disponible  souvent suite à une suppression non maîtrisée d&#039;une partition.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[Les motivations] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_motivations" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="953-2265" /><button type="submit" title="Les motivations" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="installation">Installation</h3>
<div class="level3">

<p>
Il y a 2 types d&#039;installation :
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Installation facile</div>
</li>
<li class="level1"><div class="li"> Installation manuelle</div>
</li>
</ol>

</div>

<h4 id="installation_facile">Installation facile</h4>
<div class="level4">

<p>
L&#039;installation facile est décrit <a href="/refind#installation_avec_secure_boot_desactive" class="wikilink1" title="refind">dans la page rEFInd</a>
</p>

<p>
Pour la plupart des cas, ça revient à juste <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installer le paquet</a> <strong><a href="apt://refind" class="interwiki iw_apt" title="apt://refind">refind</a></strong>
</p>

</div>

<h4 id="installation_manuelle">Installation manuelle</h4>
<div class="level4">
<div class="noteclassic">Cette méthode devrait peut-etre etre décrite dans <a href="/refind#installation_avec_secure_boot_desactive" class="wikilink1" title="refind">dans la page rEFInd</a> plutot qu&#039;ici pour éviter les redondances d&#039;informations et perdre les lecteurs
</div>
<p>
D&#039;autres méthodes d&#039;installation sont décrites <a href="/refind#installation_avec_secure_boot_desactive" class="wikilink1" title="refind">dans la page rEFInd</a>.
</p>

<p>
Ici, nous allons voir la méthode boot-repair :
Après avoir lancé l&#039;application boot-repair et choisi  &quot;options avancées&quot;, il faut remplir la grille présentée au chapitre 3.1
</p>

<p>
Valider seulement  la case <strong>réinstaller grub</strong>.  Décocher les autres options et ouvrir l&#039;onglet <strong>emplacement de grub</strong>.
</p>

<p>
Il est nécessaire de sélectionner le UBUNTU retenu,  l&#039;éventuelle partition de boot  qui est présente notamment dans les cas d&#039;installation chiffrée et la partition EFI  qui sera appelée par la suite <strong>ESP-N</strong> puis il faut ouvrir l&#039;onglet  <strong>option de grub</strong>.
</p>

<p>
Cocher la case <strong>purger le grub avant de le réinstaller</strong> si elle ne l&#039;est pas . Cliquer sur &quot;appliquer&quot;.  Le logiciel va inspecter ce qui  est présent et fournir  une liste de commandes à exécuter.
</p>

<p>
Ouvrer un terminal et exécuter-les. A titre d&#039;exemple, voici la première et la dernière de la liste.
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> <span class="kw2">dpkg</span> <span class="re5">--configure</span> <span class="re5">-a</span>
<span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> <span class="kw2">apt-get purge</span> <span class="re5">-y</span> grub<span class="sy0">*</span>-common shim-signed </pre>

<p>
à condition que l&#039;installation du grub  ne pas soit bloquée! 
</p>

<p>
<em class="u">Il est possible d&#039;en profiter pour mettre à jour le logiciel en cas d&#039;installation incomplète.</em>
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> apt update
<span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> apt upgrade</pre>

<p>
<strong>Lorsque ces commandes sont exécutées, il est nécessaire de persévérer avec la commande  suivante:</strong>
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span>  apt <span class="kw2">install</span>   refind </pre>

<p>
Le téléchargement va se faire. Une  <a href="https://pix.toile-libre.org/upload/original/1515194544.png" class="urlextern" title="https://pix.toile-libre.org/upload/original/1515194544.png" rel="nofollow">grille</a> va s&#039;ouvrir. Le texte est en français. C&#039;est prépositionné sur  OUI. Il suffit d&#039;accepter  en validant. Refind est alors installé. Il est quasiment opérationnel. Cependant, il y a un bug lié à la technique &quot;chroot&quot; utilisée: Les deux premières lignes du fichier de paramétrage ne sont pas bonnes.
</p>
<pre class="code">&quot;Boot with standard options&quot;  &quot;file=/cdrom/preseed/ubuntu.seed maybe-ubiquity quiet splash ---&quot;
&quot;Boot to single-user mode&quot;    &quot;file=/cdrom/preseed/ubuntu.seed maybe-ubiquity quiet splash --- single&quot;
&quot;Boot with minimal options&quot;   &quot;ro root=UUID=18b28382-0ec9-4bea-a0b3-24729bd90810&quot; </pre>

<p>
Il faudrait penser à booter en choisissant la troisième ligne qui est bonne par appui sur la touche <strong>F2</strong>. 
Le plus simple est de  supprimer les deux premières car ne pas avoir les options &quot;quiet splash&quot;  au démarrage est un plus pour les premiers suivis, en revanche ne pas avoir les options &quot;recovery nomodeset&quot; est un point négatif.
La commande suivante peut être faite pour  éliminer le risque d&#039;oubli.
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> <span class="kw2">sed</span>  <span class="re5">-i</span> <span class="st_h">'1,2d'</span><span class="sy0">/</span>boot<span class="sy0">/</span>refind_linux.conf </pre>
<div class="noteclassic">La présence de ce fichier évite d&#039;insérer manuellement des options classiques du grub pour son démarrage  en  les préparant. Un exemple de choix de paramétrage:
<pre class="code">&quot;booter en standard&quot;   &quot;ro root=UUID=18b28382-0ec9-4bea-a0b3-24729bd90810 quiet slash fsck.mode=force&quot;
&quot;booter en recovery&quot;   &quot;recovery root=UUID=18b28382-0ec9-4bea-a0b3-24729bd90810&quot; nomodeset  fsck.mode=force fsck.repair=yes&quot;</pre>



</div><div class="noteimportant">La codification est plus complexe si la partition contenant ubuntu est chiffrée. Il faut coder avec l&#039;appel au logiciel de décodage <strong>crypt_root=</strong>
</div>
<p>
Le logiciel grub n&#039;ayant plus besoin d&#039;être utilisé, on va déactiver son utilisation .
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> <span class="kw2">chmod</span> <span class="re5">-x</span> <span class="sy0">/</span>etc<span class="sy0">/</span>grub.d<span class="sy0">/</span><span class="nu0">30</span>_os-prober
<span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> <span class="kw2">chmod</span> <span class="re5">-x</span> <span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>grub-install 
<span class="kw2">sudo</span> <span class="kw2">chroot</span> <span class="st0">&quot;/mnt/boot-sav/sdaNN&quot;</span> <span class="kw2">chmod</span> <span class="re5">-x</span> <span class="sy0">/</span>etc<span class="sy0">/</span>kernel<span class="sy0">/</span>postinst.d<span class="sy0">/</span>zz-update-grub</pre>

<p>
Voila, c&#039;est quasiment terminé pour l&#039;installation. Il faut stopper  boot-repair et ne pas lui dire de continuer ou de reculer. Dans les deux contextes, il réinstallerait le logiciel shim-signed! La solution est d&#039;appuyer  sur les touches <strong>Ctrl C</strong>
Nous restons alors dans une live session afin de faire la prise en compte de la structure de boot.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2266-6996" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="activation_standard">Activation standard</h3>
<div class="level3">

<p>
Beaucoup d&#039;ordinateurs standards permettent alors  de choisir <strong>refind</strong> comme  logiciel de boot et de le mettre prioritaire. C&#039;est souvent par l&#039;appui sur les  touches F9  …. F12.
</p>

<p>
Certains ordinateurs (moins sécurisés?) permettent de mettre directement à jour la NVRAM en ligne de commande.
Au moment de la mise en route de boot-repair nous avons sélectionné la partition de boot retenue pour installer l&#039;EFI. C&#039;est le moment  de s&#039;en souvenir pour exécuter la commande suivante pour mettre à jour  la NVRAM:
</p>
<pre class="code bash"><span class="kw2">sudo</span> efibootmgr <span class="re5">--create</span> <span class="re5">--disk</span> <span class="sy0">/</span>dev<span class="sy0">/</span>ESP  <span class="re5">--part</span>  N  <span class="re5">--label</span>  <span class="st0">&quot;BootRepair&quot;</span>  <span class="re5">--loader</span>   <span class="st0">&quot;\EFI<span class="es1">\r</span>efind<span class="es1">\r</span>efind_x64.efi&quot;</span></pre>

<p>
- Si la réponse est obtenue en quelques secondes, la commande a fonctionné.  Refind est souvent prioritaire. Sinon il faut le faire manuellement.
</p>

<p>
- Si la réponse se fait attendre,  il est possible d&#039;attendre au moins 30  minutes. Dans ce contexte, la réponse sera explicite  et dira que la NVRAM est interdite de modification. Si manque de patience, il est possible d&#039;interrompre le process en frappant les caractères <strong>Ctrl C</strong>. Dans les deux cas, il faudra continuer en faisant tout ce qui décrit ci-après. Cela devrait faire gagner du temps.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[Activation standard] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="activation_standard" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="6997-8238" /><button type="submit" title="Activation standard" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="activation_complementaire_pour_efi_standard">Activation complémentaire pour EFI standard</h3>
<div class="level3">

<p>
Certains ordinateurs savent reconnaître une structure officielle de boot du logiciel Linux. Il est très rare que cette structure soit déjà présente. Nous allons la créer et prévoir quelques entrées standards.
Il est nécessaire de &quot;monter&quot; la partition de boot que boot-repair a créée et d&#039;y transférer la structure.
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">mkdir</span> <span class="re5">-v</span> <span class="sy0">/</span>Repair
<span class="kw2">sudo</span>  <span class="kw2">mount</span>  <span class="re5">-v</span>   <span class="sy0">/</span>dev<span class="sy0">/</span>ESP-N                          <span class="sy0">/</span>Repair
<span class="kw2">sudo</span>  <span class="kw2">mkdir</span>  <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Linux 
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-Rv</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/*</span>               <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Linux 
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/</span>refind_x64.efi   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Linux<span class="sy0">/</span>bootx64.efi
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/</span>refind_x64.efi   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Linux<span class="sy0">/</span>grubx64.efi</pre>

<p>
Beaucoup d&#039;ordinateurs savent reconnaître une structure officielle de boot identique à celle d&#039;un support <abbr title="Universal Serial Bus">USB</abbr>. Cette structure est déjà présente. Nous allons  prévoir quelques entrées standards. La partition de boot est déjà montée. Peut-être faut-il sauver l&#039;ancienne structure?
</p>
<pre class="code bash"><span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-Rv</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/*</span>               <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Boot 
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/</span>refind_x64.efi   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Boot<span class="sy0">/</span>bootx64.efi
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/</span>refind_x64.efi   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Boot<span class="sy0">/</span>grubx64.efi</pre>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[Activation complémentaire pour EFI standard] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="activation_complementaire_pour_efi_standard" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="8239-9553" /><button type="submit" title="Activation complémentaire pour EFI standard" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="installation_complementaire_efi_microsoft">installation complémentaire EFI Microsoft</h3>
<div class="level3">

<p>
Malheureusement, certains ordinateurs ne savent booter que grâce  à la présence de windows.
</p>

<p>
- Si windows est encore présent, la solution la plus simple est certainement de lui demander de booter refind. Il est nécessaire  de le lancer, de lancer le logiciel <strong>Windows PowerShell</strong> en mode administratif et de frapper la commande suivante sans se tromper dans le nom du fichier. Sinon, windows ne reboote pas. Suivant les versions de windows, la codification peut varier.
</p>
<pre class="code bash">bcdedit <span class="sy0">/</span><span class="kw1">set</span> <span class="br0">&#123;</span>bootmgr<span class="br0">&#125;</span> path \EFI\refind\refind_x64.efi
bcdedit <span class="sy0">/</span><span class="kw1">set</span> <span class="st0">&quot;{bootmgr}&quot;</span> path \EFI\refind\refind_x64.efi</pre>

<p>
 Si refus d&#039;utiliser la technique <strong>bcddedit</strong>, il est possible de demander à refind de se substituer au lanceur de microsoft en sauvant ce lanceur. Cependant, refind ne le proposera pas au boot.Il faudra faire une entrée manuelle. Voir la documentation refind.
</p>

<p>
- Si windows a été éliminé, il est nécessaire de refabriquer sa structure de boot et d&#039;y transférer refind. Les commande seront
</p>
<pre class="code bash"><span class="kw2">sudo</span>  <span class="kw2">mkdir</span>  <span class="re5">-pv</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Microsoft<span class="sy0">/</span>Boot 
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-Rv</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/*</span>               <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Microsoft<span class="sy0">/</span>Boot 
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/</span>refind_x64.efi   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Microsoft<span class="sy0">/</span>Boot<span class="sy0">/</span>bootx64.efi
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/</span>refind_x64.efi   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Microsoft<span class="sy0">/</span>Boot<span class="sy0">/</span>grubx64.efi
<span class="kw2">sudo</span>  <span class="kw2">cp</span>     <span class="re5">-v</span>   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>refind<span class="sy0">/</span>refind_x64.efi   <span class="sy0">/</span>Repair<span class="sy0">/</span>EFI<span class="sy0">/</span>Microsoft<span class="sy0">/</span>Boot<span class="sy0">/</span>bootmgfw.efi</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[installation complémentaire EFI Microsoft] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_complementaire_efi_microsoft" /><input type="hidden" name="codeblockOffset" value="10" /><input type="hidden" name="range" value="9554-11041" /><button type="submit" title="installation complémentaire EFI Microsoft" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="conclusion">Conclusion.</h3>
<div class="level3">

<p>
Espérons que ce chapitre  ne contienne pas trop d&#039;erreurs et qu&#039;il sera  utile et se simplifiera au fil du temps.
</p>
<hr />

<p>
<em>Contributeurs principaux : <a href="/utilisateurs/identifiant" class="wikilink2" title="utilisateurs:identifiant" rel="nofollow">IDENTIFIANT</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/remplacer_grub_par_refind"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1609833890" /><input type="hidden" name="summary" value="[Conclusion.] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="conclusion" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="11042-" /><button type="submit" title="Conclusion." class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="tutoriel/remplacer_grub_par_refind.txt">tutoriel/remplacer_grub_par_refind.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 05/01/2021, 09:04">Le 05/01/2021, 09:04</span></li><li class="text-muted">par sangorys</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=tutoriel%3Aremplacer_grub_par_refind&amp;1635532630" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

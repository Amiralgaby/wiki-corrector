<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>tutoriel:compiler_linux [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="kernel,systeme,programmation,tutoriel"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/tutoriel/compiler_linux?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="/tutoriel/compiler_linux?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/tutoriel/compiler_linux"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/tutoriel/compiler_linux"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/tutoriel/compiler_linux"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"tutoriel:compiler_linux","namespace":"tutoriel","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="tutoriel:compiler_linux">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/tutoriel/compiler_linux?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/tutoriel/compiler_linux?do=media&amp;ns=tutoriel"  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/tutoriel/compiler_linux?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/tutoriel/compiler_linux?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/tutoriel/compiler_linux?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/tutoriel/compiler_linux?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/tutoriel/compiler_linux?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">tutoriel:compiler_linux</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/tutoriel/compiler_linux?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/tutoriel/compiler_linux?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/tutoriel/compiler_linux?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#introduction","title":"Introduction","level":1},{"link":"#quelles_sources_utiliser","title":"Quelles sources utiliser","level":1},{"link":"#choix_des_options","title":"Choix des options","level":2},{"link":"#en_dur_ou_en_modules","title":"En dur ou en modules ?","level":2},{"link":"#la_configuration_du_noyau","title":"La configuration du noyau","level":1},{"link":"#deux_trois_petites_options_a_activer","title":"Deux trois petites options \u00e0 activer","level":2},{"link":"#la_section_networking","title":"La section NETWORKING","level":2},{"link":"#la_section_file_systems","title":"La section File systems","level":2},{"link":"#la_section_devices_drivers","title":"La section Devices Drivers","level":2},{"link":"#la_section_network_device_support","title":"La section Network device support","level":2},{"link":"#la_section_graphic_support","title":"La section Graphic support","level":2},{"link":"#compilez","title":"1,2,3 compilez !","level":1},{"link":"#la_methode_universelle","title":"La m\u00e9thode universelle","level":2},{"link":"#la_methode_debian","title":"La m\u00e9thode \"Debian\"","level":2},{"link":"#que_faire_en_cas_de_mauvaise_compilation","title":"Que faire en cas de mauvaise compilation ?","level":1},{"link":"#gestion_des_bugs","title":"Gestion des bugs","level":1},{"link":"#liens","title":"Liens","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#introduction">Introduction</a></li>
<li class="level1"><a href="#quelles_sources_utiliser">Quelles sources utiliser</a>
<ul class="nav toc">
<li class="level2"><a href="#choix_des_options">Choix des options</a></li>
<li class="level2"><a href="#en_dur_ou_en_modules">En dur ou en modules ?</a></li>
</ul>
</li>
<li class="level1"><a href="#la_configuration_du_noyau">La configuration du noyau</a>
<ul class="nav toc">
<li class="level2"><a href="#deux_trois_petites_options_a_activer">Deux trois petites options à activer</a></li>
<li class="level2"><a href="#la_section_networking">La section NETWORKING</a></li>
<li class="level2"><a href="#la_section_file_systems">La section File systems</a></li>
<li class="level2"><a href="#la_section_devices_drivers">La section Devices Drivers</a></li>
<li class="level2"><a href="#la_section_network_device_support">La section Network device support</a></li>
<li class="level2"><a href="#la_section_graphic_support">La section Graphic support</a></li>
</ul>
</li>
<li class="level1"><a href="#compilez">1,2,3 compilez !</a>
<ul class="nav toc">
<li class="level2"><a href="#la_methode_universelle">La méthode universelle</a></li>
<li class="level2"><a href="#la_methode_debian">La méthode &quot;Debian&quot;</a></li>
</ul>
</li>
<li class="level1"><a href="#que_faire_en_cas_de_mauvaise_compilation">Que faire en cas de mauvaise compilation ?</a></li>
<li class="level1"><a href="#gestion_des_bugs">Gestion des bugs</a></li>
<li class="level1"><a href="#liens">Liens</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/kernel" class="wikilink1" title="kernel" rel="tag">kernel</a>,
	<a href="/systeme" class="wikilink1" title="systeme" rel="tag">système</a>,
	<a href="/programmation" class="wikilink1" title="programmation" rel="tag">programmation</a>,
	<a href="/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>
</span></div>

<h1 class="sectionedit1 page-header" id="compiler_son_noyau">Compiler son noyau</h1>
<div class="level1">

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Compiler son noyau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="compiler_son_noyau" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="49-82" /><button type="submit" title="Compiler son noyau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="introduction">Introduction</h2>
<div class="level2">

<p>
<strong>NOTE : Ce tutoriel traite de noyau ou de <em>kernel</em> mais c&#039;est la même chose</strong>
</p>

<p>
<strong>NOTE : J&#039;imagine que vous savez quelles commandes sont à lancer en tant que root</strong>
</p>

<p>
<a href="/_detail/tutoriel/tux-large-trans.png?id=tutoriel%3Acompiler_linux" class="media" title="tutoriel:tux-large-trans.png"><img src="/_media/tutoriel/tux-large-trans.png?w=110&amp;tok=b23108" class="medialeft img-responsive" title="Linux" alt="Linux" width="110" /></a>Le noyau est tout simplement le programme qui gère les interactions entre le matériel et les autres programmes. C&#039;est lui qui <sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup> amorce le système d&#039;exploitation.
</p>

<p>
Une chose que beaucoup de personnes ne comprennent pas est que le noyau est un programme comme les autres, vous pouvez parfaitement avoir plusieurs noyaux et utiliser celui de votre choix. <strong>Il est même recommandé d&#039;avoir toujours un noyau fonctionnel sur sa machine que l&#039;on pourra utiliser si le noyau par défaut n&#039;est pas fiable</strong>.
</p>

<p>
Pourquoi compiler son noyau ?
Les noyaux fournis par défaut dans votre distribution <abbr title="GNU&#039;s Not Unix">GNU</abbr>/Linux sont des noyaux capables de tourner sur un maximum de machines et de matériels. Ils sont donc souvent plus lourds, mais la différence de rapidité est en général assez faible. En fait les vraies raisons de compiler son propre noyau sont les suivantes :
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Comprendre comment fonctionne le noyau Linux.</div>
</li>
<li class="level1"><div class="li"> Faire fonctionner un matériel qui n&#039;est pas pris en charge par votre noyau actuel.</div>
</li>
<li class="level1"><div class="li"> Appliquer un correctif<sup><a href="#fn__2" id="fnt__2" class="fn_top">2)</a></sup>.</div>
</li>
<li class="level1"><div class="li"> Vous voulez utiliser une distribution qui oblige de compiler votre noyau <sup><a href="#fn__3" id="fnt__3" class="fn_top">3)</a></sup></div>
</li>
<li class="level1"><div class="li"> Vous voulez passer le temps.<img src="/lib/images/smileys/icon_doubt2.gif" class="icon" alt=":-&#92;" /></div>
</li>
</ol>

<p>
La compilation du noyau est longue et demande beaucoup d&#039;attention sous peine de ne plus pouvoir démarrer sa machine. Si vous n&#039;avez pas le temps de lire beaucoup de documentation et si vous n&#039;êtes pas prêt à galérer sérieusement, alors inutile de vous fatiguer pour rien <sup><a href="#fn__4" id="fnt__4" class="fn_top">4)</a></sup> .
</p>
<div class="notetip">Pour ceux qui débutent voir d&#039;abord cette page <strong>plus générale et plus simple</strong> <a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org" class="wikilink1" title="tutoriel:comment_compiler_un_kernel_de_kernel.org">comment_compiler_un_kernel_de_kernel.org</a>
<p>
Et en particulier le paragraphe <a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org#methode_simple_de_compilation_pour_appliquer_uniquement_un_patch" class="wikilink1" title="tutoriel:comment_compiler_un_kernel_de_kernel.org">Methode_simple_de_compilation</a>
</p>

</div>
</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Introduction] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="introduction" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="83-2230" /><button type="submit" title="Introduction" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="quelles_sources_utiliser">Quelles sources utiliser</h2>
<div class="level2">

<p>
En fait, la plupart des distributions <sup><a href="#fn__5" id="fnt__5" class="fn_top">5)</a></sup> modifient leurs noyaux. Et ce pour des raisons de sécurité ou tout simplement pour un fonctionnement optimal. Il est <strong>très</strong> conseillé d&#039;utiliser les sources de votre distribution. <a href="http://kernel.org" class="urlextern" title="http://kernel.org" rel="nofollow">Les sources officielles de Linux</a> sont appelées <em>vanilla</em> <sup><a href="#fn__6" id="fnt__6" class="fn_top">6)</a></sup> qui pointe vers la dernière version du noyau
</p>

</div>
<p>

Il vous faudra aussi installer les outils de compilation : <br/>

<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://debconf-utils,dpkg-dev,debhelper,build-essential,kernel-package,libncurses5-dev" class="interwiki iw_apt" title="apt://debconf-utils,dpkg-dev,debhelper,build-essential,kernel-package,libncurses5-dev">debconf-utils dpkg-dev debhelper build-essential kernel-package libncurses5-dev</a></strong>

===== Partir d&#039;une configuration minimale =====

==== Quelques préliminaires ====
Les développeurs du noyau déconseillent de compiler le noyau en tant que root, mais cet avis est très partagé. Faites comme bon vous semble, si vous voulez compiler en utilisateur je vous conseille de vous rajouter au groupe src :
</p>
<pre class="code bash">usermod <span class="re5">-aG</span> src <span class="kw2">login</span> <span class="co0">## Où //login// est votre nom d'utilisateur</span>
ou
<span class="kw2">sudo</span> adduser <span class="kw2">login</span> src  <span class="co0">## Où //login// est votre nom d'utilisateur</span></pre>

<p>


Par défaut, les sources sont dans /usr/src, sous Debian et Ubuntu il vous faut extraire le contenu de l&#039;archive :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src
<span class="kw2">tar</span> xvjf linux-source-<span class="nu0">2.6</span>.VERSION.tar.bz2</pre>
<div class="noteimportant">Les sources ne sont pas archivées dans les derniers noyaux
</div>
<p>

Je vous conseille de faire un lien symbolique intitulé <em>linux</em> vers le noyau((à modifier suivant la version de votre noyau)) (c&#039;est bien et ça m&#039;aidera pour la suite) :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src
<span class="kw2">ln</span> <span class="re5">-sfn</span> linux-source-<span class="nu0">2.6</span>.VERSION linux <span class="co0">## sous Debian, Ubuntu</span></pre>

<p>
Ensuite allez dans ce fameux dossier :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux</pre>

<p>
Toutes les modifications que nous allons faire seront dans le fichier .config (qui n&#039;existe pas par défaut). Ce fichier contient (ou contiendra) des choses dans ce genre :
</p>
<pre class="code"># CONFIG_SECURITY_FILE_CAPABILITIES is not set
# CONFIG_SECURITY_ROOTPLUG is not set
CONFIG_CRYPTO=y
CONFIG_CRYPTO_ALGAPI=m
CONFIG_CRYPTO_BLKCIPHER=m
CONFIG_CRYPTO_MANAGER=m</pre>

<p>
Il est évident que ce n&#039;est pas pratique de modifier ce fichier à la main, ce serait long et très dangereux car certaines options <strong>dépendent</strong> d&#039;autres options. C&#039;est pourquoi nous allons utiliser l&#039;interface (en console) qui permet de le modifier facilement.
</p>

<p>
<strong>NOTE : il existe aussi des interfaces graphiques mais je ne vais pas les aborder ici et puis vous n&#039;utilisez peut-être pas de serveur graphique</strong>
</p>

<p>
Pour lancer cette interface en console c&#039;est simple :
</p>
<pre class="code bash"><span class="kw2">make</span> menuconfig</pre>

<p>
Et vous vous retrouvez devant quelque chose comme ceci :
</p>

<p>
<a href="/_detail/tutoriel/menuconfig.png?id=tutoriel%3Acompiler_linux" class="media" title="tutoriel:menuconfig.png"><img src="/_media/tutoriel/menuconfig.png" class="medialeft img-responsive" title="make menuconfig" alt="make menuconfig" /></a>
—————————————————————————————————————————————
</p>

<p>
La navigation dans cette interface est simple :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Flèches haut/bas pour monter/descendre</div>
</li>
<li class="level1"><div class="li"> Entrée pour entrer dans les sous-menus</div>
</li>
<li class="level1"><div class="li"> Échappement deux fois pour sortir d&#039;un sous-menu</div>
</li>
<li class="level1"><div class="li"> h pour demander l&#039;aide d&#039;une option</div>
</li>
<li class="level1"><div class="li"> Oblique &quot;/&quot; pour rechercher une option</div>
</li>
<li class="level1"><div class="li"> Espace pour sélectionner une option</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Quelles sources utiliser] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="quelles_sources_utiliser" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2231-5807" /><button type="submit" title="Quelles sources utiliser" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="choix_des_options">Choix des options</h3>
<div class="level3">

<p>
Toute l&#039;astuce consiste à chercher les options qui correspondent à votre matériel et à les activer avec espace. Cette tâche est assez fastidieuse si on part de zéro<sup><a href="#fn__7" id="fnt__7" class="fn_top">7)</a></sup>.
</p>

<p>
Ainsi si vous voulez partir avec une config qui devrait marcher je vous conseille deux choses :
</p>

<p>
<strong>Soit vous copiez un .config fonctionnel que vous optimiserez ensuite</strong> : Si vous avez déjà un noyau fonctionnel, son .config devrait être dans le dossier /boot. Pour le copier (par exemple) :
</p>
<pre class="code bash"><span class="kw2">cp</span> <span class="sy0">/</span>boot<span class="sy0">/</span>config-<span class="nu0">2.6</span>.XX <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux<span class="sy0">/</span>.config</pre>

<p>
Ensuite, vu que ce n&#039;est sûrement pas la même version, il faut voir s&#039;il y a eu des modifications dans la configuration :
</p>
<pre class="code bash"><span class="kw2">make</span> oldconfig</pre>

<p>
À chaque fois que les options seront différentes, on vous demandera de spécifier les nouvelles options.
</p>

<p>
Je déconseille cette méthode pour deux raisons :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> make oldconfig est difficile à faire proprement</div>
</li>
<li class="level1"><div class="li"> Le travail à faire pour optimiser ensuite sera très dur si la config du noyau précédent est pleine d&#039;options inutiles</div>
</li>
</ul>

<p>
Cette méthode est à utiliser seulement si vous êtes certain de votre .config.
</p>

<p>
<strong>La 2<sup>ème</sup> méthode consiste à construire un noyau minimum puis à remplir les options dont vous aurez besoin</strong>. C&#039;est celle que je vous conseille<sup><a href="#fn__8" id="fnt__8" class="fn_top">8)</a></sup>.
Cette commande va construire un .config minimum qui est fourni par les responsables du noyau :
</p>
<pre class="code bash"><span class="kw2">make</span> defconfig</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Choix des options] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="choix_des_options" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="5808-7326" /><button type="submit" title="Choix des options" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="en_dur_ou_en_modules">En dur ou en modules ?</h3>
<div class="level3">

<p>
Les options que vous choisirez dans le noyau seront compilées soit en dur soit en modules.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> En dur, l&#039;option sera incluse dans le noyau. Ce qui se traduit par une étoile &#039;*&#039; à côté de l&#039;option</div>
</li>
<li class="level1"><div class="li"> En modules l&#039;option sera optionnelle<sup><a href="#fn__9" id="fnt__9" class="fn_top">9)</a></sup> et représentée par un M à côté de l&#039;option, c&#039;est-à-dire que vous pourrez choisir de l&#039;activer ou non.</div>
</li>
</ul>

<p>
Concrètement, ça veut dire que tout ce qui est nécessaire au démarrage de l&#039;ordinateur <strong>doit</strong> être compilé en dur. Et le reste en dur ou en modules.
</p>

<p>
Donc <strong>doit</strong> être compilé en dur :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Le système de fichier (ext3, reiserfs par exemple) des partitions utilisées</div>
</li>
<li class="level1"><div class="li"> Le support pour les disques (<abbr title="Serial Advanced Technology Attachment">SATA</abbr> ou <abbr title="Integrated Development Environment">IDE</abbr>) de ces partitions</div>
</li>
</ul>

<p>
Et voilà, vous pouvez passer à la configuration proprement dite.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[En dur ou en modules ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="en_dur_ou_en_modules" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="7327-8140" /><button type="submit" title="En dur ou en modules ?" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="la_configuration_du_noyau">La configuration du noyau</h2>
<div class="level2">

<p>
<a href="/_detail/tutoriel/linus-9719.jpg?id=tutoriel%3Acompiler_linux" class="media" title="tutoriel:linus-9719.jpg"><img src="/_media/tutoriel/linus-9719.jpg?w=90&amp;tok=dfd75a" class="medialeft img-responsive" title="Que Linus soit avec vous !" alt="Que Linus soit avec vous !" width="90" /></a> Ok, allons-y, prenez une pause, un café, un deuxième café et une sieste. C&#039;est la partie clef de votre noyau donc restez vigilants et tout se passera bien. On lance la commande magique et on y va : 
</p>
<pre class="code">make menuconfig</pre>

<p>
Je vous rassure, on ne touchera qu&#039;à quelques options dans le menu, je n&#039;aborderai en général que les options vitales pour le système<sup><a href="#fn__10" id="fnt__10" class="fn_top">10)</a></sup>.
</p>
<div class="noteimportant"><strong>NOTE : certaines options changent d&#039;endroit suivant la version du noyau. Si mes indications ne sont pas bonnes, cherchez avec /</strong>
</div>
</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La configuration du noyau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_configuration_du_noyau" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="8141-8804" /><button type="submit" title="La configuration du noyau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="deux_trois_petites_options_a_activer">Deux trois petites options à activer</h3>
<div class="level3">

<p>
Il faut activer quelques options pour pouvoir travailler sereinement :
L&#039;option <strong>Prompt for development and/or incomplete code/drivers</strong> doit être activée pour pouvoir avoir accès à certaines options. Si ce n&#039;est pas le cas, des options seraient introuvables dans les menus.
</p>

<p>
Cette option est ici :
</p>
<pre class="code">General setup ---&gt;
      [*] Prompt for development and/or incomplete code/drivers</pre>

<p>
Sur certains noyaux elle est ici :
</p>
<pre class="code">Code maturity level options  ---&gt;
      [*] Prompt for development and/or incomplete code/drivers</pre>

<p>
La prochaine option à vérifier est  <strong>Processor family</strong>
Elle se trouve ici :
</p>
<pre class="code">Processor type and features  ---&gt;
      Processor family ---&gt;</pre>

<p>
Il faut donner le type de processeur que l&#039;on a.
Pour le savoir :
</p>
<pre class="code">grep -i &quot;model name&quot; /proc/cpuinfo
## Chez moi ça donne :
model name	: Genuine Intel(R) CPU           T1350  @ 1.86GHz</pre>

<p>
Ensuite faites des recherches sur le processeurs et trouvez la famille de processeur correspondante.
</p>

<p>
Une autre option à vérifier : <strong>Subarchitecture Type</strong> :
Elle se trouve ici :
</p>
<pre class="code">Processor type and features  ---&gt;
      Subarchitecture Type ---&gt;</pre>

<p>
Si vous ne savez pas quoi mettre et que vous avez un PC &quot;normal&quot; vous pouvez mettre <a href="http://fr.wikipedia.org/wiki/Compatible_PC" class="urlextern" title="http://fr.wikipedia.org/wiki/Compatible_PC" rel="nofollow">PC-compatible</a>
</p>

<p>
Si vous utilisez des cartes PCMCIA je vous conseille d&#039;activer quelques options ici (en dur ou en module) :
</p>
<pre class="code">Bus options (PCI, PCMCIA, EISA, MCA, ISA)  ---&gt;
      PCCARD (PCMCIA/CardBus) support  ---&gt;</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Deux trois petites options à activer] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="deux_trois_petites_options_a_activer" /><input type="hidden" name="codeblockOffset" value="10" /><input type="hidden" name="range" value="8805-10377" /><button type="submit" title="Deux trois petites options à activer" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="la_section_networking">La section NETWORKING</h3>
<div class="level3">

<p>
Cette section est utile si vous utilisez des périphériques Wi-Fi, Bluetooth, ou infrarouges. Je vous laisse activer (en dur ou en module) ce dont vous avez besoin.
</p>

<p>
Si vous n&#039;utilisez pas <abbr title="Internet Protocol Version 6">IPV6</abbr> vous pouvez le désactiver ici :
</p>
<pre class="code">Networking  ---&gt;
    Networking options  ---&gt;
        &lt; &gt;   The IPv6 protocol</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La section NETWORKING] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_section_networking" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="10378-10729" /><button type="submit" title="La section NETWORKING" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="la_section_file_systems">La section File systems</h3>
<div class="level3">

<p>
Cette section est vitale, il faut absolument que la prise en charge des systèmes de fichiers des partitions racines soit compilée <strong>en dur</strong>.
</p>

<p>
J&#039;estime que si vous êtes arrivés jusqu&#039;ici c&#039;est que vous savez ce qu&#039;est un système de fichiers.
</p>
<pre class="code">File systems  ---&gt;
    &lt;*&gt; Second extended fs support ## Si ext2 utilisé
    &lt;*&gt; Ext3 journalling file system support ## Pour ext3
    &lt;*&gt; Reiserfs support ## Reiseirfs
## Il y en a d&#039;autres, mais je ne détaille pas ;)</pre>

<p>
Si vous utilisez encore des partitions FAT ou NTFS (Windows), je vous conseille ces options :
</p>
<pre class="code">File systems  ---&gt;
    DOS/FAT/NT Filesystems  ---&gt;</pre>

<p>
La section suivante mériterait une page entière, c&#039;est pourquoi je la met en valeur :
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La section File systems] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_section_file_systems" /><input type="hidden" name="codeblockOffset" value="17" /><input type="hidden" name="range" value="10730-11496" /><button type="submit" title="La section File systems" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="la_section_devices_drivers">La section Devices Drivers</h3>
<div class="level3">

<p>
Cette section est une des plus importantes. C&#039;est elle qui gère les pilotes de votre matériel. Et pas de pilote implique que le matériel ne fonctionnera pas.
</p>

<p>
Les options que nous toucherons seront celles-ci :
</p>
<pre class="code">Device Drivers ---&gt;
    &lt;M&gt; Parallel port support  ---&gt;
    &lt;*&gt; ATA/ATAPI/MFM/RLL support  ---&gt;
    SCSI device support  ---&gt;
    [*] Network device support  ---&gt;
    Graphics support  ---&gt;
    Sound  ---&gt;</pre>

</div>

<h4 id="la_section_parallel_port_support">La section Parallel port support</h4>
<div class="level4">

<p>
Pour utiliser les <a href="http://fr.wikipedia.org/wiki/Port_parall%C3%A8le" class="urlextern" title="http://fr.wikipedia.org/wiki/Port_parall%C3%A8le" rel="nofollow">ports parallèles</a>
Je vous conseille cette option, surtout si vous avez une imprimante qui se branche sur un tel port :
</p>
<pre class="code">Devices Drivers ---&gt;
    &lt;M&gt; Parallel port support  ---&gt;
        &lt;M&gt;   PC-style hardware
        [*]   IEEE 1284 transfer modes</pre>

</div>

<h4 id="la_section_ataatapimfmrll_support">La section ATA/ATAPI/MFM/RLL support</h4>
<div class="level4">

<p>
Si vous avez utilisé <em>make defconfig</em>, cette section devrait être bien configurée, toutefois il y a une optimisation à faire :
</p>

</div>

<h5 id="support_ide">Support IDE</h5>
<div class="level5">

<p>
Une de ces deux options peut être désactivée.
</p>
<pre class="code">&lt;*&gt;       AMD and nVidia IDE support
&lt;*&gt;       Intel PIIXn chipsets support</pre>

<p>
Pour savoir laquelle utiliser (et laquelle ne pas utiliser), vous pouvez procéder ainsi :
Assurez-vous d&#039;avoir installé udev. Si votre disque est /dev/hda
</p>
<pre class="code">udevinfo -a -p /sys/block/hda | grep -i DRIVERS

## Vous obtenez ça :
    DRIVERS==&quot;ide-disk&quot;
    DRIVERS==&quot;&quot;
    DRIVERS==&quot;PIIX_IDE&quot;
    DRIVERS==&quot;&quot;
## Ou ça :
    DRIVERS==&quot;ide-disk&quot;
    DRIVERS==&quot;&quot;
    DRIVERS==&quot;VIA_IDE&quot;
    DRIVERS==&quot;&quot;</pre>

<p>
Si vous obtenez un message du style :
</p>
<pre class="code"> udevinfo: command not found</pre>

<p>
Utilisez plutôt udevadm info avec les mêmes options.
</p>

<p>
Je vous laisse faire le reste <img src="/lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" />
</p>

<p>
Cette liste pourra vous être utile si vous avez d&#039;autres disques à activer :
</p>
<pre class="code">&quot;AEC62xx_IDE&quot;,  AEC62XX chipset support
&quot;ALI15x3_IDE&quot;,  ALI M15x3 chipset support
&quot;AMD_IDE&quot;,      AMD and nVidia IDE support
&quot;ATIIXP_IDE&quot;,   ATI IXP chipset IDE support
&quot;CMD64x_IDE&quot;,   CMD64{3|6|8|9} chipset support
&quot;TRIFLEX_IDE&quot;,  Compaq Triflex IDE support
&quot;Cypress_IDE&quot;,  CY82C693 chipset support
&quot;Cyrix_IDE&quot;,    Cyrix CS5510/20 MediaGX chipset support (VERY EXPERIMENTAL)
&quot;CS5530 IDE&quot;,   Cyrix/National Semiconductor CS5530 MediaGX chipset support
&quot;CS5535_IDE&quot;,   AMD CS5535 chipset support
&quot;HPT34x_IDE&quot;,   HPT34X chipset support
&quot;HPT366_IDE&quot;,   HPT36X/37X chipset support
&quot;JMicron IDE&quot;,  JMicron JMB36x support
&quot;SC1200_IDE&quot;,   National SCx200 chipset support
&quot;PIIX_IDE&quot;,     Intel PIIXn chipsets support
&quot;ITE821x IDE&quot;,  IT821X IDE support
&quot;NS87415_IDE&quot;,  NS87415 chipset support
&quot;Promise_Old_IDE&quot;,  PROMISE PDC202{46|62|65|67} support
&quot;Promise_IDE&quot;,  PROMISE PDC202{68|69|70|71|75|76|77} support
&quot;Serverworks_IDE&quot;,  ServerWorks OSB4/CSB5/CSB6 chipsets support
&quot;SiI_IDE&quot;,      Silicon Image chipset support
&quot;SIS_IDE&quot;,      SiS5513 chipset support
&quot;SLC90e66_IDE&quot;,  SLC90E66 chipset support
&quot;TRM290_IDE&quot;,   Tekram TRM290 chipset support
&quot;VIA_IDE&quot;,      VIA82CXXX chipset support </pre>

<p>
Tous les disques utilisés par le système doivent être en dur !
</p>

</div>

<h4 id="support_sata">Support SATA</h4>
<div class="level4">

<p>
Les disques durs <abbr title="Serial Advanced Technology Attachment">SATA</abbr> fonctionnent avec le pilote SCSI. Pour pouvoir avoir les bonnes options :
</p>
<pre class="code">Device Drivers  ---&gt;   
    SCSI device support  ---&gt;
        &lt;*&gt; SCSI disk support
        &lt;M&gt; SCSI CDROM support</pre>

<p>
On va encore utiliser udev pour savoir quels pilotes activer/désactiver :
Par exemple pour /dev/sda :
</p>
<pre class="code">udevinfo -a -p /sys/block/sda | grep -i DRIVERS
    DRIVERS==&quot;sd&quot;
    DRIVERS==&quot;&quot;
    DRIVERS==&quot;&quot;
    DRIVERS==&quot;ahci&quot;
    DRIVERS==&quot;&quot;</pre>

<p>
Donc le pilote est ahci, pour savoir quelle option activer :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux
<span class="kw2">find</span> <span class="re5">-name</span> Makefile <span class="sy0">|</span> <span class="kw2">xargs</span> <span class="kw2">grep</span> ahci
<span class="co0">## Ce qui donne :</span>
.<span class="sy0">/</span>drivers<span class="sy0">/</span>ata<span class="sy0">/</span>Makefile:obj-$<span class="br0">&#40;</span>CONFIG_SATA_AHCI<span class="br0">&#41;</span>          += ahci.o</pre>

<p>
Donc l&#039;option est <abbr title="Serial Advanced Technology Attachment">SATA</abbr>_AHCI, on a juste à lancer une recherche (/) pour trouver la bonne option.
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La section Devices Drivers] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_section_devices_drivers" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="11497-15422" /><button type="submit" title="La section Devices Drivers" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="la_section_network_device_support">La section Network device support</h3>
<div class="level3">

<p>
Les options que l&#039;on va modifier sont celles-ci :
</p>
<pre class="code">Network device support ---&gt;
    [*]   Ethernet (10 or 100Mbit)  ---&gt;
    [ ]   Ethernet (1000 Mbit)  ---&gt;
    [ ]   Ethernet (10000 Mbit)  ---&gt;</pre>

<p>
Vous l&#039;aurez compris, on s&#039;occupe de la carte réseau…
Pour chaque interface (eth0 par exemple) utilisez udevinfo :
</p>
<pre class="code">udevinfo -a -p /sys/class/net/eth0 | grep -i DRIVER
## Ce qui donne (exemple) :
DRIVERS==&quot;8139too&quot;
DRIVERS==&quot;&quot;
DRIVERS==&quot;&quot;</pre>

<p>
Toujours par la même méthode :
</p>
<pre class="code">find /usr/src/linux -name Makefile | xargs grep 8139too
## Ce qui donne :
/usr/src/linux-2.6.23-gentoo-r9/drivers/net/Makefile:obj-$(CONFIG_8139TOO) += 8139too.o</pre>

<p>
Une petite recherche de 8139TOO vous donne l&#039;option à activer. Je vous conseille de la mettre en dur dans le noyau.
</p>

<p>
Si vous avez une carte Wi-Fi je vous conseille d&#039;aller faire un tour ici :
</p>
<pre class="code">Device Drivers  ---&gt;
[*] Network device support  ---&gt;
Wireless LAN  ---&gt;
[*] Wireless LAN (IEEE 802.11)</pre>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La section Network device support] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_section_network_device_support" /><input type="hidden" name="codeblockOffset" value="28" /><input type="hidden" name="range" value="15423-16449" /><button type="submit" title="La section Network device support" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="la_section_graphic_support">La section Graphic support</h3>
<div class="level3">

<p>
La vidéo-mémoire<sup><a href="#fn__11" id="fnt__11" class="fn_top">11)</a></sup> (<em>framebuffer</em>) peut être intéressante à utiliser, c&#039;est elle qui nous permet de regarder des vidéos ou d&#039;avoir un fond d&#039;écran dans le tty. Mais cette option n&#039;est pas obligatoire.
</p>

<p>
On travaille ici :
</p>
<pre class="code">Device Drivers  ---&gt;
    Graphics support  ---&gt;
        &lt;*&gt; Support for frame buffer devices</pre>

<p>
Si vous apercevez le nom de votre carte graphique, vous pouvez la mettre en module.
</p>

<p>
Si vous voulez utiliser <a href="http://fbsplash.berlios.de" class="urlextern" title="http://fbsplash.berlios.de" rel="nofollow">fbsplash</a> je vous conseille d&#039;activer ces options :
</p>
<pre class="code">Device Drivers  ---&gt;
    Graphics support  ---&gt;
        &lt;*&gt; Support for frame buffer devices ---&gt;
            [*]   VESA VGA graphics support
        Console display driver support  ---&gt;
            &lt;*&gt; Framebuffer Console support
            [*]   Support for the Framebuffer Console Decorations</pre>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La section Graphic support] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_section_graphic_support" /><input type="hidden" name="codeblockOffset" value="32" /><input type="hidden" name="range" value="16450-17348" /><button type="submit" title="La section Graphic support" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit13 page-header" id="compilez">1,2,3 compilez !</h2>
<div class="level2">

<p>
Votre noyau doit être assez bien configuré pour pouvoir démarrer maintenant. On doit donc le compiler puis l&#039;installer. Ici encore il y a plusieurs écoles, je vais d&#039;abord vous expliquer la méthode universelle puis ensuite d&#039;autres méthodes qui permettent de faire les choses plus proprement…
</p>

<p>
En gros voici ce que l&#039;on va faire :
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Compiler le noyau</div>
</li>
<li class="level1"><div class="li"> Placer le noyau construit dans /boot</div>
</li>
<li class="level1"><div class="li"> Configurer grub pour démarrer sur le nouveau noyau</div>
</li>
</ol>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[1,2,3 compilez !] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="compilez" /><input type="hidden" name="codeblockOffset" value="34" /><input type="hidden" name="range" value="17349-17837" /><button type="submit" title="1,2,3 compilez !" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="la_methode_universelle">La méthode universelle</h3>
<div class="level3">

<p>
On compile :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux
<span class="kw2">make</span> <span class="sy0">&amp;&amp;</span> <span class="kw2">make</span> modules_install</pre>

<p>
On copie le noyau dans /boot : Vous pouvez lui donner le nom que vous voulez, ici l&#039;exemple est pour l&#039;architecture i386, mais si vous avez une autre architecture vous devez aller voir dans le dossier arch/
</p>
<div class="noteclassic">Ici i386 est à remplacer par votre architecture bien sûr
</div><pre class="code bash"><span class="kw2">cp</span> arch<span class="sy0">/</span>i386<span class="sy0">/</span>boot<span class="sy0">/</span>bzImage <span class="sy0">/</span>boot<span class="sy0">/</span>kernel-<span class="nu0">2.6</span>.VERSION</pre>

<p>
Je vous conseille aussi de copier votre configuration dans /boot :
</p>
<pre class="code bash"><span class="kw2">cp</span> .config <span class="sy0">/</span>boot<span class="sy0">/</span>config-<span class="nu0">2.6</span>.VERSION
<span class="kw2">cp</span> System.map <span class="sy0">/</span>boot<span class="sy0">/</span>System.map.2.6.VERSION</pre>

<p>
Ensuite modifiez le fichier de configuration de grub <strong>/boot/grub/menu.lst</strong> puis rajoutez votre noyau :
</p>
<pre class="code">title           Ubuntu GNU/Linux 2.6.VERSION (version perso)
root            (hd0,3)
kernel          /boot/kernel-2.6.VERSION root=/dev/hda4

title           Ubuntu GNU/Linux 2.6.VERSION (Rescue)
root            (hd0,3)
kernel          /boot/kernel-2.6.VERSION root=/dev/hda4 init=/bin/bb</pre>

<p>
(hd0,3) doit correspondre à la partition qui contient /boot. Pour grub, hda1=(hd0,0), ainsi hda4=(hd0,3).
Vous pouvez bien sûr rajouter des options dans la ligne &quot;kernel&quot;, par exemple vga=791 (pour la vidéo-mémoire, mais le nombre dépend de votre écran).
</p>
<div class="noteimportant"><img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> : La configuration du menu.lst est valable uniquement pour grub-legacy. Les utilisateurs d&#039;Ubuntu 9.04 et versions ultérieures sont invités à consulter la page dédiée à <a href="/grub-pc" class="wikilink1" title="grub-pc">grub-pc</a>
</div>
<p>
Un petit réamorçage et c&#039;est bon ! <img src="/lib/images/smileys/icon_cool.gif" class="icon" alt="8-)" />
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La méthode universelle] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_methode_universelle" /><input type="hidden" name="codeblockOffset" value="34" /><input type="hidden" name="range" value="17838-19398" /><button type="submit" title="La méthode universelle" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="la_methode_debian">La méthode &quot;Debian&quot;</h3>
<div class="level3">

<p>
Si vous êtes sous Debian (ou Ubuntu), il est plus malin de créer un paquet .deb pour installer votre noyau.
Pourquoi ?
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Vous pourrez le réutiliser si vous faites une réinstallation.</div>
</li>
<li class="level1"><div class="li"> Vous pouvez l&#039;installer et le supprimer facilement avec APT.</div>
</li>
<li class="level1"><div class="li"> Parce que c&#039;est la classe de faire ses propres paquets <img src="/lib/images/smileys/icon_surprised.gif" class="icon" alt=":-O" /></div>
</li>
<li class="level1"><div class="li"> Parce que c&#039;est plus simple et que ça va rajouter automatiquement votre noyau dans /boot/grub/menu.lst</div>
</li>
</ol>

<p>
Une seule commande ferra l&#039;affaire :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux
make-kpkg <span class="re5">--append-to-version</span> <span class="st0">&quot;-perso&quot;</span> <span class="re5">--initrd</span> <span class="re5">--us</span> <span class="re5">--uc</span> buildpackage</pre>

<p>
Dans cette commande, vous pouvez personnaliser le nom de votre noyau (&quot;-perso&quot;).
</p>

<p>
Une fois que c&#039;est fini, le paquet doit être dans /usr/src et vous n&#039;avez plus qu&#039;à l&#039;installer :
</p>
<pre class="code">dpkg -i ../linux-image-2.6.24-perso.deb</pre>

<p>
Et voilà ! Grub est automatiquement mis à jour et votre noyau est disponible dans le menu de grub. Un petit réamorçage et vous voilà sur votre nouveau noyau.
</p>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[La méthode &quot;Debian&quot;] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_methode_debian" /><input type="hidden" name="codeblockOffset" value="38" /><input type="hidden" name="range" value="19399-20400" /><button type="submit" title="La méthode &quot;Debian&quot;" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit16 page-header" id="que_faire_en_cas_de_mauvaise_compilation">Que faire en cas de mauvaise compilation ?</h2>
<div class="level2">

<p>
Si la compilation donne un noyau qui ne fonctionne pas bien, regardez les messages d&#039;erreurs et allez faire des recherches et demandez de l&#039;aide sur des forums ou sur <abbr title="Internet Relay Chat">IRC</abbr>.
</p>

<p>
Puis recompilez votre noyau. Mais avant il faut supprimer les fichiers qui on été créés pendant la compilation :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux
<span class="kw2">make</span> clean <span class="co0"># Ne supprime pas le .config</span>
<span class="kw2">make</span> mrproper <span class="co0"># Supprime aussi le .config</span></pre>

<p>
<strong>Si vous avez utilisé make-kpkg, il faut aussi supprimer les fichiers créés par l&#039;utilitaire make-kpkg</strong> :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux
make-kpkg clean</pre>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Que faire en cas de mauvaise compilation ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="que_faire_en_cas_de_mauvaise_compilation" /><input type="hidden" name="codeblockOffset" value="40" /><input type="hidden" name="range" value="20401-21030" /><button type="submit" title="Que faire en cas de mauvaise compilation ?" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit17 page-header" id="gestion_des_bugs">Gestion des bugs</h2>
<div class="level2">

<p>
En cas de découverte d&#039;un bug il faut commencer par une bissection.<br/>

Voir : <a href="/kernel_bissection" class="wikilink1" title="kernel_bissection">Bissection d&#039;un noyau</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Gestion des bugs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="gestion_des_bugs" /><input type="hidden" name="codeblockOffset" value="42" /><input type="hidden" name="range" value="21031-21184" /><button type="submit" title="Gestion des bugs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit18 page-header" id="liens">Liens</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://forums.gentoo.org/viewtopic-t-555623.html" class="urlextern" title="http://forums.gentoo.org/viewtopic-t-555623.html" rel="nofollow">http://forums.gentoo.org/viewtopic-t-555623.html</a> —&gt; Configuration du noyau</div>
</li>
<li class="level1"><div class="li"> <a href="http://ashgenesis.debian-fr.net/tutorial/kernel/" class="urlextern" title="http://ashgenesis.debian-fr.net/tutorial/kernel/" rel="nofollow">http://ashgenesis.debian-fr.net/tutorial/kernel/</a> —&gt; Compilation à la sauce &quot;Debian&quot;</div>
</li>
<li class="level1"><div class="li"> <a href="http://lea-linux.org/documentations/Hardware-hard_plus-matos" class="urlextern" title="http://lea-linux.org/documentations/Hardware-hard_plus-matos" rel="nofollow">http://lea-linux.org/documentations/Hardware-hard_plus-matos</a> —&gt; Connaître son matériel</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.gentoo.org/doc/fr/gentoo-kernel.xml" class="urlextern" title="http://www.gentoo.org/doc/fr/gentoo-kernel.xml" rel="nofollow">http://www.gentoo.org/doc/fr/gentoo-kernel.xml</a> —&gt; Guide du noyau Gentoo</div>
</li>
<li class="level1"><div class="li"> <a href="http://casteyde.christian.free.fr/system/linux/guide/online/a12863.html" class="urlextern" title="http://casteyde.christian.free.fr/system/linux/guide/online/a12863.html" rel="nofollow">http://casteyde.christian.free.fr/system/linux/guide/online/a12863.html</a> —&gt; Configuration du noyau</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.kroah.com/lkn/" class="urlextern" title="http://www.kroah.com/lkn/" rel="nofollow">http://www.kroah.com/lkn/</a> —&gt; Linux Kernel in a Nutshell [EN]</div>
</li>
</ul>

<p>
—
Contributeurs : <a href="/utilisateurs/philpep-tlse" class="wikilink1" title="utilisateurs:philpep-tlse">philpep-tlse</a>, <a href="/utilisateurs/urhixidur" class="wikilink1" title="utilisateurs:urhixidur">Urhixidur</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/compiler_linux"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277036" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens" /><input type="hidden" name="codeblockOffset" value="42" /><input type="hidden" name="range" value="21185-" /><button type="submit" title="Liens" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div><hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">entre autres</div></div>
<div class="fn"><sup><a href="#fnt__2" id="fn__2" class="fn_bot">2)</a></sup> 
<div class="content">ISO/IEC 2382-7:2000 recommande « retouche »</div></div>
<div class="fn"><sup><a href="#fnt__3" id="fn__3" class="fn_bot">3)</a></sup> 
<div class="content">comme Gentoo</div></div>
<div class="fn"><sup><a href="#fnt__4" id="fn__4" class="fn_bot">4)</a></sup> 
<div class="content">je vous aurai prévenu</div></div>
<div class="fn"><sup><a href="#fnt__5" id="fn__5" class="fn_bot">5)</a></sup> 
<div class="content">toutes ?</div></div>
<div class="fn"><sup><a href="#fnt__6" id="fn__6" class="fn_bot">6)</a></sup> 
<div class="content">c.-à-d. version de base, cf. <a href="http://www.catb.orgsdsd.

===== Installer les sources et les outils pour la compilation =====

Passons à l'installation des sources : \\
[[:tutoriel:comment_installer_un_paquet" class="urlextern" title="http://www.catb.orgsdsd.

===== Installer les sources et les outils pour la compilation =====

Passons à l&#039;installation des sources : \\
[[:tutoriel:comment_installer_un_paquet" rel="nofollow">Installez le paquet</a> <strong><a href="apt://linux-source" class="interwiki iw_apt" title="apt://linux-source">linux-source</a></strong>

<div class="noteclassic">linux-source est un métapaquetage((paquet qui est un lien vers un ou plusieurs paquets</div></div>
<div class="fn"><sup><a href="#fnt__7" id="fn__7" class="fn_bot">7)</a></sup> 
<div class="content">et je vous déconseille de le faire</div></div>
<div class="fn"><sup><a href="#fnt__8" id="fn__8" class="fn_bot">8)</a></sup> 
<div class="content">sauf si vous avez un matériel vraiment exotique</div></div>
<div class="fn"><sup><a href="#fnt__9" id="fn__9" class="fn_bot">9)</a></sup> 
<div class="content">sans blague ?</div></div>
<div class="fn"><sup><a href="#fnt__10" id="fn__10" class="fn_bot">10)</a></sup> 
<div class="content">Celles qui permettent de démarrer</div></div>
<div class="fn"><sup><a href="#fnt__11" id="fn__11" class="fn_bot">11)</a></sup> 
<div class="content">ISO/IEC 2382-13:1996</div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="tutoriel/compiler_linux.txt">tutoriel/compiler_linux.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 10/01/2021, 12:10">Le 10/01/2021, 12:10</span></li><li class="text-muted">par Olivier V</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=tutoriel%3Acompiler_linux&amp;1635531526" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>tutoriel:monterpartagewindows [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="xenial,partage,samba,tutoriel,windows"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/tutoriel/monterpartagewindows?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="/tutoriel/monterpartagewindows?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/tutoriel/monterpartagewindows"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/tutoriel/monterpartagewindows"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/tutoriel/monterpartagewindows"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"tutoriel:monterpartagewindows","namespace":"tutoriel","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="tutoriel:monterpartagewindows">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/tutoriel/monterpartagewindows?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/tutoriel/monterpartagewindows?do=media&amp;ns=tutoriel"  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/tutoriel/monterpartagewindows?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/tutoriel/monterpartagewindows?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/tutoriel/monterpartagewindows?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/tutoriel/monterpartagewindows?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/tutoriel/monterpartagewindows?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">tutoriel:monterpartagewindows</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/tutoriel/monterpartagewindows?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/tutoriel/monterpartagewindows?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/tutoriel/monterpartagewindows?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#ere_methodel_utilisation_du_fichier_fstab","title":"1\u00e8re m\u00e9thode : l\u2019utilisation du fichier fstab","level":1},{"link":"#installation_des_paquets_necessaires","title":"Installation des paquets n\u00e9cessaires","level":2},{"link":"#monter_les_partages_distants","title":"Monter les partages distants","level":2},{"link":"#modifier_le_fichier_fstab_de_montage_des_partitions","title":"Modifier le fichier fstab de montage des partitions","level":2},{"link":"#eme_methodeutilisation_de_la_bibliotheque_libpam-mount","title":"2\u00e8me m\u00e9thode\u202f: utilisation de la biblioth\u00e8que libpam-mount","level":1},{"link":"#installation_des_paquets_necessaires1","title":"Installation des paquets n\u00e9cessaires","level":2},{"link":"#petite_correction_sur_les_droits","title":"Petite correction sur les droits","level":2},{"link":"#edition_des_fichiers_de_configuration","title":"\u00c9dition des fichiers de configuration","level":2},{"link":"#autoriser_le_demontage_des_volumes_a_la_fermeture_de_session","title":"Autoriser le d\u00e9montage des volumes \u00e0 la fermeture de session","level":2},{"link":"#edition_du_fichier_indiquant_les_partages_a_monter","title":"\u00c9dition du fichier indiquant les partages \u00e0 monter","level":2},{"link":"#que_faire_en_cas_de_problemes","title":"Que faire en cas de probl\u00e8mes\u202f?","level":1},{"link":"#ere_methode","title":"1\u00e8re m\u00e9thode","level":2},{"link":"#eme_methode","title":"2\u00e8me m\u00e9thode","level":2}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#ere_methodel_utilisation_du_fichier_fstab">1ère méthode : l’utilisation du fichier fstab</a>
<ul class="nav toc">
<li class="level2"><a href="#installation_des_paquets_necessaires">Installation des paquets nécessaires</a></li>
<li class="level2"><a href="#monter_les_partages_distants">Monter les partages distants</a></li>
<li class="level2"><a href="#modifier_le_fichier_fstab_de_montage_des_partitions">Modifier le fichier fstab de montage des partitions</a></li>
</ul>
</li>
<li class="level1"><a href="#eme_methodeutilisation_de_la_bibliotheque_libpam-mount">2ème méthode : utilisation de la bibliothèque libpam-mount</a>
<ul class="nav toc">
<li class="level2"><a href="#installation_des_paquets_necessaires1">Installation des paquets nécessaires</a></li>
<li class="level2"><a href="#petite_correction_sur_les_droits">Petite correction sur les droits</a></li>
<li class="level2"><a href="#edition_des_fichiers_de_configuration">Édition des fichiers de configuration</a></li>
<li class="level2"><a href="#autoriser_le_demontage_des_volumes_a_la_fermeture_de_session">Autoriser le démontage des volumes à la fermeture de session</a></li>
<li class="level2"><a href="#edition_du_fichier_indiquant_les_partages_a_monter">Édition du fichier indiquant les partages à monter</a></li>
</ul>
</li>
<li class="level1"><a href="#que_faire_en_cas_de_problemes">Que faire en cas de problèmes ?</a>
<ul class="nav toc">
<li class="level2"><a href="#ere_methode">1ère méthode</a></li>
<li class="level2"><a href="#eme_methode">2ème méthode</a></li>
</ul></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/xenial" class="wikilink1" title="xenial" rel="tag">Xenial</a>,
	<a href="/partage" class="wikilink1" title="partage" rel="tag">partage</a>,
	<a href="/samba" class="wikilink1" title="samba" rel="tag">samba</a>,
	<a href="/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>,
	<a href="/windows" class="wikilink1" title="windows" rel="tag">windows</a>
</span></div>

<h1 class="sectionedit1 page-header" id="monter_des_partages_windows_au_demarrage">Monter des partages Windows au démarrage</h1>
<div class="level1">

<p>
Bien qu’Ubuntu permette de se connecter à un dossier partagé sur un PC fonctionnant avec Windows de manière très simple, <em>via</em> la commande « Se connecter au serveur » du menu Raccourcis, cela ne résout pas tous les problèmes. En effet, certaines applications et non des moindres (<a href="/libreoffice" class="wikilink1" title="libreoffice">LibreOffice</a> par exemple) ne savent pas utiliser ces connexions réseaux pour ouvrir les fichiers.
</p>

<p>
Il est donc nécessaire pour ces applications de « monter », c’est-à-dire d’accrocher, les dossiers partagés par d’autres ordinateurs fonctionnant sous Windows <em>dans un répertoire de l’arborescence de fichiers d’Ubuntu</em>, de façon à ce que les fichiers qui s’y trouvent soient directement accessibles pour toutes les applications. Comme s’ils étaient sur la partition du disque dur où Ubuntu est installé.
</p>

<p>
Pour ce faire, il y a trois méthodes. La, première classique et simple, consiste à utiliser le fichier fstab de montage des partitions. La seconde, plus avancée et utilisant la bibliothèque libpam-mount, est un peu plus complexe, mais offre en contre partie beaucoup plus de possibilités.<br/>

</p>

<p>
Enfin la dernière s&#039;appuie sur autosfs avec CIFS :
<a href="/autofs" class="wikilink1" title="autofs">AutoFS - montage automatique de systèmes de fichier</a>
</p>

<p>
<em class="u">Remarques</em> : On pourra se reporter avec intérêt aux pages <br/>

<a href="https://help.ubuntu.com/community/MountSAMBAshareFSTAB" class="urlextern" title="https://help.ubuntu.com/community/MountSAMBAshareFSTAB" rel="nofollow">https://help.ubuntu.com/community/MountSAMBAshareFSTAB</a><br/>

<a href="https://wiki.ubuntu.com/MountWindowsSharesPermanently" class="urlextern" title="https://wiki.ubuntu.com/MountWindowsSharesPermanently" rel="nofollow">https://wiki.ubuntu.com/MountWindowsSharesPermanently</a> <br/>

<a href="https://help.ubuntu.com/community/MountWindowsSharesPermanently" class="urlextern" title="https://help.ubuntu.com/community/MountWindowsSharesPermanently" rel="nofollow">https://help.ubuntu.com/community/MountWindowsSharesPermanently</a><br/>

<a href="/mount_fstab" class="wikilink1" title="mount_fstab">mount et fstab : Le montage des systèmes de fichiers</a> <br/>

<a href="http://g-scripts.sourceforge.net/cat-filesysmgt.php" class="urlextern" title="http://g-scripts.sourceforge.net/cat-filesysmgt.php" rel="nofollow">http://g-scripts.sourceforge.net/cat-filesysmgt.php</a> et utiliser le script nautilus &quot;Mount Samba Share&quot;
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Monter des partages Windows au démarrage] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="monter_des_partages_windows_au_demarrage" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="48-1800" /><button type="submit" title="Monter des partages Windows au démarrage" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="ere_methodel_utilisation_du_fichier_fstab">1ère méthode : l’utilisation du fichier fstab</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[1ère méthode : l’utilisation du fichier fstab] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ere_methodel_utilisation_du_fichier_fstab" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1801-1863" /><button type="submit" title="1ère méthode : l’utilisation du fichier fstab" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="installation_des_paquets_necessaires">Installation des paquets nécessaires</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> suivant sur votre système s&#039;il ne le sont pas déjà (il ne fait pas partie des paquets installés par défaut) :
<strong><a href="apt://samba,cifs-utils" class="interwiki iw_apt" title="apt://samba,cifs-utils">samba,cifs-utils</a></strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Installation des paquets nécessaires] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_des_paquets_necessaires" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1864-2122" /><button type="submit" title="Installation des paquets nécessaires" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="monter_les_partages_distants">Monter les partages distants</h3>
<div class="level3">

<p>
Dans une console tapez la commande suivante :
</p>
<pre class="code">sudo mkdir /media/partage</pre>

<p>
pour créer le répertoire de montage local des fichiers distants. Ce répertoire peut aussi être placé dans le répertoire par défaut /mnt mais il n’y aura pas de raccourci direct dans nautilus.
</p>

<p>
Avant tout, il est conseillé de commencer par vérifier que vous arrivez bien à monter le partage en ligne de commande, exemple :
</p>
<pre class="code">sudo mount -t cifs -o username=utilisateur_ubuntu,rw,iocharset=utf8,file_mode=0777,dir_mode=0777 //adressIP_serveurFichier/repertoireSource /media/partage</pre>

<p>
si vous n’avez besoin que d’un accès en lecture, c&#039;est plus simple :
</p>
<pre class="code">sudo mount -t cifs -o guest,iocharset=utf8 //adressIP_serveurFichier/repertoireSource /media/partage</pre>

<p>
On crée ensuite un fichier dans lequel on stocke l’identifiant et le mot de passe pour se connecter sur le PC distant. Le but de cette création est de faire en sorte que l&#039;identifiant et le mot de passe n&#039;apparaissent pas directement dans le fichier fstab, qui, par défaut, est accessible en lecture par tout utilisateur. C&#039;est le minimum à faire pour limiter la visibilité des mots de passe.
</p>

<p>
Pour créer le fichier et l’ouvrir avec <a href="/nano" class="wikilink1" title="nano">nano</a> il suffit de saisir dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> la ligne suivante :
</p>
<pre class="code">sudo nano /root/.smbcredentials</pre>

<p>
Dans ce fichier, ajouter les trois lignes suivantes :
</p>
<pre class="file">username=MonNom
password=MonMotDePasse
domain=DOMAINE</pre>

<p>
Enregistrez ce fichier (Ctrl+0).
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Monter les partages distants] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="monter_les_partages_distants" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2123-3661" /><button type="submit" title="Monter les partages distants" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="modifier_le_fichier_fstab_de_montage_des_partitions">Modifier le fichier fstab de montage des partitions</h3>
<div class="level3">
<div class="noteclassic"><strong>Note :</strong> avant d&#039;effectuer toute modification du fichier <code>/etc/fstab</code>, pensez à en faire une <strong>copie de sauvegarde</strong> ! Cela peut être fait grâce à la commande suivante, exécutée dans un terminal : <pre class="code">sudo cp /etc/fstab /etc/fstab_sauvegarde</pre>

<p>
Pour restaurer cette copie de sauvegarde, en cas de besoin, exécutez la commande inverse : 
</p>
<pre class="code">sudo cp /etc/fstab_sauvegarde /etc/fstab</pre>

</div>
<p>
Pour l’exemple on va supposer que les paramètres sont les suivants :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Adresse IP du PC distant : 192.168.1.2</div>
</li>
<li class="level1"><div class="li"> Nom du partage auquel on veut accéder : Partage</div>
</li>
<li class="level1"><div class="li"> Dossier local où on va monter ce partage : /media/partage</div>
</li>
</ul>

<p>
Toujours dans Gedit, ouvrir le fichier /etc/fstab (faites attention à ce que vous faites. N’oubliez pas que vous êtes en mode Super utilisateur !) et ajoutez-y une ligne de ce type : <em>(L’option <strong>iocharset=utf8</strong> permet l’utilisation du jeu de caractères UTF-8, ce qui corrige les problèmes de noms de dossiers et fichiers accentués)</em>.
</p>
<pre class="file">//192.168.1.2/Partage	/media/partage cifs credentials=/root/.smbcredentials,iocharset=utf8	0	0</pre>

<p>
Ou :
</p>
<pre class="file">//192.168.1.2/Partage	/media/partage	cifs	guest,iocharset=utf8	0	0</pre>

<p>
si le PC distant est sous windows et ne nécessite pas d’identification.
</p>

<p>
Le fichier credentials peut ne pas suffire à avoir accès en écriture, il faut alors ajouter l’utilisateur qui se connecte et les droit chmod sur les répertoire et fichiers :
</p>
<pre class="file">//192.168.1.2/Partage	/media/partage cifs uid=nom_utilisateur_ubuntu,dir_mode=0777,file_mode=0777,credentials=/root/.smbcredentials,iocharset=utf8	0	0</pre>

<p>
Dans le cas d’un <em class="u"><strong>partage dont le nom contient une espace</strong></em>, ajouter la ligne comme ceci :
</p>
<pre class="file">//192.168.1.2/Partage\040avec\040une\040espace	/media/partage cifs credentials=/root/.smbcredentials,iocharset=utf8	0	0</pre>

<p>
Ou encore :
</p>
<pre class="file">//192.168.1.2/Partage\040avec\040une\040espace	/media/partage	cifs	guest,iocharset=utf8	0	0</pre>

<p>
\040 étant le code octal pour une espace.
</p>

<p>
Dans le cas d’un <em class="u"><strong>partage dont le nom contient des parenthèses</strong></em> (cas d’un lecteur partagé), les codes octaux sont respectivement <strong>050</strong> et <strong>051</strong> pour <strong>(</strong> et <strong>)</strong>.
</p>

<p>
Sauvegardez le fichier : au prochain démarrage, vous aurez accès à vos fichiers dans toutes vos applications.
</p>

<p>
Cette méthode est efficace, robuste et simple à mettre en œuvre, mais elle souffre de quelques limitations. Elle impose de stocker des mots de passe en clair dans un fichier, et surtout, elle ne permet pas d’utiliser des paramètres différents en fonction de l’utilisateur qui se connecte et donc empêche de profiter des mécanismes de gestion des droits d’accès que les versions récentes de Windows permettent (à partir de Windows 2000). Pour remédier à cela, il existe une autre solution.
</p>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
Les utilisateurs de <strong>Xubuntu</strong> devront utiliser cette méthode pour accéder aux partages réseaux. Voici un petit récapitulatif de la procédure :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li">Installer <strong>samba</strong> et <strong>smbfs</strong> avec Synaptic</div>
</li>
<li class="level1 node"><div class="li">Créer les répertoires où vont être montés les partages :</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"><em>/media/PC1/images</em></div>
</li>
<li class="level2"><div class="li"><em>/media/PC1/musiques</em></div>
</li>
</ul>
</li>
<li class="level1"><div class="li">Modifier le fichier fstab :</div>
</li>
</ul>

<p>
  gksudo mousepad /etc/fstab
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li">Rajouter à la fin du fichier l’adresse du PC distant, les dossiers à monter, et où les monter :</div>
</li>
</ul>
<pre class="file">//192.168.0.2/images	/media/PC1/images	smbfs	guest,iocharset=utf8	0	0
//192.168.0.2/musiques	/media/PC1/musiques	smbfs	guest,iocharset=utf8	0	0</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li">Redémarrer</div>
</li>
</ul>

</div>

<h4 id="permissions_et_appropriation_des_fichiers_et_repertoires">Permissions et appropriation des fichiers et répertoires</h4>
<div class="level4">

<p>
<a href="http://manpages.ubuntu.com/manpages/utopic/en/man8/mount.cifs.8.html" class="urlextern" title="http://manpages.ubuntu.com/manpages/utopic/en/man8/mount.cifs.8.html" rel="nofollow">traduit de la page ubuntu.com sur les options cifs</a><br/>

Le protocole CIFS ne fournit pas d&#039;informations unix sur le propriétaire et le mode pour les fichiers et répertoires. De ce fait, les fichiers et répertoires sont définis par les valeurs associées aux options <em>uid=</em> et <em>gid=</em> , et aux persmissions définies par les options <em>file_mode</em> et <em>dir_mode</em> lors du montage. Tenter de modifier ces valeurs avec chmod/chown fonctionne mais est sans effet.<br/>

Quand le client et le serveur négocient les extensions unix, les fichiers et répertoires seront affectés aux valeurs <em>uid</em>, <em>gid</em> et mode défini par le serveur. Comme le montage CIFS est généralement utilisé par un utilisateur unique avec le même &quot;<em>credentials</em>&quot;, les nouveaux fichiers et répertoires créés lui sont associés quelque-soit le &quot;<em>credentials</em>&quot; utilisé lors du montage.<br/>

Si les options <em>uid</em> et <em>gid</em> utilisées ne correspondent pas entre le client et le serveur, les options <em>forceuid</em> et <em>forcegid</em> peuvent être utiles. Notez cependant qu&#039;il n&#039;y a pas d&#039;équivalent pour le mode, ce qui entraîne que les permissions affectées à un fichier (ou répertoire) affecté par <em>uid/gid</em> ne correspondent pas forcément aux véritables autorisations!<br/>

Quand les extensions unix ne sont pas négociées, il est également possible de les émuler localement sur le serveur en utilisant l&#039;option de montage &quot;<em>dynperm</em>&quot;. Si cette option est active, les nouveaux fichiers et répertoires recevront des permissions appropriées… mais en général, cette option est déconseillée.<br/>

Il est aussi possible de remplacer les permissions sur le client via l&#039;option &quot;<em>noperm</em>&quot;. Les contrôle de permissions réalisées côté serveur ne peuvent pas être remplacées. Elle correspondent toujours au &quot;<em>credentials</em>&quot; utilisées lors du montage et non à l&#039;utilisateur qui accède au partage.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Modifier le fichier fstab de montage des partitions] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="modifier_le_fichier_fstab_de_montage_des_partitions" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="3662-9282" /><button type="submit" title="Modifier le fichier fstab de montage des partitions" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="eme_methodeutilisation_de_la_bibliotheque_libpam-mount">2ème méthode : utilisation de la bibliothèque libpam-mount</h2>
<div class="level2">
<div class="notewarning"><img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> cette méthode contient des options comme fmask, dmask qu&#039;on ne retrouve plus dans <a href="http://manpages.ubuntu.com/manpages/precise/en/man8/smbmount.8.html" class="urlextern" title="http://manpages.ubuntu.com/manpages/precise/en/man8/smbmount.8.html" rel="nofollow">les pages d&#039;options</a> 
</div>
</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[2ème méthode : utilisation de la bibliothèque libpam-mount] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="eme_methodeutilisation_de_la_bibliotheque_libpam-mount" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="9283-9562" /><button type="submit" title="2ème méthode : utilisation de la bibliothèque libpam-mount" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="installation_des_paquets_necessaires1">Installation des paquets nécessaires</h3>
<div class="level3">

<p>
Grâce à <a href="/synaptic" class="wikilink1" title="synaptic">Synaptic</a>, installez les paquets suivants sur votre système s’ils ne le sont pas déjà (ils ne font pas partie des paquets installés par défaut) :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li">libpam-mount</div>
</li>
<li class="level1"><div class="li">cifs-utils</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Installation des paquets nécessaires] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_des_paquets_necessaires1" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="9563-9813" /><button type="submit" title="Installation des paquets nécessaires" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="petite_correction_sur_les_droits">Petite correction sur les droits</h3>
<div class="level3">

<p>
Afin que tout cela soit faisable, il est nécessaire de modifier légèrement les droits du fichier /usr/bin/smbmount. Pour cela, tapez dans un terminal la commande :
</p>
<pre class="code">sudo chmod +s /usr/bin/smbmount</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Petite correction sur les droits] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="petite_correction_sur_les_droits" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="9814-10061" /><button type="submit" title="Petite correction sur les droits" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="edition_des_fichiers_de_configuration">Édition des fichiers de configuration</h3>
<div class="level3">

<p>
Une fois ces deux paquets installés, on fait comme précédemment : on lance <a href="/nano" class="wikilink1" title="nano">Nano</a> en mode superutilisateur pour créer et modifier le fichier /etc/pam.d/common-pammount avec la commande :
</p>
<pre class="code">sudo nano /etc/pam.d/common-pammount</pre>

<p>
Dans ce fichier, ajoutez les deux lignes suivantes et enregistrez-le :
</p>
<pre class="file">auth       optional   pam_mount.so use_first_pass
session    optional   pam_mount.so </pre>

<p>
<strong>Faites attention à saisir correctement ces deux lignes ! Des erreurs ici risquent de vous empêcher d’ouvrir une session ultérieurement.</strong>
</p>

<p>
Ensuite, ouvrez le fichier <strong>/etc/pam.d/gdm</strong> qui existe déjà et ajoutez à la fin la ligne suivante :
</p>
<pre class="file">@include common-pammount</pre>

<p>
Si vous utilisez la connexion automatique au démarrage, la modification doit se faire aussi dans le fichier <strong>/etc/pam.d/gdm-autologin</strong>.
</p>
<div class="noteclassic"> Dans lubuntu 14.04.3 LTS, les fichiers seraient plutôt lightdm et lightdm-autologin.
</div>
<p>
De la même façon, vous trouverez dans ce répertoire toute une série de fichiers correspondants à diverses commandes de connexion ou d’ouverture de session. Si vous ajoutez cette ligne dans l’un de ces fichiers, le montage des partages sera pris en compte.
</p>

<p>
Enregistrez ce fichier.
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Édition des fichiers de configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="edition_des_fichiers_de_configuration" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="10062-11372" /><button type="submit" title="Édition des fichiers de configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="autoriser_le_demontage_des_volumes_a_la_fermeture_de_session">Autoriser le démontage des volumes à la fermeture de session</h3>
<div class="level3">

<p>
Pour cela, il faut modifier le fichier <strong>/etc/login.defs</strong>, y chercher l’option <strong>CLOSE_SESSIONS</strong> (attention à la casse) et la mettre à la valeur <em>yes</em>.
</p>
<div class="noteimportant">Important :
Dans la version 9.04, l’option <strong>CLOSE_SESSIONS</strong> est déclarée comme obsolète. Est-elle remplacée par autre chose ?

</div>
</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Autoriser le démontage des volumes à la fermeture de session] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="autoriser_le_demontage_des_volumes_a_la_fermeture_de_session" /><input type="hidden" name="codeblockOffset" value="15" /><input type="hidden" name="range" value="11373-11770" /><button type="submit" title="Autoriser le démontage des volumes à la fermeture de session" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="edition_du_fichier_indiquant_les_partages_a_monter">Édition du fichier indiquant les partages à monter</h3>
<div class="level3">

<p>
Toujours dans Gedit, ouvrez le fichier <strong>/etc/security/pam_mount.conf</strong>.
</p>
<div class="noteimportant">Important : Dans la version 9.04 le fichier s’appelle <strong>/etc/security/pam_mount.conf.xml</strong>
</div>
<p>
C’est ici qu’on va trouver toutes les options de configuration permettant d’indiquer quels partages on va monter et de quelles manières.
</p>

<p>
Toutes les lignes de ce fichier qui commencent par # sont en fait des lignes de commentaires qui n’engagent aucune action concrète. Ne vous inquiètez pas de ce que vous voyez dans ce fichier : 90% des lignes sont des commentaires explicatifs et il n’y a en fait que très peu de lignes réellement significatives.
</p>

<p>
La lecture de ces commentaires n’est d&#039;ailleurs pas vaine, car ils vous permettront de comprendre un peu mieux l’utilisation générale de ce système qui ne se limite pas à ce que nous en faisons ici.
</p>

</div>

<h4 id="debug_et_creation_des_repertoires">Debug et création des répertoires</h4>
<div class="level4">

<p>
Les deux premières options disponibles dans ce fichier sont les suivantes :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li">debug</div>
</li>
<li class="level1"><div class="li">mkmountpoint</div>
</li>
</ul>

<p>
La première active le mode <em>debug</em> quand on la met à 1. Cela permet d’avoir des messages de retour de l’utilisation. Ce n’est réellement utile que lorsqu’on l’utilise en mode console, mais on peut la laisser à sa valeur par défaut.
</p>

<p>
La deuxième est une option qui permet, quand sa valeur est à 1, de créer automatiquement les répertoires où l’on va monter nos dossiers partagés. Là, c’est à vous de voir. Mais faites attention : si vous la mettez à 0, n’oubliez pas d&#039;aller créer les dossiers nécessaires ultérieurement.
</p>

</div>

<h4 id="montage_de_partage_specifique_a_l_utilisateur">Montage de partage spécifique à l&#039;utilisateur</h4>
<div class="level4">

<p>
L’option suivante qui nous intéresse est l’option <em>luserconf</em>, disponible quelques lignes plus bas. Si vous décommentez cette ligne, le nom du fichier que vous mettrez à la suite de cette option sera utilisé pour paramétrer des partages spécifiques à l’utilisateur. Ce fichier sera à placer dans le répertoire personnel de l’utilisateur en question et devra contenir des directives volumes comme nous le verrons plus loin.
</p>

</div>

<h4 id="gestion_des_options_autoriseesinterditesobligatoires">Gestion des options autorisées/interdites/obligatoires</h4>
<div class="level4">

<p>
Les options suivantes qui nous sont utiles sont :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li">options_allow</div>
</li>
<li class="level1"><div class="li">options_deny</div>
</li>
<li class="level1"><div class="li">options_require</div>
</li>
</ul>

<p>
En général, elles seront mises ou laissées en commentaires. Elles permettent d’indiquer quelles options seront interdites, requises et autorisées parmi celles disponibles plus loin dans la directive volume (lisez les commentaires qui les accompagnent si vous voulez vous en servir). Sachez que les options qu’elles concernent sont à rapprocher des options de la commande smbmnt (qui est utilisée de toute façon ici de manière transparente).
</p>

</div>

<h4 id="directives_de_montages_des_partages">Directives de montages des partages</h4>
<div class="level4">

<p>
Voici enfin le point crucial : la création des directives de montage des dossiers distants, par l’indication des directives volumes. La syntaxe d’une telle option pour le montage de volume via <a href="/samba" class="wikilink1" title="samba">smb</a> est la suivante :
</p>
<pre class="file">volume &lt;utilisateur&gt; smbfs &lt;serveur&gt; &lt;partage&gt; &lt;point de montage&gt; &lt;option1,option2,..optionx&gt; - -</pre>

<p>
La signification de chaque élément est la suivante :
</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<tr class="row0">
		<td class="col0 centeralign">	<strong>&lt;utilisateur&gt;</strong>	</td><td class="col1 leftalign">nom d&#039;utilisateur à utiliser pour se connecter. Un mécanisme de joker est disponible pour<br/>
une utilisation générique (voir plus loin).	</td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">	<strong>&lt;serveur&gt;</strong>	</td><td class="col1 leftalign">nom ou adresse IP du poste distant sur lequel se situe le partage auquel on veut accéder.	</td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">	<strong>&lt;partage&gt;</strong>	</td><td class="col1 leftalign">nom du partage tel qu&#039;il est défini sur le PC Windows distant.	</td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">	<strong>&lt;point de montage&gt;</strong>	</td><td class="col1 leftalign">chemin complet vers le répertoire où l’on veut monter le partage, en fonction de la valeur<br/>
que l’on a donné à l’option mkmountpoint. Ce dossier sera créé automatiquement ou non.	</td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">	<strong>&lt;optionx&gt;</strong>	</td><td class="col1 leftalign">les options disponibles pour le montage de ce répertoire.	</td>
	</tr>
</table></div>

<p>
NB :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li">les deux tirets à la fin de la ligne sont <strong>absolument indispensables</strong> car ils correspondent à la non-utilisation de paramètres qui sont normalement utilisés dans d’autres cas et inutiles ici (montage de dossiers chiffrés) ;</div>
</li>
<li class="level1"><div class="li">attention à ne pas confondre les différents paramètres de cette commande. Ils sont à séparer par des espaces. Les différentes options sont séparées les unes des autres par des virgules.</div>
</li>
</ul>

</div>

<h4 id="les_jokers_pour_le_nom_de_l_utilisateur">Les jokers pour le nom de l’utilisateur</h4>
<div class="level4">

<p>
On peut remplacer le nom de l&#039;utilisateur par le caractère <code>*</code>. Cela signifie que c’est le nom de l’utilisateur courant qui sera utilisé et dans ce cas, le caractère <code>&amp;</code> peut être utilisé pour remplacer le nom de l’&#039;utilisateur dans d’autres paramètres de la ligne (nom du dossier partagé, point de montage notamment).
</p>

</div>

<h4 id="les_options_de_montage">Les options de montage</h4>
<div class="level4">

<p>
Les options de montage disponibles sont en fait celles de la commande smbmnt. Voyez les pages man de cette commande si vous voulez en savoir plus :
</p>
<pre class="code">man smbmnt</pre>

<p>
Les plus utiles dans notre cas de figure sont les suivantes :
</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<tr class="row0">
		<td class="col0 centeralign">	<strong>uid</strong>	</td><td class="col1 leftalign">nom d’utilisateur du propriétaire des fichiers et répertoire partagé	</td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">	<strong>gid</strong>	</td><td class="col1 leftalign">nom du groupe correspondant	</td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">	<strong>dmask</strong>	</td><td class="col1 leftalign">masque de droits des répertoires	</td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">	<strong>fmask</strong>	</td><td class="col1 leftalign">masque de droits des fichiers	</td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">	<strong>workgroup</strong>	</td><td class="col1 leftalign">groupe de travail dans lequel il faut aller chercher le PC distant	</td>
	</tr>
</table></div>

<p>
Vous pouvez tester les options que vous voulez utiliser en faisant d’abord des tests avec la commande smbmnt. Une fois que vous aurez ainsi défini les valeurs correctes des paramètres dont vous avez besoin, il vous sera beaucoup plus facile de paramétrer correctement ce fichier.
</p>

</div>

<h4 id="quelques_exemples_de_directives_volumes">Quelques exemples de directives volumes</h4>
<div class="level4">

<p>
Montage d’un répertoire distant accessible à tous les utilisateurs :
</p>
<pre class="file">volume * smbfs wrksrv Commun /media/Doc-Commun uid=&amp;,gid=commun,dmask=777,fmask=777,workgroup=workgroup - -</pre>

<p>
Description des paramètres et options utilisées :
</p>
<pre class="code">Serveur  wrksrv
Partage Commun 
Point de montage : /media/Doc-Commun (l’intérêt de le monter dans /media est de le faire apparaître dans les raccourcis)
option 	uid=utilisateur courant
	gid= groupe commun regroupant tous les utilisateurs du PC
	workgroup = c&#039;est ici le nom du groupe de travail par défaut de Windows</pre>

<p>
Montage d’un partage regroupant des dossiers spécifiques à chaque utilisateur :
</p>
<pre class="file">volume * smbfs wrksrv Users /home/&amp;/Doc-Utilisateur uid=&amp;,gid=&amp;,dmask=777,fmask=777,workgroup=workgroup - -</pre>

<p>
Ceci est un autre exemple dont l’idée est de donner accès à un partage qui regroupe des répertoires spécifiques à chaque utilisateur (on ne peut pas monter directement un sous-répertoire d’un partage. Seuls les partages eux-mêmes sont montables).
</p>

<p>
Pour cela, on utilise comme <em>gid</em> le groupe du même nom que l’utilisateur, créé automatiquement par Ubuntu. Les droits sont ici en libre accès, mais les dossiers distants qui ne sont pas configurés comme accessibles pour l’utilisateur ne lui seront pas accessibles (en fait, il ne verra pas le contenu et ne pourra pas y accéder).
</p>

<p>
De même, l’utilisation du joker <code>&amp;</code> permet de monter ce partage directement dans le répertoire personnel de l’utilisateur.
</p>

<p>
N’oubliez pas que vous pouvez en plus configurer des partages spécifiques à chaque utilisateur, grâce à la directive luserconf vue précédemment.
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Édition du fichier indiquant les partages à monter] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="edition_du_fichier_indiquant_les_partages_a_monter" /><input type="hidden" name="codeblockOffset" value="15" /><input type="hidden" name="range" value="11771-19061" /><button type="submit" title="Édition du fichier indiquant les partages à monter" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit14 page-header" id="que_faire_en_cas_de_problemes">Que faire en cas de problèmes ?</h2>
<div class="level2">
<div class="notetip">S’il y a des erreurs au démarrage, vous pouvez les retrouver dans le fichier <strong>syslog</strong> qui se trouve dans <strong>/var/log</strong> 
</div>
<p>
Comme on intervient sur les paramètres d’authentification, si vous faites une erreur dans un des fichiers de configuration, il est possible que vous ne puissiez plus vous connecter par la suite : dans ce cas, que faire ?
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[Que faire en cas de problèmes ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="que_faire_en_cas_de_problemes" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="19062-19478" /><button type="submit" title="Que faire en cas de problèmes ?" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="ere_methode">1ère méthode</h3>
<div class="level3">

<p>
Le plus simple est de démarrer en mode &quot;rescue&quot;. Pour cela, appuyez sur la touche &quot;esc&quot; au démarrage du Linux, lors du chargement de GRUB. Vous pourrez alors choisir le mode &quot;failsafe&quot; qui ouvre une session mono-utilisateur en tant que root. Vous pourrez ainsi modifier les fichiers dans /etc/pam.d sans trop de problèmes.
</p>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[1ère méthode] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ere_methode" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="19479-19831" /><button type="submit" title="1ère méthode" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="eme_methode">2ème méthode</h3>
<div class="level3">

<p>
Si vous êtes bricoleur et que vous avez la patience, vous pouvez utiliser un LiveCD d’une distribution Linux, notamment celui d’Ubuntu. Une fois que vous avez démarré avec le LiveCD, montez votre partition système dans le répertoire de votre choix, puis allez re-modifier les fichiers de configuration. Si vraiment plus rien ne marche, la première chose à faire est de commenter (en mettant un # devant) la ligne @include common-pammount du fichier /etc/pam.d/gdm. Cela vous permettra au moins de pouvoir vous connecter normalement.
</p>

<p>
Contributeurs: <a href="/utilisateurs/lordphoenix" class="wikilink1" title="utilisateurs:lordphoenix">LordPhoenix</a>, <a href="/utilisateurs/bcag2" class="wikilink1" title="utilisateurs:bcag2">bcag2</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/monterpartagewindows"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1615562112" /><input type="hidden" name="summary" value="[2ème méthode] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="eme_methode" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="19832-" /><button type="submit" title="2ème méthode" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="tutoriel/monterpartagewindows.txt">tutoriel/monterpartagewindows.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 12/03/2021, 16:15">Le 12/03/2021, 16:15</span></li><li class="text-muted">par bruno</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=tutoriel%3Amonterpartagewindows&amp;1635532354" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>utilisateurs:roschan:tutoriel:creer_une_extension_gnome [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="gnome,tutoriel,programmation,environnements,personnalisation,extensions gnome,brouillon"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns=utilisateurs:roschan:tutoriel"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/utilisateurs/roschan/tutoriel/creer_une_extension_gnome"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/utilisateurs/roschan/tutoriel/creer_une_extension_gnome"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/utilisateurs/roschan/tutoriel/creer_une_extension_gnome"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='utilisateurs:roschan:tutoriel';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"utilisateurs:roschan:tutoriel:creer_une_extension_gnome","namespace":"utilisateurs:roschan:tutoriel","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="utilisateurs:roschan:tutoriel:creer_une_extension_gnome">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=media&amp;ns=utilisateurs%3Aroschan%3Atutoriel"  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Afficher le texte source [V]">Modifier cette page</a></li><li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">utilisateurs:roschan:tutoriel:creer_une_extension_gnome</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=edit"  class="action text-muted source" accesskey="v" rel="nofollow" title="Afficher le texte source [V]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/utilisateurs/roschan/tutoriel/creer_une_extension_gnome?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#introduction","title":"Introduction","level":1},{"link":"#qu_est_gnome_shell","title":"Qu'est GNOME Shell ?","level":2},{"link":"#le_code_source_de_gnome_shell","title":"Le code source de GNOME Shell","level":2},{"link":"#javascript","title":"Javascript","level":2},{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#les_crashs","title":"Les crashs","level":2},{"link":"#tester_et_debugguer","title":"Tester et d\u00e9bugguer","level":2},{"link":"#un_premier_exemple","title":"Un premier exemple","level":1},{"link":"#metadatajson","title":"metadata.json","level":2},{"link":"#stylesheetcss","title":"stylesheet.css","level":2},{"link":"#extensionjs","title":"extension.js","level":2},{"link":"#creons_une_vraie_extension","title":"Cr\u00e9ons une vraie extension","level":1},{"link":"#une_idee","title":"Une id\u00e9e","level":2},{"link":"#premiere_ebauche","title":"Premi\u00e8re \u00e9bauche","level":2},{"link":"#s_adapter_a_l_utilisateur","title":"S'adapter \u00e0 l'utilisateur","level":2},{"link":"#prefsjs","title":"prefs.js","level":2},{"link":"#autres_exemples_de_code","title":"Autres exemples de code","level":1},{"link":"#ce_dont_j_ai_peu_parle_ici","title":"Ce dont j'ai peu parl\u00e9 ici","level":1},{"link":"#clutter","title":"Clutter","level":2},{"link":"#tweener","title":"Tweener","level":2},{"link":"#dbus","title":"DBus","level":2},{"link":"#bash","title":"Bash","level":2},{"link":"#publier_l_extension","title":"Publier l'extension","level":1},{"link":"#un_site_de_partage_de_code","title":"Un site de partage de code","level":2},{"link":"#la_plateforme_officielle","title":"La plateforme officielle","level":2},{"link":"#voir_aussi","title":"Voir aussi","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#introduction">Introduction</a>
<ul class="nav toc">
<li class="level2"><a href="#qu_est_gnome_shell">Qu&#039;est GNOME Shell ?</a></li>
<li class="level2"><a href="#le_code_source_de_gnome_shell">Le code source de GNOME Shell</a></li>
<li class="level2"><a href="#javascript">Javascript</a></li>
</ul>
</li>
<li class="level1"><a href="#pre-requis">Pré-requis</a>
<ul class="nav toc">
<li class="level2"><a href="#les_crashs">Les crashs</a></li>
<li class="level2"><a href="#tester_et_debugguer">Tester et débugguer</a></li>
</ul>
</li>
<li class="level1"><a href="#un_premier_exemple">Un premier exemple</a>
<ul class="nav toc">
<li class="level2"><a href="#metadatajson">metadata.json</a></li>
<li class="level2"><a href="#stylesheetcss">stylesheet.css</a></li>
<li class="level2"><a href="#extensionjs">extension.js</a></li>
</ul>
</li>
<li class="level1"><a href="#creons_une_vraie_extension">Créons une vraie extension</a>
<ul class="nav toc">
<li class="level2"><a href="#une_idee">Une idée</a></li>
<li class="level2"><a href="#premiere_ebauche">Première ébauche</a></li>
<li class="level2"><a href="#s_adapter_a_l_utilisateur">S&#039;adapter à l&#039;utilisateur</a></li>
<li class="level2"><a href="#prefsjs">prefs.js</a></li>
</ul>
</li>
<li class="level1"><a href="#autres_exemples_de_code">Autres exemples de code</a></li>
<li class="level1"><a href="#ce_dont_j_ai_peu_parle_ici">Ce dont j&#039;ai peu parlé ici</a>
<ul class="nav toc">
<li class="level2"><a href="#clutter">Clutter</a></li>
<li class="level2"><a href="#tweener">Tweener</a></li>
<li class="level2"><a href="#dbus">DBus</a></li>
<li class="level2"><a href="#bash">Bash</a></li>
</ul>
</li>
<li class="level1"><a href="#publier_l_extension">Publier l&#039;extension</a>
<ul class="nav toc">
<li class="level2"><a href="#un_site_de_partage_de_code">Un site de partage de code</a></li>
<li class="level2"><a href="#la_plateforme_officielle">La plateforme officielle</a></li>
</ul>
</li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/gnome" class="wikilink1" title="gnome" rel="tag">gnome</a>,
	<a href="/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>,
	<a href="/programmation" class="wikilink1" title="programmation" rel="tag">programmation</a>,
	<a href="/environnements" class="wikilink1" title="environnements" rel="tag">environnements</a>,
	<a href="/personnalisation" class="wikilink1" title="personnalisation" rel="tag">personnalisation</a>,
	<a href="/extensions_gnome" class="wikilink1" title="extensions_gnome" rel="tag">extensions GNOME</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="tutorielprogrammer_une_extension_gnome_shell">Tutoriel : programmer une extension GNOME Shell</h1>
<div class="level1">

<p>
Ce tutoriel concerne les personnes intéressées dans la <strong>programmation</strong> d&#039;extensions GNOME Shell.
</p>

<p>
Les informations présentées ici sont normalement valables au moins pour les versions 3.18 à 3.26 de GNOME Shell.
</p>
<div class="noteimportant">Je partage ici mon expérience personnelle, mais je ne suis pas programmeur ni informaticien.
<p>
J&#039;ai appris à faire des extensions &quot;en autodidacte&quot; et mes conseils sont sans aucun doute perfectibles, je ne suis en aucun cas une autorité en la matière.
</p>

</div>
</div>

<h2 class="sectionedit2 page-header" id="introduction">Introduction</h2>
<div class="level2">

</div>

<h3 class="sectionedit3" id="qu_est_gnome_shell">Qu&#039;est GNOME Shell ?</h3>
<div class="level3">

<p>
Le vocabulaire autour de <a href="/gnome" class="wikilink1" title="gnome">GNOME</a>/GNOME 3/<a href="/gnome_shell" class="wikilink1" title="gnome_shell">GNOME Shell</a> est parfois confus. <br/>

GNOME est un ensemble de logiciels libres formant un environnement de bureau. Depuis la version 3 de cet environnement, GNOME Shell constitue le <em>shell graphique</em> de l&#039;<a href="/environnements" class="wikilink1" title="environnements">environnement</a> GNOME, c&#039;est-à-dire qu&#039;il fournit l&#039;interface graphique venant se greffer autour du <a href="/gestionnaire_de_fenetres" class="wikilink1" title="gestionnaire_de_fenetres">gestionnaire de fenêtres</a> (nommé <a href="/mutter" class="wikilink1" title="mutter">Mutter</a>).
</p>

<p>
Tous les 6 mois, aux alentours de l&#039;équinoxe, une version stable de GNOME est diffusée, numérotée 3.xx, où xx est un numéro pair. Les distributeurs (les personnes qui mettent à disposition les paquets des distributions) mettent alors quelques jours à quelques mois avant de proposer ces paquets aux utilisateurs.
</p>
<div class="noteclassic">Il est possible, notamment avec les Ubuntu antérieurs à mi-2017, que les versions des logiciels GNOME utilisés (<a href="/nautilus" class="wikilink1" title="nautilus">Nautilus</a>, …) ne correspondent pas aux versions de GNOME Shell.
</div>
<p>
Vous pouvez connaître votre version de GNOME Shell en tapant 
</p>
<pre class="code">gnome-shell --version</pre>

</div>

<h3 class="sectionedit4" id="le_code_source_de_gnome_shell">Le code source de GNOME Shell</h3>
<div class="level3">

<p>
L&#039;interface GNOME Shell a la particularité d&#039;être codée en javascript. Ce code est ensuite interprété par un moteur de rendu nommé <strong>Gjs</strong> (basé sur le moteur de rendu javascript de Firefox).
</p>

<p>
Vous le savez peut-être, javascript a la particularité d&#039;autoriser le <em>monkeypatching</em>, c&#039;est-à-dire qu&#039;une fonction du code peut être réécrite à un autre endroit du code, dynamiquement. On peut donc modifier l&#039;aspect et le comportement de la quasi-totalité des composants de l&#039;interface GNOME Shell !
</p>

<p>
On va d&#039;abord se procurer le code source de l&#039;interface par défaut :
</p>

<p>
Rendez-vous à l&#039;adresse <code><a href="https://github.com/GNOME/gnome-shell/tree/gnome-3-xx" class="urlextern" title="https://github.com/GNOME/gnome-shell/tree/gnome-3-xx" rel="nofollow">https://github.com/GNOME/gnome-shell/tree/gnome-3-xx</a></code> où xx est votre version de GNOME Shell, cliquez sur le bouton vert pour télécharger le code source au format .zip et décompressez-le avec un gestionnaire d&#039;archives.
</p>

<p>
La partie du code qui nous intéresse est dans le dossier <code>./js/ui</code>, vous pouvez ne conserver que ce dossier là si le reste vous encombre. Je vous conseille d&#039;ailleurs de changer les permissions de ce dossier pour le mettre en lecture seule : nous n&#039;allons jamais ni le modifier ni l&#039;exécuter.
</p>

</div>

<h3 class="sectionedit5" id="javascript">Javascript</h3>
<div class="level3">

<p>
Ce tutoriel n&#039;est pas un cours sur le javascript, il est conseillé de se familiariser préalablement avec ce langage, qui n&#039;est heureusement pas le plus compliqué en ce monde.
</p>

<p>
Ce n&#039;est pas ici que vous apprendrez la syntaxe des conditionnelles et des affectations, ceci dit les explications fournies devraient vous suffire à suivre même si vous débutez.
</p>

</div>

<h2 class="sectionedit6 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">

</div>

<h3 class="sectionedit7" id="les_crashs">Les crashs</h3>
<div class="level3">

<p>
On va ici &quot;jouer&quot; avec GNOME Shell lui-même. Il est très très probable qu&#039;on le fasse crasher à un moment ou à un autre, et il va donc falloir sérieusement améliorer la résilience aux crashs de votre installation.
</p>

<p>
Voici quelques pistes, idées ou astuces pour cela :
</p>

</div>

<h4 id="ne_pas_utiliser_wayland">Ne pas utiliser Wayland</h4>
<div class="level4">

<p>
Au moindre bug un peu brutal, avec Wayland, la session se ferme. De plus, Wayland n&#039;autorise pas le rechargement à chaud de la session, ce qui empêche de tester le code !
</p>

<p>
On va donc plutôt utiliser Xorg pour le développement.
</p>
<div class="noteclassic">N&#039;oubliez pas de tester le résultat final avec Wayland quand même !
</div>
</div>

<h4 id="en_cas_de_crash_du_gestionnaire_de_fenetre">En cas de crash du gestionnaire de fenêtre</h4>
<div class="level4">

<p>
Utilisez des applications avec des boutons de fenêtre &quot;CSD&quot;, de manière à ce que vous ne perdiez pas totalement le contrôle sur vos fenêtres en cas de disparition des barres de fenêtres.
</p>

<p>
Un terminal comme <a href="/tilix" class="wikilink1" title="tilix">Tilix</a> peut être utile par exemple.
</p>

</div>

<h4 id="en_cas_de_crash_de_gnome_shell">En cas de crash de GNOME Shell</h4>
<div class="level4">

<p>
Tout d&#039;abord, ayez des icônes sur le bureau.
</p>

<p>
Dans <code>~/.local/share/nautilus/scripts</code>, créez un fichier &quot;Remplacer GNOME Shell&quot; contenant seulement les lignes suivantes :
</p>
<pre class="code file bash"><span class="co0">#!/bin/bash</span>
&nbsp;
gnome-shell <span class="re5">-r</span></pre>

<p>
Vous pouvez maintenant entièrement recharger GNOME Shell à partir du menu &quot;clic-droit&quot; fournit par Nautilus sur les fichiers, et donc notamment sur le bureau.
</p>
<div class="noteimportant">N&#039;utilisez pas ce script à la légère : <strong>si l&#039;écran se verrouille</strong> alors que vous venez d&#039;utiliser ce script, cela vous obligerait à redémarrer l&#039;ordinateur pour pouvoir accéder de nouveau à votre session.
</div>
</div>

<h4 id="en_cas_de_crash_total_de_la_session_graphique">En cas de crash total de la session graphique</h4>
<div class="level4">

<p>
Avec <code>Ctrl+Alt+F2</code>, vous pouvez vous accédez à une console (tty2) où vous pouvez vous connecter en ligne de commande et par exemple annuler la manipulation ayant généré le crash en 1er lieu.
</p>

<p>
Si vous n&#039;êtes pas à l&#039;aise en ligne de commande, installez <a href="/wayland#weston" class="wikilink1" title="wayland">Weston</a>, il vous servira d&#039;environnement de secours pouvant être lancé sur tty2 (par exemple) avec la commande <code>weston</code> (cela utilise Wayland, et peut donc être lancé en parallèle d&#039;un environnement sur <a href="/xorg" class="wikilink1" title="xorg">Xorg</a>).
</p>

</div>

<h3 class="sectionedit8" id="tester_et_debugguer">Tester et débugguer</h3>
<div class="level3">
<div class="noteclassic">J&#039;admets ne pas être un grand expert en débuggage, il existe probablement mieux que ce que je suggère ici.
</div>
<p>
Avec <code>Alt+F2</code>, on trouve une fenêtre pour lancer des commandes. Cette fenêtre accepte des commandes &quot;spéciales&quot; internes à GNOME Shell.
</p>
<div class="noteclassic">Vous vous souvenez du code source téléchargé tout à l&#039;heure ? La boîte de dialogue lancée par <code>Alt+F2</code> est codée par <code>runDialog.js</code>, vous pouvez essayer d&#039;y analyser son fonctionnement si ça vous amuse.
</div>
</div>

<h4 id="recharger">Recharger</h4>
<div class="level4">
<div class="noteclassic">Incompatible avec Wayland.
</div>
<p>
La commande spéciale <code>r</code> recharge GNOME Shell, cela peut prendre quelques instants.
</p>

<p>
Les extensions notamment sont rechargées depuis le début, comme si l&#039;ordinateur venait d&#039;être allumé.
</p>

</div>

<h4 id="looking_glass">Looking Glass</h4>
<div class="level4">

<p>
La commande spéciale <code>lg</code> ouvre <em>Looking Glass</em>, un outil dont on reparlera plus tard.
</p>

</div>

<h4 id="voir_les_logs_en_direct">Voir les logs &quot;en direct&quot;</h4>
<div class="level4">
<div class="noteclassic">Incompatible avec Wayland.
</div><div class="noteimportant"><strong>LA SESSION NE DEVRA PAS SE VERROUILLER durant tout le temps que durera cette manipulation.</strong>
<p>
Vous pouvez désactiver le verrouillage de l&#039;écran dans <em>Paramètres → Confidentialité</em>, ou encore installer l&#039;extension <strong>Caffeine</strong> (activez-la <em class="u">tout le temps</em> que durera la manipulation ci-dessous).
</p>

<p>
Si votre session se verrouille, vous ne pourrez pas la déverrouiller.
</p>

</div>
<p>
Pour voir en direct les logs, et ainsi tester le fonctionnement de l&#039;extension, entrez dans un terminal la commande 
</p>
<pre class="code">gnome-shell -r</pre>

<p>
C&#039;est beaucoup plus &quot;violent&quot; que de simplement recharger GNOME Shell, et donc plus long. Toutes les erreurs émises entre autres par les extensions, mais aussi les messages ou les avertissements relatifs à d&#039;autres librairies, apparaissent maintenant dans le terminal.
</p>

<p>
Pour pouvoir quitter le terminal, utilisez simplement le script qu&#039;on a créé plus haut, puis fermez la session. Une fois reconnecté, vous pourrez réactiver le verrouillage si vous le souhaitez.
</p>

</div>

<h2 class="sectionedit9 page-header" id="un_premier_exemple">Un premier exemple</h2>
<div class="level2">

<p>
On peut créer une extension en partant de zéro ou en <em>forkant</em> une extension existante, mais pour commencer, nous allons utiliser la méthode &quot;classique&quot; en lançant la commande
</p>
<pre class="code">gnome-shell-extension-tool --create-extension</pre>

<p>
On vous demande un nom, une description et un identifiant (&quot;uuid&quot;). L&#039;identifiant est souvent au format <code>nom-extension@votre-pseudo</code>, inspirez-vous des identifiants d&#039;extensions existants dans <code>~/.local/share/gnome-shell/extensions/</code> (mettez ce dossier dans vos signets Nautilus d&#039;ailleurs <img src="/lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" /> ).
</p>

<p>
L&#039;extension qui vous est proposée pour débuter est un <em>Hello, World</em>, analysons les fichiers de son code source (situés dans <code>~/.local/share/gnome-shell/extensions/</code><em>votre-uuid</em><code>/</code>) :
</p>

</div>

<h3 class="sectionedit10" id="metadatajson">metadata.json</h3>
<div class="level3">

<p>
Ce fichier est <strong>obligatoire</strong> pour qu&#039;une extension soit reconnue par GNOME Shell.
</p>

<p>
Entre 2 accolades, on a une liste de propriétés au format <code>&quot;clef&quot;: valeur</code> séparées par des virgules.
</p>

<p>
Pour l&#039;instant, il y a les clefs :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>uuid</code> : obligatoire, doit correspondre au nom du dossier ;</div>
</li>
<li class="level1"><div class="li"> <code>name</code> : obligatoire, apparaît dans <a href="/gnome-tweak-tool" class="wikilink1" title="gnome-tweak-tool">gnome-tweak-tool</a> ;</div>
</li>
<li class="level1"><div class="li"> <code>description</code> : obligatoire, apparaît dans <a href="/gnome-tweak-tool" class="wikilink1" title="gnome-tweak-tool">gnome-tweak-tool</a> ;</div>
</li>
<li class="level1"><div class="li"> <code>shell-version</code> : un tableau (array) de valeurs entre guillemets, séparées par des virgules. Ce sont les versions de GNOME Shell que vous déclarez supporter. Cela aide les utilisateurs à faire leur &quot;tri&quot; sur le site officiel, mais avec les réglages d&#039;Ubuntu par défaut, une extension peut être installée même sur une version non supportée.</div>
</li>
</ul>

</div>

<h3 class="sectionedit11" id="stylesheetcss">stylesheet.css</h3>
<div class="level3">

<p>
Ce fichier n&#039;est pas obligatoire. Il gère le style de l&#039;extension en utilisant le langage <abbr title="Cascading Style Sheets">CSS</abbr>.
</p>

</div>

<h3 class="sectionedit12" id="extensionjs">extension.js</h3>
<div class="level3">

<p>
Ce fichier est <strong>obligatoire</strong> pour qu&#039;une extension soit reconnue par GNOME Shell.
</p>
<div class="noteclassic">Je le recopie entièrement le fichier, mais par petits bouts et dans le désordre pour pouvoir l&#039;expliquer au fur et à mesure.
</div>
<p>
Le fichier commence par l&#039;importation de ce dont on va se servir dans l&#039;extension.
</p>
<pre class="code file javascript"><span class="kw1">const</span> St <span class="sy0">=</span> imports.<span class="me1">gi</span>.<span class="me1">St</span><span class="sy0">;</span></pre>

<p>
St (Shell Toolkit) fournit un certain nombre de composants graphiques très utiles (des entrées de texte, des labels, des icônes, des boutons, …).
</p>

<p>
De plus, tous les fichiers javascript correspondant au code source de l&#039;interface (<code>ui</code>) de GNOME Shell sont importables dans le code : ici, on rend accessibles le contenu de main.js et tweener.js (qui correspond aux animations).
</p>
<pre class="code file javascript"><span class="kw1">const</span> Main <span class="sy0">=</span> imports.<span class="me1">ui</span>.<span class="me1">main</span><span class="sy0">;</span>
<span class="kw1">const</span> Tweener <span class="sy0">=</span> imports.<span class="me1">ui</span>.<span class="me1">tweener</span><span class="sy0">;</span></pre>
<pre class="code file javascript">let text<span class="sy0">,</span> button<span class="sy0">;</span>
&nbsp;
<span class="kw1">function</span> init<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    button <span class="sy0">=</span> <span class="kw1">new</span> St.<span class="me1">Bin</span><span class="br0">&#40;</span><span class="br0">&#123;</span> style_class<span class="sy0">:</span> <span class="st0">'panel-button'</span><span class="sy0">,</span> reactive<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> can_focus<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> x_fill<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> y_fill<span class="sy0">:</span> <span class="kw2">false</span><span class="sy0">,</span> track_hover<span class="sy0">:</span> <span class="kw2">true</span> <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    let icon <span class="sy0">=</span> <span class="kw1">new</span> St.<span class="me1">Icon</span><span class="br0">&#40;</span><span class="br0">&#123;</span> icon_name<span class="sy0">:</span> <span class="st0">'system-run-symbolic'</span><span class="sy0">,</span> style_class<span class="sy0">:</span> <span class="st0">'system-status-icon'</span> <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    button.<span class="me1">set_child</span><span class="br0">&#40;</span>icon<span class="br0">&#41;</span><span class="sy0">;</span>
    button.<span class="me1">connect</span><span class="br0">&#40;</span><span class="st0">'button-press-event'</span><span class="sy0">,</span> _showHello<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Le code ci-dessus est appelé au démarrage de GNOME Shell, <strong>même si l&#039;extension est désactivée</strong>. La fonction init ne doit donc JAMAIS modifier l&#039;interface graphique ni son comportement. Ici, la variable <code>button</code> précédemment créée a simplement été initialisée (voir <a href="https://developer.gnome.org/st/" class="urlextern" title="https://developer.gnome.org/st/" rel="nofollow">la documentation de St</a> pour plus de détails sur la signification des paramètres), et connectée à la fonction <code>_showHello</code> qu&#039;on verra plus loin : <code>&#039;button-press-event</code>&#039; correspond à un clic sur bouton, chaque clic sur le bouton appellera donc le code de <code>_showHello</code>, mais remarquez qu&#039;on n&#039;a pas encore ajouté le bouton à l&#039;interface.
</p>
<pre class="code file javascript"><span class="kw1">function</span> enable<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    Main.<span class="me1">panel</span>._rightBox.<span class="me1">insert_child_at_index</span><span class="br0">&#40;</span>button<span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">function</span> disable<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    Main.<span class="me1">panel</span>._rightBox.<span class="me1">remove_child</span><span class="br0">&#40;</span>button<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
La fonction <code>enable</code> est appelée si l&#039;extension est activée. Elle apporte les modifications à l&#039;interface. Toutes ces modifications doivent être annulées par la fonction <code>disable</code>, qui est appelé quand on désactive une extension.
</p>

<p>
Ici, la modification consiste à ajouter un bouton en forme d&#039;engrenage dans le panneau supérieur, le bouton étant celui qu&#039;on a initialisé tout à l&#039;heure. Cliquer sur le bouton déclenche la fonction suivante :
</p>
<pre class="code file javascript"><span class="kw1">function</span> _showHello<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>text<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        text <span class="sy0">=</span> <span class="kw1">new</span> St.<span class="me1">Label</span><span class="br0">&#40;</span><span class="br0">&#123;</span> style_class<span class="sy0">:</span> <span class="st0">'helloworld-label'</span><span class="sy0">,</span> text<span class="sy0">:</span> <span class="st0">&quot;Hello, world!&quot;</span> <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        Main.<span class="me1">uiGroup</span>.<span class="me1">add_actor</span><span class="br0">&#40;</span>text<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    text.<span class="me1">opacity</span> <span class="sy0">=</span> <span class="nu0">255</span><span class="sy0">;</span>
    let monitor <span class="sy0">=</span> Main.<span class="me1">layoutManager</span>.<span class="me1">primaryMonitor</span><span class="sy0">;</span>
    text.<span class="me1">set_position</span><span class="br0">&#40;</span>monitor.<span class="me1">x</span> <span class="sy0">+</span> <span class="kw4">Math</span>.<span class="me1">floor</span><span class="br0">&#40;</span>monitor.<span class="me1">width</span> <span class="sy0">/</span> <span class="nu0">2</span> <span class="sy0">-</span> text.<span class="me1">width</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">,</span> monitor.<span class="me1">y</span> <span class="sy0">+</span> <span class="kw4">Math</span>.<span class="me1">floor</span><span class="br0">&#40;</span>monitor.<span class="me1">height</span> <span class="sy0">/</span> <span class="nu0">2</span> <span class="sy0">-</span> text.<span class="me1">height</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    Tweener.<span class="me1">addTween</span><span class="br0">&#40;</span>text<span class="sy0">,</span> <span class="br0">&#123;</span> opacity<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> time<span class="sy0">:</span> <span class="nu0">2</span><span class="sy0">,</span> transition<span class="sy0">:</span> <span class="st0">'easeOutQuad'</span><span class="sy0">,</span> onComplete<span class="sy0">:</span> _hideHello <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Ici, on a plusieurs concepts intéressants : celui d&#039;acteur, qui est lié à <a href="https://fr.wikipedia.org/wiki/Clutter" class="urlextern" title="https://fr.wikipedia.org/wiki/Clutter" rel="nofollow">la bibliothèque Clutter</a>.
</p>
<div class="noteclassic">St est en fait une &quot;surcouche&quot; qui permet de rendre Clutter plus facile d&#039;utilisation pour les usages courants de GNOME Shell, et d&#039;uniformiser la manière d&#039;y appliquer des thèmes.
</div>
<p>
Clutter fonctionne par la manipulation d&#039;objets en 2D, nommés &quot;acteurs&quot;, à l&#039;intérieur d&#039;un espace simulé en 3D. La classe de base d&#039;un acteur est &quot;ClutterActor&quot;, et tous les acteurs peuvent être positionnés, redimensionnés et tournés dans l&#039;espace en 3D. La transparence est aussi gérée. Une transformation appliquée à l&#039;acteur &quot;parent&quot; sera appliquée à ses acteurs &quot;enfants&quot;. Voir la <a href="https://developer.gnome.org/clutter/stable/" class="urlextern" title="https://developer.gnome.org/clutter/stable/" rel="nofollow">vraie documentation</a> pour plus de détails.
</p>

<p>
Remarquez qu&#039;on a appliqué à <code>text</code> une propriété relative au style : vous trouverez une classe <code>helloworld-label</code> dans le fichier <code>stylesheet.css</code>
</p>

<p>
Tweener concerne les animations, ici, on a une animation de disparition en fondu qui dure 2 secondes (d&#039;ailleurs, si dans <a href="/gnome-tweak-tool" class="wikilink1" title="gnome-tweak-tool">gnome-tweak-tool</a> on désactive les animations, le bouton n&#039;a plus aucun effet visible puisque le label disparaît sitôt apparu), animation à la fin de laquelle on appelle <code>_hideHello</code>
</p>
<pre class="code file javascript"><span class="kw1">function</span> _hideHello<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    Main.<span class="me1">uiGroup</span>.<span class="me1">remove_actor</span><span class="br0">&#40;</span>text<span class="br0">&#41;</span><span class="sy0">;</span>
    text <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
C&#039;était donc le fonctionnement de l&#039;extension &quot;Hello, World&quot;. Maintenant, on va chercher à faire une extension utile.
</p>

</div>

<h2 class="sectionedit13 page-header" id="creons_une_vraie_extension">Créons une vraie extension</h2>
<div class="level2">

</div>

<h3 class="sectionedit14" id="une_idee">Une idée</h3>
<div class="level3">

<p>
On ne crée par une extension pour le plaisir de créer une extension !
</p>

<p>
Une extension <strong>rajoute une fonctionnalité là où elle manque</strong> selon vous (ou des personnes avec qui vous parlez) ; exemples :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Pas envie d&#039;ouvrir la vue &quot;activités&quot; pour voir les icônes du dash ? → <a href="/dash_to_dock" class="wikilink2" title="dash_to_dock" rel="nofollow">Dash to Dock</a></div>
</li>
<li class="level1"><div class="li"> Pas envie d&#039;un logiciel tiers pour gérer le presse-papier ? → Clipboard Indicator</div>
</li>
<li class="level1"><div class="li"> Pas envie d&#039;utiliser la recherche ni de parcourir la liste des applications ? → des extensions proposant des menus avec les applications par catégories (Arc Menu, Gno-menu, etc.)</div>
</li>
<li class="level1"><div class="li"> Pas envie de passer par la logithèque pour organiser vos <em>appfolders</em> ? → Appfolders Management Extension</div>
</li>
</ul>

<p>
Ici, voilà qu&#039;un <a href="https://forum.ubuntu-fr.org/viewtopic.php?id=1989116" class="urlextern" title="https://forum.ubuntu-fr.org/viewtopic.php?id=1989116" rel="nofollow">problème récurrent embête les amateurs de films et séries sous-titrées</a> !
</p>

<p>
C&#039;est vrai ça, impossible de bouger la petite &quot;fenêtre&quot; qui indique le changement du niveau de son ou de luminosité, donc chaque changement de volume ou de luminosité interrompt donc la compréhension de mon épisode passionnant de <em>Quan Zhi Gao Shou</em> ou toute autre chinoiserie dont j&#039;aimerais pouvoir lire les sous-titres (à défaut de comprendre les acteurs de la version originale).
</p>

<p>
Mais que vois-je dans <a href="#le_code_de_gnome_shell" title="utilisateurs:roschan:tutoriel:creer_une_extension_gnome ↵" class="wikilink1">le code de GNOME Shell</a> ? un fichier <code>osdWindow.js</code> qui contient précisément le code pour ces petites &quot;fenêtres&quot; gênantes ! Une extension peut donc résoudre ce problème ! De plus, ce n&#039;est pas un problème très complexe, on va pouvoir le résoudre sans faire appel à des choses très compliquées.
</p>

<p>
Notre identifiant unique pour cet exemple sera <code>move-osd-windows@maestrochan.fr</code>
</p>
<div class="notetip">Le code final complet est installable sur le <a href="https://extensions.gnome.org/extension/1220/move-osd-windows/" class="urlextern" title="https://extensions.gnome.org/extension/1220/move-osd-windows/" rel="nofollow">site officiel</a> des extensions GNOME Shell si vous désirez disposez des vrais fichiers complets.
</div>
<p>
Voici son fichier metadata.json :
</p>
<pre class="code file javascript"><span class="br0">&#123;</span>
  <span class="st0">&quot;_generated&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Generated by SweetTooth, do not edit&quot;</span><span class="sy0">,</span> 
  <span class="st0">&quot;description&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Change the position of OSD windows (sound &amp; luminosity popups).&quot;</span><span class="sy0">,</span> 
  <span class="st0">&quot;gettext-domain&quot;</span><span class="sy0">:</span> <span class="st0">&quot;move-osd-windows&quot;</span><span class="sy0">,</span> 
  <span class="st0">&quot;name&quot;</span><span class="sy0">:</span> <span class="st0">&quot;Move OSD Windows&quot;</span><span class="sy0">,</span> 
  <span class="st0">&quot;shell-version&quot;</span><span class="sy0">:</span> <span class="br0">&#91;</span>
    <span class="st0">&quot;3.18&quot;</span><span class="sy0">,</span> 
    <span class="st0">&quot;3.20&quot;</span><span class="sy0">,</span>
    <span class="st0">&quot;3.22&quot;</span><span class="sy0">,</span> 
    <span class="st0">&quot;3.24&quot;</span><span class="sy0">,</span>
    <span class="st0">&quot;3.26&quot;</span>
  <span class="br0">&#93;</span><span class="sy0">,</span> 
  <span class="st0">&quot;url&quot;</span><span class="sy0">:</span> <span class="st0">&quot;https://github.com/Maestroschan/Move-OSD-Windows-GNOME-Extension&quot;</span><span class="sy0">,</span> 
  <span class="st0">&quot;uuid&quot;</span><span class="sy0">:</span> <span class="st0">&quot;move-osd-windows@maestroschan.fr&quot;</span><span class="sy0">,</span> 
  <span class="st0">&quot;version&quot;</span><span class="sy0">:</span> <span class="nu0">1</span>
<span class="br0">&#125;</span></pre>
<div class="noteclassic">Ne vous préoccupez pas du numéro de version, il sera géré automatiquement par extensions.gnome.org <img src="/lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" />
</div>
</div>

<h3 class="sectionedit15" id="premiere_ebauche">Première ébauche</h3>
<div class="level3">

<p>
Commençons avec une 1ère ébauche du code d&#039;extension.js <br/>

Comme tout à l&#039;heure, le code est en entier mais fragmenté pour être expliqué.
</p>
<pre class="code file javascript"><span class="kw1">const</span> Main <span class="sy0">=</span> imports.<span class="me1">ui</span>.<span class="me1">main</span><span class="sy0">;</span>
<span class="kw1">const</span> OsdWindow <span class="sy0">=</span> imports.<span class="me1">ui</span>.<span class="me1">osdWindow</span><span class="sy0">;</span></pre>

<p>
On importe ce dont on va avoir besoin : <code>osdWindow.js</code> concerne la petite fenêtre dont on veut modifier la position, et <code>main.js</code> nous permettra d&#039;accéder à des choses comme le moniteur (écran d&#039;affichage) et ses propriétés.
</p>
<pre class="code file javascript"><span class="kw1">function</span> init<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="br0">&#125;</span></pre>

<p>
La fonction d&#039;initialisation est vide, on fera tout dans le &quot;enable&quot;.
</p>

<p>
Avant tout, on va définir un <em>array</em> vide et deux fonctions :
</p>
<pre class="code file javascript">let injections<span class="sy0">=</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">function</span> injectToFunction<span class="br0">&#40;</span>parent<span class="sy0">,</span> name<span class="sy0">,</span> func<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	let origin <span class="sy0">=</span> parent<span class="br0">&#91;</span>name<span class="br0">&#93;</span><span class="sy0">;</span>
	parent<span class="br0">&#91;</span>name<span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		let ret<span class="sy0">;</span>
		ret <span class="sy0">=</span> origin.<span class="me1">apply</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> arguments<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">&#40;</span>ret <span class="sy0">===</span> <span class="kw2">undefined</span><span class="br0">&#41;</span>
				ret <span class="sy0">=</span> func.<span class="me1">apply</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">,</span> arguments<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="kw1">return</span> ret<span class="sy0">;</span>
		<span class="br0">&#125;</span>
	<span class="kw1">return</span> origin<span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">function</span> removeInjection<span class="br0">&#40;</span>object<span class="sy0">,</span> injection<span class="sy0">,</span> name<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>injection<span class="br0">&#91;</span>name<span class="br0">&#93;</span> <span class="sy0">===</span> <span class="kw2">undefined</span><span class="br0">&#41;</span>
		<span class="kw1">delete</span> object<span class="br0">&#91;</span>name<span class="br0">&#93;</span><span class="sy0">;</span>
	<span class="kw1">else</span>
		object<span class="br0">&#91;</span>name<span class="br0">&#93;</span> <span class="sy0">=</span> injection<span class="br0">&#91;</span>name<span class="br0">&#93;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Ces fonctions, ce n&#039;est pas moi qui les invente, elles viennent directement d&#039;<strong><a href="https://wiki.gnome.org/Projects/GnomeShell/Extensions/StepByStepTutorial#knowingJavascript-howExtends" class="urlextern" title="https://wiki.gnome.org/Projects/GnomeShell/Extensions/StepByStepTutorial#knowingJavascript-howExtends" rel="nofollow">ici</a></strong>. Le but est de pouvoir injecter du code dans une fonction, puis de pouvoir le retirer.
</p>

<p>
L&#039;injection sera faite lors de l&#039;exécution de la fonction <code>enable</code> :
</p>
<pre class="code file javascript"><span class="kw1">function</span> enable<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	injections<span class="br0">&#91;</span><span class="st0">'show'</span><span class="br0">&#93;</span> <span class="sy0">=</span> injectToFunction<span class="br0">&#40;</span>OsdWindow.<span class="me1">OsdWindow</span>.<span class="kw1">prototype</span><span class="sy0">,</span> <span class="st0">'show'</span><span class="sy0">,</span>  <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
		let monitor <span class="sy0">=</span> Main.<span class="me1">layoutManager</span>.<span class="me1">monitors</span><span class="br0">&#91;</span><span class="kw1">this</span>._monitorIndex<span class="br0">&#93;</span><span class="sy0">;</span>
		let h_percent <span class="sy0">=</span> <span class="nu0">40</span><span class="sy0">;</span>
		let v_percent <span class="sy0">=</span> <span class="sy0">-</span><span class="nu0">30</span><span class="sy0">;</span>
&nbsp;
		<span class="kw1">this</span>._box.<span class="me1">translation_x</span> <span class="sy0">=</span> h_percent <span class="sy0">*</span> monitor.<span class="me1">width</span> <span class="sy0">/</span> <span class="nu0">100</span><span class="sy0">;</span>
		<span class="kw1">this</span>._box.<span class="me1">translation_y</span> <span class="sy0">=</span> v_percent <span class="sy0">*</span> monitor.<span class="me1">height</span> <span class="sy0">/</span> <span class="nu0">100</span><span class="sy0">;</span>
	<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Alors, que vient-on de faire ? Dans <code>osdWindow.js</code> (qu&#039;on a importé dans la variable <code>OsdWindow</code>), il existe l&#039;objet <code>OsdWindow</code>, dont le prototype définit une fonction <code>show</code>, appelée quand on montre l&#039;osdWindow à l&#039;écran. On va injecter dans la fonction <code>show</code> de quoi modifier la position de l&#039;osdWindow.
</p>

<p>
En lisant la fonction <code>_relayout</code> de l&#039;objet <code>OsdWindow</code> (que je ne vous copie pas au milieu du code de l&#039;extension pour ne pas porter à confusion), on comprend que la position est définie par <code>this._box.translation_x</code> et <code>this._box.translation_y</code> ; où <code>this</code> désigne l&#039;osdWindow qu&#039;on veut placer. On assigne donc de nouvelles valeurs à ces variables.
</p>

<p>
Si on avait mis 0 comme valeur pour <code>h_percent</code> et <code>v_percent</code>, la fenêtre aurait été parfaitement centrée ; avec 40 et -30, la fenêtre sera dans le coin supérieur-droit.
</p>

<p>
Avant de vouloir tester ce qu&#039;on a fait, il faut coder de quoi le retirer :
</p>
<pre class="code file javascript"><span class="kw1">function</span> disable<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	let arrayOSD <span class="sy0">=</span> Main.<span class="me1">osdWindowManager</span>._osdWindows<span class="sy0">;</span>
	<span class="kw1">for</span> <span class="br0">&#40;</span>let i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> arrayOSD.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		arrayOSD<span class="br0">&#91;</span>i<span class="br0">&#93;</span>._relayout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
		arrayOSD<span class="br0">&#91;</span>i<span class="br0">&#93;</span>._box.<span class="me1">translation_x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
&nbsp;
	removeInjection<span class="br0">&#40;</span>OsdWindow.<span class="me1">OsdWindow</span>.<span class="kw1">prototype</span><span class="sy0">,</span> injections<span class="sy0">,</span> <span class="st0">'show'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Ici, pour toutes les &quot;osd windows&quot; existantes, on va remettre les valeurs de <code>this._box.translation_x</code> et <code>this._box.translation_y</code> à leurs valeurs initiales (la fonction _relayout() modifie <code>this._box.translation_y</code>).
</p>

<p>
Ensuite, on retire nos injections.
</p>

<p>
Redémarrez GNOME Shell (Alt+F2 → r → Entrée) puis activez l&#039;extension via <a href="/gnome-tweak-tool" class="wikilink1" title="gnome-tweak-tool">GNOME-Tweak-Tool</a> par exemple.
</p>

<p>
Vous pouvez tester l&#039;extension, et voir le résultat.
</p>

</div>

<h3 class="sectionedit16" id="s_adapter_a_l_utilisateur">S&#039;adapter à l&#039;utilisateur</h3>
<div class="level3">

<p>
Cette 1ère ébauche ne fait que déplacer le problème : l&#039;utilisateur préférerait sans doute, quitte à s&#039;encombrer d&#039;une extension pour bouger la fenêtre, pouvoir choisir où il la bouge !
</p>

<p>
On va donc créer des paramètres, leur fenêtre de réglage (en anglais), et traduire le tout (en français).
</p>

<p>
<a href="/lib/exe/fetch.php?tok=e84aeb&amp;media=http%3A%2F%2Fi.imgur.com%2FfZY2jzV.png" class="media" title="http://i.imgur.com/fZY2jzV.png"><img src="/lib/exe/fetch.php?w=400&amp;tok=d8af2f&amp;media=http%3A%2F%2Fi.imgur.com%2FfZY2jzV.png" class="mediaright img-responsive" title="L&#039;arborescence complète une fois le projet terminé !" alt="L&#039;arborescence complète une fois le projet terminé !" width="400" /></a>
</p>

<p>
Pour commencer, mettez dans votre dossier le fichier <code><a href="https://git.gnome.org//browse/gnome-shell-extensions/plain/lib/convenience.js" class="urlextern" title="https://git.gnome.org//browse/gnome-shell-extensions/plain/lib/convenience.js" rel="nofollow">convenience.js</a></code> ; étant proposé par les développeurs de GNOME Shell eux-mêmes, ce fichier est par défaut utilisé par beaucoup d&#039;extensions, et est relativement standard : il fournit de quoi gérer facilement les aspects &quot;paramétrage&quot; et &quot;internationalisation&quot;.
</p>

</div>

<h4 id="ajouter_des_parametres">Ajouter des paramètres</h4>
<div class="level4">

<p>
Pour commencer, on va ajouter des paramètres. Dans un dossier <code>schemas</code>, il faut avoir un fichier XML dont le nom soit <code>org.gnome.shell.extensions.move-osd-windows.gschema.xml</code> (remplacez bien sûr dans votre cas par votre propre nom d&#039;extension).
</p>

<p>
Ce fichier contient les lignes suivantes : TODO
</p>
<pre class="code file xml">&nbsp;</pre>

<p>
En ouvrant un terminal dans le dossier <code>schemas</code>, compilez le fichier XML avec la commande
</p>
<pre class="code">glib-compile-schemas .</pre>

<p>
On aura maintenant des <em>clés</em> dans <a href="/dconf-editor" class="wikilink1" title="dconf-editor">dconf</a> qui nous seront spécifiques (elles n&#039;apparaissent pas dans <em>dconf-editor</em> tant qu&#039;elles n&#039;ont pas été explicitement réécrites).
</p>
<div class="noteclassic">Les types possibles pour les clés de paramètres sont : <img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> &quot;s&quot;, une chaîne de caractères </div>
</li>
<li class="level1"><div class="li"> &quot;as&quot;, un tableau de chaînes de caractères</div>
</li>
<li class="level1"><div class="li"> &quot;b&quot;, un booléen (true/false)</div>
</li>
<li class="level1"><div class="li"> &quot;i&quot;, un entier</div>
</li>
<li class="level1"><div class="li"> &quot;ai&quot;, un tableau d&#039;entiers</div>
</li>
<li class="level1"><div class="li"> …</div>
</li>
</ul>

</div>
</div>

<h4 id="ajouter_des_langues">Ajouter des langues</h4>
<div class="level4">

<p>
Il faut maintenant ajouter une traduction en français à notre extension.
</p>
<div class="noteclassic">&quot;Je suis nul en anglais, pourquoi ne pas avoir fait directement en français ?&quot;, direz-vous. Même si vous n&#039;êtes pas polyglotte, je suggère quand même de faire l&#039;extension en anglais puis de traduire en français, pour que des contributeurs débutants puissent ensuite traduire dans leur propre langue en prenant appui sur les fichiers adéquats proposés pour le français.
</div>
</div>

<h5 id="pre-requis1">Pré-requis</h5>
<div class="level5">

<p>
Installez un logiciel comme <a href="/poedit" class="wikilink2" title="poedit" rel="nofollow">Poedit</a> ou <a href="/gnome-translate" class="wikilink1" title="gnome-translate">GNOME-Translate</a> afin de pouvoir facilement éditer et compiler les fichiers de traduction.
</p>

</div>

<h5 id="modifications_du_code">Modifications du code</h5>
<div class="level5">

<p>
 Pour gérer facilement les langues et les clés dconf, on va modifier le code ainsi :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> le <code>_</code></div>
</li>
<li class="level1"><div class="li"> le get truc</div>
</li>
<li class="level1"><div class="li"> lien vers la version finale du code</div>
</li>
<li class="level1"><div class="li"> +gros warning sa race à ce stade parce que c&#039;est risqué hein</div>
</li>
</ul>

</div>

<h3 class="sectionedit17" id="prefsjs">prefs.js</h3>
<div class="level3">

<p>
Jusqu&#039;à présent, notre code Javascript modifiait GNOME Shell, les erreurs ou avertissements apparaissaient dans la console si besoin, et il fallait tout recharger pour voir les modifications.
</p>

<p>
Ici, nous allons faire une fenêtre avec des éléments graphiques GTK+ 3, dont le code sera rechargé à chaque fois que vous cliquerez sur le petit &quot;engrenage&quot; en face du nom de l&#039;extension dans l&#039;Outil de personnalisation GNOME. Les seules erreurs qu&#039;on verra sont celles qui bloqueront le chargement initial de la fenêtre, et on ne les verra pas dans la console, mais à la place du contenu de la fenêtre.
</p>

<p>
On commence par les importations nécessaires :
</p>
<pre class="code file javascript">&nbsp;</pre>
<pre class="code file javascript">&nbsp;</pre>
<pre class="code file javascript">&nbsp;</pre>

</div>

<h2 class="sectionedit18 page-header" id="autres_exemples_de_code">Autres exemples de code</h2>
<div class="level2">

<p>
N&#039;hésitez pas à lire les codes d&#039;autres extensions, pour les comprendre, s&#039;en inspirer, voire copier ou adapter des petits bouts de code (citez leurs auteurs quand même hein) si la licence utilisée le permet<sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup>. <br/>

Il est par exemple possible qu&#039;il existe déjà des extensions modifiant déjà en partie l&#039;interface presque comme vous aimeriez le faire, comprendre leur fonctionnement est donc intéressant. Imaginons qu&#039;on veuille ajouter un raccourci clavier pour ouvrir un menu : plusieurs extensions le proposent, analysez les fonctions utilisées en lisant leur code source !
</p>

<p>
<a href="#le_code_de_gnome_shell" title="utilisateurs:roschan:tutoriel:creer_une_extension_gnome ↵" class="wikilink1">Le code de GNOME Shell</a> lui-même est aussi bourré d&#039;idées intéressantes même si elles sont souvent un peu compliquées à comprendre dans leur intégralité.
</p>

</div>

<h2 class="sectionedit19 page-header" id="ce_dont_j_ai_peu_parle_ici">Ce dont j&#039;ai peu parlé ici</h2>
<div class="level2">

<p>
Parce que je préfère ne parler que de ce que je comprends, j&#039;ai très peu abordé certains aspects du développement d&#039;extensions pourtant très puissants. En voici quelques uns :
 TODO
</p>

</div>

<h3 class="sectionedit20" id="clutter">Clutter</h3>
<div class="level3">

</div>

<h3 class="sectionedit21" id="tweener">Tweener</h3>
<div class="level3">

</div>

<h3 class="sectionedit22" id="dbus">DBus</h3>
<div class="level3">

</div>

<h3 class="sectionedit23" id="bash">Bash</h3>
<div class="level3">

</div>

<h2 class="sectionedit24 page-header" id="publier_l_extension">Publier l&#039;extension</h2>
<div class="level2">

</div>

<h3 class="sectionedit25" id="un_site_de_partage_de_code">Un site de partage de code</h3>
<div class="level3">

<p>
Il est conseillé de publier le code sur une plateforme comme <a href="https://github.com" class="urlextern" title="https://github.com" rel="nofollow">GitHub</a> ou BitBucket, afin que d&#039;autres personnes puissent collaborer au code source.
</p>

<p>
Le dépôt GitHub peut faire office de page de présentation de votre extension, l&#039;onglet &quot;Issues&quot; permet de discuter des bugs ou des idées d&#039;amélioration avec les utilisateurs de votre extension, et il est probable que des <em>pull requests</em> contenant notamment des traductions soient soumises à votre approbation.
</p>

</div>

<h3 class="sectionedit26" id="la_plateforme_officielle">La plateforme officielle</h3>
<div class="level3">

<p>
Quelques passionnés découvriront sans doute votre extension sur GitHub à un moment donné, mais pour que tous les utilisateurs trouvent votre extension si ils en ont besoin, il vous sera nécessaire de vous inscrire sur extensions.gnome.org et de cliquer sur &quot;Add yours&quot;.
</p>

<p>
Le site vous demande un fichier <code>votre@uuid.zip</code> contenant directement au minimum les fichiers <code>extension.js</code> et <code>metadata.json</code> ; soyez bien conscient que le code sera relu, et qu&#039;il faut donc qu&#039;il soit propre et compréhensible. Après validation (généralement, ça prend moins d&#039;une semaine, vous serez averti par mail), vous pourrez ajouter une capture d&#039;écran et un icône à la page de votre extension. La description est celle présente dans <code>metadata.json</code>, il est préférable qu&#039;elle soit en anglais.
</p>

<p>
Pour mettre à jour l&#039;extension, ne vous préoccupez pas du numéro de version dans <code>metadata.json</code> (il change automatiquement), contentez-vous de ré-uploader un fichier <code>votre@uuid.zip</code> selon exactement la même méthode. Si l&#039;identifiant de l&#039;extension est le même, le site sait qu&#039;il faudra mettre à jour la page existante, et la mise à jour de l&#039;extension sera proposée aux utilisateurs.
</p>

</div>

<h2 class="sectionedit27 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="https://wiki.gnome.org/Projects/GnomeShell/Extensions/StepByStepTutorial" class="urlextern" title="https://wiki.gnome.org/Projects/GnomeShell/Extensions/StepByStepTutorial" rel="nofollow">https://wiki.gnome.org/Projects/GnomeShell/Extensions/StepByStepTutorial</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://developer.gnome.org/clutter/" class="urlextern" title="https://developer.gnome.org/clutter/" rel="nofollow">https://developer.gnome.org/clutter/</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://developer.gnome.org/st/stable/" class="urlextern" title="https://developer.gnome.org/st/stable/" rel="nofollow">https://developer.gnome.org/st/stable/</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wiki.gnome.org/Projects/GnomeShell/DebuggingJavaScript" class="urlextern" title="https://wiki.gnome.org/Projects/GnomeShell/DebuggingJavaScript" rel="nofollow">https://wiki.gnome.org/Projects/GnomeShell/DebuggingJavaScript</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://hosted.zeh.com.br/tweener/docs/en-us/" class="urlextern" title="http://hosted.zeh.com.br/tweener/docs/en-us/" rel="nofollow">http://hosted.zeh.com.br/tweener/docs/en-us/</a></div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="https://developer.gnome.org/gnome-devel-demos/stable/beginner.js.html.fr" class="urlextern" title="https://developer.gnome.org/gnome-devel-demos/stable/beginner.js.html.fr" rel="nofollow">https://developer.gnome.org/gnome-devel-demos/stable/beginner.js.html.fr</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://developer.gnome.org/gnome-devel-demos/stable/js.html.fr" class="urlextern" title="https://developer.gnome.org/gnome-devel-demos/stable/js.html.fr" rel="nofollow">https://developer.gnome.org/gnome-devel-demos/stable/js.html.fr</a></div>
</li>
</ul>

</div>
<hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">pas de souci normalement, les extensions de extensions.gnome.org sont toutes compatibles GPLv2</div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="utilisateurs/roschan/tutoriel/creer_une_extension_gnome.txt">utilisateurs/roschan/tutoriel/creer_une_extension_gnome.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 23/02/2018, 18:19">Le 23/02/2018, 18:19</span></li><li class="text-muted">par abakkk</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=utilisateurs%3Aroschan%3Atutoriel%3Acreer_une_extension_gnome&amp;1635531697" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

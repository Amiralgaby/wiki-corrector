<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>tutoriel:comment_compiler_un_kernel_de_kernel.org [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="kernel,tutoriel"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/tutoriel/comment_compiler_un_kernel_de_kernel.org"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/tutoriel/comment_compiler_un_kernel_de_kernel.org"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/tutoriel/comment_compiler_un_kernel_de_kernel.org"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"tutoriel:comment_compiler_un_kernel_de_kernel.org","namespace":"tutoriel","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="tutoriel:comment_compiler_un_kernel_de_kernel.org">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=media&amp;ns=tutoriel"  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">tutoriel:comment_compiler_un_kernel_de_kernel.org</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/tutoriel/comment_compiler_un_kernel_de_kernel.org?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis :","level":1},{"link":"#dependances","title":"D\u00e9pendances","level":1},{"link":"#paquets_basiques","title":"Paquets basiques","level":2},{"link":"#paquets_pour_creer_le_config","title":"Paquets pour cr\u00e9er le \".config\"","level":2},{"link":"#methode_simple_de_compilation_par_exemple_pour_appliquer_uniquement_un_patch","title":"M\u00e9thode simple de compilation (par exemple pour appliquer uniquement un patch)","level":1},{"link":"#telechargement_des_sources","title":"T\u00e9l\u00e9chargement des sources","level":1},{"link":"#configuration_particuliere","title":"Configuration particuli\u00e8re","level":1},{"link":"#nvidia","title":"NVIDIA","level":2},{"link":"#ati","title":"ATI","level":2},{"link":"#configuration_du_noyau","title":"Configuration du noyau","level":1},{"link":"#interface_de_configuration_qt_-_recommande","title":"Interface de configuration QT - Recommand\u00e9","level":2},{"link":"#interface_de_configuration_en_mode_console","title":"Interface de configuration en Mode console","level":2},{"link":"#interface_de_configuration_en_mode_semi-graphique_menu_bleu","title":"Interface de configuration en Mode semi-graphique (menu bleu)","level":2},{"link":"#interface_de_configuration_en_gtk_interface_gnome_-elle_n_est_pas_bien_finie","title":"Interface de configuration en GTK+ (interface GNOME -elle n'est pas bien finie...)","level":2},{"link":"#compilation","title":"Compilation","level":1},{"link":"#les_arguments_de_compilation","title":"Les arguments de compilation","level":2},{"link":"#les_cibles_de_compilation","title":"Les cibles de compilation","level":2},{"link":"#compilation_basique","title":"Compilation basique","level":2},{"link":"#gestion_des_bugs","title":"Gestion des bugs","level":1},{"link":"#liens","title":"Liens","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis :</a></li>
<li class="level1"><a href="#dependances">Dépendances</a>
<ul class="nav toc">
<li class="level2"><a href="#paquets_basiques">Paquets basiques</a></li>
<li class="level2"><a href="#paquets_pour_creer_le_config">Paquets pour créer le &quot;.config&quot;</a></li>
</ul>
</li>
<li class="level1"><a href="#methode_simple_de_compilation_par_exemple_pour_appliquer_uniquement_un_patch">Méthode simple de compilation (par exemple pour appliquer uniquement un patch)</a></li>
<li class="level1"><a href="#telechargement_des_sources">Téléchargement des sources</a></li>
<li class="level1"><a href="#configuration_particuliere">Configuration particulière</a>
<ul class="nav toc">
<li class="level2"><a href="#nvidia">NVIDIA</a></li>
<li class="level2"><a href="#ati">ATI</a></li>
</ul>
</li>
<li class="level1"><a href="#configuration_du_noyau">Configuration du noyau</a>
<ul class="nav toc">
<li class="level2"><a href="#interface_de_configuration_qt_-_recommande">Interface de configuration QT - Recommandé</a></li>
<li class="level2"><a href="#interface_de_configuration_en_mode_console">Interface de configuration en Mode console</a></li>
<li class="level2"><a href="#interface_de_configuration_en_mode_semi-graphique_menu_bleu">Interface de configuration en Mode semi-graphique (menu bleu)</a></li>
<li class="level2"><a href="#interface_de_configuration_en_gtk_interface_gnome_-elle_n_est_pas_bien_finie">Interface de configuration en GTK+ (interface GNOME -elle n&#039;est pas bien finie...)</a></li>
</ul>
</li>
<li class="level1"><a href="#compilation">Compilation</a>
<ul class="nav toc">
<li class="level2"><a href="#les_arguments_de_compilation">Les arguments de compilation</a></li>
<li class="level2"><a href="#les_cibles_de_compilation">Les cibles de compilation</a></li>
<li class="level2"><a href="#compilation_basique">Compilation basique</a></li>
</ul>
</li>
<li class="level1"><a href="#gestion_des_bugs">Gestion des bugs</a></li>
<li class="level1"><a href="#liens">Liens</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/kernel" class="wikilink1" title="kernel" rel="tag">kernel</a>,
	<a href="/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="comment_compiler_un_noyau_de_kernelorg">Comment compiler un noyau de Kernel.org</h1>
<div class="level1">

<p>
Il peut être utile de compiler une certaine version du Noyau Linux pour, par exemple, pallier une incompatibilité avec un module spécifique ou encore activer/modifier un paramètre qui ne serait pas dans la version du noyau distribuée avec Ubuntu.<br/>

Cette page propose de détailler comment faire et invite tous ceux qui le veulent à ajouter des précisions …
</p>
<div class="notetip">Si vous souhaitez faire de la compilation croisée, comme compiler un noyau pour PowerPC sur un x86, rendez-vous <a href="/tutoriel/compilation_croisee" class="wikilink1" title="tutoriel:compilation_croisee">ici</a>.
</div>
</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Comment compiler un noyau de Kernel.org] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="comment_compiler_un_noyau_de_kernelorg" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="32-614" /><button type="submit" title="Comment compiler un noyau de Kernel.org" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis :</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Savoir utiliser le <a href="/terminal" class="wikilink1" title="terminal">terminal</a> / la <a href="/console" class="wikilink1" title="console">console</a> ;</div>
</li>
<li class="level1"><div class="li"> Savoir ce que sont &quot;<a href="/linux" class="wikilink1" title="linux">linux</a>&quot;, &quot;<a href="/tutoriel/tout_savoir_sur_les_modules_linux" class="wikilink1" title="tutoriel:tout_savoir_sur_les_modules_linux">module</a>&quot;, etc… ;</div>
</li>
<li class="level1"><div class="li"> Une bonne heure pour configurer (seulement si vous souhaitez optimiser le noyau pour votre utilisation) ;</div>
</li>
<li class="level1"><div class="li"> Deux bonnes heures ou plus pour la compilation suivant la puissance de votre ordinateur.</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Pré-requis :] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="615-1006" /><button type="submit" title="Pré-requis :" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="dependances">Dépendances</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Dépendances] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="dependances" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1007-1032" /><button type="submit" title="Dépendances" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="paquets_basiques">Paquets basiques</h3>
<div class="level3">

<p>
Tout d&#039;abord il faut installer le strict minimum pour la compilation :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://build-essential,initramfs-tools,fakeroot" class="interwiki iw_apt" title="apt://build-essential,initramfs-tools,fakeroot">build-essential initramfs-tools fakeroot</a></strong></div>
</li>
<li class="level1"><div class="li"> <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://debconf-utils,dpkg-dev,debhelper,bin86" class="interwiki iw_apt" title="apt://debconf-utils,dpkg-dev,debhelper,bin86">debconf-utils dpkg-dev debhelper bin86</a></strong></div>
</li>
<li class="level1"><div class="li"> <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://kernel-package" class="interwiki iw_apt" title="apt://kernel-package">kernel-package</a></strong></div>
</li>
</ul>

<p>
Ou la ligne de commande pour tout installer d&#039;un coup avec l&#039;outil <a href="/apt-get" class="wikilink1" title="apt-get">apt-get</a>:
</p>
<pre class="code">sudo apt-get install build-essential initramfs-tools fakeroot debconf-utils dpkg-dev debhelper bin86 kernel-package</pre>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
EDIT : afin de pouvoir compiler les derniers noyaux provenant de kernel.org (version &gt; 3.14), il faut installer la dernière version de &quot;kernel-package&quot; et non celle ci-dessus issue des dépôts, car elle crée des bugs pendant la compilation, et ne produit pas au final les paquets .deb)
</p>

<p>
<a href="https://launchpad.net/ubuntu/+source/kernel-package/13.003/+build/5980712/+files/kernel-package_13.003_all.deb" class="urlextern" title="https://launchpad.net/ubuntu/+source/kernel-package/13.003/+build/5980712/+files/kernel-package_13.003_all.deb" rel="nofollow">https://launchpad.net/ubuntu/+source/kernel-package/13.003/+build/5980712/+files/kernel-package_13.003_all.deb</a>
</p>

<p>
(le paragraphe juste au dessus semble être faux puisque la commande installe kernel-package_13.014)
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Paquets basiques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="paquets_basiques" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1033-2286" /><button type="submit" title="Paquets basiques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="paquets_pour_creer_le_config">Paquets pour créer le &quot;.config&quot;</h3>
<div class="level3">

<p>
&quot;.config&quot;, c&#039;est le fichier de configuration contenant les instructions de compilation qui peut être créé au choix via:
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> une interface en <strong>console</strong> (bleue) ⇒ <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://libncurses5-dev" class="interwiki iw_apt" title="apt://libncurses5-dev">libncurses5-dev</a></strong></div>
</li>
<li class="level1"><div class="li"> une interface en <strong>GTK+</strong> (noyau 2.6 seulement) ⇒ <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez les paquets</a> <strong><a href="apt://libglib2.0-dev,libgtk2.0-dev,libglade2-dev" class="interwiki iw_apt" title="apt://libglib2.0-dev,libgtk2.0-dev,libglade2-dev">libglib2.0-dev libgtk2.0-dev libglade2-dev</a></strong></div>
</li>
<li class="level1"><div class="li"> une interface en <strong>QT4</strong> (Fonctionne du noyau 2.6 au noyau 4.0 - sûrement l&#039;interface la plus simple et complète - conseillée) ⇒ <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez les paquets</a> <strong><a href="apt://libqt4-dev,pkg-config" class="interwiki iw_apt" title="apt://libqt4-dev,pkg-config">libqt4-dev pkg-config</a></strong></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Paquets pour créer le &quot;.config&quot;] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="paquets_pour_creer_le_config" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2287-3078" /><button type="submit" title="Paquets pour créer le &quot;.config&quot;" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="methode_simple_de_compilation_par_exemple_pour_appliquer_uniquement_un_patch">Méthode simple de compilation (par exemple pour appliquer uniquement un patch)</h2>
<div class="level2">
<div class="notetip">Cette méthode s&#039;applique si:<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> si vous souhaitez vérifier simplement que tout est prêt pour la compilation sans rentrer dans la complication les fichiers de configuration.</div>
</li>
<li class="level1"><div class="li"> si vous avez un noyau (exemple ci-dessous avec une version 5.10) sur laquelle vous souhaitez <strong>simplement appliquer un patch</strong> sans autre modification</div>
</li>
</ul>

</div>
<p>
Lancer votre machine avec le noyau que vous souhaitez modifier. Vérifier la version avec :
</p>
<pre class="code">uname -r</pre>

<p>
Installation des dépendances
</p>
<pre class="code">sudo apt install -y git build-essential kernel-package fakeroot libncurses5-dev libssl-dev ccache</pre>

<p>
Récupération du noyau ; la liste des branches est visible ici <a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git" class="urlextern" title="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git" rel="nofollow">https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git</a> ; ne pas chercher à modifier le .y à la fin du nom !
</p>
<pre class="code">mkdir ~/NOYAU
cd ~/NOYAU
git clone --depth=1 -b linux-5.10.y git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git
#                    ^ modifier ici selon la branche dont vous avez besoin</pre>

<p>
Donner les bons droits à vos fichiers et répertoires
</p>
<pre class="code">sudo chmod -R 0755 linux-stable
cd linux-stable</pre>

<p>
Optionnel : appliquer le patch
</p>
<pre class="code">patch -p1 --dry-run &lt;[fichier-patch] (pour tester qu&#039;il n&#039;y a pas d&#039;erreur sans appliquer)
patch -p1 &lt; [fichier_de_patch] (pour appliquer le patch)
patch -R &lt; [fichier_de_patch] (pour retirer le patch)</pre>

<p>
Récupérer le fichier de configuration de votre noyau <strong>en cours d’exécution</strong> (la branche doit être la <strong>même que celle téléchargée</strong> pour la compilation)
</p>
<pre class="code">cp /boot/config-`uname -r` .config</pre>

<p>
Compiler le noyau (répéter ces étapes à chaque compilation)
</p>
<pre class="code">yes &#039;&#039; | make oldconfig
make clean
make -j$(nproc) deb-pkg LOCALVERSION=-custom</pre>

<p>
Entre chaque essai de compilation exécuter pour nettoyer :
</p>
<pre class="code">rm vmlinux-gdb.py</pre>

<p>
Installer les fichiers crées dans ~/NOYAU avec
</p>
<pre class="code">sudo dpkg -i *.deb</pre>
<div class="noteclassic">Pour compiler la dernière version de développement il faudrait utiliser plus haut
<pre class="code">git clone --depth=1 git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git</pre>

</div>
</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Méthode simple de compilation (par exemple pour appliquer uniquement un patch)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="methode_simple_de_compilation_par_exemple_pour_appliquer_uniquement_un_patch" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="3079-5208" /><button type="submit" title="Méthode simple de compilation (par exemple pour appliquer uniquement un patch)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="telechargement_des_sources">Téléchargement des sources</h2>
<div class="level2">

<p>
Tout d&#039;abord téléchargez les sources du noyau depuis Kernel.org:<br/>

<a href="http://www.kernel.org/pub/linux/kernel/" class="urlextern" title="http://www.kernel.org/pub/linux/kernel/" rel="nofollow">Lien vers les sources sur kernel.org</a>
</p>

<p>
Téléchargez l&#039;archive dans le dossier que vous voulez, puis <a href="/archivage#graphiquement" class="wikilink1" title="archivage">décompressez-la</a> par exemple avec la <a href="/commande_shell" class="wikilink1" title="commande_shell">commande</a> suivante:
</p>
<pre class="code">tar xvf linux-*</pre>
<div class="notetip">Il est possible de récupérer les sources par git (voir paragraphe précédent) 
</div>
</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Téléchargement des sources] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="telechargement_des_sources" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="5209-5700" /><button type="submit" title="Téléchargement des sources" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit8 page-header" id="configuration_particuliere">Configuration particulière</h2>
<div class="level2">

<p>
Dans certains cas, certains pilotes propriétaires notamment, il faut préparer un peu plus le terrain pour compiler soi-même un Noyau personnalisé. Autant vous dire qu&#039;il est bien plus simple de compiler son noyau pour quelqu&#039;un qui n&#039;utilise que des pilotes libres.
</p>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> cette partie est totalement dépassée, peut être n&#039;est-elle plus nécessaire, en tout cas aucune de ces infos ne sont encore garanties de fonctionner.
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Configuration particulière] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_particuliere" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="5701-6172" /><button type="submit" title="Configuration particulière" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="nvidia">NVIDIA</h3>
<div class="level3">

<p>
Pour les cartes <a href="/nvidia" class="wikilink1" title="nvidia">Nvidia</a>, vous pouvez décider de ne plus utiliser le pilote propriétaire, mais bien entendu si vous en avez vraiment besoin voici des pistes pour le faire fonctionner avec votre noyau personnalisé.
</p>

</div>

<h4 id="avec_la_technique_des_liens_symboliques">Avec la technique des liens symboliques</h4>
<div class="level4">

<p>
Voir <a href="http://ubuntuforums.org/showthread.php?t=441013" class="urlextern" title="http://ubuntuforums.org/showthread.php?t=441013" rel="nofollow">ce How-To</a> (en).
</p>

</div>

<h4 id="avec_le_module">Avec le module</h4>
<div class="level4">

<p>
Il faut installer le paquet de sources à inclure au noyau :
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Si vous utilisez le paquet nvidia-glx-new, <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://nvidia-new-kernel-source" class="interwiki iw_apt" title="apt://nvidia-new-kernel-source">nvidia-new-kernel-source</a></strong></div>
</li>
<li class="level1"><div class="li"> Si vous utilisez le paquet nvidia-glx, <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://nvidia-kernel-source" class="interwiki iw_apt" title="apt://nvidia-kernel-source">nvidia-kernel-source</a></strong></div>
</li>
<li class="level1"><div class="li"> Si vous utilisez le paquet nvidia-glx-legacy, <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://nvidia-legacy-kernel-source" class="interwiki iw_apt" title="apt://nvidia-legacy-kernel-source">nvidia-legacy-kernel-source</a></strong></div>
</li>
</ol>

<p>
Une fois le paquet installé, il se trouve dans le dossier <strong>/usr/src/</strong>,alors décompressez <sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup>.:
</p>
<pre class="code">tar xvfz nvidia&lt;TAB&gt;.tar.gz</pre>

<p>
Vous devriez avoir un dossier <strong>/modules/nvidia-kernel</strong> (ou nvidia-kernel-legacy ou nvidia-kernel-new selon le paquet installé).
</p>

<p>
Lors de la compilation, n&#039;oubliez pas d&#039;ajouter en paramètre (selon le paquet installé) :
</p>
<pre class="code">--added-modules=nvidia-kernel
--added-modules=nvidia-kernel-legacy
--added-modules=nvidia-kernel-new</pre>

</div>

<h4 id="avec_le_run_du_site">Avec le .run du site</h4>
<div class="level4">

<p>
Ne faites rien pour l&#039;instant, puis une fois votre noyau compilé, téléchargez le <em>.run</em> sur le site officiel. Tutoriel <a href="/nvidia" class="wikilink1" title="nvidia">ici</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[NVIDIA] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="nvidia" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="6173-7919" /><button type="submit" title="NVIDIA" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="ati">ATI</h3>
<div class="level3">

<p>
Si vous utilisez une carte <a href="/amd-ati" class="wikilink1" title="amd-ati">amd-ati</a>, vous n&#039;utilisez peut être pas le pilote propriétaire (ou celui ci n&#039;est peut être pas indispensable). Il est conseillé, <em class="u">avant</em> d&#039;entreprendre la compilation du noyau, de voir si les performances du pilote libre sont à votre goût celui-ci (le pilote libre est parfois même plus performant que le propriétaire).
</p>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> (Méthodes non-testée)
</p>

</div>

<h4 id="avec_la_technique_des_liens_symboliques1">Avec la technique des liens symboliques</h4>
<div class="level4">

<p>
Voir <a href="http://ubuntuforums.org/showthread.php?t=441013" class="urlextern" title="http://ubuntuforums.org/showthread.php?t=441013" rel="nofollow">ce How-To</a> (en).
</p>

</div>

<h4 id="avec_le_module1">Avec le module</h4>
<div class="level4">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> J&#039;imagine que ça doit être comme pour NVidia avec le paquet <strong>fglrx-kernel-source</strong> ?
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[ATI] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ati" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="7920-8570" /><button type="submit" title="ATI" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit11 page-header" id="configuration_du_noyau">Configuration du noyau</h2>
<div class="level2">

<p>
La configuration du noyau est l&#039;étape où vous choisissez les options. Vous pouvez enlever l&#039;ABS, ajouter des airbags, changer la transmission, etc.
</p>

<p>
Tout d&#039;abord ouvrez un <strong><a href="/terminal" class="wikilink1" title="terminal">terminal</a></strong> puis rendez vous dans le dossier où vous avez décompressé <a href="#telechargement_des_sources" title="tutoriel:comment_compiler_un_kernel_de_kernel.org ↵" class="wikilink1">les sources téléchargées</a> grâce à la commande:
</p>
<pre class="code">cd /le/chemin/vers/le/dossier/qui/contient/linux</pre>

<p>
Puis lancez cette commande qui permet de récupérer la configuration du noyau que vous utilisez actuellement et qui vous demande automatiquement de gérer les conflits si l&#039;ancienne configuration n&#039;est pas compatible avec le nouveau noyau:
</p>
<pre class="code">make oldconfig</pre>

<p>
Vous pouvez garder toutes les réponses proposées par défaut et juste appuyer sur <em>Entrer</em> lorsqu&#039;il vous pose une question. Mais, si vous comprenez ce qui est dit, cela permettra d&#039;ajouter ou non de nouvelles fonctions à votre Noyau, options qui n&#039;existait peut-être pas encore lorsque les développeurs d&#039;Ubuntu ont choisi le noyau intégré à la <a href="/versions" class="wikilink1" title="versions">version</a> que vous utilisez actuellement.
</p>

<p>
Maintenant vous devez choisir l&#039;une des différentes interfaces de configuration du noyau si vous voulez faire quelques modifications par rapport aux paramètres par défaut. Même si vous ne modifiez rien, il est conseillé d&#039;y jeter un œil par curiosité.<br/>

Vous pouvez au choix utiliser:
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> une <a href="#interface_de_configuration_qt_-_recommande" title="tutoriel:comment_compiler_un_kernel_de_kernel.org ↵" class="wikilink1">Interface de configuration QT - Recommandé</a></div>
</li>
<li class="level1"><div class="li"> une <a href="#interface_de_configuration_en_mode_console" title="tutoriel:comment_compiler_un_kernel_de_kernel.org ↵" class="wikilink1">Interface de configuration en Mode console</a></div>
</li>
<li class="level1"><div class="li"> une <a href="#interface_de_configuration_en_mode_semi-graphique_menu_bleu" title="tutoriel:comment_compiler_un_kernel_de_kernel.org ↵" class="wikilink1">Interface de configuration en Mode semi-graphique (menu bleu)</a></div>
</li>
<li class="level1"><div class="li"> une <a href="#interface_de_configuration_en_gtk_interface_gnome_-elle_n_est_pas_bien_finie" title="tutoriel:comment_compiler_un_kernel_de_kernel.org ↵" class="wikilink1">Interface de configuration en GTK+ (interface GNOME -elle n&#039;est pas bien finie...)</a></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Configuration du noyau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_du_noyau" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="8571-10270" /><button type="submit" title="Configuration du noyau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="interface_de_configuration_qt_-_recommande">Interface de configuration QT - Recommandé</h3>
<div class="level3">
<pre class="code">make xconfig</pre>

<p>
<strong>Si la commande précédente retourne une erreur du type &quot;qconf: cannot connect to X server&quot;, essayez :</strong>
</p>
<pre class="code"> #exit
 $sudo xhost +
 $su
 #cd /usr/src/linux-*
 #make xconfig</pre>
<div class="notetip">Ne saisissez pas les <strong>#</strong> et <strong>$</strong> qui sont là à titre d&#039;information et correspondent respectivement aux prompts <a href="/root" class="wikilink1" title="root">root</a> et utilisateur standard
</div>
</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Interface de configuration QT - Recommandé] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interface_de_configuration_qt_-_recommande" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="10271-10709" /><button type="submit" title="Interface de configuration QT - Recommandé" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="interface_de_configuration_en_mode_console">Interface de configuration en Mode console</h3>
<div class="level3">

<p>
Déconseillé pour les débutants tout comme les autres.
</p>
<pre class="code">make config</pre>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Interface de configuration en Mode console] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interface_de_configuration_en_mode_console" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="10710-10849" /><button type="submit" title="Interface de configuration en Mode console" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="interface_de_configuration_en_mode_semi-graphique_menu_bleu">Interface de configuration en Mode semi-graphique (menu bleu)</h3>
<div class="level3">
<pre class="code">make menuconfig</pre>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Interface de configuration en Mode semi-graphique (menu bleu)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interface_de_configuration_en_mode_semi-graphique_menu_bleu" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="10850-10954" /><button type="submit" title="Interface de configuration en Mode semi-graphique (menu bleu)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="interface_de_configuration_en_gtk_interface_gnome_-elle_n_est_pas_bien_finie">Interface de configuration en GTK+ (interface GNOME -elle n&#039;est pas bien finie...)</h3>
<div class="level3">
<pre class="code">make gconfig</pre>
<hr />

<p>
<strong>Si vous n&#039;avez rien à configurer, cliquez simplement sur <em>Enregistrer</em> dans l&#039;interface graphique qui apparaît</strong>.<br/>

</p>
<div class="notetip">Vous ne risquez rien à compiler un Noyau inutilisable car les anciens restent tout de même installés sur le système, il vous suffira simplement d&#039;en choisir un autre dans le menu <a href="/amorcage#chargeurs_d_amorcage" class="wikilink1" title="amorcage">d&#039;amorçage</a> au démarrage de votre ordinateur.
</div>
</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Interface de configuration en GTK+ (interface GNOME -elle n&#039;est pas bien finie...)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interface_de_configuration_en_gtk_interface_gnome_-elle_n_est_pas_bien_finie" /><input type="hidden" name="codeblockOffset" value="10" /><input type="hidden" name="range" value="10955-11490" /><button type="submit" title="Interface de configuration en GTK+ (interface GNOME -elle n&#039;est pas bien finie...)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit16 page-header" id="compilation">Compilation</h2>
<div class="level2">
<div class="noteimportant">Cette partie décrit la plupart des options possibles pour <strong>make-kpkg</strong>, et il y en a plein, les connaître ne vous servira pas à grand chose, <strong>si vous voulez simplement créer un noyau classique rapidement, allez directement à la partie <a href="#compilation_basique" title="tutoriel:comment_compiler_un_kernel_de_kernel.org ↵" class="wikilink1">Compilation basique</a>.</strong>
</div>
<p>
La compilation se fait avec <strong>make-kpkg</strong> qui automatise en fait plusieurs commandes :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <em>make dep</em> - établit les dépendances entre fichiers constitutifs du code noyau</div>
</li>
<li class="level1"><div class="li"> <em>make clean</em> - supprime les objets résultant d&#039;une compilation antérieure du noyau (si elle a eu lieu)</div>
</li>
<li class="level1"><div class="li"> <em>make bzImage</em> - produit l&#039;image compressée qui servira à l&#039;amorçage</div>
</li>
<li class="level1"><div class="li"> <em>make modules</em> - compile les modules</div>
</li>
</ul>

<p>
En résulte alors un <a href="/paquet" class="wikilink1" title="paquet">paquet</a> <em>*.deb</em> (si vous utilisez la cible buildpackage) qu&#039;il faudra installer avec <a href="/dpkg" class="wikilink1" title="dpkg">dpkg</a> :
</p>
<pre class="code">sudo dpkg -i linux*.deb</pre>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Compilation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="compilation" /><input type="hidden" name="codeblockOffset" value="11" /><input type="hidden" name="range" value="11491-12382" /><button type="submit" title="Compilation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit17" id="les_arguments_de_compilation">Les arguments de compilation</h3>
<div class="level3">

<p>
Il existe différents arguments à <em>make-kpkg</em>:
</p>

</div>

<h4 id="j">-j</h4>
<div class="level4">

<p>
Cet argument <strong>totalement facultatif</strong> permet de choisir le nombre de Threads, c&#039;est à dire le nombre de processus simultané, que le CPU traitera pendant la compilation. En résumé ça ne sert qu&#039;à augmenter la vitesse à laquelle votre ordinateur va créer votre nouveau noyau, si votre CPU à plusieurs cœurs.
</p>
<pre class="code">-j 8</pre>

<p>
Permettra d&#039;utiliser les 8 cœurs d&#039;un CPU en ayant 8 par exemple.
</p>

</div>

<h4 id="initrd">--initrd</h4>
<div class="level4">

<p>
Le plus important: crée un fichier <strong>initrd</strong> qui permet d&#039;utiliser des modules directement à l&#039;amorçage du noyau.
</p>

</div>

<h4 id="rootcmd_fakeroot_sudo">--rootcmd=fakeroot|sudo</h4>
<div class="level4">

<p>
Vous propose de choisir avec quelle méthode vous permettez à <em>make-kpkg</em> d&#039;utiliser les ressources de root.
</p>

</div>

<h4 id="added_modules">--added_modules</h4>
<div class="level4">

<p>
Pour ajouter des modules (alsa, nvidia/ATI, etc…). Pour en mettre plusieurs, séparez avec une virgule :
</p>
<pre class="code">--added-modules=alsa-driver,nvidia-kernel-legacy</pre>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Les arguments de compilation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_arguments_de_compilation" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="12383-13374" /><button type="submit" title="Les arguments de compilation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit18" id="les_cibles_de_compilation">Les cibles de compilation</h3>
<div class="level3">

</div>

<h4 id="buildpackage">buildpackage</h4>
<div class="level4">

<p>
Cela a pour conséquence d&#039;utiliser la cible &quot;clean&quot;et &quot;binary&quot; décrite ci-dessous. 
</p>

</div>

<h4 id="clean">clean</h4>
<div class="level4">

<p>
Permet de « nettoyer le répertoire des sources du noyau de tous les fichiers créés par l&#039;invocation de l&#039;une des cibles données ci dessous, et effectue un make distclean » <sup><a href="#fn__2" id="fnt__2" class="fn_top">2)</a></sup>.
</p>

</div>

<h4 id="binary">binary</h4>
<div class="level4">

<p>
Cette cible « construit les quatre paquets Debian du noyau en utilisant les cibles kernel_source, kernel_headers, kernel_doc et kernel_image <sup><a href="#fn__3" id="fnt__3" class="fn_top">3)</a></sup>.
</p>

</div>

<h4 id="kernel_doc">kernel_doc</h4>
<div class="level4">

<p>
Cet autre cible compile et crée pour vous un paquet Debian contenant les documentations fournis avec le noyau.
</p>

</div>

<h4 id="kernel_image">kernel_image</h4>
<div class="level4">

<p>
Cela permet de créer un paquet qui contient l&#039;image du noyau, ses modules et permet aussi la configuration automatique du <a href="/amorcage#chargeurs_d_amorcage" class="wikilink1" title="amorcage">chargeur d&#039;amorçage</a> comme <a href="/grub" class="wikilink1" title="grub">Grub</a> ou <a href="/lilo" class="wikilink1" title="lilo">Lilo</a>.
</p>

</div>

<h4 id="kernel_source">kernel_source</h4>
<div class="level4">

<p>
Cette cible construit un paquet Debian des sources du noyau Linux que vous compilez. Cela est particulièrement utile si vous souhaitez réutiliser ultérieurement les sources du noyau que vous souhaiteriez conserver.
</p>

</div>

<h4 id="kernel_headers">kernel_headers</h4>
<div class="level4">

<p>
Celle-ci a pour but de produire un paquet Debian contenant les entêtes du noyau Linux. Les entêtes peuvent être nécessaires pour compiler certains programmes.
</p>

</div>

<h4 id="modules_image">modules_image</h4>
<div class="level4">

<p>
Cette cible a pour but de produire un paquet Debian pour chaque module supplémentaire que vous avez installé et qui se trouve dans le répertoire /usr/src/modules/.
</p>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Les cibles de compilation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_cibles_de_compilation" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="13375-15078" /><button type="submit" title="Les cibles de compilation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit19" id="compilation_basique">Compilation basique</h3>
<div class="level3">

<p>
Avant de procéder à la compilation il faut savoir que une compilation basique peut durer entre 2 heures et trois heures. Mais si vous possédez un ordinateur qui à plusieurs cœur (Core) vous pouvez augmenter la vitesse de compilation en spécifiant le nombre de cœur à utiliser pour la compilation.
</p>

<p>
Voici un exemple pour un ordinateur à 5 cœurs (A changer en fonction de votre ordinateur)
</p>
<pre class="code">echo &quot;CONCURRENCY_LEVEL= 5&quot; &gt;&gt; /etc/kernel-pkg.conf</pre>

<p>
Et maintenant voici la commande la plus basique pour compiler :
</p>
<pre class="code">make-kpkg --initrd --append-to-version=-monnoyau --revision=1.0 --rootcmd=fakeroot kernel_image kernel_headers</pre>

<p>
Retournez dans le dossier précédent avec:
</p>
<pre class="code">cd ..</pre>

<p>
Et installer les <em>*.deb</em> :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <em class="u">Sous <strong>Ubuntu</strong></em>:<pre class="code">sudo dpkg -i linux*.deb</pre>
</div>
</li>
<li class="level1"><div class="li"> <em class="u">Sous <strong>Debian</strong></em>:<pre class="code">su -c &#039;dpkg -i linux*.deb&#039;</pre>
</div>
</li>
</ul>

<p>
Voilà c&#039;est fait <img src="/lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Compilation basique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="compilation_basique" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="15079-16012" /><button type="submit" title="Compilation basique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit20 page-header" id="gestion_des_bugs">Gestion des bugs</h2>
<div class="level2">

<p>
En cas de découverte d&#039;un bug il faut commencer par une bissection.<br/>

Voir : <a href="/kernel_bissection" class="wikilink1" title="kernel_bissection">Bissection d&#039;un noyau</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Gestion des bugs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="gestion_des_bugs" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="16013-16166" /><button type="submit" title="Gestion des bugs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit21 page-header" id="liens">Liens</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://ubuntuforums.org/showthread.php?t=441013" class="urlextern" title="http://ubuntuforums.org/showthread.php?t=441013" rel="nofollow">HOW-TO : Utiliser le linux-restricted-module pour un noyau compilé</a> (en)</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.andesi.org/index.php?node=77" class="urlextern" title="http://www.andesi.org/index.php?node=77" rel="nofollow">Un bon guide pour Debian plein d&#039;infos sympa</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://forum.ubuntu-fr.org/viewtopic.php?pid=1108685#p1108685" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?pid=1108685#p1108685" rel="nofollow">Un guide pour installer la carte wifi **Intel PRO/Wireless 2200BG**</a> </div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs: <a href="/utilisateurs/fabien26" class="wikilink1" title="utilisateurs:fabien26">Fabien26</a>, <a href="/utilisateurs/adam0509" class="wikilink1" title="utilisateurs:adam0509">adam0509</a>, <a href="/utilisateurs/beaver" class="wikilink1" title="utilisateurs:beaver">BeAvEr</a>, <a href="/utilisateurs/fleroi91" class="wikilink2" title="utilisateurs:fleroi91" rel="nofollow">fleroi91</a>, <a href="/utilisateurs/olivier_v" class="wikilink1" title="utilisateurs:olivier_v">olivier_v</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_21'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/comment_compiler_un_kernel_de_kernel.org"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1610277024" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="16167-" /><button type="submit" title="Liens" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div><hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content"><em>&lt;TAB&gt;</em> correspond ici à la touche <a href="https://fr.wikipedia.org/wiki/Touche_tabulation" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Touche_tabulation">tabulation</a> utilisant ainsi l&#039;<a href="https://fr.wikipedia.org/wiki/Complètement" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Complètement">autocomplétion</a></div></div>
<div class="fn"><sup><a href="#fnt__2" id="fn__2" class="fn_bot">2)</a></sup> 
, <sup><a href="#fnt__3" id="fn__3" class="fn_bot">3)</a></sup> 
<div class="content">traduction de la partie du manuel consacré à cette cible et accessible en saisissant <code>man make-kpkg</code></div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="tutoriel/comment_compiler_un_kernel_de_kernel.org.txt">tutoriel/comment_compiler_un_kernel_de_kernel.org.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 10/01/2021, 12:10">Le 10/01/2021, 12:10</span></li><li class="text-muted">par Olivier V</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=tutoriel%3Acomment_compiler_un_kernel_de_kernel.org&amp;1635531031" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>tutoriel:hid [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="tutoriel"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/tutoriel/hid?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="/tutoriel/hid?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/tutoriel/hid"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/tutoriel/hid"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/tutoriel/hid"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"tutoriel:hid","namespace":"tutoriel","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="tutoriel:hid">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/tutoriel/hid?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/tutoriel/hid?do=media&amp;ns=tutoriel"  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/tutoriel/hid?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/tutoriel/hid?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/tutoriel/hid?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/tutoriel/hid?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/tutoriel/hid?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">tutoriel:hid</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/tutoriel/hid?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/tutoriel/hid?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/tutoriel/hid?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#prealables","title":"Pr\u00e9alables","level":1},{"link":"#identification_du_materiel_compatible","title":"Identification du mat\u00e9riel compatible","level":2},{"link":"#blacklist_de_l_entree_du_peripherique","title":"Blacklist de l'entr\u00e9e du p\u00e9riph\u00e9rique","level":2},{"link":"#hid_mapper","title":"HID_MAPPER","level":1},{"link":"#installation","title":"Installation","level":2},{"link":"#configuration","title":"Configuration","level":2},{"link":"#lancement","title":"Lancement","level":2},{"link":"#utilisation_du_hid_avec_lirc","title":"Utilisation du HID avec LIRC","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#prealables">Préalables</a>
<ul class="nav toc">
<li class="level2"><a href="#identification_du_materiel_compatible">Identification du matériel compatible</a></li>
<li class="level2"><a href="#blacklist_de_l_entree_du_peripherique">Blacklist de l&#039;entrée du périphérique</a></li>
</ul>
</li>
<li class="level1"><a href="#hid_mapper">HID_MAPPER</a>
<ul class="nav toc">
<li class="level2"><a href="#installation">Installation</a></li>
<li class="level2"><a href="#configuration">Configuration</a></li>
<li class="level2"><a href="#lancement">Lancement</a></li>
</ul>
</li>
<li class="level1"><a href="#utilisation_du_hid_avec_lirc">Utilisation du HID avec LIRC</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="utilisation_d_un_peripherique_hid">Utilisation d&#039;un périphérique HID</h1>
<div class="level1">

<p>
Les périphériques de la norme HID permettent d&#039;envoyer des commandes au serveur X.
Toutefois toutes les commandes reçues ne sont pas toujours exploitables directement sous linux…
C&#039;est pourquoi il est intéressant de pouvoir les &quot;remapper&quot;, c&#039;est à dire les attribuer aux commandes linux (<strong>inputdev</strong>) de notre choix.
</p>

<p>
Dans ce tutoriel, une télécommande <a href="http://www.aliexpress.com/product-gs/492454030-IR-USB-Mouse-Media-Desktop-Computer-PC-Remote-Controller-Control-Media-Center-wholesalers.html" class="urlextern" title="http://www.aliexpress.com/product-gs/492454030-IR-USB-Mouse-Media-Desktop-Computer-PC-Remote-Controller-Control-Media-Center-wholesalers.html" rel="nofollow">disponible pour 5€65</a> sera configurée afin d&#039;effectuer de nombreuses actions ainsi que d&#039;émuler le déplacement de la souris.
</p>

<p>
En second lieu, on verra comment configuer <strong>LIRC</strong> pour exploiter ce matériel.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Utilisation d&#039;un périphérique HID] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_d_un_peripherique_hid" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="24-794" /><button type="submit" title="Utilisation d&#039;un périphérique HID" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="prealables">Préalables</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Préalables] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="prealables" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="795-817" /><button type="submit" title="Préalables" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="identification_du_materiel_compatible">Identification du matériel compatible</h3>
<div class="level3">

<p>
Tout d&#039;abord, lancer la commande suivante afin d&#039;identifier le matériel que vous souhaitez configurer :
</p>
<pre class="code">cat /proc/bus/input/devices</pre>

<p>
Dans mon cas, le matériel est le suivant :
</p>
<pre class="file">I: Bus=0003 Vendor=0755 Product=2626 Version=0110
N: Name=&quot;www.irfmedia.com W-01RN USB_V3.1&quot;
P: Phys=usb-0000:00:02.0-7/input0
S: Sysfs=/devices/pci0000:00/0000:00:02.0/usb2/2-7/2-7:1.0/input/input5
U: Uniq=
H: Handlers=sysrq kbd event5 
B: PROP=0
B: EV=120013
B: KEY=e080ffdf01cfffff fffffffffffffffe
B: MSC=10
B: LED=1f

I: Bus=0003 Vendor=0755 Product=2626 Version=0110
N: Name=&quot;www.irfmedia.com  W-01RN USB_V3.1&quot;
P: Phys=usb-0000:00:02.0-7/input1
S: Sysfs=/devices/pci0000:00/0000:00:02.0/usb2/2-7/2-7:1.1/input/input6
U: Uniq=
H: Handlers=kbd mouse1 event6 
B: PROP=0
B: EV=1f
B: KEY=4837fff072ff32d bf54444600000000 1f0001 20c100b17c000 267bfad941dfed 9e168000004400 10000002
B: REL=1c3
B: ABS=100000000
B: MSC=10</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Identification du matériel compatible] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="identification_du_materiel_compatible" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="818-1794" /><button type="submit" title="Identification du matériel compatible" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="blacklist_de_l_entree_du_peripherique">Blacklist de l&#039;entrée du périphérique</h3>
<div class="level3">

<p>
Afin que les entrées ne produisent pas d&#039;effet direct dans notre serveur X, nous devons lui dire de l&#039;ignorer.
Pour cela créer le fichier suivant :
</p>
<pre class="code">sudo nano /usr/share/X11/xorg.conf.d/50-HID-blacklist.conf</pre>

<p>
Et y copier ces lignes, en rensigant MatchProduct en fonction de ce que vous avez obtenu ci-dessus : 
</p>
<pre class="file">Section &quot;InputClass&quot;
Identifier &quot;HID blacklist&quot;
MatchProduct &quot;W-01RN USB_V3.1&quot;
Option &quot;Ignore&quot; &quot;on&quot;
EndSection</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Blacklist de l&#039;entrée du périphérique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="blacklist_de_l_entree_du_peripherique" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="1795-2298" /><button type="submit" title="Blacklist de l&#039;entrée du périphérique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="hid_mapper">HID_MAPPER</h2>
<div class="level2">

<p>
On va ensuite utiliser le programme présenté <a href="http://forum.xbmc.org/showthread.php?tid=88560" class="urlextern" title="http://forum.xbmc.org/showthread.php?tid=88560" rel="nofollow">ici</a> pour assigner les commandes voulues aux évènements générés par notre périphérique. 
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[HID_MAPPER] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="hid_mapper" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="2299-2517" /><button type="submit" title="HID_MAPPER" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="installation">Installation</h3>
<div class="level3">

<p>
L&#039;installation de hid_mapper s&#039;effectue par les commandes suivantes :
</p>
<pre class="code">wget http://www.coldsource.net/hid_mapper_beta.tar.gz
tar zxvf hid_mapper_beta.tar.gz
cd hid_mapper_beta
make
sudo cp hid_mapper /usr/local/bin/
sudo chmod +x /usr/local/bin/hid_mapper</pre>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="2518-2809" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="configuration">Configuration</h3>
<div class="level3">

</div>

<h4 id="enregistrement_des_evenements">Enregistrement des évènements</h4>
<div class="level4">

<p>
Nous allons ensuite &quot;écouter ce que raconte notre périphérique lorque nous apuyons sur chacune des touches. Lancer la commande suivante en rensignant les options manufacturer et product avec les ID obtenus précédemment (ici Vendor=0755 et Product=2626) :
</p>
<pre class="code">sudo hid_mapper --learn --lookup-id --manufacturer &#039;0755&#039; --product &#039;2626&#039; --map &#039;&#039;</pre>

<p>
Sous la pression d&#039;une touche, on voit apparaitre des lignes similaires à celles-ci :
</p>
<pre class="file">Found HID device at /dev/hidraw0
038100000000
01 00 00 00 00 00 00 00 00
04003d0000000000
01 00 00 00 00 00 00 00 00</pre>

<p>
Chaque code tel que <strong>038100000000</strong> ou  <strong>04003d0000000000</strong> correspondent à une touche, et ici <strong>010000000000000000</strong> est sans importance puisqu&#039;il apparaît pour chaque touche…
</p>

</div>

<h4 id="assignation_des_evenement_a_des_actions">Assignation des évènement à des actions</h4>
<div class="level4">

<p>
On relève alors les codes obtenus ci-dessus pour générer au choix 1 ou 2 fichier de configuration : remote.map et mouse.map
Les codes d&#039;actions qui peuvent-être utilisées sont disponible dans le fichier /usr/include/linux/input.h.
</p>

</div>

<h5 id="fichier_remotemap">Fichier remote.map</h5>
<div class="level5">

<p>
On constitue le fichier <strong>remote.map</strong> de la manière suivante, cet exemple correspondant à ma télécommande.
</p>
<pre class="file">038100000000:KEY_POWER
04003d0000000000:KEY_CLOSE
0100080000000000:KEY_VIDEO
0300170000000000:KEY_TV
0100040000000000:KEY_RADIO
01000c0000000000:KEY_P
0100100000000000:KEY_AUDIO
0300100000000000:KEY_MENU
0300050000000000:KEY_REWIND
02b700000000:KEY_STOP
02b300000000:KEY_FORWARD
02b600000000:KEY_PREVIOUSSONG
02cd00000000:KEY_PLAYPAUSE
02b500000000:KEY_NEXTSONG
02e900000000:KEY_VOLUMEUP
02e200000000:KEY_MUTE
0800070000000000:KEY_HOME
00004b0000000000:KEY_CHANNELUP
02ea00000000:KEY_VOLUMEDOWN
0c00280000000000:KEY_MEDIA
00004e0000000000:KEY_CHANNELDOWN
0000520000000000:KEY_UP
0000500000000000:KEY_LEFT
0000280000000000:KEY_ENTER
00004f0000000000:KEY_RIGHT
0000510000000000:KEY_DOWN
00002a0000000000:KEY_BACK
0000650000000000:KEY_INFO
0100150000000000:KEY_RED
022302000000:KEY_GREEN
028a01000000:KEY_YELLOW
00001e0000000000:KEY_1
00001f0000000000:KEY_2
0000200000000000:KEY_3
022402000000:KEY_PREVIOUS
0000210000000000:KEY_4
0000220000000000:KEY_5
0000230000000000:KEY_6
022502000000:KEY_NEXT
0000240000000000:KEY_7
0000250000000000:KEY_8
0000260000000000:KEY_9
0000270000000000:KEY_0
0200250000000000:KEY_SUBTITLE
0200200000000000:KEY_LANGUAGE
0000290000000000:KEY_CLEAR
0400280000000000:KEY_ZOOM
010100000000:BTN_LEFT  #clic gauche de la souris
010200000000:BTN_RIGHT #clic droit de la souris</pre>

</div>

<h5 id="fichier_mousemap">Fichier mouse.map</h5>
<div class="level5">

<p>
Dans mon cas, ma télécommande a une fonction spéciale d&#039;émulation du déplacement du curseur de la souris, et affiche différents codes en fonction du temps d&#039;appui sur les flèches directionnelles. 
Celui sera configurable de la manière suivante dans le fichier <strong>mouse.map</strong>. 
- REL_Y correspond à un déplacement sur l&#039;axe vertical
- REL_X sur l&#039;axe horizontal
- Le dernier chiffre de chaque ligne à la taille du déplacement en nombre de pixel.
</p>
<pre class="file">010000fe0000:REL_Y:-1  # haut --&gt;  -1-&gt;-8de plus en plus vite 
010000fc0000:REL_Y:-4
010000f80000:REL_Y:-8
010000020000:REL_Y:1    # bas --&gt; 1-&gt;8 de plus en plus vite 
010000040000:REL_Y:4
010000080000:REL_Y:8
0100fe000000:REL_X:-1     # gauche --&gt; -1-&gt;-8 de plus en plus vite
0100fc000000:REL_X:-4
0100f8000000:REL_X:-8
010002000000:REL_X:1       # droite --&gt;  1-&gt;8 de plus en plus vite
010004000000:REL_X:4
010008000000:REL_X:8</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="2810-6294" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="lancement">Lancement</h3>
<div class="level3">

<p>
On peut alors lancer le &quot;mappage&quot; pour assigner les nouveaux codes aux évènements envoyés par notre périphérique.
</p>

</div>

<h4 id="manuel">Manuel</h4>
<div class="level4">

<p>
Le démarrage de hid_mapper s&#039;effectue de la manière suivante :
</p>
<pre class="code">sudo hid_mapper --lookup-id --manufacturer &#039;0755&#039; --product &#039;2626&#039; --map &#039;/repertoire/contenant/remote.map&#039; --map-mouse &#039;/repertoire/contenant/mouse.map&#039;</pre>

</div>

<h4 id="automatique">Automatique</h4>
<div class="level4">

<p>
On peut également créer une règle udev pour lancer hid_mapper à la détection du matériel.
</p>

<p>
Pour cela créer un fichier :
</p>
<pre class="code">sudo nano /etc/udev/rules.d/10-HID-REMOTE.rules</pre>

<p>
contenant le code (penser à adapter idVendor et idProduct):
</p>
<pre class="file">SUBSYSTEM==&quot;usb&quot;, ENV{INTERFACE}==&quot;*/2&quot;,ATTRS{idVendor}==&quot;0755&quot;,ATTRS{idProduct}==&quot;2626&quot;,ENV{HID_MAPPER_SUPPORTED}=&quot;1&quot;, RUN+=&quot;/bin/sh -c &#039;/sbin/modprobe -b uinput; sleep 1 &amp;&amp; /usr/local/bin/hid_mapper --lookup-id --manufacturer 0755 --product 2626 --map /repertoire/contenant/remote.map --map-mouse /repertoire/contenant/mouse.map 2&gt;&amp;1 &amp;&#039;&quot;</pre>

<p>
<strong>hid_mapper</strong> se lancera alors au démarrage et permettra d&#039;assigner des raccourcis clavier aux codes correspondant aux touches de la télécommande.
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Lancement] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="lancement" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="6295-7459" /><button type="submit" title="Lancement" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="utilisation_du_hid_avec_lirc">Utilisation du HID avec LIRC</h2>
<div class="level2">

<p>
Pour les habitués de <a href="/tutoriel/lirc" class="wikilink2" title="tutoriel:lirc" rel="nofollow">LIRC</a>, il est possible d&#039;utiliser le périphérique précédemment configuré.
Pour cela, on attribue un lien symbolique à l&#039; input/eventx générée par hid_mapper en ajoutant la ligne suivante au fichier 10-HID-REMOTE.rules que l&#039;on vient de créer :
</p>
<pre class="file">KERNEL==&quot;event*&quot;,ATTRS{name}==&quot;Generic USB input mapper&quot;,SYMLINK=&quot;input/hid_mapper&quot;</pre>

<p>
Il nous faudra également  ajouter les <a href="http://lirc.sourceforge.net/remotes/devinput/lircd.conf.devinput" class="urlextern" title="http://lirc.sourceforge.net/remotes/devinput/lircd.conf.devinput" rel="nofollow">codes devinput</a> au fichier <strong>/etc/lirc/lircd.conf</strong>. 
</p>

<p>
Pour des raisons pédagogiques, admettons que vous avez une télécommande MiroPCTV connectée sur le port série ttyS0 (lirc_serial).
</p>

</div>

<h4 id="demarrage_manuel">Démarrage manuel</h4>
<div class="level4">

<p>
Lancer deux instances lircd, dont l&#039;une est connectée à l&#039;autre :
</p>
<pre class="code">sudo lircd -H pinsys --device=/dev/ttyS0 --output=/var/run/lirc/lircd1 --pidfile=/var/run/lircd1.pid --listen
sudo lircd -H dev/input -d /dev/input/hid_mapper -o /var/run/lirc/lircd --pidfile=/var/run/lircd.pid --connect=localhost:8765</pre>

</div>

<h4 id="demarrage_automatique">Démarrage automatique</h4>
<div class="level4">

<p>
On doit pour cela mofifier les fichiers de configuration de LIRC pour intégrer le support de notre nouvelle télécommande :
</p>
<pre class="file"># /etc/lirc/hardware.conf
#
#Chosen Remote Control
REMOTE_MODULES=&quot;lirc_dev lirc_serial&quot;
REMOTE_DRIVER=&quot;&quot;
REMOTE_DEVICE=&quot;&quot;
REMOTE_SOCKET=&quot;&quot;
REMOTE_LIRCD_CONF=&quot;/etc/lirc/lircd.conf&quot;
REMOTE_LIRCD_ARGS=&quot;-H pinsys --device=/dev/ttyS0 --output=/var/run/lirc/lircd1 --pidfile=/var/run/lircd1.pid --listen&quot;
REMOTE_LIRCD2_ARGS=&quot;-H dev/input --device=/dev/input/hid_mapper --output=/var/run/lirc/lircd --pidfile=/var/run/lircd.pid --connect=localhost:8765&quot;

#Enable lircd
START_LIRCD=&quot;true&quot;
#Try to load appropriate kernel modules
LOAD_MODULES=&quot;true&quot;</pre>

<p>
- Enfin, on modifie le sript de lancement de lirc pour qu&#039;il démarre les 2 instances de lircd :
</p>

<p>
Editer le fichier <strong>/etc/init.d/lirc</strong> et le modifier vers la ligne 160 :
</p>

<p>
- Remplacer :
</p>
<pre class="file">REMOTE_LIRCD_ARGS=`build_remote_args $REMOTE_LIRCD_ARGS`</pre>

<p>
par 
</p>
<pre class="file">REMOTE_LIRCD_ARGS=`build_remote_args $REMOTE_LIRCD_ARGS`
REMOTE_LIRCD2_ARGS=`build_remote_args $REMOTE_LIRCD2_ARGS`</pre>

<p>
- Ainsi que :
</p>
<pre class="file">start-stop-daemon --start --quiet --oknodo --exec /usr/sbin/lircd -- $REMOTE_LIRCD_ARGS &lt; /dev/null</pre>

<p>
par :
</p>
<pre class="file">start-stop-daemon --start --quiet --oknodo --name lirc1 --exec /usr/sbin/lircd -- $REMOTE_LIRCD_ARGS &lt; /dev/null
start-stop-daemon --start --quiet --oknodo --name lirc2 --exec /usr/sbin/lircd -- $REMOTE_LIRCD2_ARGS &lt; /dev/null</pre>

<p>
Source pricipale : <a href="http://forum.xbmc.org/showthread.php?tid=88560&amp;page=17" class="urlextern" title="http://forum.xbmc.org/showthread.php?tid=88560&amp;page=17" rel="nofollow">http://forum.xbmc.org/showthread.php?tid=88560&amp;page=17</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/tutoriel/hid"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1511195729" /><input type="hidden" name="summary" value="[Utilisation du HID avec LIRC] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_du_hid_avec_lirc" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="7460-" /><button type="submit" title="Utilisation du HID avec LIRC" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="tutoriel/hid.txt">tutoriel/hid.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 20/11/2017, 17:35">Le 20/11/2017, 17:35</span></li><li class="text-muted">par scaph</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=tutoriel%3Ahid&amp;1635531927" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

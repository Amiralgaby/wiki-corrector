
{{tag>administration sécurité droits}}
------

====== Effectuer des tâches administratives ======

Sur votre système Ubuntu, vous ne possédez pas tous les droits : essayez de créer un fichier dans le dossier ''/root'' par exemple ? Impossible. Vous êtes un **utilisateur** du système, et à ce titre, certaines actions, et notamment les tâches d'administration, vous sont par défaut impossibles à effectuer simplement.

On utilise alors des mécanismes d'**élévation des privilèges** : si vous tentez d'exécuter une tâche administrative (par exemple installer une nouvelle application), le système va vérifier que vous possédez suffisamment de privilèges (que vous avez bien accès aux privilèges d'administrateur), et va vous demander votre mot de passe (il faut s'assurer que c'est bien vous devant le clavier, pas votre chat qui lance une opération en chassant votre souris ;-) ). Après validation, le système vous accorde **temporairement** des privilèges élevés nécessaire à l'opération demandée.

Si les actions ou commandes à exécuter en « mode administrateur » ne fonctionnent pas, c'est que vous n'avez pas les privilèges nécessaires. Dans ce cas, contactez l'administrateur de votre système pour qu'il augmente vos privilèges, ou qu'il effectue les actions nécessaires à votre place. Consultez également la page [[:utilisateur]] pour en apprendre plus et vérifier que vous êtes bien un administrateur.

<note>Le premier compte créé sur le système (à l'installation) a accès à ces droits d'administrateur.

Les utilisateurs ayant le droit d'emprunter les droits d'administration du système sont généralement nommés "Administrateurs" dans les interfaces graphiques comme le [[:GNOME-Control-Center]].</note>

===== Méthodes graphiques =====

La plupart des applications nécessitant des privilèges vont vous les demander graphiquement elles-mêmes. C'est par exemple le cas avec [[:plasma-discover]], [[:gnome-software]], [[:synaptic]], [[:flatpak]], [[:gparted]],... Si vous n'êtes pas administrateur, ces applications peuvent ne pas se lancer du tout, ou vous masquer des éléments qui concernent l'administrateur.

C'est aussi le cas des utilitaires de paramétrage du système (ajout ou modification de comptes d'utilisateurs notamment).

En ligne de commande, il est en revanche très rare que les applications vous demandent le mot de passe si vous n'avez pas explicitement, via la commande **''sudo''** ou **''pkexec''**, demandé à emprunter les privilèges d'administration.

==== Avec Nautilus ====

Le paquet **[[apt>nautilus-admin]]** fournit une extension pour [[:Nautilus]] qui permet d'ouvrir des dossiers ou de modifier des fichiers en tant qu'administrateur, à partir du menu "clic-droit" du gestionnaire de fichiers.

===== sudo ====

La commande [[:sudo]] consiste à emprunter en totalité les pouvoirs du compte //root// (l'[[wpfr>utilisateur root]] est aussi appelé "super-utilisateur").

<note important>Il n'y a toujours qu'un seul compte //root//, mais il peut y avoir plusieurs utilisateurs capables d'accéder à ses privilèges.

Par défaut, le compte //root// n'est pas accessible directement sur les systèmes Ubuntu, inutile d'essayer d'ouvrir une session sous cette identité.</note>

La "puissance" des privilèges de //root// en font un compte risqué à utiliser, en particulier dans le cas d'une [[:xorg|session graphique]], où la sécurité du système peut être compromise. N'utilisez ''sudo'' que dans le cas suivant :
  * L'application voulue s'exécute en ligne de commande ;
  * Vous avez une confiance totale en l'application voulue ([[:apt]], [[:nano]], [[:dpkg]], ...)

<note tip>De toute manière, pour votre sécurité, si vous l'utilisez, le serveur d'affichage [[:Wayland]] n'autorise jamais les applications graphiques à être lancées en tant que //root//.</note>

Exemple :
<code bash>sudo nom-du-programme</code>

<note help>Les pages de [[:|documentation]] des différents programmes vous fourniront les noms des commandes correspondant aux applications graphiques ou les noms des commandes à exécuter en mode administrateur.</note>

===== pkexec =====

Il ne s'agit pas d'accorder pas la totalité des droits d'administration, mais seulement ceux qui sont renseignés par l'application comme étant nécessaires. Cela limite théoriquement les possibilités de faille de sécurité.

Exemple :
<code bash>pkexec nom-du-programme</code>

<note important>Sur certaines [[:versions]], il semblerait qu'une configuration soit nécessaire pour lancer des applications graphiques via ''pkexec''</note>
En effet il faut utiliser les variables d'environnement ''$DISPLAY'' et ''$XAUTHORITY'' :
  pkexec env DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY nom-du-programme

La commande ''pkexec'' fait partie de la bibliothèque [[:policykit|polkit]]. 
===== À lire aussi =====
  * [[:sudo]]
  * [[:utilisateur]]
  * [[:policykit|pkexec]]
  * [[:tutoriel:comment_eviter_root_quand_c_est_possible|Éviter de lancer une commande en tant qu'administrateur lorsque c'est possible]]
  * **(en) [[http://www.sudo.ws|Site officiel du projet "sudo"]]**
  * **(en)** [[http://www.sudo.ws/sudo/sudoers.man.html|Sudoers Manual]]
  * **(en)** [[https://help.ubuntu.com/community/RootSudo|RootSudo dans l'Aide d'Ubuntu]]
  * **(fr)** [[wpfr>Polkit|Polkit (anciennement PolicyKit)]], une autre méthode de gestion flexible des privilèges utilisateurs.

-----

//Contributeurs : [[utilisateurs/YoboY]], [[utilisateurs/roschan]]
, ...//
tag>ltsp serveur

=== Liens Externes ===
  * [[wpfr>LTSP]]
  * [[http://ltsp.org/|LTSP]] <sup>en</sup>

=== Liens Intra  ===
Associés entre-elle:
  - [[:clientleger]]
  - [[:clientleger_boot]] -> FIXME Intro peut-être fusionné avec d'autre dont [[:clientléger]]
  - [[:ltsp_version_5.x]]
  - [[:clientleger_station]]
  - [[:clientleger_problemes]]
  - [[:clientleger_controler]]
  - [[:clientleger_invite]]

Autres pages traitant le sujet
  * [[:ltsp]]
  * [[:clientleger_lts.conf]]
  * [[:clientleger_teachertool]]
  * [[:clientleger_x11vnc]]
  * [[:tutoriel:comment_creer_un_terminal_x_ou_recycler_une_vieille_machine]]
  * [[:tutoriel:comment_mettre_en_place_une_station_cliente_legere]] 
  * [[:edubuntu_ltsp_configuration]]
  * [[:edubuntu-menu-ltsp]]

à ne pas confondre avec [[:netboot_live]]

----
====== Comprendre, installer, configurer un système serveur / clients-légers =====

===== Introduction =====
FIXME Reprendre celles de client_boot (cf plus bas) + client léger + edubuntu + LTSP (qui serait peut-être aussi à reprendre) + sûrement d'autres qui répète le principe (notamment page tuto)

===== Mise en place =====
FIXME J'ai repris la trâme de https://doc.ubuntu-fr.org/clientleger_boot

==== Serveur ====
  * **[[:ltsp_version_5.x|Installer]]** un serveur de clients légers. -> FIXME Page à part OK
 
==== Clients =====
  * Préparer une **[[#clientleger_station|station]]** comme client léger. -> FIXME Liste de matériel. Peut-être remplacer par des préconisations minimales indiquées ici.
  * Résoudre les **[[:clientleger_problemes|problèmes]]**. -> FIXME Page à part Ok. Peut-être à pas à mettre au début
  * Comment **[[#clientleger_controler|contrôler]]** l'activité d'un client léger? -> FIXME Suffisant en section comme fais ici. Pointe 2 logiciels dont un qui a sa page (à peine traduite au passage)
  * Comment franciser **[[#clientleger_invite|l'invite]]** d'identification des clients légers ? -> FIXME Plus à jour et peut être dans une section comme fais ici.
  * Tutoriel sur l'installation d'un client léger [[:tutoriel:comment_mettre_en_place_une_station_cliente_legere]] -> FIXME À fusionner/recouper avec le reste

----
__Source :__ https://doc.ubuntu-fr.org/clientleger_boot

===== Comment fonctionne un client léger? =====

==== Réponse basique ====

Les clients légers se contentent de charger en mémoire un système d'exploitation réduit et de se connecter ensuite à un serveur. Les applications s'exécutent sur le serveur mais s'affichent sur l'écran de la station cliente.


==== Réponse technique ====

Séquence de démarrage (d'un point de vue du client léger): la station cliente peut soit disposer d'un noyau sur un média de stockage local, soit le charger depuis le serveur au travers du réseau (en utilisant les instructions appropriés, il est possible de charger le noyau linux depuis un serveur au travers d'une carte réseau de démarrage. Ainsi, la station cliente n'a plus besoin de stocker quoi que ce soit, si ce n'est sur la mémoire vive de l'ordinateur.)


==== Séquence de démarrage ====

La carte réseau PXE lance une requête DHCP sur le réseau local. Le serveur DHCP répond en indiquant à la carte où se trouve le noyau linux. Le noyau stocké dans ''/var/lib/tftpboot'' est alors chargé au travers du réseau via le protocole TFTP.

Une fois le noyau chargé, il est exécuté, et la machine démarre sous linux. ''initramfs'' est chargé avec le noyau Linux et il est monté comme système de fichiers ''root''. Ceci procure automatiquement les pilotes nécessaires pour la carte réseau, la souris, le clavier, etc... Une fois le pilote de carte réseau chargé en mémoire, une seconde requête DHCP fournit aux clients les informations comme l'adresse IP, le masque réseau, la passerelle, le serveur DNS et le point de montage root NFS (Network File System) .

Le noyau Linux exécute ''ubuntu initramfs'' qui monte le système de fichiers root partagé du serveur sur la machine cliente, en lecture seule. La station cliente a donc alors un noyau Linux de démarrage, un système de fichiers ''root'', comme un vrai système Linux. À partir de maintenant, quand nous parlerons du système de fichiers de la station client, il s'agira en fait du système de fichiers root du serveur monté en lecture seule. Le système de fichiers ''root'' monté par la station cliente est différent du système de fichiers root que le serveur utilise lui-même, mais il est conçu spécialement pour les stations clientes, et il est partagé entre toutes celles connectées au serveur (il est situé dans le répertoire ''/opt/ltsp/<arch>'' sur le serveur) . ''initramfs'' appelle le programme ''init'', les paramètres du serveur X sont autodétectés et le gestionnaire de connexion que l'on appelle ''ldm'' est exécuté.

**Nota :** dans la plupart des cas, les clients seront des machines 32 bits type Intel, et le système alternatif sera placé dans ''/opt/ltsp/i386''.

Une fois connecté, ''ldm'' crée un tunnel ''ssh'' et démarre une session X sur le serveur avec affichage sur les stations clientes via le tunnel. L'utilisation de ''ssh'' procure des avantages : vous n'avez pas à configurer le serveur X sur la station cliente,  et aucun transport de données par protocole ''tcp'' non sécurisé n'est initialisée, comme cela pouvait l'être auparavant avec ''ltsp''.

----
__ Source : __ https://doc.ubuntu-fr.org/clientleger_station

##### Préparer une station comme client léger / choisir un client léger neuf #####

Nous allons voir ici les points à prendre en compte pour transformer une machine indépendante en client léger.

Nous donnerons quelques exemples de configurations "récup." ou "neuf" (mini PC spécialisé client léger).

===== Configuration matérielle =====

  * **Mémoire vive** : 48 Mo constituent la limite basse, mais 128 Mo sont conseillés et 256 Mo seront parfaits.
  * **Processeur**, Pentium II, 200 Mhz ou mieux. En deçà, le confort d'utilisation risque d'être juste.
  * **Carte réseau**, 100 Mb/s (l'utilisation d'une carte réseau ancienne 10 Mb/s peut rendre le client inutilisable).
  * **Disque dur** : pas nécessaire. Si le disque dur contient un vieux système d'exploitation type Windows 98, il n'est pas gênant de le conserver.
  * **Carte video** : capable de gérer un affichage 1024 x 768 ou plus (on survivra avec du 800 x 600).
  * **Carte son**, si possible.

==== Exemples de configurations "récup" ====

  * **Portable HP Omnibook** (Pentium II 600 Mhz, 64 Mo ram, carte ethernet Tulip intégrée, carte son ESS tech, batterie HS). :-D affichage 1024 x 768, son fonctionnel, trackpad reconnu, souris usb reconnue, streaming video fluide (Youtube). :-( touches spéciales inactives, pas d'arrêt par acpi
  * **[[http://users.skynet.be/oxfam/nivelles/99.html|Oxfam Solidarité]]** : Fujitsu-Siemens E5616 AMD Dual Core 3800+ , ram de 1024Mo, Disque dur de 80Go, écran plat de 17" avec haut-parleurs intégrés, Ubuntu 12.04 LTS. 

==== Exemples de configurations "neuf" ====

  * **[[http://www.pcengines.ch/alix1d.htm|Alix 1D]]** : test Ok. Environ 100 €.
  * **[[http://www.cyrus.fr/corustmodel.html#speccorust2|A3Tech Corus T2]]** Test Ok. Environ 200 €. Contient un système embarqué mais peut booter en pxe (F12 au démarrage).
  * **[[http://www.ordipost.com/|Ordipost]]** : test à venir. Environ 200 €.
  * **[[http://www.toolinux.com/news/materiels/un_poste_client_leger_linux_ou_windows_ce_a_129_euros_chez_vxl_ar10313.html|VXL Itona 3531]]** : test à venir. Prix : 130 €.
  * **[[http://www.linutop.com/linutop2/index.fr.html|Linutop]]** : test à venir. Environ 250 €.
  * **[[http://www.presence-pc.com/actualite/microclient-jr-st166-20558/|Microclient Jr]]** : test à venir. Environ 90 €.
  * **[[http://www.artecgroup.com/thincan|Thincan]]** : test à venir. A partir de 50 €.
  * **[[http://www.nec-computers.fr/447/produits/clients-legers/quovio-d180.htm|NEC QUOVIO D180]]** : test à venir. Prix : 300 €

----
__Source :__ https://doc.ubuntu-fr.org/clientleger_controler

===== Contrôler l'activité des utilisateurs de clients légers =====

Il existe deux outils pour contrôler l'activité d'un utilisateur sur un réseau ltsp :

==== Thin client Manager ====

Allez dans "Système > Administration > Thin client Manager" dont l'icône n'est visible que pour les membres du groupe admin.

Vous pourrez lancer une application pour divers utilisateurs, envoyer un message, mettre des moniteurs en veille, déconnecter des utilisateurs...

Attention : pour visualiser des imagettes des écrans utilisateurs, il faut [[clientleger_x11vnc|installer x11vnc]] dans le noyau spécial clients légers.

==== Fl_Teachertool ====

Cet outil assez complet nous vient du projet [[http://k12ltsp.org/mediawiki/index.php/Main_Page|K12LTSP]] et n'est pas disponible en standard ni traduit en Français.

Malgré ce handicap, cet outil est assez riche pour avoir envie de [[:clientleger_teachertool|l'installer]] (une bonne connaissance du terminal est recommandée).

----

__Source : __ https://doc.ubuntu-fr.org/clientleger_invite

===== Comment franciser l'invite de connexion des clients légers ? =====

**Niveau :** bidouille

L'invite de connexion des clients légers affiche à ce jour "Username" puis "Password" quelle que soit la langue du système.

==== Versions antérieures à Ubuntu 7.10 ====
On peut modifier ceci en éditant le fichier : FIXME sudo gedit saymal -> mini-tuto
  sudo gedit /opt/ltsp/i386/usr/lib/ltsp/greeters/gtk

Rechercher la ligne : FIXME Usage balilse file
> markup = '<span size="10000"><b>Username:</b></span>' 
et remplacer "Username:" par "Identifiant :".

Puis rechercher la ligne :
> markup = '<span size="10000"><b>Password:</b></span>' 
et remplacer "Password:" par "Mot de passe :".

==== Sous Ubuntu 8.04 ====
<note>

Ceci est certainement valable pour Ubuntu 7.10 Gusty Gibbon (avec LTSP 5).</note>
L'écran de connexion pour les clients légers est par défaut "ldm". Il faut donc le modifier. Pour cela il faut aller dans le dossier :
<code>/opt/ltsp/i386/usr/share/ldm</code>

Il y d'autres informations sur la personnalisation de "ldm" ici : [[clientleger_problemes]] (section : Comment puis-je modifier l'écran de connexion sur mes clients légers?)
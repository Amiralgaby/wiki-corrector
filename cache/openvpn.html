<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>openvpn [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="brouillon,administration,reseau,securite,vpn,vetuste"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/openvpn?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/openvpn?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/openvpn"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/openvpn"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/openvpn"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"openvpn","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="openvpn">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/openvpn?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/openvpn?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/openvpn?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/openvpn?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/openvpn?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/openvpn?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/openvpn?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">openvpn</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/openvpn?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/openvpn?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/openvpn?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#installation","title":"Installation","level":1},{"link":"#par_paquet","title":"Par paquet","level":2},{"link":"#webmininterface_d_administration_web","title":"Webmin : Interface d'administration web","level":2},{"link":"#configuration_des_vpn","title":"Configuration des VPN","level":1},{"link":"#cas_d_un_fournisseur_de_vpn","title":"Cas d'un fournisseur de VPN","level":2},{"link":"#certificats_de_securite","title":"Certificats de s\u00e9curit\u00e9","level":2},{"link":"#generer_des_parametres_diffie-hellman","title":"G\u00e9n\u00e9rer des param\u00e8tres Diffie-Hellman(\u00b9)","level":2},{"link":"#les_fichiers_cles","title":"Les fichiers cl\u00e9s","level":1},{"link":"#creation_des_fichiers_de_configuration_pour_le_serveur_et_les_clients","title":"Cr\u00e9ation des fichiers de configuration pour le serveur et les clients","level":2},{"link":"#demarrage_automatique_d_openvpn_au_lancement_du_systeme","title":"D\u00e9marrage automatique d'OpenVPN au lancement du syst\u00e8me","level":1},{"link":"#demarrage_du_vpn_et_tests_de_la_connectivite","title":"D\u00e9marrage du VPN et tests de la connectivit\u00e9","level":1},{"link":"#demarrage_du_serveur","title":"D\u00e9marrage du serveur","level":2},{"link":"#demarrage_du_client","title":"D\u00e9marrage du client","level":2},{"link":"#test","title":"Test","level":2},{"link":"#en_cas_d_utilisation_de_firestarter","title":"En cas d'utilisation de Firestarter","level":2},{"link":"#acceder_a_internet_par_votre_vpn","title":"Acc\u00e9der \u00e0 internet par votre VPN","level":1},{"link":"#administration_du_serveur_vpn","title":"Administration du serveur VPN","level":1},{"link":"#par_telnet","title":"Par telnet","level":2},{"link":"#utilisation_de_webmin","title":"Utilisation de Webmin","level":2},{"link":"#informations_complementaires","title":"Informations compl\u00e9mentaires","level":2},{"link":"#creer_un_vpn_avec_une_adresse_ip_dynamique","title":"Cr\u00e9er un VPN avec une adresse IP dynamique","level":1},{"link":"#voir_aussi","title":"Voir aussi","level":1},{"link":"#liens_externes","title":"Liens externes","level":2},{"link":"#notes","title":"Notes","level":2}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#installation">Installation</a>
<ul class="nav toc">
<li class="level2"><a href="#par_paquet">Par paquet</a></li>
<li class="level2"><a href="#webmininterface_d_administration_web">Webmin : Interface d&#039;administration web</a></li>
</ul>
</li>
<li class="level1"><a href="#configuration_des_vpn">Configuration des VPN</a>
<ul class="nav toc">
<li class="level2"><a href="#cas_d_un_fournisseur_de_vpn">Cas d&#039;un fournisseur de VPN</a></li>
<li class="level2"><a href="#certificats_de_securite">Certificats de sécurité</a></li>
<li class="level2"><a href="#generer_des_parametres_diffie-hellman">Générer des paramètres Diffie-Hellman(¹)</a></li>
</ul>
</li>
<li class="level1"><a href="#les_fichiers_cles">Les fichiers clés</a>
<ul class="nav toc">
<li class="level2"><a href="#creation_des_fichiers_de_configuration_pour_le_serveur_et_les_clients">Création des fichiers de configuration pour le serveur et les clients</a></li>
</ul>
</li>
<li class="level1"><a href="#demarrage_automatique_d_openvpn_au_lancement_du_systeme">Démarrage automatique d&#039;OpenVPN au lancement du système</a></li>
<li class="level1"><a href="#demarrage_du_vpn_et_tests_de_la_connectivite">Démarrage du VPN et tests de la connectivité</a>
<ul class="nav toc">
<li class="level2"><a href="#demarrage_du_serveur">Démarrage du serveur</a></li>
<li class="level2"><a href="#demarrage_du_client">Démarrage du client</a></li>
<li class="level2"><a href="#test">Test</a></li>
<li class="level2"><a href="#en_cas_d_utilisation_de_firestarter">En cas d&#039;utilisation de Firestarter</a></li>
</ul>
</li>
<li class="level1"><a href="#acceder_a_internet_par_votre_vpn">Accéder à internet par votre VPN</a></li>
<li class="level1"><a href="#administration_du_serveur_vpn">Administration du serveur VPN</a>
<ul class="nav toc">
<li class="level2"><a href="#par_telnet">Par telnet</a></li>
<li class="level2"><a href="#utilisation_de_webmin">Utilisation de Webmin</a></li>
<li class="level2"><a href="#informations_complementaires">Informations complémentaires</a></li>
</ul>
</li>
<li class="level1"><a href="#creer_un_vpn_avec_une_adresse_ip_dynamique">Créer un VPN avec une adresse IP dynamique</a></li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a>
<ul class="nav toc">
<li class="level2"><a href="#liens_externes">Liens externes</a></li>
<li class="level2"><a href="#notes">Notes</a></li>
</ul></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est considérée comme <a href="/vetuste">vétuste</a> et ne contient plus d'informations utiles.<br />
Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">brouillon</a>,
	<a href="/administration" class="wikilink1" title="administration" rel="tag">administration</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/securite" class="wikilink1" title="securite" rel="tag">sécurité</a>,
	<a href="/vpn" class="wikilink1" title="vpn" rel="tag">vpn</a>,
	<a href="/vetuste" class="wikilink1" title="vetuste" rel="tag">vétuste</a>
</span></div>
<hr />

<p>
<img src="/_media/openvpn/openvpn_00.png" class="mediaright img-responsive" alt="" />
</p>

<h1 class="sectionedit1 page-header" id="openvpn">OpenVPN</h1>
<div class="level1">

<p>
<strong>OpenVPN</strong> est un logiciel libre permettant de créer un réseau privé virtuel <a href="/vpn" class="wikilink1" title="vpn">VPN</a>. <br/>

<a href="/vpn#differentes_utilisations_de_vpn" class="wikilink1" title="vpn">Différents usages nécessitent l&#039;utilisation d&#039;un VPN</a><br/>

Il peut être utilisé pour simplement accéder à un serveur <abbr title="Virtual Private Network">VPN</abbr> existant ou pour mettre en place un serveur… et y accéder.
</p>

<p>
Que ce soit en configuration client ou serveur, il est possible de tout configurer en <a href="/commande_shell" class="wikilink1" title="commande_shell">CLI</a> ou par interface graphique.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[OpenVPN] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="openvpn" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="111-597" /><button type="submit" title="OpenVPN" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="installation">Installation</h2>
<div class="level2">

<p>
Il faut aussi installer le support pour gnome :
</p>
<pre class="code">sudo apt-get install network-manager-openvpn network-manager-openvpn-gnome</pre>

<p>
Dans le cas contraire, cela affiche une erreur dans la gestion de l&#039;identité :
&quot;impossible de charger l&#039;éditeur de connexions <abbr title="Virtual Private Network">VPN</abbr>&quot;
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="598-894" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="par_paquet">Par paquet</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> : 
</p>
<ul class=" fix-media-list-overlap">
<li class="level1 node"><div class="li"> Pour le serveur openvpn :</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> <strong><a href="apt://openvpn" class="interwiki iw_apt" title="apt://openvpn">openvpn</a></strong></div>
</li>
<li class="level2"><div class="li"> (vivement recommandé) <a href="/fail2ban" class="wikilink1" title="fail2ban">fail2ban</a> : le seul risque de sécurité subsistant sur votre serveur vpn sera une attaque de type force brute, et ddos, il est donc nécessaire de limiter le nombre d&#039;essais possibles. <sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup></div>
</li>
<li class="level2"><div class="li"> (facultatif selon le choix de l&#039;utilisateur) : <strong><a href="apt://gadmin-openvpn-server" class="interwiki iw_apt" title="apt://gadmin-openvpn-server">gadmin-openvpn-server</a></strong> : outil à interface graphique pour administrer un serveur openvpn, permet également de générer et éditer la configuration.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Pour le <a href="/client_openvpn" class="wikilink1" title="client_openvpn">client openvpn</a> :</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> <strong><a href="apt://openvpn" class="interwiki iw_apt" title="apt://openvpn">openvpn</a></strong></div>
</li>
<li class="level2"><div class="li"> <strong><a href="apt://network-manager-openvpn" class="interwiki iw_apt" title="apt://network-manager-openvpn">network-manager-openvpn</a></strong> : plugin openvpn pour le gestionnaire réseau, vous permettant de configurer facilement un client, et ensuite pouvoir le démarrer. <sup><a href="#fn__2" id="fnt__2" class="fn_top">2)</a></sup></div>
</li>
<li class="level2"><div class="li"> (facultatif selon le choix de l&#039;utilisateur) <strong><a href="apt://gadmin-openvpn-client" class="interwiki iw_apt" title="apt://gadmin-openvpn-client">gadmin-openvpn-client</a></strong> : outil à interface graphique pour le client d&#039;un serveur openvpn, permet également de générer et éditer la configuration.</div>
</li>
</ul>
</li>
</ul>
<div class="noteclassic">Les ports par défaut pour OpenVPN sont :<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> 1194 <abbr title="Transmission Control Protocol">TCP</abbr></div>
</li>
<li class="level1"><div class="li"> 1194 UDP</div>
</li>
</ul>

</div>
</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Par paquet] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="par_paquet" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="895-2163" /><button type="submit" title="Par paquet" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="webmininterface_d_administration_web">Webmin : Interface d&#039;administration web</h3>
<div class="level3">

<p>
Un module <a href="/webmin" class="wikilink1" title="webmin">Webmin</a> est disponible pour faciliter le paramétrage d&#039;<a href="http://www.webmin.com/cgi-bin/search_third.cgi?search=openvpn" class="urlextern" title="http://www.webmin.com/cgi-bin/search_third.cgi?search=openvpn" rel="nofollow">OpenVPN</a>.
</p>
<div class="noteclassic">Bien sur, l&#039;usage de webmin n&#039;est pas nécessaire.
<p>
Certains diraient même que c&#039;est a déconseiller.
</p>

</div>
</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Webmin : Interface d&#039;administration web] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="webmininterface_d_administration_web" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2164-2483" /><button type="submit" title="Webmin : Interface d&#039;administration web" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="configuration_des_vpn">Configuration des VPN</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Configuration des VPN] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_des_vpn" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2484-2518" /><button type="submit" title="Configuration des VPN" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="cas_d_un_fournisseur_de_vpn">Cas d&#039;un fournisseur de VPN</h3>
<div class="level3">

<p>
Vous avez un accès <abbr title="Virtual Private Network">VPN</abbr> de type OpenVPN et vous souhaitez configurer cet accès ? Voici la procédure.
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Téléchargez le fichier de configuration de votre fournisseur <abbr title="Virtual Private Network">VPN</abbr>.</div>
</li>
<li class="level1"><div class="li"> Placez ce fichier <strong>*.ovpn</strong> dans le dossier <strong>/etc/openvpn/</strong> et renommer ce fichier pour enlever les espaces (si besoin). Pour avoir l&#039;accès en écriture de ce dossier, faites un clic droit sur le dossier <strong>openvpn</strong> et choisissez <strong>Ouvrir en tant qu&#039;administrateur</strong>.</div>
</li>
<li class="level1"><div class="li"> Faites un clic droit sur l’icône réseau et choisis de modifier les connexions.</div>
</li>
<li class="level1"><div class="li"> Ajoutez une nouvelle connexion.</div>
</li>
<li class="level1"><div class="li"> Sélectionnez <strong>Importer une configuration <abbr title="Virtual Private Network">VPN</abbr> enregistrée</strong>.</div>
</li>
<li class="level1"><div class="li"> Sélectionnez votre fichier <strong>*.ovpn</strong></div>
</li>
<li class="level1"><div class="li"> Vérifiez ou indiquez l’adresse du serveur <abbr title="Virtual Private Network">VPN</abbr>, choisissez le type <strong>Mot de passe</strong>, tapez le login du <abbr title="Virtual Private Network">VPN</abbr> et son mot de passe.</div>
</li>
<li class="level1"><div class="li"> Enregistrez, quittez et connectez votre <abbr title="Virtual Private Network">VPN</abbr>.</div>
</li>
</ol>

<p>
Retrouvez ces étapes en images ci-dessous (cliquez pour agrandir), issu d&#039;un fournisseur de <abbr title="Virtual Private Network">VPN</abbr> (ce n&#039;est pas de la pub mais un exemple) :
</p>

<p>
<a href="/_detail/openvpn-ubuntu-12.jpg?id=openvpn" class="media" title="openvpn-ubuntu-12.jpg"><img src="/_media/openvpn-ubuntu-12.jpg?w=200&amp;tok=a6cb6c" class="media img-responsive" alt="" width="200" /></a>
<a href="/_detail/openvpn-ubuntu-13.jpg?id=openvpn" class="media" title="openvpn-ubuntu-13.jpg"><img src="/_media/openvpn-ubuntu-13.jpg?w=200&amp;tok=2e4957" class="media img-responsive" alt="" width="200" /></a>
<a href="/_detail/openvpn-ubuntu-14.jpg?id=openvpn" class="media" title="openvpn-ubuntu-14.jpg"><img src="/_media/openvpn-ubuntu-14.jpg?w=200&amp;tok=65db36" class="media img-responsive" alt="" width="200" /></a>
<a href="/_detail/openvpn-ubuntu-16.jpg?id=openvpn" class="media" title="openvpn-ubuntu-16.jpg"><img src="/_media/openvpn-ubuntu-16.jpg?w=200&amp;tok=2668bc" class="media img-responsive" alt="" width="200" /></a>
<a href="/_detail/openvpn-ubuntu-17.jpg?id=openvpn" class="media" title="openvpn-ubuntu-17.jpg"><img src="/_media/openvpn-ubuntu-17.jpg?w=200&amp;tok=2c46bf" class="media img-responsive" alt="" width="200" /></a>
<a href="/_detail/openvpn-ubuntu-18.jpg?id=openvpn" class="media" title="openvpn-ubuntu-18.jpg"><img src="/_media/openvpn-ubuntu-18.jpg?w=200&amp;tok=d34b1b" class="media img-responsive" alt="" width="200" /></a>
<a href="/_detail/openvpn-ubuntu-18-new.jpg?id=openvpn" class="media" title="openvpn-ubuntu-18-new.jpg"><img src="/_media/openvpn-ubuntu-18-new.jpg?w=200&amp;tok=9ebe80" class="media img-responsive" alt="" width="200" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Cas d&#039;un fournisseur de VPN] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="cas_d_un_fournisseur_de_vpn" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2519-3804" /><button type="submit" title="Cas d&#039;un fournisseur de VPN" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="certificats_de_securite">Certificats de sécurité</h3>
<div class="level3">

</div>

<h4 id="principe">Principe</h4>
<div class="level4">

<p>
La première étape dans la construction d&#039;une configuration OpenVPN 2.0 est d&#039;établir une <strong>ICP</strong> (<strong>I</strong>nfrastructure de <strong>C</strong>lés <strong>P</strong>ubliques) (PKI en anglais). Une ICP fonctionne grâce à :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Une clé publique pour le serveur et une clé privée pour chacun des clients</div>
</li>
<li class="level1"><div class="li"> Un certificat de l&#039;Autorité de Certification maître et des clés qui sont utilisées pour identifier (signer, identifier…) chaque certificat serveur et client.</div>
</li>
</ul>

<p>
OpenVPN supporte une authentification bidirectionnelle basée sur les certificats, ce qui signifie que le client doit authentifier le certificat du serveur et le serveur doit authentifier le certificat du client avant qu&#039;une confiance mutuelle puisse être établie.
</p>

<p>
Ce modèle de sécurité a un nombre de possibilités intéressante pour une utilisation en <abbr title="Virtual Private Network">VPN</abbr> :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Le serveur n&#039;a besoin que de ses propres certificats/clés, il n&#039;a pas besoin de connaître chacune des clés des clients qui peuvent s&#039;y connecter.</div>
</li>
<li class="level1"><div class="li"> Le serveur n&#039;acceptera les clients que lorsque le certificat sera signé par l&#039;Autorité de Certification maître (qui l&#039;aura généré avant). Et comme le serveur peut vérifier cette signature sans avoir besoin d&#039;accéder à la clé privée de l&#039;Autorité de Certification elle-même, il est possible pour la clé de l&#039;Autorité de Certification (clé la plus sensible dans toute l&#039;Infrastructure de Clés Publiques) de résider sur une toute autre machine, même une sans connexion réseau. </div>
</li>
<li class="level1"><div class="li"> Si une clé privée est compromise, il est possible de la désactiver en ajoutant son certificat à une Liste de Révocation de Certificat (LRC ou CRL en anglais). La LRC permet aux certificats compromis d&#039;être rejetés sélectivement sans nécessiter une entière refonte de l&#039;Infrastructure de Clé Publiques.</div>
</li>
</ul>

<p>
Nous allons générer successivement un certificat/une clé de l&#039;Autorité de Certification maître, un certificat/une clé pour le serveur et des certificats/des clés pour 3 clients différents.
</p>

</div>

<h4 id="generer_le_certificat_et_la_cle_de_l_autorite_de_certification_maitre">Générer le certificat et la clé de l&#039;Autorité de Certification maître</h4>
<div class="level4">

<p>
Pour la gestion de l&#039;ICP, nous utiliserons un jeu de scripts livrés avec OpenVPN.
</p>

<p>
Il faut tout d&#039;abord ouvrir un terminal et effectuer une copie dans son dossier /home des scripts de génération de clés : 
</p>
<pre class="code">cp /usr/share/doc/openvpn/examples/easy-rsa ~/openvpn/ -R</pre>
<div class="noteimportant"> le dossier easy-rsa peut également se trouver sous /usr/share/doc/openvpn 
</div><div class="noteimportant">Sous Trusty :
Il se peut que easy-rsa ne soit pas installé d&#039;office <pre class="code">sudo apt-get install easy-rsa
make-cadir my_ca
cd my_ca/</pre>

</div>
<p>
Se connecter en root :
</p>
<pre class="code">sudo -i</pre>

<p>
Maintenant <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditez le fichier</a> <strong>vars</strong> et initialiser les variables <strong>KEY_COUNTRY, KEY_PROVINCE, KEY_CITY, KEY_ORG, and KEY_EMAIL</strong>.
Ne laisser surtout pas un seul champ vide. 
</p>

<p>
Il faut modifier les dernières lignes à sa convenance. Dans notre cas :
</p>
<pre class="file">export KEY_COUNTRY=FR
export KEY_PROVINCE=drome
export KEY_CITY=valence
export KEY_ORG=boiteinformatique
export KEY_EMAIL=xxxxxxxxx@xxx.com</pre>
<div class="noteimportant">Depuis Ubuntu 12.04 LTS (« The Precise Pangolin ») : le fichier openssl.cnf n&#039;existe plus. Il s’appelle openssl-1.0.0.cnf ; Il faut donc le lier :
<pre class="code">ln -s openssl-1.0.0.cnf openssl.cnf</pre>

</div>
<p>
On initialise les variables :
</p>
<div class="noteimportant"> Sur la 19.10 easyrsa est en version 3 pour générer le PKI il faut utiliser:
<pre class="code">./easyrsa init-pki
 ./easyrsa build-ca
 ./easyrsa gen-req hakase-server nopass
 ./easyrsa sign-req server hakase-server
  openssl dhparam -out dh2048.pem 2048</pre>

</div><pre class="code">source ./vars</pre>

<p>
On nettoie toutes les clés et certificats existants :
</p>
<pre class="code">./clean-all</pre>

<p>
Puis, nous créons le certificat et la clé de l&#039;Autorité de Certification Maitre (master Certificate Authority (CA) :
</p>
<pre class="code">./build-ca</pre>

<p>
La dernière commande (<code>build-ca</code>) va construire le certificat de l&#039;Autorité de Certification et la clé en utilisant la commande interactive openssl et sortira :
</p>
<pre class="file">&#039;&#039;Generating a 1024 bit RSA private key&#039;&#039;

&#039;&#039;............++++++&#039;&#039;

&#039;&#039;...........++++++&#039;&#039;

&#039;&#039;writing new private key to &#039;ca.key&#039;&#039;&#039;&#039;&#039;-----&#039;&#039;

&#039;&#039;You are about to be asked to enter information that will be incorporated into your certificate request.&#039;&#039;

&#039;&#039;What you are about to enter is what is called a Distinguished Name or a DN.&#039;&#039;

&#039;&#039;There are quite a few fields but you can leave some blank&#039;&#039;

&#039;&#039;For some fields there will be a default value,&#039;&#039;

&#039;&#039;If you enter &#039;.&#039;, the field will be left blank.&#039;&#039;

&#039;&#039;-----&#039;&#039;

&#039;&#039;Country Name (2 letter code) [FR]:&#039;&#039;

&#039;&#039;State or Province Name (full name) [drome]:&#039;&#039;

&#039;&#039;Locality Name (eg, city) [valence]:&#039;&#039;

&#039;&#039;Organization Name (eg, company) [boiteinformatique]:&#039;&#039;

&#039;&#039;Organizational Unit Name (eg, section) []:&#039;&#039;

&#039;&#039;Common Name (eg, your name or your server&#039;s hostname) []:&#039;&#039;

&quot;Name : &quot;

&#039;&#039;Email Address [xxxxxxxx@xxxx.com]:&#039;&#039;
</pre>
<div class="noteclassic">On remarque les champs peuvent être omis puisque l&#039;on a prédéfini des valeurs par défaut (valeurs entre crochets). Si un champ est laissé vide, il faut entrer un point &#039;.&#039;. Le seul paramètre devant être impérativement complété est le <strong>Common Name</strong>.
</div>
<p>
Le certificat et la clé de l&#039;Autorité de Certification sont à présent créés : ca.crt et ca.key dans un dossier keys.
</p>

</div>

<h4 id="generer_un_certificat_et_une_cle_pour_le_serveur">Générer un certificat et une clé pour le serveur</h4>
<div class="level4">

<p>
Nous allons générer un certificat et une clé privée pour le serveur :
</p>

<p>
Dans cet exemple, le nom de notre serveur est : <strong>server</strong>
</p>
<pre class="code">./build-key-server server</pre>

<p>
Quand le <strong>Common Name</strong> est demandé, il faut entrer « server » comme le dernier paramètre entré dans la commande précédente. Puis il faut mettre un mot de passe et un nom d&#039;entreprise (facultatif). 
</p>

<p>
Suivent deux dernières questions qui requièrent des réponses positives :
</p>
<pre class="file"> Certificate is to be certified until Oct 26 21:48:37 2017 GMT (3650 days)
Sign the certificate ? [y/n] :y
1 out of 1 certificate requests certified, commit ? [y/n] y</pre>

<p>
Le certificat et la clé du serveur sont à présent créés : server.crt et server.key.
</p>

</div>

<h4 id="generer_les_certificats_et_les_cles_pour_3_clients">Générer les certificats et les clés pour 3 clients</h4>
<div class="level4">

<p>
Générer des certificats et des clés pour les clients est une étape similaire à l&#039;étape précédente. 
</p>
<div class="noteimportant"><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Pour protéger la clé avec un mot de passe, il faut utiliser <code>./build-key-pass</code> au lieu de <code>./build-key</code>.</div>
</li>
<li class="level1"><div class="li"> Si possible faire un couple &quot;utilisateur&quot; / &quot;clés&quot; <sup><a href="#fn__3" id="fnt__3" class="fn_top">3)</a></sup></div>
</li>
</ul>

<p>
Ce qui élèvera le niveau de sécurité, dans le cadre de perte de données, de matériel, ou tout simplement à cause d&#039;une erreur humaine<sup><a href="#fn__4" id="fnt__4" class="fn_top">4)</a></sup>.
</p>

</div><div class="noteimportant">Depuis la 19.10 easyrsa 3 pour générer et signer vos clées:
<pre class="code">./easyrsa gen-req client01 nopass
./easyrsa sign-req client client01</pre>

</div>
<p>
Exemple avec un client nommé <strong>client1</strong> :
</p>
<pre class="code">./build-key client1</pre>

<p>
Quand le <strong>Common Name</strong> est demandé, il faudra donc entrer « client1 »
</p>
<pre class="code">./build-key client2</pre>
<pre class="code">./build-key client3</pre>

<p>
Il faut toujours se rappeler que pour chaque client, le champ <strong>Common Name</strong> doit être renseigné et unique.
</p>

<p>
Les certificats et les clés des clients sont créés.
</p>
<div class="noteclassic">Cette étape aurait pu se faire sur le client même, ce qui aurait évité de faire circuler des clés sur des canaux moins sûr. Pour cela, il fallait simplement le certificat <code>ca.crt</code> sur la machine cliente qui génère son certificat et sa clé.

</div>
</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Certificats de sécurité] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="certificats_de_securite" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="3805-11407" /><button type="submit" title="Certificats de sécurité" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="generer_des_parametres_diffie-hellman">Générer des paramètres Diffie-Hellman(¹)</h3>
<div class="level3">

<p>
Les paramètres Diffie Hellman doivent être générés pour le serveur OpenVPN :
</p>
<div class="noteimportant"> Sur la 19.10 easyrsa est en version 3 pour générer le Diffie Hellman il faut utiliser:
<pre class="code">./easyrsa gen-dh
./easyrsa gen-crl</pre>

</div><pre class="code">./build-dh</pre>

<p>
Ce qui donne :
</p>
<pre class="file">Generating DH parameters, 1024 bit long safe prime, generator 2
This is going to take a long time
.................+...........................................
...................+.............+.................+.........
......................................

etc...</pre>

<p>
Les paramètres Diffie Hellman sont copiés dans le répertoire keys : dh1024.pem
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Générer des paramètres Diffie-Hellman(¹)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="generer_des_parametres_diffie-hellman" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="11408-12115" /><button type="submit" title="Générer des paramètres Diffie-Hellman(¹)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="les_fichiers_cles">Les fichiers clés</h2>
<div class="level2">

<p>
Maintenant, nous pouvons trouver les clés et les certificats fraichement générés dans le dossier <strong>keys</strong>. Suit une explication de ce que contiennent les fichiers du dossier <strong>keys</strong>.
</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0"> Nom de fichier </th><th class="col1"> Utile à </th><th class="col2"> Utilité </th><th class="col3"> Secret ? </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ca.crt</code> </td><td class="col1"> Serveur et tous les clients </td><td class="col2"> Certificat racine CA </td><td class="col3"> <strong>Non</strong> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>ca.key</code> </td><td class="col1"> Clé signant la machine seulement </td><td class="col2"> Clé racine CA </td><td class="col3"> <strong>Oui</strong> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>dh{n}.pem</code> </td><td class="col1"> Serveur seulement </td><td class="col2"> Paramètres Diffie Hellman </td><td class="col3"> <strong>Non</strong> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>server.crt</code> </td><td class="col1"> Serveur seulement </td><td class="col2"> Certificat serveur </td><td class="col3"> <strong>Non</strong> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>server.key</code> </td><td class="col1"> Serveur seulement </td><td class="col2"> Clé serveur </td><td class="col3"> <strong>Oui</strong> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>client1.crt</code> </td><td class="col1"> Client1 seulement </td><td class="col2"> Certificat Client1 </td><td class="col3"> <strong>Non</strong> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>client1.key</code> </td><td class="col1"> Client1 seulement </td><td class="col2"> Clé Client1 </td><td class="col3"> <strong>Oui</strong> </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>client2.crt</code> </td><td class="col1"> Client2 seulement </td><td class="col2"> Certificat Client2 </td><td class="col3"> <strong>Non</strong> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>client2.key</code> </td><td class="col1"> Client2 seulement </td><td class="col2"> Clé Client2 </td><td class="col3"> <strong>Oui</strong> </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <code>client3.crt</code> </td><td class="col1"> Client3 seulement </td><td class="col2"> Certificat Client3 </td><td class="col3"> <strong>Non</strong> </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <code>client3.key</code> </td><td class="col1"> Client3 seulement </td><td class="col2"> Clé Client3 </td><td class="col3"> <strong>Oui</strong> </td>
	</tr>
</table></div>

<p>
L&#039;étape finale dans ce processus de génération de clés est de copier tous les fichiers sur la machine qui en a besoin, en prenant soin de les copier à travers un tunnel sûr.
</p>

<p>
Au lieu de générer les certificats et les clés clients sur le serveur, le client aurait pu générer sa propre clé privée localement, et ensuite, soumettre un CSR (Certificat Signing Request ou Demande de Signature de Certificat) à la machine qui signe les clés. A son tour, la machine signant les clés peut procéder au CSR et retourner un certificat signé au client. Tout ceci peut se faire sans avoir besoin qu&#039;un fichier secret <code>.key</code> quitte le disque dur de la machine qui l&#039;a généré.
</p>

<p>
Copie des fichiers serveur :
</p>
<div class="noteimportant"> Sur la 19.10 easyrsa est en version 3 pour copier les clées il faut utiliser:
<pre class="code">cp pki/ca.crt /etc/openvpn/server/
cp pki/issued/hakase-server.crt /etc/openvpn/server/
cp pki/private/hakase-server.key /etc/openvpn/server/
cp pki/dh.pem /etc/openvpn/server/
cp pki/crl.pem /etc/openvpn/server/</pre>

</div><pre class="code">cp keys/dh*.pem keys/ca.crt keys/server.crt keys/server.key /etc/openvpn/</pre>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Les fichiers clés] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_fichiers_cles" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="12116-14300" /><button type="submit" title="Les fichiers clés" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="creation_des_fichiers_de_configuration_pour_le_serveur_et_les_clients">Création des fichiers de configuration pour le serveur et les clients</h3>
<div class="level3">

</div>

<h4 id="obtenir_les_fichiers_d_exemple_de_configuration">Obtenir les fichiers d&#039;exemple de configuration</h4>
<div class="level4">

<p>
Dans le répertoire <strong>/usr/share/doc/openvpn/examples/sample-config-files/</strong>, vous trouverez des fichiers de configuration <strong>client.conf</strong> et <strong>server.conf</strong> qui peuvent vous servir de base pour la configuration de votre serveur/vos clients.<br/>

Si vous devez travailler avec des machines sous Windows l&#039;extension &quot;.conf&quot; doit être changée en &quot;.ovpn&quot; sur le pc Windows.
</p>

</div>

<h4 id="configuration_du_serveur">Configuration du serveur</h4>
<div class="level4">

<p>
Le fichier d&#039;exemple étant compressé : server.conf.gz, il faut procéder comme suit:
</p>
<pre class="code">sudo zcat /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz &gt; /etc/openvpn/server.conf</pre>

<p>
Il faut donc <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditer le fichier</a> <strong>/etc/openvpn/server.conf</strong>
</p>

<p>
Le fichier d&#039;exemple de configuration pour le serveur est un point de départ pour une configuration serveur d&#039;OpenVPN. Il va créer un <abbr title="Virtual Private Network">VPN</abbr> utilisant une interface réseau virtuel TUN (pour le routage), écouter les connections clients sur le port UDP 1194 (port officiel d&#039;OpenVPN), et distribuer des adresses virtuelles aux clients se connectant depuis le réseau 10.8.0.0/24.
</p>

<p>
À présent, le fichier de configuration serveur est utilisable. Néanmoins, il est toujours possible de modifier le fichier plus en détail :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> En cas d&#039;utilisation d&#039;Ethernet bridgé, il faut utiliser <strong>server-bridge</strong> et <strong>dev tap</strong> au lieu de <strong>server</strong> et <strong>dev tun</strong></div>
</li>
<li class="level1"><div class="li"> Si le serveur doit écouter sur un port <abbr title="Transmission Control Protocol">TCP</abbr> au lieu d&#039;UDP, il faut mettre <strong>proto tcp</strong> au lieu de <strong>proto udp</strong> (si OpenVPN doit écouter sur les deux, il faut créer deux instances séparées d&#039;OpenVPN)</div>
</li>
<li class="level1"><div class="li"> Si l&#039;adresse IP virtuelle utilisée doit être différente de 10.8.0.0/24, il faut modifier la directive <strong>server</strong>. Ne jamais oublier que la plage d&#039;adresse IP virtuelles doit être inutilisée sur les réseaux de chaque côté du <abbr title="Virtual Private Network">VPN</abbr>.</div>
</li>
<li class="level1"><div class="li"> Pour que les clients soient capables de s&#039;atteindre à travers le <abbr title="Virtual Private Network">VPN</abbr>, il faut décommenter la directive <strong>client-to-client</strong>. Par défaut, les clients ne peuvent atteindre que le serveur.</div>
</li>
<li class="level1"><div class="li"> Pour augmenter la sécurité, il est possible de décommenter les directives <strong>user nobody</strong> et <strong>group nobody</strong>. Diverses options de cryptage et de sécurité peuvent aussi être modifiées. (Le groupe nobody n&#039;existe pas dans ubuntu, il faut donc mettre <strong>nogroup</strong>)</div>
</li>
</ul>

<p>
Pour faire fonctionner plusieurs instances d&#039;OpenVPN sur la même machine, chacune utilisant un fichier de configuration différent, il faut :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Utiliser un port différent pour chaque instances (les protocoles UDP et <abbr title="Transmission Control Protocol">TCP</abbr> utilisent différent espaces de port, donc un processus peut écouter le port UDP-1194 et un autre le port <abbr title="Transmission Control Protocol">TCP</abbr>-1194)</div>
</li>
<li class="level1"><div class="li"> Faire attention, lorsque les instances d&#039;OpenVPN utilisent le même dossier, que chacune n&#039;écrive pas sur les mêmes sorties. C&#039;est-à-dire qu&#039;il faut modifier les directives <strong>log</strong>, <strong>log-append</strong>, <strong>status</strong> et <strong>ifconfig-pool-persist</strong>.</div>
</li>
</ul>

</div>

<h4 id="configuration_du_client">Configuration du client</h4>
<div class="level4">
<div class="noteimportant">Depuis la 19.10 easyrsa 3 pour copier vos clées:
<pre class="code">cp pki/ca.crt /etc/openvpn/client/
cp pki/issued/client01.crt /etc/openvpn/client/
cp pki/private/client01.key /etc/openvpn/client/</pre>

</div>
<p>
Le fichier d&#039;exemple de configuration du client <strong>client.conf</strong> reflète les directives mises dans le fichier <strong>server.conf</strong>.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Comme le fichier de configuration du serveur, éditez d&#039;abord les paramètres <strong>ca</strong>, <strong>cert</strong> et <strong>key</strong> pour pointer vers les fichiers générés précédemment. Chaque client doit avoir sa propre paire <code>cert</code>/<code>key</code>. Seul le fichier ca est universel à travers le <abbr title="Virtual Private Network">VPN</abbr> (le serveur et tous les clients).</div>
</li>
<li class="level1"><div class="li"> Editez ensuite la directive <strong>remote</strong> pour indiquer l&#039;adresse IP/nom d&#039;hôte et le port du serveur OpenVPN (s&#039;il est derrière un routeur, il faut indiquer l&#039;adresse publique et le port sur lequel le routeur transfère vers le serveur OpenVPN)</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Pour terminer, il faut vérifier que la configuration client correspond bien à la configuration serveur. Les directives principales à vérifier sont :</div>
</li>
</ul>

<p>
<strong>dev (tun ou tap)</strong>
</p>

<p>
<strong>proto (udp ou tcp)</strong>
</p>

<p>
<strong>comp-lzo</strong>
</p>

<p>
<strong>fragment</strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Création des fichiers de configuration pour le serveur et les clients] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creation_des_fichiers_de_configuration_pour_le_serveur_et_les_clients" /><input type="hidden" name="codeblockOffset" value="21" /><input type="hidden" name="range" value="14301-18489" /><button type="submit" title="Création des fichiers de configuration pour le serveur et les clients" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit12 page-header" id="demarrage_automatique_d_openvpn_au_lancement_du_systeme">Démarrage automatique d&#039;OpenVPN au lancement du système</h2>
<div class="level2">

<p>
Pour qu&#039;OpenVPN se lance au démarrage du serveur ou du client, il faut placer le fichier de configuration au bon endroit. 
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Pour le serveur, copiez le fichier <strong>server.conf</strong> dans le répertoire <strong>/etc/openvpn</strong></div>
</li>
<li class="level1"><div class="li"> Pour les clients, copiez le fichier <strong>client.conf</strong> dans <strong>/etc/openvpn</strong></div>
</li>
</ul>

<p>
Il faut également déplacer les clés et certificats dans le dossier <strong>/etc/openvpn</strong>. Sont concernés :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1 node"><div class="li"> pour le serveur :</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> ca.crt</div>
</li>
<li class="level2"><div class="li"> server.crt</div>
</li>
<li class="level2"><div class="li"> server.key</div>
</li>
<li class="level2"><div class="li"> dh1024.pem</div>
</li>
</ul>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1 node"><div class="li"> Pour le client : </div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> ca.crt</div>
</li>
<li class="level2"><div class="li"> client.crt</div>
</li>
<li class="level2"><div class="li"> client.key</div>
</li>
</ul>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Démarrage automatique d&#039;OpenVPN au lancement du système] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="demarrage_automatique_d_openvpn_au_lancement_du_systeme" /><input type="hidden" name="codeblockOffset" value="23" /><input type="hidden" name="range" value="18490-19121" /><button type="submit" title="Démarrage automatique d&#039;OpenVPN au lancement du système" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit13 page-header" id="demarrage_du_vpn_et_tests_de_la_connectivite">Démarrage du VPN et tests de la connectivité</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Démarrage du VPN et tests de la connectivité] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="demarrage_du_vpn_et_tests_de_la_connectivite" /><input type="hidden" name="codeblockOffset" value="23" /><input type="hidden" name="range" value="19122-19181" /><button type="submit" title="Démarrage du VPN et tests de la connectivité" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="demarrage_du_serveur">Démarrage du serveur</h3>
<div class="level3">

<p>
Premièrement, il faut vérifier que le serveur OpenVPN sera accessible depuis Internet. Ce qui signifie que :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> le port 1194 UDP (ou celui configuré) est bien ouvert sur le pare-feu</div>
</li>
<li class="level1"><div class="li"> une règle de transfert pour transférer le port 1194 UDP depuis le firewall vers le serveur OpenVPN est bien établie</div>
</li>
</ul>

<p>
Ensuite, il faut vérifier que l&#039;interface TUN/TAP n&#039;est pas derrière un pare-feu.
</p>

<p>
Pour simplifier la recherche de problèmes, il est préférable de démarrer le serveur OpenVPN depuis la ligne de commande plutôt que de démarrer le démon. Dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> :
</p>
<pre class="code">cd /etc/openvpn
sudo openvpn server.conf</pre>

<p>
Un démarrage normal ressemble à ça :
</p>
<pre class="file">Tue Oct 30 05:22:17 2007 OpenVPN 2.0.9 i486-pc-linux-gnu [SSL] [LZO] [EPOLL] built on May 21 2007
Tue Oct 30 05:22:17 2007 Diffie-Hellman initialized with 1024 bit key
Tue Oct 30 05:22:17 2007 TLS-Auth MTU parms [ L:1542 D:138 EF:38 EB:0 ET:0 EL:0 ]
Tue Oct 30 05:22:17 2007 TUN/TAP device tun0 opened
Tue Oct 30 05:22:17 2007 ifconfig tun0 10.8.0.1 pointopoint 10.8.0.2 mtu 1500
Tue Oct 30 05:22:17 2007 route add -net 10.8.0.0 netmask 255.255.255.0 gw 10.8.0.2
Tue Oct 30 05:22:17 2007 Data Channel MTU parms [ L:1542 D:1450 EF:42 EB:23 ET:0 EL:0 AF:3/1 ]
Tue Oct 30 05:22:17 2007 UDPv4 link local (bound): [undef]:1194
Tue Oct 30 05:22:17 2007 UDPv4 link remote: [undef]
Tue Oct 30 05:22:17 2007 MULTI: multi_init called, r=256 v=256
Tue Oct 30 05:22:17 2007 IFCONFIG POOL: base=10.8.0.4 size=62
Tue Oct 30 05:22:17 2007 IFCONFIG POOL LIST
Tue Oct 30 05:22:17 2007 Initialization Sequence Completed</pre>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Démarrage du serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="demarrage_du_serveur" /><input type="hidden" name="codeblockOffset" value="23" /><input type="hidden" name="range" value="19182-20809" /><button type="submit" title="Démarrage du serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="demarrage_du_client">Démarrage du client</h3>
<div class="level3">

<p>
Comme dans la configuration serveur, il est préférable de démarrer le client OpenVPN depuis une ligne de commande. Exemple pour le client1 configuré plus haut :
</p>
<pre class="code"> cd /etc/openvpn &amp;&amp; sudo openvpn client.conf</pre>

<p>
Un démarrage normal d&#039;un client doit se terminer comme sur un démarrage de serveur :
</p>
<pre class="file">Tue Oct 30 05:22:17 2007 Initialization Sequence Completed</pre>

<p>
Une fois que vous êtes sûr que votre configuration fonctionne, vous pouvez choisir de démarrer le daemon automatiquement au démarrage du système:
</p>
<pre class="code"> sudo systemctl enable openvpn@client.service</pre>
<div class="noteclassic">Si votre fichier de configuration s&#039;appelle <em>server</em>, cette commande sera changée en <pre class="code"> sudo systemctl enable openvpn@server.service</pre>

<p>
. Plus globalement, la partie suivant directement le <em>@</em> est le nom de votre fichier de configuration.
</p>

</div>
</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Démarrage du client] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="demarrage_du_client" /><input type="hidden" name="codeblockOffset" value="25" /><input type="hidden" name="range" value="20810-21705" /><button type="submit" title="Démarrage du client" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="test">Test</h3>
<div class="level3">

<p>
Maintenant, essayons de pinguer à travers le <abbr title="Virtual Private Network">VPN</abbr> depuis le client. 
</p>

<p>
Dans une configuration bridgée (c&#039;est-à-dire qu&#039;il y a <code>dev tap</code> et non <code>dev</code> <code>tun</code> dans <code>server.conf</code>), on peut essayer de pinguer le serveur (adresse par défaut 10.8.0.1 si vous n&#039;avez pas changé le sous-réseau attribué) :
</p>
<pre class="code">ping 10.8.0.1</pre>

<p>
Si le ping a fonctionné, le <abbr title="Virtual Private Network">VPN</abbr> fonctionne !
</p>
<div class="noteimportant">A cette étape vous êtes seulement connecté à votre serveur, mais vous n&#039;avez pas encore accès à Internet au travers de votre <abbr title="Virtual Private Network">VPN</abbr>.

</div><div class="noteimportant">Si le poste client exécute openvpn sous Windows Vista et 7, il est probable que le ping vers 10.8.0.1 ne passe pas. il faut d&#039;abord ajouter ces 2 lignes à la fin du fichier de configuration du client :
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> route-method exe</div>
</li>
<li class="level1"><div class="li"> route-delay 2</div>
</li>
</ul>

<p>
<strong>Attention</strong> : pour que Windows soit d’accord d’ajouter des routes il faut impérativement qu’OpenVPN soit lancé en <strong>mode administrateur</strong> (en tout cas pour Windows 7)
</p>

</div>
<p>
puis exécuter une fenetre MS-DOS en &quot;administrateur&quot; et exécuter la commande suivante : 
</p>
<pre class="code">netsh firewall set icmpsetting 8 enable</pre>

<p>
Pour Windows 7, la commande à exécuter est la suivante :
</p>
<pre class="code">netsh advfirewall firewall add rule name=&quot;All ICMP V4&quot; protocol=icmpv4:any,any dir=in action=allow</pre>

<p>
cette commande permet d&#039;activer le ping des interfaces réseaux. 
</p>

<p>
pour désactiver le ping ensuite, il faut exécuter cette commande : 
</p>
<pre class="code">netsh firewall set icmpsetting 8 disable</pre>

<p>
Pour Windows 7, la commande à exécuter est la suivante :
</p>
<pre class="code">netsh advfirewall firewall add rule name=&quot;All ICMP V4&quot; protocol=icmpv4:any,any dir=in action=block </pre>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Test] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="test" /><input type="hidden" name="codeblockOffset" value="29" /><input type="hidden" name="range" value="21706-23399" /><button type="submit" title="Test" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit17" id="en_cas_d_utilisation_de_firestarter">En cas d&#039;utilisation de Firestarter</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> La méthode suivante a été testée pour une machine cliente en mode route. A tester pour le mode bridge ou un serveur.
</p>

<p>
Il faut configurer FireStarter pour permettre le passage du <abbr title="Virtual Private Network">VPN</abbr> au travers du firewall :
</p>

<p>
<a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez le fichier</a> de configuration <strong>/etc/firestarter/user-pre</strong> en mode <a href="/sudo" class="wikilink1" title="sudo">administrateur</a>:
</p>

<p>
Ecrire ou Ajouter les lignes suivantes :
</p>
<pre class="file"># Allow traffic on the OpenVPN interface
$IPT -A INPUT -i tun+ -j ACCEPT
$IPT -A OUTPUT -o tun+ -j ACCEPT</pre>

<p>
Redémarrez Firestarter
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>firestarter restart</pre>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[En cas d&#039;utilisation de Firestarter] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="en_cas_d_utilisation_de_firestarter" /><input type="hidden" name="codeblockOffset" value="34" /><input type="hidden" name="range" value="23400-24049" /><button type="submit" title="En cas d&#039;utilisation de Firestarter" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit18 page-header" id="acceder_a_internet_par_votre_vpn">Accéder à internet par votre VPN</h2>
<div class="level2">
<div class="noteclassic">Cette étape est redondante avec la partie <strong>Inclure des machines côté serveur avec un <abbr title="Virtual Private Network">VPN</abbr> routé</strong>, mais cette dernière est incomplète.
Si vous suivez les explications ici présentes cela sera vos dernières manipulations pour que les clients accèdent à internet par le biais du serveur <abbr title="Virtual Private Network">VPN</abbr>
</div>
<p>
Pour une utilisation simple de votre <abbr title="Virtual Private Network">VPN</abbr>, et obtenir facilement l&#039;accès à internet, il est conseillé d&#039;utiliser le <abbr title="Virtual Private Network">VPN</abbr> en mode routé, soit tun (le mode par défaut après installation). Vous pouvez vérifier que vous utilisez bien ce mode en cherchant la ligne &quot;dev tun&quot; dans vos fichiers .conf client et serveur.
</p>

<p>
Avant toute chose, on s&#039;assure que le forwarding est activé sur le serveur (à faire en root)
</p>
<pre class="code">echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward</pre>

<p>
Si vous rencontrez l&#039;erreur ip_forward e667 fsync failed, il est probable qu&#039;il faille éditer /etc/sysctl.conf et modifier net.ipv4.ip_forward = 1
</p>

<p>
Ensuite, indiquer au serveur que l&#039;on souhaite qui redirige le traffic des clients vers internet, en ajoutant à /etc/openvpn/server.conf :
</p>
<pre class="code">push &quot;redirect-gateway def1 bypass-dhcp&quot;</pre>

<p>
Il peut être utile de préciser quel <abbr title="Domain Name System">DNS</abbr> utiliser, ici nous choisissons OpenDNS :
</p>
<pre class="code">push &quot;dhcp-option DNS 208.67.222.222&quot;
push &quot;dhcp-option DNS 208.67.220.220&quot;</pre>

<p>
Enfin, ajouter cette règle à iptables avec la commande suivante sur le serveur :
</p>
<pre class="code">iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE</pre>

<p>
Attention, cette commande n&#039;apporte pas de changements permanents. Pour exécuter cette règle à chaque démarrage, il faut l&#039;ajouter dans le fichier <strong>/etc/rc.local</strong>
</p>

<p>
Rédemarrez le serveur, et vous devez avoir un accès complet à internet au travers de votre <abbr title="Virtual Private Network">VPN</abbr>.
</p>
<pre class="code">sudo service openvpn restart</pre>

<p>
Vous pouvez à présent vous connecter à l&#039;aide du <a href="/client_openvpn" class="wikilink1" title="client_openvpn">client OpenVPN</a> (network-manager-openvpn). Il gère automatiquement les règles de routage en local pour avoir un accès complet à internet. Sinon, vous devrez le faire à la main.
</p>

<p>
Problèmes connus :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Par défaut le serveur utilise la compression LZO, il faut donc l&#039;activer également dans les paramètres avancés du manager gnome.</div>
</li>
<li class="level1"><div class="li"> Selon ce que vous avez fait précédemment, vous pouvez avoir plusieurs instances du client en cours. Vérifier que vous n&#039;avez qu&#039;une seule interface tun0 en local avec la commande ifconfig.</div>
</li>
<li class="level1"><div class="li"> Pensez à lancer le serveur en ligne de commande pour pouvoir voir les éventuels messages d&#039;erreurs lors de la connexion du client.</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Accéder à internet par votre VPN] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="acceder_a_internet_par_votre_vpn" /><input type="hidden" name="codeblockOffset" value="36" /><input type="hidden" name="range" value="24050-26616" /><button type="submit" title="Accéder à internet par votre VPN" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit19 page-header" id="administration_du_serveur_vpn">Administration du serveur VPN</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Administration du serveur VPN] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="administration_du_serveur_vpn" /><input type="hidden" name="codeblockOffset" value="41" /><input type="hidden" name="range" value="26617-26658" /><button type="submit" title="Administration du serveur VPN" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit20" id="par_telnet">Par telnet</h3>
<div class="level3">

<p>
Il faut au préalable modifier le fichier de configuration du serveur.
</p>

<p>
<a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez le fichier</a> <strong>/etc/openvpn/server.conf</strong>.
</p>

<p>
et ajoutez-y : 
</p>
<pre class="file">management localhost &lt;un numéro de port&gt;</pre>

<p>
Le numéro de port est libre pour peu qu&#039;il ne soit pas utilisé par un autre service ou application.
</p>

<p>
Une fois la configuration modifiée, recharger ou redémarrez OpenVPN.
</p>

<p>
Un <strong>telnet localhost &lt;le numéro de port&gt;</strong> vous confirmera que tout s&#039;est bien passé.
</p>

<p>
La commande <em>help</em> vous affichera la liste de commandes disponibles.
</p>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Par telnet] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="par_telnet" /><input type="hidden" name="codeblockOffset" value="41" /><input type="hidden" name="range" value="26659-27253" /><button type="submit" title="Par telnet" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit21" id="utilisation_de_webmin">Utilisation de Webmin</h3>
<div class="level3">

<p>
Si vous avez installé cet outil et le module d&#039;administration d&#039;OpenVPN, un sous-menu <strong>OpenVPN + CA</strong> a fait son apparition dans le menu <strong>Serveurs</strong>
</p>

<p>
Ainsi, depuis Webmin, il est possible :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> de créer et/ou gérer les Autorités de Certification</div>
</li>
<li class="level1"><div class="li"> de créer et/ou gérer les <abbr title="Virtual Private Network">VPN</abbr></div>
</li>
<li class="level1"><div class="li"> de lister les connexions actives</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_21'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Utilisation de Webmin] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_de_webmin" /><input type="hidden" name="codeblockOffset" value="42" /><input type="hidden" name="range" value="27254-27614" /><button type="submit" title="Utilisation de Webmin" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit22" id="informations_complementaires">Informations complémentaires</h3>
<div class="level3">

</div>

<h4 id="inclure_des_machines_cote_serveur_avec_un_vpn_route">Inclure des machines côté serveur avec un VPN routé</h4>
<div class="level4">

<p>
Une fois que le <abbr title="Virtual Private Network">VPN</abbr> est opérationel entre le client et le serveur, il peut être utile d&#039;étendre le champ du <abbr title="Virtual Private Network">VPN</abbr> pour que les clients puissent accéder à de multiples machines sur le réseau du serveur, au lieu de pouvoir accéder seulement au serveur lui-même.
</p>

<p>
Pour l&#039;exemple, nous admettrons que le sous-réseau côté serveur est en <code>192.168.1.0/24</code> et le pool d&#039;adresse IP du <abbr title="Virtual Private Network">VPN</abbr> est <code>10.8.0.0/24</code> comme utilisé précédemment. Pour être sûr de la configuration, il faut vérifier le fichier <strong>/etc/openvpn/server.conf</strong>.
</p>

<p>
La première chose à faire, c&#039;est indiquer au client que le réseau <code>192.168.1.0/24</code> peut-être accessible à travers le <abbr title="Virtual Private Network">VPN</abbr>. Ceci peut-être fait facilement en utilisant la directive côté serveur suivante :
</p>
<pre class="code">push &quot;route 192.168.1.0 255.255.255.0&quot;</pre>

<p>
Puis, il faut créer une route sur la passerelle réseau côté serveur pour router le sous-réseau <abbr title="Virtual Private Network">VPN</abbr> du client vers le serveur OpenVPN (seulement si le serveur OpenVPN n&#039;est pas aussi la passerelle). Pour ceci, il faut voir la documentation de votre passerelle et lui dire que tout le trafic venant de l&#039;extérieur sur le port attribué au <abbr title="Virtual Private Network">VPN</abbr> doit être redirigé sur le serveur OpenVPN (<code>adresseIP:port</code>).
</p>
<div class="noteclassic">L&#039;IP forwarding et le TUN/TAP forwarding doivent être activés sur le serveur OpenVPN.
</div>
<p>
Pour le vérifier, il est possible de tester chaque interface ou le système en général :
</p>

<p>
Vérification de l&#039;interface TUN :
</p>
<pre class="code">cat /proc/sys/net/ipv4/conf/tun0/forwarding</pre>

<p>
Vérification de l&#039;interface réseau (exemple pour eth0) :
</p>
<pre class="code">cat /proc/sys/net/ipv4/conf/eth0/forwarding</pre>

<p>
Vérification de toutes les interfaces :
</p>
<pre class="code">cat /proc/sys/net/ipv4/conf/all/forwarding</pre>

<p>
Vérification de l&#039;IP forwarding en général :
</p>
<pre class="code">cat /proc/sys/net/ipv4/ip_forward</pre>

</div>

<h4 id="inclure_des_machines_cote_serveur_avec_un_vpn_bridge">Inclure des machines côté serveur avec un VPN bridgé</h4>
<div class="level4">

<p>
Dans cette configuration, les machines sont inclues directement sans avoir à modifier quoi que ce soit.
</p>

</div>

<h4 id="inclure_des_machines_avec_un_vpn_route">Inclure des machines avec un VPN routé</h4>
<div class="level4">

<p>
Dans un scénario typique d&#039;accès distant ou même d&#039;utilisation itinérante, la machine cliente se connecte au <abbr title="Virtual Private Network">VPN</abbr> comme étant seule. Mais supposons que la machine cliente est une passerelle pour un réseau local, et que chaque machine veut être capable de router à travers le <abbr title="Virtual Private Network">VPN</abbr>.
</p>

<p>
Pour l&#039;exemple, nous admettrons que le sous-réseau côté client est en 192.168.4.0/24, et que le client <abbr title="Virtual Private Network">VPN</abbr> utilise un certificat avec le «common name» <code>client2</code>. Le but est de créer un <abbr title="Virtual Private Network">VPN</abbr> qui permettrait à chaque machine du réseau client de communiquer avec chaque machine du réseau serveur à travers le <abbr title="Virtual Private Network">VPN</abbr>.
</p>

<p>
Avant de commencer, il y a des prérequis qui doivent être suivis :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Le sous-réseau client (192.168.4.0/24 dans l&#039;exemple) doit être unique. Il peut y avoir des conflits en cas de sous-réseau identique.</div>
</li>
<li class="level1"><div class="li"> Le client doit avoir un «common name» unique dans son certificat et le marqueur «duplicate-cn» (ce marqueur permet d&#039;avoir des clients avec le même nom de certificat) ne doit pas être utilisé dans le fichier de configuration du serveur OpenVPN.</div>
</li>
</ul>
<div class="noteclassic">L&#039;IP forwarding et le TUN/TAP forwarding doivent être activés sur le client OpenVPN qui servira de passerelle.
</div>
<p>
Puis, il faut modifier des configurations côté serveur. Si le fichier de configuration du serveur ne fait pas référence à un dossier de configuration client, il faut en créer un :
</p>
<pre class="code">mkdir /etc/openvpn/ccd</pre>

<p>
(il peut être créé ailleurs mais il faudra penser à modifier à chaque fois son chemin)
</p>

<p>
Puis, dans le fichier <strong>server.conf</strong>, il faut ajouter la ligne :
</p>
<pre class="file">client-config-dir ccd</pre>

<p>
Dans cette directive, «ccd» fait référence au répertoire qui vient d&#039;être créé.
</p>

<p>
Quand un nouveau client se connecte au serveur OpenVPN, le processus OpenVPN va vérifier ce dossier pour y trouver un fichier qui porte le même nom que le «common name» du certificat du client.
Si un fichier correspondant est trouvé, il sera lu et utilisé pour appliquer des directives supplémentaires au client.
</p>

<p>
L&#039;étape suivant est de créer un fichier nommé «client2» dans le dossier <strong>/etc/openvpn/ccd</strong> dans lequel vous ajouterez (dans cet exemple) :
</p>
<pre class="file">iroute 192.168.4.0 255.255.255.0</pre>

<p>
Ceci permet d&#039;indiquer au serveur OpenVPN que le sous-réseau <code>192.168.4.0/24</code> peut être routé vers le <code>client2</code>.
</p>

<p>
Dans le fichier de configuration du serveur <strong>/etc/openvpn/server.conf</strong> (et <strong>non</strong> dans <strong>ccd/client2</strong>), il faut ajouter :
</p>
<pre class="file">route 192.168.4.0 255.255.255.0</pre>

<p>
Pourquoi mettre des informations redondantes ?
« route » contrôle le routage dans le noyau vers le serveur OpenVPN (via l&#039;interface tun) alors que «iroute» contrôle le routage depuis le serveur OpenVPN vers le client distant. Les deux sont nécessaires.
</p>

<p>
Maitenant, la question est : Est-ce que l&#039;on veut permettre aux différents clients du <abbr title="Virtual Private Network">VPN</abbr> de dialoguer ensemble. Si c&#039;est le cas, il faut ajouter dans le fichier de configuration du serveur <strong>/etc/openvpn/server.conf</strong> :
</p>
<pre class="file">client-to-client
push &quot;route 192.168.4.0 255.255.255.0&quot;</pre>

<p>
Ceci permet au serveur OpenVPN d&#039;indiquer aux autres clients que le réseau du client2 existe. 
</p>

<p>
La dernière étape, celle qui est souvent oubliée, est d&#039;ajouter une route sur la passerelle du réseau côté serveur qui redirigera le trafic allant vers 192.168.4.0/24 vers le serveur OpenVPN (inutile si la passerelle est le serveur OpenVPN). 
</p>

<p>
Pour ceci, il faut voir la documentation de votre passerelle et lui indiquer que tout le trafic allant vers 192.168.4.0/24 doit être redirigé sur le serveur OpenVPN (<code>adresseIP:port</code>).
</p>

<p>
Si cette étape n&#039;est pas faite, et qu&#039;il faille pinguer une machine sur le réseau côté serveur depuis le 192.168.4.8, le ping sortant atteindrait probablement la machine mais ensuite, la machine ne saurait pas comment router la réponse au ping parce qu&#039;elle n&#039;a aucune idée de comment elle peut atteindre 192.168.4.0/24.
</p>

<p>
La règle empirique à utiliser est que le routage d&#039;un réseau entier à travers un <abbr title="Virtual Private Network">VPN</abbr> (c&#039;est-à-dire lorsque le serveur OpenVPN n&#039;est pas la passerelle) nécessite que la passerelle route tous les sous-réseaux <abbr title="Virtual Private Network">VPN</abbr> vers le serveur OpenVPN.
</p>

<p>
De manière identique, si la machine client utilisant OpenVPN n&#039;est pas la passerelle pour le réseau côté client, il faut que la passerelle côté client route tous les sous-réseaux atteignables à travers le <abbr title="Virtual Private Network">VPN</abbr> vers la machine client OpenVPN.
</p>

</div>

<h4 id="inclure_des_machines_cote_client_avec_un_vpn_bridge">Inclure des machines côté client avec un VPN bridgé</h4>
<div class="level4">

<p>
Ceci requiert une installation plus complexe (mais peut-être moins complexe en pratique qu&#039;à expliquer en détails), il faut :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Faire un pont entre l&#039;interface tap et l&#039;interface réseau sur le client</div>
</li>
<li class="level1"><div class="li"> Fixer manuellement l&#039;adresse IP et le masque de sous-réseau de l&#039;interface tap du client</div>
</li>
<li class="level1"><div class="li"> Configurer les machines côté client pour qu&#039;elles utilisent une adresse IP et un masque de sous-réseau pour être sur le même sous-réseau que l&#039;interface tap du client OpenVPN. Il est possible de faire attribuer une adresse automatiquement par un serveur <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> du côté serveur</div>
</li>
</ul>

</div>

<h4 id="attribuer_des_options_dhcp_aux_clients">Attribuer des options DHCP aux clients</h4>
<div class="level4">

<p>
Le serveur OpenVPN peut attribuer une adresse automatique aux clients mais aussi toutes les options <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> tels que les adresses des serveurs <abbr title="Domain Name System">DNS</abbr> ou WINS. Il faut que le client soit configuré de telle manière qu&#039;il soit capable d&#039;accepter ce genre d&#039;information.
</p>

<p>
Exemple : supposons que le client veuille utiliser un serveur <abbr title="Domain Name System">DNS</abbr> et un serveur WINS internes à son réseau. Pour ceci, il faut ajouter au fichier de configuration du serveur OpenVPN :
</p>
<pre class="file">push &quot;dhcp-option DNS 192.168.1.4&quot; 
push &quot;dhcp-option DNS 192.168.1.5&quot;
push &quot;dhcp-option WINS 192.168.1.8&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_22'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Informations complémentaires] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="informations_complementaires" /><input type="hidden" name="codeblockOffset" value="42" /><input type="hidden" name="range" value="27615-35483" /><button type="submit" title="Informations complémentaires" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit23 page-header" id="creer_un_vpn_avec_une_adresse_ip_dynamique">Créer un VPN avec une adresse IP dynamique</h2>
<div class="level2">

<p>
Alors que les clients peuvent facilement accéder au serveur en ayant une adresse IP dynamique, ça devient plus intéressant quand le serveur lui-même a une adresse IP publique dynamique. Bien qu&#039;OpenVPN fonctionne très bien avec ce genre de schéma, il faut quand même configurer certaines choses.
</p>

<p>
La première étape est d&#039;obtenir un <abbr title="Domain Name System">DNS</abbr> dynamique qui peut être configuré pour suivre le serveur chaque fois que l&#039;adresse IP change. Il y a beaucoup de service de <abbr title="Domain Name System">DNS</abbr> dynamique disponible tel que <a href="http://dyndns.org" class="urlextern" title="http://dyndns.org" rel="nofollow">DynDNS</a>.
</p>
<div class="noteimportant"><a href="http://dyndns.org" class="urlextern" title="http://dyndns.org" rel="nofollow">DynDNS</a> est maintenant payant, utiliser <a href="http://www.noip.com" class="urlextern" title="http://www.noip.com" rel="nofollow">No-Ip</a> par exemple
</div>
<p>
Il faudra toutefois s&#039;assurer de la mise à jour de l&#039;adresse IP correspondant au nom d&#039;hôte choisi afin de pouvoir retrouver facilement le serveur <abbr title="Virtual Private Network">VPN</abbr>.
</p>

</div>
<div class='secedit editbutton_section editbutton_23'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Créer un VPN avec une adresse IP dynamique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creer_un_vpn_avec_une_adresse_ip_dynamique" /><input type="hidden" name="codeblockOffset" value="53" /><input type="hidden" name="range" value="35484-36358" /><button type="submit" title="Créer un VPN avec une adresse IP dynamique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit24 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_24'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="voir_aussi" /><input type="hidden" name="codeblockOffset" value="53" /><input type="hidden" name="range" value="36359-36382" /><button type="submit" title="Voir aussi" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit25" id="liens_externes">Liens externes</h3>
<div class="level3">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Le <a href="http://openvpn.net" class="urlextern" title="http://openvpn.net" rel="nofollow">site officiel d&#039;OpenVPN</a></div>
</li>
<li class="level1"><div class="li"> Un <a href="http://howto.landure.fr/lone-wolf-scripts/gnu-linux/debian-4-0-etch/installer-et-configurer-openvpn-sur-debian-4-0-etch" class="urlextern" title="http://howto.landure.fr/lone-wolf-scripts/gnu-linux/debian-4-0-etch/installer-et-configurer-openvpn-sur-debian-4-0-etch" rel="nofollow">HOWTO sur l&#039;installation/configuration d&#039;OpenVPN sous Debian Etch</a> (que vous pouvez suivre en lançant en premier lieu un shell super utilisateur avec la commande « sudo -s »)</div>
</li>
<li class="level1"><div class="li"> Un <a href="http://15minutesoffame.be/nico/blog2/?article16/creer-un-serveur-openvpn" class="urlextern" title="http://15minutesoffame.be/nico/blog2/?article16/creer-un-serveur-openvpn" rel="nofollow">autre tuto testé avec 11.04</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://fr.wikipedia.org/wiki/OpenVPN" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/OpenVPN">Article sur Wikipédia</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.system-linux.eu/index.php?category/VPN" class="urlextern" title="http://www.system-linux.eu/index.php?category/VPN" rel="nofollow">Tutoriels et documentations complémentaire sur OpenVPN</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.system-linux.eu/index.php?post/2010/05/24/Installation-ipsec-Host-to-Host-et-Network-to-Network" class="urlextern" title="http://www.system-linux.eu/index.php?post/2010/05/24/Installation-ipsec-Host-to-Host-et-Network-to-Network" rel="nofollow">Pour ceux qui prefereraient IPSEC</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.webmin.com/cgi-bin/search_third.cgi?search=openvpn" class="urlextern" title="http://www.webmin.com/cgi-bin/search_third.cgi?search=openvpn" rel="nofollow">Modules OpenVPN pour Webmin</a></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_25'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Liens externes] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens_externes" /><input type="hidden" name="codeblockOffset" value="53" /><input type="hidden" name="range" value="36383-37291" /><button type="submit" title="Liens externes" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit26" id="notes">Notes</h3>
<div class="level3">
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="https://fr.wikipedia.org/wiki/Échange_de_clés_Diffie-Hellman" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Échange_de_clés_Diffie-Hellman">Échange_de_clés_Diffie-Hellman</a></div>
</li>
</ol>
<hr />

<p>
Pour plus d&#039;informations, n&#039;hésitez pas à contacter <a href="/utilisateurs/pezzos" class="wikilink1" title="utilisateurs:pezzos">pezzos</a>.
</p>

<p>
<em>Contributeurs : <a href="/utilisateurs/pezzos" class="wikilink1" title="utilisateurs:pezzos">pezzos</a>, <a href="/utilisateurs/krop" class="wikilink2" title="utilisateurs:krop" rel="nofollow">krop</a> (élagage, nettoyage, corrections), <a href="/utilisateurs/zedtux" class="wikilink1" title="utilisateurs:zedtux">zedtux</a>, <a href="/utilisateurs/nicoxinchao" class="wikilink2" title="utilisateurs:nicoxinchao" rel="nofollow">nicoxinchao</a> (ajout de la partie &quot;Accédez à Internet), LukePerp (ajout config cas d&#039;un fournisseur vpn).</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_26'><form class="button btn_secedit form-inline" method="post" action="/openvpn"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1597923756" /><input type="hidden" name="summary" value="[Notes] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="notes" /><input type="hidden" name="codeblockOffset" value="53" /><input type="hidden" name="range" value="37292-" /><button type="submit" title="Notes" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div><hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">openvpn est mis à jour rapidement en cas de trou de sécurité, ou de problème lié à certaines clés sensibles</div></div>
<div class="fn"><sup><a href="#fnt__2" id="fn__2" class="fn_bot">2)</a></sup> 
<div class="content">pour <a href="/gnome" class="wikilink1" title="gnome">gnome</a>, ou <a href="/kde" class="wikilink1" title="kde">kde</a></div></div>
<div class="fn"><sup><a href="#fnt__3" id="fn__3" class="fn_bot">3)</a></sup> 
<div class="content">associer un accès client vpn à un seul utilisateur</div></div>
<div class="fn"><sup><a href="#fnt__4" id="fn__4" class="fn_bot">4)</a></sup> 
<div class="content"> le plus grand risque </div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="openvpn.txt">openvpn.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 20/08/2020, 13:42">Le 20/08/2020, 13:42</span></li><li class="text-muted">par 129.175.152.220</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=openvpn&amp;1635559695" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

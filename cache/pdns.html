<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>pdns [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="xenial,serveur,reseau,dns"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/pdns?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/pdns?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/pdns"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/pdns"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/pdns"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"pdns","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="pdns">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/pdns?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/pdns?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/pdns?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/pdns?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/pdns?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/pdns?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/pdns?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">pdns</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/pdns?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/pdns?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/pdns?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#installation","title":"Installation","level":1},{"link":"#configuration","title":"Configuration","level":1},{"link":"#configuration_de_base_du_serveur","title":"Configuration de base du serveur","level":2},{"link":"#erreurs_possibles","title":"Erreurs possibles","level":2},{"link":"#configuration_des_clients","title":"Configuration des clients","level":1},{"link":"#configuration_dhcp_equivalente","title":"Configuration DHCP \u00e9quivalente","level":2},{"link":"#configuration_des_clients_windows","title":"Configuration des clients Windows","level":2},{"link":"#voir_aussi","title":"Voir aussi","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis</a></li>
<li class="level1"><a href="#installation">Installation</a></li>
<li class="level1"><a href="#configuration">Configuration</a>
<ul class="nav toc">
<li class="level2"><a href="#configuration_de_base_du_serveur">Configuration de base du serveur</a></li>
<li class="level2"><a href="#erreurs_possibles">Erreurs possibles</a></li>
</ul>
</li>
<li class="level1"><a href="#configuration_des_clients">Configuration des clients</a>
<ul class="nav toc">
<li class="level2"><a href="#configuration_dhcp_equivalente">Configuration DHCP équivalente</a></li>
<li class="level2"><a href="#configuration_des_clients_windows">Configuration des clients Windows</a></li>
</ul>
</li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/xenial" class="wikilink1" title="xenial" rel="tag">Xenial</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/dns" class="wikilink1" title="dns" rel="tag">dns</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="serveur_dnspowerdns">Serveur DNS : PowerDNS</h1>
<div class="level1">

<p>
Cet article a pour but de vous présenter comment installer et configurer un serveur <abbr title="Domain Name System">DNS</abbr> en utilisant l&#039;application <strong>powerDNS</strong>.
</p>

<p>
PowerDNS est un serveur de nom qui peut utiliser de nombreux <em>backends</em> comme stockage des informations de noms : base de données (<a href="/mysql" class="wikilink1" title="mysql">mysql</a> ou <a href="/postgresql" class="wikilink1" title="postgresql">postgresql</a>), <abbr title="Lightweight Directory Access Protocol">LDAP</abbr>, fichiers de bind.
</p>

<p>
Si vous utilisez des bases de données, il y a plusieurs avantages très importants :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Qui dit &quot;<em>bases de données</em>&quot;, dit &quot;<em>administration facilitée par une interface web</em>&quot;.</div>
</li>
<li class="level1"><div class="li"> Vous n&#039;avez pas besoin de recharger le serveur à l&#039;ajout d&#039;une information de nom. Le serveur ira chercher l&#039;information quand vous l&#039;interrogerez.</div>
</li>
<li class="level1"><div class="li"> En cas de crash système, et pour peu que vous ayez logé votre serveur de bases de données sur un point de montage séparé, vous ne perdrez pas vos données si vous réinstallez complètement votre système.</div>
</li>
</ul>
<div class="notetip">L&#039;auteur a par exemple logé tous ses serveurs logiciels dans /home : apache, mysql, serveur de courriel dont les boîtes aux lettres sont dans le répertoire de chaque utilisateur…
</div>
</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Serveur DNS : PowerDNS] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="serveur_dnspowerdns" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="43-1155" /><button type="submit" title="Serveur DNS : PowerDNS" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Vous devez maîtriser les bases de <abbr title="Transmission Control Protocol">TCP</abbr>/IP.</div>
</li>
<li class="level1"><div class="li"> Vous devez avoir une connexion internet (ou intranet si vous voulez juste adresser votre <a href="https://fr.wikipedia.org/wiki/Réseau_local" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Réseau_local">lan</a> sans connexion au reste du monde).</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1156-1383" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="installation">Installation</h2>
<div class="level2">

<p>
Pour installer <em>PowerDNS</em> sur Ubuntu, <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez les paquets</a> <strong><a href="apt://pdns-server,pdns-recursor" class="interwiki iw_apt" title="apt://pdns-server,pdns-recursor">pdns-server,pdns-recursor</a></strong>.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1384-1553" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="configuration">Configuration</h2>
<div class="level2">

<p>
Considérons les aspects suivants :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Le réseau local est <code>192.168.251.*</code> et se nomme <code>bureau.lan</code>. L&#039;utilisation du TLD fictif &quot;lan&quot; est voulue. Vous pouvez utiliser un autre nom e domaine, comme net, maison, home.lan…</div>
</li>
</ul>
<div class="noteimportant">Il semble que powerdns refuse les noms de domaine en TLD (vous ne pouvez pas nommer vos pcs georges.lan, gertrude.lan, mais bien georges.bureau.lan, gertrude.bureau.lan)
</div><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> La machine serveur <abbr title="Domain Name System">DNS</abbr> est aussi le serveur de mail et porte l&#039;IP <code>192.168.251.202</code>; elle se nomme <code>mail2</code>.</div>
</li>
<li class="level1"><div class="li"> Il y a 3 autres machines sur le réseau : <code>192.168.251.200</code> (nommée <code>twin1</code>), <code>192.168.251.201</code> (nommée <code>twin2</code>) et <code>192.168.251.205</code> (nommée <code>portable</code>).          </div>
</li>
</ul>

<p>
Voyons comment configurer le serveur PowerDNS avec ce petit réseau.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1554-2375" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="configuration_de_base_du_serveur">Configuration de base du serveur</h3>
<div class="level3">

<p>
Le serveur comporte deux parties distinctes, le serveur de noms lui-même et le recurseur. Ces deux services sont séparés dans le système. Chacun a un démon. Lorsque vous contactez le serveur, celui-ci interroge le recurseur via une connection reseau sur une adresse localhost (ou autre à la limite !) et un port logiciel s&#039;il ne peut trouver les informations dans ses backends.
</p>

<p>
La syntaxe des données dans les backends est la même, que pour Bind.
</p>

</div>

<h4 id="le_fichier_de_configuration_generale">Le fichier de configuration générale</h4>
<div class="level4">

<p>
La configuration principale de PowerDNS se fait dans le fichier <code>/etc/powerdns/pdns.conf</code>. Dans ce fichier, vous indiquerez les backends utilisés, l&#039;adresse et le port pour contacter le recurseur.
</p>
<pre class="code file etcpowerdnspdnsconf">allow-axfr-ips=217.70.177.40
allow-recursion=127.0.0.1
disable-axfr=no
cache-ttl=300
launch=gmysql
logging-facility=0
out-of-zone-additional-processing=yes
query-cache-ttl=300
recursive-cache-ttl=150
recursor=127.0.0.1:54</pre>

<p>
Ces paramètres sont à adapter suivant votre cas.
</p>

</div>

<h4 id="le_recurseur">Le recurseur</h4>
<div class="level4">
<pre class="file">allow-from=127.0.0.1
local-address=127.0.0.1
local-port=54
logging-facility=1</pre>

</div>

<h4 id="les_backends">Les backends</h4>
<div class="level4">

</div>

<h5 id="mysql">Mysql</h5>
<div class="level5">

<p>
Si vous utilisez mysql, vous devez avoir un serveur <a href="/mysql" class="wikilink1" title="mysql">mysql</a> fonctionnel et ajouter les paramètres dans <code>/etc/powerdns/pdns.conf</code> :
</p>
<pre class="file">launch=gmysql
gmysql-host=localhost
gmysql-user=powerdns
gmysql-password=##############
gmysql-dbname=powerdns</pre>

<p>
Adaptez vos paramètres à ceux de votre base de données.
</p>
<div class="notewarning">Il est vital que la base de données soit accessible ! Si vous utilisez un autre hôte que localhost dans <strong>gmysql-host</strong>, votre serveur PowerDNS devra pouvoir contacter ce serveur mysql, donc avoir une connexion réseau stable et une adresse (qui ne doit donc pas venir d&#039;un serveur de nom !). Vous pouvez mettre ce nom dans <code>/etc/hosts</code>. Ceci est toutefois risqué car il dépend de la stabilité du (des) réseaux traversés.
</div>
</div>

<h5 id="ldap">Ldap</h5>
<div class="level5">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>

<h5 id="postgresql">Postgresql</h5>
<div class="level5">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>

<h4 id="interfaces_web">Interfaces web</h4>
<div class="level4">

<p>
Il existe de nombreuses interfaces web pour PowerDNS :
<a href="http://pdnsadmin.iguanadons.net/" class="urlextern" title="http://pdnsadmin.iguanadons.net/" rel="nofollow">PDNSadmin</a>
</p>

<p>
Une liste non-exhaustive est disponible ici :
<a href="http://www.the-scream.co.uk/forums/t27204.html" class="urlextern" title="http://www.the-scream.co.uk/forums/t27204.html" rel="nofollow">http://www.the-scream.co.uk/forums/t27204.html</a>
</p>
<div class="noteimportant">Si vous installez une interface web, il peut être important de restreindre l&#039;accès de cette interface. En effet, le serveur de nom de domaine est la clé de voute de tout réseau informatique organisé ! Toute personne qui pénétrerait sur cette interface pourrait gravement compromettre le fonctionnement de votre réseau.
<p>
Vous pouvez mettre en place une restriction d&#039;accès par un fichier .htaccess, ou directement dans la configuration du serveur web. Pour info, sur <a href="/apache2" class="wikilink1" title="apache2">Apache2</a>, vous pouvez mettre :
</p>
<pre class="file">
&lt;Directory /pdnsadmin&gt;
Order allow,deny
Deny from all
Allow from 192.168.0.0/24
Allow from .*22decembre\.eu.*
Allow from 2a01:e35C:8ABB:5A00::/64
&lt;/Directory&gt;
</pre>

<p>
Ici, 192.168.0.0/24 pour indiquer mon réseau interne, 2a01:e35C:8ABB:5A00::/64 est ma racine ipv6, et 22decembre.eu mon nom de domaine. Ainsi, seuls ceux qui sont <strong><em>dans mon réseau</em></strong>, ou que j&#039;ai <strong><em>volontairement</em></strong> inclus dans mon domaine peuvent intervenir sur mon serveur de noms, <em>en plus</em> du mot de passe de l&#039;interface graphique elle-même ! (Un mot de passe se craque, deux sécurités valent mieux qu&#039;une !)
</p>

</div>
</div>

<h4 id="enregistrements">Enregistrements</h4>
<div class="level4">

<p>
Les <strong>enregistrements</strong>, ou <em>records</em>, du serveur de nom sont les même que pour <a href="/bind9" class="wikilink1" title="bind9">Bind9</a>.
</p>

</div>

<h4 id="verification_de_la_configuration">Vérification de la configuration</h4>
<div class="level4">

<p>
Pour vérifier le fonctionnement de notre serveur <abbr title="Domain Name System">DNS</abbr>, nous allons lui adresser des requêtes directement via l&#039;utilitaire <code>nslookup</code>, pour l&#039;utiliser, il suffit de taper <code>nslookup</code> dans un terminal.
</p>
<div class="notetip">Cette méthode est valable pour tous les serveurs de noms puisqu&#039;elle repose sur le protocole <abbr title="Domain Name System">DNS</abbr> lui-même  !
</div>
<p>
On doit lui indiquer le serveur <abbr title="Domain Name System">DNS</abbr> à vérifier via le mot clé <code>server 127.0.0.1</code> et ensuite, on lui donne un nom d&#039;hôte et il doit nous répondre l&#039;adresse IP. 
</p>

<p>
<strong>Voici la petite session de test que j&#039;ai fait chez moi</strong> :
</p>

<p>
On commence par dire à nslookup quel serveur il doit interroger :
</p>
<pre class="file">nslookup
&gt; server 127.0.0.1
Default server: 127.0.0.1
Address: 127.0.0.1#53</pre>

<p>
Puis on l&#039;interroge :
</p>
<pre class="file">&gt; mail2.bureau.lan
Server:         127.0.0.1
Address:        127.0.0.1#53

Name:   mail2.bureau.lan
Address: 192.168.251.202
&gt; 192.168.251.201
Server:         127.0.0.1
Address:        127.0.0.1#53

201.251.168.192.in-addr.arpa    name = twin2.bureau.lan.
&gt; set q=mx
&gt; bureau.lan
Server:         127.0.0.1
Address:        127.0.0.1#53
bureau.lan    mail exchanger = 10 mail2.bureau.lan.
&gt; exit</pre>

<p>
Si tout se déroule normalement, vous pouvez configurer vos clients et utiliser votre serveur <abbr title="Domain Name System">DNS</abbr>.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Configuration de base du serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_de_base_du_serveur" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2376-7190" /><button type="submit" title="Configuration de base du serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="erreurs_possibles">Erreurs possibles</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Erreurs possibles] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreurs_possibles" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="7191-7225" /><button type="submit" title="Erreurs possibles" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="configuration_des_clients">Configuration des clients</h2>
<div class="level2">
<div class="notetip">Ces méthodes de configuration, passant par <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> ou les fichiers système sont valables pour tous les serveurs <abbr title="Domain Name System">DNS</abbr>, quels que soient leurs versions !
</div>
<p>
La configuration de la résolution de nom pour les machines Linux se fait dans le fichier <code>/etc/resolv.conf</code>. Dans ce fichier, vous pouvez ajouter le domaine de recherche via la ligne suivante (en premier dans le fichier) :
</p>
<pre class="code">search bureau.lan</pre>

<p>
Et ensuite, les adresses de vos serveurs de noms (primaire interne, autres internes, puis ceux de votre fournisseur d&#039;accès par exemple) de la manière suivante :
</p>
<pre class="file">nameserver 192.168.251.202</pre>

<p>
L&#039;ordre dans lequel vous indiquez les lignes est important. Voici le fichier tel qu&#039;il est chez moi :
</p>
<pre class="file">search bureau.lan
nameserver 192.168.251.202
nameserver 192.168.251.212
nameserver 193.121.171.135
nameserver 193.74.208.65</pre>

<p>
Linux va essayer de résoudre un nom de la manière suivante (si une étape ne fonctionne pas, il essaye la suivante) :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> recherche du serveur de nom de <code>bureau.lan</code> et interrogation de ce serveur.</div>
</li>
<li class="level1"><div class="li"> interrogation du serveur <abbr title="Domain Name System">DNS</abbr> <code>192.168.251.202</code> qui est mon serveur <abbr title="Domain Name System">DNS</abbr> primaire (interne).</div>
</li>
<li class="level1"><div class="li"> interrogation du serveur <abbr title="Domain Name System">DNS</abbr> <code>192.168.251.212</code> qui est mon serveur <abbr title="Domain Name System">DNS</abbr> secondaire (interne).</div>
</li>
<li class="level1"><div class="li"> interrogation du serveur <abbr title="Domain Name System">DNS</abbr> <code>193.121.171.135</code> qui est le serveur <abbr title="Domain Name System">DNS</abbr> primaire de mon provider.</div>
</li>
<li class="level1"><div class="li"> interrogation du serveur <abbr title="Domain Name System">DNS</abbr> <code>193.74.208.65</code> qui est le serveur <abbr title="Domain Name System">DNS</abbr> secondaire de mon provider.</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Configuration des clients] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_des_clients" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="7226-8752" /><button type="submit" title="Configuration des clients" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="configuration_dhcp_equivalente">Configuration DHCP équivalente</h3>
<div class="level3">

<p>
Si le fichier /etc/resolv.conf est généré (écrasé) automatiquement par dhclient, voici les lignes correspondantes à ajouter au fichier /etc/dhcp3/dhclient.conf (Configuration testée sur Ubuntu &quot;hardy&quot; 8.04.3 LTS) :
</p>
<pre class="file">prepend domain-name-servers 192.168.251.202, 192.168.251.212;
append domain-name &quot;bureau.lan.&quot;;</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Configuration DHCP équivalente] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_dhcp_equivalente" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="8753-9130" /><button type="submit" title="Configuration DHCP équivalente" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="configuration_des_clients_windows">Configuration des clients Windows</h3>
<div class="level3">

<p>
Sans entrer dans les détails (ce n&#039;est pas le but du site), il vous suffit d&#039;introduire l&#039;adresse IP de vos serveurs <abbr title="Domain Name System">DNS</abbr> primaire et secondaire dans les propriétés du protocole <abbr title="Transmission Control Protocol">TCP</abbr>/IP (accessible dans les connexions réseaux du panneau de configuration). Rajouter le suffixe <abbr title="Domain Name System">DNS</abbr> correspondant à votre domaine dans les propriétés réseaux de votre carte.
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Configuration des clients Windows] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_des_clients_windows" /><input type="hidden" name="codeblockOffset" value="10" /><input type="hidden" name="range" value="9131-9534" /><button type="submit" title="Configuration des clients Windows" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit10 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">

<p>
Site web : <a href="http://www.powerdns.com/" class="urlextern" title="http://www.powerdns.com/" rel="nofollow">PowerDNS</a><br/>

Documentation officielle : <a href="http://www.powerdns.com/en/documentation.aspx" class="urlextern" title="http://www.powerdns.com/en/documentation.aspx" rel="nofollow">Doc</a>
</p>

<p>
Cet article est inspiré, au moins partiellement, de :<br/>

<a href="http://www.howtoforge.com/installing-powerdns-with-mysql-backend-and-poweradmin-on-debian-etch" class="urlextern" title="http://www.howtoforge.com/installing-powerdns-with-mysql-backend-and-poweradmin-on-debian-etch" rel="nofollow">http://www.howtoforge.com/installing-powerdns-with-mysql-backend-and-poweradmin-on-debian-etch</a><br/>

<a href="http://nyrodev.info/index.php/2009/03/22/245-serveur-dns-powerdns-serveur-web-sur-debian-lenny" class="urlextern" title="http://nyrodev.info/index.php/2009/03/22/245-serveur-dns-powerdns-serveur-web-sur-debian-lenny" rel="nofollow">http://nyrodev.info/index.php/2009/03/22/245-serveur-dns-powerdns-serveur-web-sur-debian-lenny</a>
</p>
<hr />

<p>
<em>Contributeurs : <a href="/utilisateurs/stephaneguedon" class="wikilink1" title="utilisateurs:stephaneguedon">stephaneguedon</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/pdns"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1549275448" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="voir_aussi" /><input type="hidden" name="codeblockOffset" value="10" /><input type="hidden" name="range" value="9535-" /><button type="submit" title="Voir aussi" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="pdns.txt">pdns.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 04/02/2019, 11:17">Le 04/02/2019, 11:17</span></li><li class="text-muted">par 178.20.241.170</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=pdns&amp;1635560330" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

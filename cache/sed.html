<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>sed [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="console"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/sed?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/sed?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/sed"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/sed"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/sed"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"sed","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="sed">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/sed?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/sed?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/sed?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/sed?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/sed?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/sed?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/sed?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">sed</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/sed?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/sed?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/sed?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#utilisation","title":"Utilisation","level":1},{"link":"#sed_-_cut_et_les_fichiers","title":"sed - cut et les fichiers","level":2},{"link":"#sed_-_cut_et_les_variables","title":"sed - cut et les variables","level":2},{"link":"#exemple","title":"Exemple :","level":1},{"link":"#astuces_en_vrac","title":"Astuces en Vrac","level":1},{"link":"#liens","title":"Liens","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#utilisation">Utilisation</a>
<ul class="nav toc">
<li class="level2"><a href="#sed_-_cut_et_les_fichiers">sed - cut et les fichiers</a></li>
<li class="level2"><a href="#sed_-_cut_et_les_variables">sed - cut et les variables</a></li>
</ul>
</li>
<li class="level1"><a href="#exemple">Exemple :</a></li>
<li class="level1"><a href="#astuces_en_vrac">Astuces en Vrac</a></li>
<li class="level1"><a href="#liens">Liens</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/console" class="wikilink1" title="console" rel="tag">console</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="sed_-_cut">Sed - Cut</h1>
<div class="level1">

<p>
<strong>sed</strong> et <strong>cut</strong> permettent de modifier ou de supprimer une partie d’une chaîne de caractères, par exemple pour remplacer un caractère par un 
autre dans un fichier, ou encore supprimer des chaînes de caractères inutiles. Ce sont des outils très puissants.
</p>
<div class="noteclassic">Les possibilités de ces commandes en terme de syntaxe étant tellement vastes que nous n&#039;aborderons que la partie émergée de l&#039;iceberg (cette page étant bien évidemment perfectible dans le temps)
</div>
</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/sed"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1607437422" /><input type="hidden" name="summary" value="[Sed - Cut] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="sed_-_cut" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="22-529" /><button type="submit" title="Sed - Cut" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="utilisation">Utilisation</h2>
<div class="level2">

<p>
Pour utiliser <strong>sed</strong> ou <strong>cut</strong>, vous devez lui fournir une chaîne à traiter. Cette chaîne peut provenir :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> d&#039;un fichier</div>
</li>
<li class="level1"><div class="li"> d&#039;une variable</div>
</li>
</ul>

<p>
En règle générale la syntaxe est de la forme <br/>

&quot;s/[<em>occurrence_cherchée</em>]/[<em>occurrence_de_substitution</em>]/[<em>comportement</em>]&quot;
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/sed"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1607437422" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="530-838" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="sed_-_cut_et_les_fichiers">sed - cut et les fichiers</h3>
<div class="level3">

<p>
Pour pouvoir traiter un fichier, il est nécessaire de lier le fichier à <strong>sed.</strong> Nous utiliserons la commande <strong>grep</strong> sous la forme : <br/>

</p>
<pre class="code">grep occurrence /fichier/a/parcourir | sed ... \\
grep occurrence /fichier/a/parcourir | cut ... \\</pre>

<p>
ou encore même conjointement <br/>

</p>
<pre class="code">grep occurrence /fichier/a/parcourir | cut ... | sed ...</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/sed"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1607437422" /><input type="hidden" name="summary" value="[sed - cut et les fichiers] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="sed_-_cut_et_les_fichiers" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="839-1213" /><button type="submit" title="sed - cut et les fichiers" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="sed_-_cut_et_les_variables">sed - cut et les variables</h3>
<div class="level3">

<p>
Pour nos exemples nous allons définir une variable à l&#039;aide de la commande <strong>export</strong>
</p>
<pre class="code">export chaine=&quot;ceci est une chaine de caractères&quot;</pre>

<p>
Ainsi nous définissons la valeur de la variable $chaine. Nous pouvons à présent appeler cette variable au besoin.
</p>
<pre class="code">echo $chaine | sed -e &quot;s/ /_/g&quot;</pre>

<p>
Donnera en réponse
</p>
<pre class="code">ceci_est_une_chaine_de_caractères</pre>
<div class="noteclassic">Remplacer les espaces par des caractères est une des étapes importantes visant à substituer les caractères pouvant être mal interprétés par la suite.<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>mplayer mon fichier.avi</code> ne fonctionne pas tandis que <code>mplayer mon<strong>_</strong>fichier.avi</code> fonctionnera</div>
</li>
<li class="level1"><div class="li"> Le <strong>g</strong> positionné après l&#039;occurrence de substitution (&quot;s/ /_/<strong>g</strong>&quot;) indique à <strong>sed</strong> de se comporter de façon globale (&quot;récursive&quot;)</div>
</li>
</ul>

</div>
</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/sed"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1607437422" /><input type="hidden" name="summary" value="[sed - cut et les variables] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="sed_-_cut_et_les_variables" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1214-2059" /><button type="submit" title="sed - cut et les variables" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="exemple">Exemple :</h2>
<div class="level2">

<p>
Nous voulons récupérer l&#039;<em>uid</em> ainsi que le <em>gid</em> d&#039;un utilisateur en cours.
Sous linux, l&#039;utilisateur courant est défini dans la variable <strong>$USER</strong> <br/>

La preuve en est :
</p>
<pre class="code">echo $USER</pre>

<p>
<em> retourne l&#039;utilisateur en cours </em> <br/>

l&#039;<em>uid</em> et <em>gid</em> de l&#039;utilisateur est stocké dans le fichier /etc/passwd.<br/>

Dans un premier temps récupérons la ligne concernant notre utilisateur (ici Florent).<br/>

</p>
<pre class="code">grep $USER /etc/passwd</pre>

<p>
<em>parcourir le fichier <strong>/etc/passwd</strong> et retourner la ligne concernant le nom de l&#039;utilisateur en cours</em><br/>

Donnera en réponse
</p>
<pre class="code">florent:x:1000:1000::/home/florent:/bin/bash</pre>

<p>
vous me direz : parfait ! Et bien nous avons notre <em>uid</em> et <em>gid</em>. Certes mais le résultat est difficilement exploitable vous en conviendrez. Nous allons donc séparer de façon distincte les deux valeurs. Il nous faut pour cela analyser le résultat de la commande précédente pour définir des règles de traitement :
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <em>uid</em> et <em>gid</em> sont sous la forme de chiffres</div>
</li>
<li class="level1"><div class="li"> les informations sont séparées par <strong>:</strong></div>
</li>
<li class="level1"><div class="li"> la liste des paths est introduite par <strong>::</strong></div>
</li>
</ol>

<p>
ces différentes remarques vont nous permettre de fixer des délimiteurs, 
isolons donc la chaîne précédant les <strong>::</strong> du reste de la chaîne
</p>
<pre class="code">grep $USER /etc/passwd | sed &quot;s/::/%/&quot; |cut -d&#039;%&#039; -f1</pre>

<p>
<em> Parcourir le fichier <strong>/etc/passwd</strong> et retourner la ligne concernant le nom de l&#039;utilisateur en cours  <strong>|</strong> remplacer <strong>(s)</strong> les <strong>::</strong> par <strong>%</strong> dans le résultat <strong>|</strong> dans le résultat, supprimer (-d) l&#039;occurrence <strong>&#039;%&#039;</strong> et tout ce qui la suit la première occurrence vérifiant (-f1)</em> <br/>

donnera
</p>
<pre class="code">florent:x:1000:1000</pre>

<p>
 Le principe est donc maintenant posé. Effectuons une dernière action afin de mettre en forme le résultat :
 
</p>
<pre class="code">grep $USER /etc/passwd | sed &quot;s/::/%/g&quot; |cut -d&#039;%&#039; -f1 |cut -d&#039;x&#039; -f2 |sed -e &quot;s/:\([0-9][0-9]*\)/UID=\1\n/&quot;  -e &quot;s/:\([0-9][0-9]*\)/GID=\1/&quot;</pre>

<p>
Donnera
</p>
<pre class="code">UID=1000
GID=1000</pre>

<p>
Décortiquons les différentes étapes du traitement :
</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<td class="col0 leftalign">              </td><th class="col1 leftalign"> Commande                  </th><th class="col2 leftalign"> Sortie          </th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0 leftalign"> origine      </th><td class="col1 leftalign"> grep $USER /etc/passwd    </td><td class="col2"> <strong>florent</strong>:x:1000:1000::/home/<strong>florent</strong>:/bin/bash </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign"> Etape 1      </th><td class="col1 leftalign"> sed &quot;s/::/%/&quot;            </td><td class="col2 leftalign"> florent:x:1000:1000<strong>%</strong>/home/florent:/bin/bash  </td>
	</tr>
	<tr class="row3">
		<th class="col0 leftalign"> Etape 2      </th><td class="col1 leftalign"> cut -d&#039;%&#039; -f1             </td><td class="col2 leftalign"> florent:x:1000:1000                </td>
	</tr>
	<tr class="row4">
		<th class="col0 leftalign"> Etape 3      </th><td class="col1 leftalign"> cut -d&#039;x&#039; -f2             </td><td class="col2 leftalign"> :1000:1000    </td>
	</tr>
	<tr class="row5">
		<th class="col0 leftalign"> Etape 4      </th><td class="col1"> sed -e &quot;s/:\([0-9][0-9][0-9][0-9]\)/UID=\1\n/&quot;  -e &quot;s/:\([0-9][0-9][0-9][0-9]\)/GID=\1/&quot; </td><td class="col2"> UID=1000 <br/>
GID=1000 </td>
	</tr>
</table></div>

<p>
plus simple :
</p>
<pre class="code">sed -n -e &quot;/`echo $USER`/s/[^:]*:[^:]*:\([^:]*\):\([^:]*\):.*/UID=\1\nGID=\2/p&quot; /etc/passwd</pre>

<p>
Voila les étapes du traitement d&#039;une chaîne de caractères avec quelques détails à ne pas oublier.
</p>
<div class="notewarning"><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> L&#039;ordre de traitement est crucial </div>
</li>
<li class="level1"><div class="li"> Le délimiteur utilisé par <strong>cut</strong> ne peut excéder 1 caractère d&#039;où l&#039;étape 1 visant à remplacer deux caractères consécutifs par un caractère unique remarquable utilisé dans l&#039;étape 2</div>
</li>
<li class="level1 node"><div class="li"> L&#039;étape 4 introduit quelques syntaxes intéressantes :</div>
<ol class=" fix-media-list-overlap">
<li class="level2"><div class="li"> sed -e &quot;[règle 1]&quot; -e &quot;[règle 2]&quot; </div>
</li>
<li class="level2"><div class="li"> sed &quot;s/\(occurrence\)/%\1%/&quot; qui retourne %occurrence%</div>
</li>
<li class="level2"><div class="li"> sed &quot;s/\(occurrence\)/\1\n/&quot; qui insère un retour à la ligne à la fin de l&#039;occurrence</div>
</li>
</ol>
</li>
</ul>

</div>
</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/sed"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1607437422" /><input type="hidden" name="summary" value="[Exemple :] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="exemple" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="2060-5374" /><button type="submit" title="Exemple :" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="astuces_en_vrac">Astuces en Vrac</h2>
<div class="level2">

<p>
une syntaxe intéressante peut s&#039;avérer parfois très utile notamment pour des occurrences de type chemin de dossier <strong>/chemin/de/fichier</strong>. En effet la présence de caractères <strong>/</strong> peut poser certains problèmes. Afin de pallier cela il est possible d&#039;utiliser une syntaxe différente que voici :
</p>
<pre class="code">sed -e &quot;s|/chemin/vers/un/fichier|/chemin/vers/un autre|&quot;</pre>

<p>
ainsi les <strong>/</strong> seront correctement interprétés.
</p>

<p>
Si vous désirez modifier des occurrences dans un fichier vous pouvez préférer l&#039;option -i qui permet d&#039;éditer un  fichier.
Ainsi :
</p>
<pre class="code">sed -i &quot;s/une occurrence/une autre/g&quot; /un/fichier.txt</pre>

<p>
Va remplacer toutes les occurrences <strong>une occurrence</strong> par <strong>une autre</strong> dans le fichier <strong>/un/fichier.txt</strong>
</p>

</div>

<h4 id="fin_de_ligne">Fin de ligne</h4>
<div class="level4">

<p>
sed traite les lignes individuellement (l&#039;une aprés l&#039;autre), il semble donc, au premier abord, incapable de joindre deux lignes séparées par un motif comportant le retour chariot (\n). Heureusement cette difficulté n&#039;est qu&#039;apparente : il suffit de lui indiquer de traiter les deux lignes.
Exemple : joindre à la ligne précédente chaque ligne commençant par un espace (soit substituer un espace simple aux deux caractères saut de ligne puis espace)
</p>
<pre class="code">sed &#039;N;s/\n / /g;P;D;&#039; fichier</pre>

<p>
Dans cet exemple &quot;N&quot; indique à sed de lire également la ligne suivante, &quot;P&quot; d&#039;afficher le résultat et &quot;D&quot; d&#039;effacer la ligne suivante (puisqu&#039;elle a déjà été lue). Les différentes commandes sont séparées par des points-virgules.
</p>

<p>
Le texte suivant :
</p>
<pre class="file">Aujourd&#039;hui Ubuntu
 est incontestablement un beau succès.
On ne peut que s&#039;en réjouir.
L&#039;avenir appartient
 aux heureux utilisateurs de cette distribution.</pre>

<p>
devient :
</p>
<pre class="file">Aujourd&#039;hui Ubuntu est incontestablement un beau succès.
On ne peut que s&#039;en réjouir.
L&#039;avenir appartient aux heureux utilisateurs de cette distribution.</pre>

<p>
Et pour finir la commande à saisir pour transformer les fins de lignes DOS (\r\n] en fins de ligne UNIX (\n) :
</p>
<pre class="code">sed &#039;s/^M$//&#039; fichier</pre>

<p>
Où &quot;^M&quot; représente \r.
</p>
<div class="notetip">en mode console l&#039;affichage de ^M peut s&#039;obtenir en saisissant CTRL+V puis CTRL+M
</div>
</div>

<h4 id="astuces_rapides">Astuces rapides</h4>
<div class="level4">
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<tr class="row0">
		<td class="col0"><strong>Comment faire ?</strong></td><td class="col1" colspan="2"><strong>Commandes</strong></td>
	</tr>
	<tr class="row1">
		<td class="col0">Remplacer la chaîne ancienneChaine par la chaîne NouvelleChaine dans le fichier toto.txt </td><td class="col1" colspan="2"> sed -i &#039;s/ancienneChaine/NouvelleChaine/&#039; /toto.txt</td>
	</tr>
	<tr class="row2">
		<td class="col0">Remplacer la ligne complète qui commence par la chaîne ancienneChaine par la chaîne NouvelleChaine dans le fichier toto.txt </td><td class="col1" colspan="2"> sed -i &#039;s/ancienneChaine.*/NouvelleChaine/&#039; /toto.txt</td>
	</tr>
	<tr class="row3">
		<td class="col0">Remplacer la ligne complète qui contient la chaîne ancienneChaine par la chaîne NouvelleChaine dans le fichier toto.txt </td><td class="col1" colspan="2"> sed -i &#039;s/.*ancienneChaine.*/NouvelleChaine/&#039; /toto.txt</td>
	</tr>
	<tr class="row4">
		<td class="col0">Remplacer dans chaque ligne contenant &#039;foo&#039; la chaîne ancienneChaine par la chaîne NouvelleChaine dans le fichier toto.txt </td><td class="col1" colspan="2">sed -i &#039;/foo/s/./ancienneChaine/NouvelleChaine/g&#039; toto.txt</td>
	</tr>
</table></div>

</div>

<h4 id="pour_conclure">Pour conclure</h4>
<div class="level4">

<p>
Vous l&#039;aurez bien compris avec ces deux commandes en poche vous pouvez foncièrement faire tout ce que vous souhaitez. Je ne peux que vous encourager à lire la documentation concernant l&#039;usage et la syntaxe de ces deux commandes que vous trouverez en tapant respectivement <strong>man sed</strong> et <strong>man cut</strong> <br/>

</p>

<p>
Il ne vous reste plus qu&#039;à intégrer ces connaissances à vos <a href="/tutoriel/script_shell" class="wikilink1" title="tutoriel:script_shell">scripts shell</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/sed"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1607437422" /><input type="hidden" name="summary" value="[Astuces en Vrac] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="astuces_en_vrac" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="5375-8741" /><button type="submit" title="Astuces en Vrac" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="liens">Liens</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://www.panix.com/~elflord/unix/sed.html" class="urlextern" title="http://www.panix.com/~elflord/unix/sed.html" rel="nofollow">Tutorial SED</a> (en) : tutoriel qui explique entres autres comment faire de la recherche multiligne</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.commentcamarche.net/faq/9536-sed-introduction-a-sed-part-i" class="urlextern" title="http://www.commentcamarche.net/faq/9536-sed-introduction-a-sed-part-i" rel="nofollow">Explications completes</a> (fr) : très bon tutoriel sur l&#039;utilisation de sed ainsi que de tres bonnes explications du fonctionnement</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.shellunix.com/sed.html" class="urlextern" title="http://www.shellunix.com/sed.html" rel="nofollow"> Tutorial SED</a> (fr) : petit tutoriel simple en français</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.scotchlinux.tuxfamily.org/doc/sed.php" class="urlextern" title="http://www.scotchlinux.tuxfamily.org/doc/sed.php" rel="nofollow">Man de SED illustrée</a>(fr): Ce qu&#039; on apprend  à partir de la page de manuel de sed.</div>
</li>
<li class="level1"><div class="li"> <a href="http://man2linux.blogspot.com/2010/11/sed.html" class="urlextern" title="http://man2linux.blogspot.com/2010/11/sed.html" rel="nofollow">SED explications</a> (fr) : Exemples sur l&#039;utilisation de la commande SED</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.neoflow.fr/tutoriels.item.237/Trier-les-lignes-d-un-fichier-selon-un-mot.html" class="urlextern" title="http://www.neoflow.fr/tutoriels.item.237/Trier-les-lignes-d-un-fichier-selon-un-mot.html" rel="nofollow">Trier les lignes d&#039;un fichier selon un mot avec SED</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.neoflow.fr/tutoriels.item.236/Enlever-les-commentaires-d%27un-fichier.html" class="urlextern" title="http://www.neoflow.fr/tutoriels.item.236/Enlever-les-commentaires-d%27un-fichier.html" rel="nofollow">Enlever les commentaires d&#039;un fichier avec SED</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://fr.wikipedia.org/wiki/Stream_Editor" class="urlextern" title="https://fr.wikipedia.org/wiki/Stream_Editor" rel="nofollow">page Wikipedia</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://forum.macbidouille.com/index.php?showtopic=128499" class="urlextern" title="http://forum.macbidouille.com/index.php?showtopic=128499" rel="nofollow">supprimer \n</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.commentcamarche.net/faq/5978-sed-conversion-retours-chariots-dos-crlf-unix-lf" class="urlextern" title="http://www.commentcamarche.net/faq/5978-sed-conversion-retours-chariots-dos-crlf-unix-lf" rel="nofollow">retour chariot DOS</a></div>
</li>
</ul>
<hr />

<p>
Contributeurs : <a href="/utilisateurs/va-nu-pied" class="wikilink1" title="utilisateurs:va-nu-pied">flo|va-nu-pied</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/sed"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1607437422" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens" /><input type="hidden" name="codeblockOffset" value="13" /><input type="hidden" name="range" value="8742-" /><button type="submit" title="Liens" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="sed.txt">sed.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 08/12/2020, 15:23">Le 08/12/2020, 15:23</span></li><li class="text-muted">par 80.12.102.157</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=sed&amp;1635563235" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

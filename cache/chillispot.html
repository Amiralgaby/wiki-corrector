<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>chillispot [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="wifi,reseau,securite,portail captif,vetuste"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/chillispot?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/chillispot?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/chillispot"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/chillispot"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/chillispot"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"chillispot","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="chillispot">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/chillispot?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/chillispot?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/chillispot?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/chillispot?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/chillispot?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/chillispot?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/chillispot?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">chillispot</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/chillispot?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/chillispot?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/chillispot?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#installation","title":"Installation","level":1},{"link":"#configuration_reseau_module_tuntap","title":"Configuration R\u00e9seau (module TUN\/TAP)","level":2},{"link":"#installation_de_la_partie_applicative","title":"Installation de la partie applicative","level":2},{"link":"#configuration","title":"Configuration","level":2},{"link":"#test_de_fonctionnement","title":"Test de fonctionnement","level":2},{"link":"#voir_aussi","title":"Voir aussi","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis</a></li>
<li class="level1"><a href="#installation">Installation</a>
<ul class="nav toc">
<li class="level2"><a href="#configuration_reseau_module_tuntap">Configuration Réseau (module TUN/TAP)</a></li>
<li class="level2"><a href="#installation_de_la_partie_applicative">Installation de la partie applicative</a></li>
<li class="level2"><a href="#configuration">Configuration</a></li>
<li class="level2"><a href="#test_de_fonctionnement">Test de fonctionnement</a></li>
</ul>
</li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est considérée comme <a href="/vetuste">vétuste</a> et ne contient plus d'informations utiles.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/wifi" class="wikilink1" title="wifi" rel="tag">wifi</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/securite" class="wikilink1" title="securite" rel="tag">sécurité</a>,
	<a href="/portail_captif" class="wikilink1" title="portail_captif" rel="tag">portail captif</a>,
	<a href="/vetuste" class="wikilink1" title="vetuste" rel="tag">VÉTUSTE</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="chillispotportail_captif">Chillispot : portail captif</h1>
<div class="level1">
<div class="notetip">Le projet Chillispot est abandonné le développeur principal étant parti, cependant il existe un fork très actif nommé <a href="/coovachilli" class="wikilink1" title="coovachilli">CoovaChilli</a>
</div>
<p>
Chillispot est un portail captif. Il a pour rôle dans un premier temps de distribuer les adresses IP aux clients qui se connectent sur le Hotspot, puis dans un second temps de capturer toutes les requêtes à destination du web. Il force ainsi le client à passer par la page de demande d’authentification. Il n’est pas possible de passer outre, seuls les sites de dimension iT et la page d’authentification de Chillispot sont autorisés sans être, au préalable, authentifié sur le serveur Radius. Chillispot peut à la fois être installé sur une machine, via les paquets téléchargeables sur le site officiel, mais peut également être flashé dans un routeur compatible (du type Linksys WRT-54G) au moyen d’un firmware spécifique (DD-WRT).
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Chillispot : portail captif] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="chillispotportail_captif" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="63-1037" /><button type="submit" title="Chillispot : portail captif" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Deux cartes réseau (interface <abbr title="Réseau Local">LAN</abbr> et publique)</div>
</li>
<li class="level1"><div class="li"> serveur web apache2</div>
</li>
<li class="level1"><div class="li"> générateur de certificats</div>
</li>
<li class="level1"><div class="li"> freeradius (authentification)</div>
</li>
<li class="level1"><div class="li"> iptables (pare-feu)</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1038-1229" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="installation">Installation</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> / <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://apache2,apache-ssl,phpmyadmin,mysql-server,freeradius,freeradius-mysql" class="interwiki iw_apt" title="apt://apache2,apache-ssl,phpmyadmin,mysql-server,freeradius,freeradius-mysql">apache2 apache-ssl phpmyadmin mysql-server freeradius freeradius-mysql</a></strong>.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1230-1482" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="configuration_reseau_module_tuntap">Configuration Réseau (module TUN/TAP)</h3>
<div class="level3">

<p>
Vous avez besoin du module <strong>tun.o</strong> (inclus dans les sources du kernel depuis les versions &gt;= 2.4.7). Ubuntu/Debian ne crée pas le périphérique &quot;tun&quot; automatiquement. Dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a>, taper les commandes suivantes pour la création d&#039;une interface « tun » : 
</p>
<pre class="code">mkdir /dev/net
mknod /dev/net/tun c 10 200
modprobe tun</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Configuration Réseau (module TUN/TAP)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_reseau_module_tuntap" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1483-1872" /><button type="submit" title="Configuration Réseau (module TUN/TAP)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="installation_de_la_partie_applicative">Installation de la partie applicative</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez le fichier</a> <strong>/etc/modules.conf</strong> et vérifiez qu&#039;il contient la ligne suivante : 
</p>
<pre class="file">alias char-major-10-200 tun</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <del><strong><a href="apt://chillispot" class="interwiki iw_apt" title="apt://chillispot">chillispot</a></strong></del> (n&#039;existe plus)</div>
</li>
<li class="level1"><div class="li"> Configuration du cgi</div>
</li>
</ul>

<p>
On copie le fichier cgi fourni dans le répertoire adéquat :
</p>
<pre class="code">cp /usr/share/doc/chillispot/hotspotlogin.cgi.gz /usr/lib/cgi-bin/
cd /usr/lib/cgi-bin
gunzip hotspotlogin.cgi.gz
chmod a+x hotspotlogin.cgi</pre>

<p>
(vous pourrez éditer ce fichier une fois chillispot fonctionnel afin de personnalisez l&#039;installation)
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Installation de la partie applicative] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_de_la_partie_applicative" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="1873-2554" /><button type="submit" title="Installation de la partie applicative" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="configuration">Configuration</h3>
<div class="level3">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Modifiez le fichier</a> <strong>/usr/lib/cgi-bin/hotspotlogin.cgi</strong>, décommenter et modifier le paramètre suivant :</div>
</li>
</ul>
<pre class="file">$uamsecret = &quot;uamsecret&quot; /* secret partagé entre le CGI hotspotlogin.cgi et le daemon chilli */</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Modifiez le fichier</a> <strong>/etc/chilli.conf</strong>, décommenter et modifier les paramètres suivants :</div>
</li>
</ul>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<tr class="row0">
		<td class="col0 centeralign">  net 192.168.1.0/24  </td><td class="col1 centeralign">  ou laisser commenter pour utiliser la configuration par défaut 192.168.182.0/24  </td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  dns1 10.187.36.3  </td><td class="col1 centeralign">  (le <abbr title="Domain Name System">DNS</abbr> de mon Fournisseur d’accès) ou laisser commenté pour utiliser la configuration par défaut ( les <abbr title="Domain Name System">DNS</abbr> spécifiés dans votre /etc/resolv.conf)  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  radiuslisten 127.0.0.1  </td><td class="col1 centeralign">  Décommenter sinon l’adresse 0.0.0.0 (NAS-IP-Address) apparaît dans les logs de freeradius  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  radiusserver1 127.0.0.1  </td><td class="col1 centeralign">  IP du serveur d’authentification  </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">  radiusserver2 127.0.0.1  </td><td class="col1 centeralign">  IP du serveur d’authentification Radius  </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign">  radiussecret radiussecret  </td><td class="col1 centeralign">  secret partagé entre le serveur Radius et le daemon chilli  </td>
	</tr>
	<tr class="row6">
		<td class="col0 centeralign">  Radiusnasid portail  </td><td class="col1 centeralign">  identifiant de votre chillispot  </td>
	</tr>
	<tr class="row7">
		<td class="col0 centeralign">  radiuslocationid  </td><td class="col1 centeralign">  isocc=fr,cc=33,ac=87000,network=MonESSID  </td>
	</tr>
	<tr class="row8">
		<td class="col0 centeralign">  dhcpif eth1  </td><td class="col1 centeralign">  nom de l’interface reliée au point d’accès  </td>
	</tr>
	<tr class="row9">
		<td class="col0 centeralign">  uamserver <a href="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi" class="urlextern" title="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi" rel="nofollow">https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi</a>  </td><td class="col1 centeralign">  ou mettre <a href="https://192.168.182.1/cgi-bin/hotspotlogin.cgi" class="urlextern" title="https://192.168.182.1/cgi-bin/hotspotlogin.cgi" rel="nofollow">https://192.168.182.1/cgi-bin/hotspotlogin.cgi</a> si vous utilisez la configuration par défaut.  </td>
	</tr>
	<tr class="row10">
		<td class="col0 centeralign">  Uamsecret uamsecret  </td><td class="col1 centeralign">  mettre le même secret que dans le fichier /usr/lib/cgi-bin/hotspotlogin.cgi  </td>
	</tr>
	<tr class="row11">
		<td class="col0 centeralign">  Uamlisten 192.168.1.1  </td><td class="col1 leftalign"> adresse écoutée   </td>
	</tr>
	<tr class="row12">
		<td class="col0 centeralign">  uamallowed localhost www.yahoo.fr  </td><td class="col1 centeralign">  Url autorisée  </td>
	</tr>
</table></div>

</div>

<h4 id="configuration_du_pare-feu">Configuration du pare-feu</h4>
<div class="level4">
<pre class="code">cp /usr/share/doc/chillispot/firewall.iptables /etc/chilli.iptables
chmod u+x /etc/chilli.iptables</pre>

<p>
Vous devez avoir à l&#039;intérieur :
</p>
<pre class="file">EXTIF=&quot;eth0&quot; /* interface reliée à Internet */
INTIF=&quot;eth1&quot; /* interface reliée au point d&#039;accès */</pre>

<p>
Si ce n’est pas déjà fait, activer le forwarding entre les interfaces réseau. Vérifier que la ligne suivante existe dans le fichier <strong>/etc/network/options</strong> : 
</p>
<pre class="file">ip_forward=yes</pre>

<p>
relancez ensuite les interfaces réseaux 
</p>
<pre class="code">/etc/init.d/networking restart</pre>

<p>
Dans le fichier <strong>/etc/freeradius/clients.conf</strong>, modifier le paramètre suivant :
</p>
<pre class="file">client 127.0.0.1 {
#secret = testing123
secret = radiussecret /* mettre le même secret partagé que dans le fichier /etc/chilli.conf */</pre>

</div>

<h4 id="configuration_de_freeradius">Configuration de Freeradius</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">modifier le fichier</a> <strong>/etc/freeradius/sql.conf</strong>:</div>
</li>
</ul>
<pre class="file">server = &quot;localhost&quot; (ou x.x.x.x l&#039;ip de votre serveur mysql) 
login = &quot;radius_login_sql&quot; 
password = &quot;radius_pass_sql&quot;</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> mettre dans <strong>/etc/freeradius/radiusd.conf</strong> (après le sql.conf) :</div>
</li>
</ul>
<pre class="file">authorize {
        preprocess
        chap
        suffix
        eap
        #files
        sql
}
authenticate {
        Auth-Type PAP {
          pap
        }
        Auth-Type CHAP {
          chap
        }
        eap
}
accounting {
        detail
        radutmp
        sql
}
session {
        sql
}
		radutmp {
				filename = ${logdir}/radutmp
				username = %{User-Name}
		case_sensitive = yes
				check_with_nas = yes		
		perm = 0600
		callerid = &quot;yes&quot;
	}
		radutmp sradutmp {
		filename = ${logdir}/sradutmp
		perm = 0644
		callerid = &quot;no&quot;
	}
		attr_filter {
		attrsfile = ${confdir}/attrs
	}
	counter daily {
		filename = ${raddbdir}/db.daily
		key = User-Name
		count-attribute = Acct-Session-Time
		reset = daily
		counter-name = Daily-Session-Time
		check-name = Max-Daily-Session
		allowed-servicetype = Framed-User
		cache-size = 5000
	}
	always fail {
		rcode = fail
	}
	always reject {
		rcode = reject
	}
	always ok {
		rcode = ok
		simulcount = 0
		mpp = no
	}
		expr {
	}
		digest {
	}
		exec {
		wait = yes
		input_pairs = request
	}
		exec echo {
				wait = yes
				program = &quot;/bin/echo %{User-Name}&quot;
				input_pairs = request
				output_pairs = reply
			}
	ippool main_pool {
		range-start = 192.168.1.1
		range-stop = 192.168.3.254
		netmask = 255.255.255.0
				cache-size = 800
		session-db = ${raddbdir}/db.ippool
		ip-index = ${raddbdir}/db.ipindex
		override = no
		maximum-timeout = 0
	}	
}
instantiate {	
	exec
		expr
	}
authorize {
		preprocess
		auth_log	
		chap
		mschap
		suffix
		eap
		files
		sql
}
authenticate {
		Auth-Type PAP {
		pap
	}
		Auth-Type CHAP {
		chap
	}
		Auth-Type MS-CHAP {
		mschap
	}
	unix
	eap
}
preacct {
	preprocess
	acct_unique
	suffix
	files
}
accounting {
	detail	
	unix
	radutmp
}
session {
	radutmp
}
post-auth {
	sql
}
pre-proxy {
}
post-proxy {
	eap
}</pre>

</div>

<h4 id="configuration_de_mysql">Configuration de MySQL</h4>
<div class="level4">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> / On s&#039;occupe ensuite de notre base de données :
</p>
<pre class="code">echo &quot;create database radius;&quot; mysql -u root -p
echo &quot;grant all on radius.* to radius_login_sql@&#039;%&#039; identified by &#039;radius_pass_sql&#039;; flush privileges;&quot; mysql -u root -p
zcat /usr/share/doc/freeradius/examples/mysql.sql.gz mysql -u root -p radius
#ou bien
zcat /usr/share/doc/freeradius/examples/db_mysql.sql.gz | mysql -u root -p radius

# sur Lucid Lynx, il est possible que les zcat ne marchent pas. 
#Essayez celles ci (vous devez rentrer les 2) :
mysql -u radius_login_sql -p radius &lt; /etc/freeradius/sql/mysql/schema.sql
mysql -u radius_login_sql -p radius &lt; /etc/freeradius/sql/mysql/nas.sql
</pre>

<p>
Pour ajouter des utilisateur dans la base il faut ajouter un <strong>login + password</strong> dans la table <strong>radcheck</strong> de la base radius , un login plus le type d&#039;authentification dans la table <strong>radgroupcheck</strong> et enfin un login associé à un nom de groupe dans la table <strong>usergroup</strong>
</p>

</div>

<h5 id="table_usergroup">Table usergroup</h5>
<div class="level5">
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  UserName  </th><th class="col2 centeralign">  GroupName  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  utilisateur  </td><td class="col2 centeralign">  groupe  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  prof1  </td><td class="col2 centeralign">  professeurs  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élève1  </td><td class="col2 centeralign">  élèves  </td>
	</tr>
</table></div>

</div>

<h5 id="table_radcheck">Table radcheck</h5>
<div class="level5">
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  UserName  </th><th class="col2 centeralign">  Attribute  </th><th class="col3 centeralign">  Op  </th><th class="col4 centeralign">  Value  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  utilisateur  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passuser  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  prof1  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passprof  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élève1  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passeleve  </td>
	</tr>
</table></div>

</div>

<h5 id="table_radgroupcheck">Table radgroupcheck</h5>
<div class="level5">
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  GroupName  </th><th class="col2 centeralign">  Attribute  </th><th class="col3 centeralign">  op  </th><th class="col4 centeralign">  Value  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  groupe  </td><td class="col2 centeralign">  Auth-Type  </td><td class="col3 centeralign">  :=  </td><td class="col4 centeralign">  Local  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  professeurs  </td><td class="col2 centeralign">  Auth-Type  </td><td class="col3 centeralign">  :=  </td><td class="col4 centeralign">  Local  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élèves  </td><td class="col2 centeralign">  Auth-Type  </td><td class="col3 centeralign">  :=  </td><td class="col4 centeralign">  Local  </td>
	</tr>
</table></div>

<p>
Vous pouvez vous référer au site officiel de <a href="http://www.chillispot.info/features.html" class="urlextern" title="http://www.chillispot.info/features.html" rel="nofollow">chillispot</a> pour l&#039;ensemble des syntaxes supportés.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="2555-8992" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="test_de_fonctionnement">Test de fonctionnement</h3>
<div class="level3">

<p>
On test l&#039;authentification de freeradius en mode débug
</p>
<pre class="code">/etc/init.d/freeradius stop
# ou bien 
service freeradius stop

freeradius -XX
[...]
Debug: Listening on authentication *:1812Debug:
Listening on accounting *:1813
Debug: Listening on proxy *:1814
Info: Ready to process requests</pre>

<p>
Dans une autre console on lance un radtest :
</p>
<pre class="code">radtest tux tuxy 127.0.0.1 0 radiussecret

Sending Access-Request of id 95 to 127.0.0.1:1812
User-Name = &quot;tux&quot;
User-Password = &quot;tuxy&quot;
NAS-IP-Address = localhost
NAS-Port = 0
rad_recv: Access-Accept packet from host 127.0.0.1:1812, id=95, length=20</pre>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> / Notre identification par rapport à mysql est donc fonctionnelle on peut dès à présent tester notre chillispot.
</p>
<pre class="code">/etc/init.d/freeradius stop (ctrl+c pour le mode débug)
/etc/init.d/freeradius start
ifconfig eth1 0.0.0.0
/etc/init.d/chilli stop
/etc/init.d/chilli start
/etc/chilli.iptables</pre>

<p>
Vérifiez que la borne wifi à bien pris son adresse en dhcp puis connectez vous au réseau wifi avec votre poste, lancez une page web, si tout ce passe bien vous devriez être redirigé sur <a href="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi" class="urlextern" title="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi" rel="nofollow">https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi</a>
</p>

<p>
Il vous reste maintenant à vous authentifier, si le radtest à été concluant l&#039;authentification devrait réussir sans problèmes.                                                                             
</p>

<p>
Un popup s&#039;ouvre alors avec le temps de connexion et la possibilité de se déloguer tandis que la page que vous aviez ouverte est redirigé vers le site demandé. 
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Test de fonctionnement] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="test_de_fonctionnement" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="8993-10626" /><button type="submit" title="Test de fonctionnement" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit12 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>(en)</strong> <a href="http://www.chillispot.info/" class="urlextern" title="http://www.chillispot.info/" rel="nofollow">Site officiel</a></div>
</li>
<li class="level1"><div class="li"> <strong>(fr)</strong> Inspiré du livre blanc <a href="http://www.guellec.fr/ressources/rapports/documentation_hotspot.pdf" class="urlextern" title="http://www.guellec.fr/ressources/rapports/documentation_hotspot.pdf" rel="nofollow">http://www.guellec.fr/ressources/rapports/documentation_hotspot.pdf</a></div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs principaux : <a href="/utilisateurs/erwik666" class="wikilink1" title="utilisateurs:erwik666">erwik666</a>, <a href="/utilisateurs/herrleiche" class="wikilink1" title="utilisateurs:herrleiche">Herrleiche</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1502823117" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="voir_aussi" /><input type="hidden" name="codeblockOffset" value="15" /><input type="hidden" name="range" value="10627-" /><button type="submit" title="Voir aussi" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="chillispot.txt">chillispot.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 15/08/2017, 20:51">Le 15/08/2017, 20:51</span></li><li class="text-muted">par L&#039;Africain</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=chillispot&amp;1635546953" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>ssd_solid_state_drive [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="materiel,optimisation"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/ssd_solid_state_drive?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/ssd_solid_state_drive?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/ssd_solid_state_drive"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/ssd_solid_state_drive"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/ssd_solid_state_drive"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"ssd_solid_state_drive","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="ssd_solid_state_drive">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/ssd_solid_state_drive?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/ssd_solid_state_drive?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/ssd_solid_state_drive?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/ssd_solid_state_drive?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/ssd_solid_state_drive?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/ssd_solid_state_drive?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/ssd_solid_state_drive?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">ssd_solid_state_drive</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/ssd_solid_state_drive?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/ssd_solid_state_drive?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/ssd_solid_state_drive?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#presentation_des_disques_electroniques","title":"Pr\u00e9sentation des disques \u00e9lectroniques","level":1},{"link":"#vocabulaire_de_la_technique_des_disques_electroniques","title":"Vocabulaire de la technique des disques \u00e9lectroniques","level":2},{"link":"#la_commande_trimactivation_et_utilisation","title":"La commande TRIM : activation et utilisation","level":1},{"link":"#la_commande_trim_a_la_volee_du_cote_kernel","title":"La commande TRIM \u00e0 la vol\u00e9e du c\u00f4t\u00e9 kernel","level":2},{"link":"#activer_le_trim_avec_fstrim","title":"Activer le TRIM avec fstrim","level":2},{"link":"#la_commande_trim_manuelle","title":"La commande TRIM manuelle","level":2},{"link":"#la_commande_trim_d_un_volume_ntfs","title":"La commande TRIM d'un volume NTFS","level":2},{"link":"#choix_du_systeme_de_fichier","title":"Choix du syst\u00e8me de fichier","level":1},{"link":"#utilisation_d_un_systeme_de_fichiers_journalise","title":"Utilisation d'un syst\u00e8me de fichiers journalis\u00e9","level":2},{"link":"#utilisation_d_un_systeme_de_fichier_non_journalise","title":"Utilisation d'un syst\u00e8me de fichier non journalis\u00e9","level":2},{"link":"#minimiser_l_usage_du_disque_electronique","title":"Minimiser l'usage du disque \u00e9lectronique","level":1},{"link":"#placer_les_dossiers_a_contenu_volatile_sur_un_disque_mecanique","title":"Placer les dossiers \u00e0 contenu volatile sur un disque m\u00e9canique","level":2},{"link":"#placer_les_fichiers_temporaires_en_memoire_vive","title":"Placer les fichiers temporaires en m\u00e9moire vive","level":2},{"link":"#la_partition_d_echange_swap","title":"La partition d'\u00e9change (SWAP)","level":2},{"link":"#diminuer_la_frequence_d_ecriture_des_partitions","title":"Diminuer la fr\u00e9quence d'\u00e9criture des partitions","level":2},{"link":"#gagner_de_l_espace_disque","title":"Gagner de l'espace disque","level":2},{"link":"#eviter_d_ecrire_en_double_exemplaire_les_traces_du_fonctionnement_du_logiciel","title":"Eviter d'\u00e9crire en double exemplaire les traces du fonctionnement du logiciel","level":2},{"link":"#aligner_les_partitions","title":"Aligner les partitions","level":1},{"link":"#votre_disque_electronique_est-il_aligne","title":"Votre disque \u00e9lectronique est-il align\u00e9 ?","level":2},{"link":"#formatage_manuel_du_disque_electronique_utilisation_avancee","title":"Formatage manuel du disque \u00e9lectronique (utilisation avanc\u00e9e)","level":2},{"link":"#conseils_d_ameliorations_specifiques_a_certains_disques_electroniques","title":"Conseils d'am\u00e9liorations sp\u00e9cifiques \u00e0 certains disques \u00e9lectroniques","level":1},{"link":"#planification_des_entreessorties","title":"Planification des entr\u00e9es\/sorties","level":2},{"link":"#desactiver_completement_l_archivage","title":"D\u00e9sactiver compl\u00e8tement l'archivage","level":2},{"link":"#desactiver_ureadhead","title":"D\u00e9sactiver \"ureadhead\"","level":2}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#presentation_des_disques_electroniques">Présentation des disques électroniques</a>
<ul class="nav toc">
<li class="level2"><a href="#vocabulaire_de_la_technique_des_disques_electroniques">Vocabulaire de la technique des disques électroniques</a></li>
</ul>
</li>
<li class="level1"><a href="#la_commande_trimactivation_et_utilisation">La commande TRIM : activation et utilisation</a>
<ul class="nav toc">
<li class="level2"><a href="#la_commande_trim_a_la_volee_du_cote_kernel">La commande TRIM à la volée du côté kernel</a></li>
<li class="level2"><a href="#activer_le_trim_avec_fstrim">Activer le TRIM avec fstrim</a></li>
<li class="level2"><a href="#la_commande_trim_manuelle">La commande TRIM manuelle</a></li>
<li class="level2"><a href="#la_commande_trim_d_un_volume_ntfs">La commande TRIM d&#039;un volume NTFS</a></li>
</ul>
</li>
<li class="level1"><a href="#choix_du_systeme_de_fichier">Choix du système de fichier</a>
<ul class="nav toc">
<li class="level2"><a href="#utilisation_d_un_systeme_de_fichiers_journalise">Utilisation d&#039;un système de fichiers journalisé</a></li>
<li class="level2"><a href="#utilisation_d_un_systeme_de_fichier_non_journalise">Utilisation d&#039;un système de fichier non journalisé</a></li>
</ul>
</li>
<li class="level1"><a href="#minimiser_l_usage_du_disque_electronique">Minimiser l&#039;usage du disque électronique</a>
<ul class="nav toc">
<li class="level2"><a href="#placer_les_dossiers_a_contenu_volatile_sur_un_disque_mecanique">Placer les dossiers à contenu volatile sur un disque mécanique</a></li>
<li class="level2"><a href="#placer_les_fichiers_temporaires_en_memoire_vive">Placer les fichiers temporaires en mémoire vive</a></li>
<li class="level2"><a href="#la_partition_d_echange_swap">La partition d&#039;échange (SWAP)</a></li>
<li class="level2"><a href="#diminuer_la_frequence_d_ecriture_des_partitions">Diminuer la fréquence d&#039;écriture des partitions</a></li>
<li class="level2"><a href="#gagner_de_l_espace_disque">Gagner de l&#039;espace disque</a></li>
<li class="level2"><a href="#eviter_d_ecrire_en_double_exemplaire_les_traces_du_fonctionnement_du_logiciel">Eviter d&#039;écrire en double exemplaire les traces du fonctionnement du logiciel</a></li>
</ul>
</li>
<li class="level1"><a href="#aligner_les_partitions">Aligner les partitions</a>
<ul class="nav toc">
<li class="level2"><a href="#votre_disque_electronique_est-il_aligne">Votre disque électronique est-il aligné ?</a></li>
<li class="level2"><a href="#formatage_manuel_du_disque_electronique_utilisation_avancee">Formatage manuel du disque électronique (utilisation avancée)</a></li>
</ul>
</li>
<li class="level1"><a href="#conseils_d_ameliorations_specifiques_a_certains_disques_electroniques">Conseils d&#039;améliorations spécifiques à certains disques électroniques</a>
<ul class="nav toc">
<li class="level2"><a href="#planification_des_entreessorties">Planification des entrées/sorties</a></li>
<li class="level2"><a href="#desactiver_completement_l_archivage">Désactiver complètement l&#039;archivage</a></li>
<li class="level2"><a href="#desactiver_ureadhead">Désactiver &quot;ureadhead&quot;</a></li>
</ul></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/materiel" class="wikilink1" title="materiel" rel="tag">matériel</a>,
	<a href="/optimisation" class="wikilink1" title="optimisation" rel="tag">optimisation</a>
</span></div>
<hr />
<div class="notetip">En l&#039;an 2020, on installe le logiciel ubuntu dans une <strong>seule</strong> partition du SSD sans se compliquer la vie. Si on a la chance de disposer d&#039;un disque disque dur, on l&#039;utilise pour y mettre ses données personnelles en utilisant une technique de <a href="http://mezigoo.free.fr/ps/ps-com/data.html" class="urlextern" title="http://mezigoo.free.fr/ps/ps-com/data.html" rel="nofollow">redirection</a>. 
</div>
<h1 class="sectionedit1 page-header" id="presentation_des_disques_ssd">Présentation des disques SSD</h1>
<div class="level1">

<p>
<strong><em>Si vous souhaitez seulement savoir si votre système est configuré pour les disques durs SSD, rendez-vous directement sur <a href="#la_commande_trimactivation_et_utilisation" title="ssd_solid_state_drive ↵" class="wikilink1">cette section de page</a>.</em></strong>
</p>

<p>
Les <strong><a href="https://fr.wikipedia.org/wiki/Solid-state_drive" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Solid-state_drive">disques électroniques</a></strong> sont constitués de mémoire flash, ils sont plus rapides et plus résistants aux chocs que leurs équivalents à plateaux (les HDD), mais leurs cycles d&#039;écriture sont limités.
</p>

<p>
Afin d&#039;allonger leur durée de vie, vous pouvez utiliser au mieux Ubuntu pour l&#039;usage d&#039;un disque électronique.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Présentation des disques SSD] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="presentation_des_disques_ssd" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="360-957" /><button type="submit" title="Présentation des disques SSD" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="presentation_des_disques_electroniques">Présentation des disques électroniques</h2>
<div class="level2">

<p>
Les disques durs traditionnels sont constitués de plateaux magnétiques et d&#039;une tête de lecture mobile alors que les disques électroniques sont équipés de mémoire Flash. L&#039;appellation « disque électronique » ou « disque SSD » est d&#039;ailleurs un abus de langage puisqu&#039;il n&#039;y a pas de disque.
</p>
<div class="noteimportant">Note au rédacteur : si c&#039;est un abus de langage pourquoi l&#039;utiliser pour cette page de la documentation ? Le terme disque électronique n&#039;est pas courant, il serait mieux de le remplacer par SSD ?

</div>
<p>
Les avantages de cette technique sont :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> absence d&#039;usure mécanique car aucune pièce n&#039;est en mouvement, et donc un silence total et une faible fragilité mécanique ;</div>
</li>
<li class="level1"><div class="li"> absence d&#039;effets de la fragmentation, étant donné qu&#039;il n&#039;y a plus besoin de déplacer de tête de lecture ;</div>
</li>
<li class="level1 node"><div class="li"> des débits largement meilleurs :</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> pour les disques durs, 220 Mo/s maximum en lecture et écriture ;</div>
</li>
<li class="level2"><div class="li"> pour les disques électroniques Sata3, jusqu&#039;à 504 Mo/s en lecture et écriture pour le matériel grand public, fin 2014 ;</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> temps d&#039;accès nettement inférieurs à ceux des disques durs :</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> de 5 à 15 ms pour des disques durs ;</div>
</li>
<li class="level2"><div class="li"> 0,1 ms en général pour les disques électroniques ;</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> consommation légèrement plus faible que les disques durs (tend à se resserrer de plus en plus).</div>
</li>
</ul>

<p>
Néanmoins, les disques électroniques n&#039;ont pas que des avantages, et on peut leur reprocher :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> des capacités de stockage plus faibles que celles des disques durs ;</div>
</li>
<li class="level1"><div class="li"> un prix largement plus élevé que les disques durs, même si on est passé à moins d&#039;1 €/Go (contre 5 ¢/Go pour les disques durs) ;</div>
</li>
<li class="level1"><div class="li"> une technologie qui a moins fait ses preuves par rapports aux disques durs qui sont massivement produits et utilisés depuis les années 80 (nombre de disques OCZ notamment ont eu de gros problèmes de fiabilité à long terme non liés à l&#039;usure) ;</div>
</li>
<li class="level1"><div class="li"> une durée de vie limitée par le nombre de cycles lecture/écriture auxquels sont soumises les puces mémoire.<br/>
<strong>C&#039;est ce problème que nous allons réduire au maximum en utilisant au mieux Ubuntu.</strong></div>
</li>
</ul>

<p>
<strong>certains indiquent cependant que 
&quot;un SSD, ce n&#039;est pas plus « fragile » qu&#039;un disque mécanique. Certaines études tendraient même à montrer l&#039;inverse.&quot; </strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Présentation des disques électroniques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="presentation_des_disques_electroniques" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="958-3283" /><button type="submit" title="Présentation des disques électroniques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="vocabulaire_de_la_technique_des_disques_electroniques">Vocabulaire de la technique des disques électroniques</h3>
<div class="level3">

</div>

<h4 id="ramasse-miettes_garbage_collector">Ramasse-miettes (&quot;Garbage collector&quot;)</h4>
<div class="level4">

<p>
Ce mécanisme permet de réorganiser les données sur le disque, pour permettre de conserver de bonnes performances après des écritures aléatoires. <br/>

La plupart des disques l&#039;intègrent aujourd&#039;hui.
</p>

</div>

<h4 id="egalisation_de_l_usure_wear_levelling">Égalisation de l&#039;usure (&quot;Wear levelling&quot;)</h4>
<div class="level4">

<p>
C&#039;est un procédé utilisé par les contrôleurs de disques SSD. Elle consiste à répartir l&#039;usure des puces mémoires en écrivant le moins souvent possible dans les même cellules, et en profitant ainsi au maximum du nombre de cycles de lecture-écriture de chacune des cellules. De ce fait, avec un bon algorithme d&#039;égalisation de l&#039;usure, on arrive à faire en sorte qu&#039;un disque électronique ait une durée de vie de l&#039;ordre de plusieurs années.
</p>

<p>
→ <a href="https://fr.wikipedia.org/wiki/Wear_levelling" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Wear_levelling">Plus d&#039;informations sur Wikipédia</a>
</p>

<p>
La commande TRIM que nous verrons plus tard, permet d&#039;augmenter la quantité de cellules considérés comme vides par le disque électronique et donc d&#039;améliorer cette opération. Si la prise en charge de la commande TRIM est active : plus le disque électronique contient d&#039;espace vide, plus l&#039;usure sera gérée de manière optimale.
</p>

</div>

<h4 id="alignement_des_partitions">Alignement des partitions</h4>
<div class="level4">

<p>
L&#039;alignement des partitions consiste à faire coïncider le début des partitions avec les blocs physiques du disque. Peu important sur un disque dur (sauf les 4K), il améliore les performances et la durée de vie sur les disques électroniques.<br/>

</p>

<p>
→ § <a href="#aligner_les_partitions" title="ssd_solid_state_drive ↵" class="wikilink1">Aligner les partitions</a>
</p>

<p>
Cette opération est maintenant faite automatiquement à l&#039;installation d&#039;Ubuntu si vous choisissez de refaire la table des partitions.
</p>

</div>

<h4 id="la_commande_trim">La commande TRIM</h4>
<div class="level4">

<p>
Les disques électroniques écrivent par blocs de 4 Kio, mais effacent par blocs de 128 ou 512 Kio, ce qui impose alors de nombreuses lectures ou de nombreux déplacements pour effacer des blocs, et donc une baisse énorme des performances du disque.
La commande TRIM tend à réduire, voire à supprimer, cette baisse de performance grâce au travail en commun du système d&#039;exploitation et du disque électronique.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Tous les disques actuels le prennent en charge.</div>
</li>
<li class="level1"><div class="li"> Presque tous les SSD <abbr title="Serial Advanced Technology Attachment">SATA</abbr> le prennent en charge, même les plus anciens.</div>
</li>
<li class="level1"><div class="li"> Linux le prend en charge totalement à partir du noyau 2.6.33 avec ext4, Btrfs, FAT, GFS2, XFS, etc.</div>
</li>
<li class="level1"><div class="li"> Pour les autres cas (ext3, noyau antérieur au 2.6.33), il faudra le faire manuellement (seul Ubuntu 10.04 LTS est encore maintenue pour les serveurs (plus pour les ordinateurs de bureau) et correspond à ce cas).</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Vocabulaire de la technique des disques électroniques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="vocabulaire_de_la_technique_des_disques_electroniques" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="3284-5864" /><button type="submit" title="Vocabulaire de la technique des disques électroniques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="la_commande_trimactivation_et_utilisation">La commande TRIM : activation et utilisation</h2>
<div class="level2">
<div class="noteimportant">La commande TRIM à la volée est <strong>activées-trim-ssd-drives</strong>

</div>
<p>
<strong>Contrairement à ce qui est souvent dit, tous les SSD sont &quot;TRIMé&quot; par défaut à partir de 14.04 LTS.</strong>
Seul quelques rares SSD ont été blacklistés à cause de bugs de firmware les concernant (On peut souvent lire que seuls les Intel et Samsung ont le TRIM à la volée actif par défaut, ce qui n&#039;était le cas que pour une version de développement d&#039;Ubuntu 14.04, la restriction a été retirée après des tests supplémentaires dans la version finale).
</p>

<p>
Vous pouvez vérifier la prise en charge de la commande TRIM par votre SSD par la commande suivante où vous remplacez <strong>/dev/sda</strong> par l&#039;identifiant de votre disque :
</p>
<pre class="code bash"><span class="kw2">sudo</span> hdparm <span class="re5">-I</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda <span class="sy0">|</span> <span class="kw2">grep</span> TRIM</pre>

<p>
Une sortie vide indique que la commande TRIM n&#039;est <strong>PAS</strong> prise en charge par votre disque électronique.
Sinon, une ligne doit clairement indiquer la prise en charge de la commande TRIM.
</p>

<p>
Exemple en cas de succès :
</p>
<pre class="file">	   *	Data Set Management TRIM supported (limit unknown)</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[La commande TRIM : activation et utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_commande_trimactivation_et_utilisation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="5865-6993" /><button type="submit" title="La commande TRIM : activation et utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="la_commande_trim_a_la_volee_du_cote_kernel">La commande TRIM à la volée du côté kernel</h3>
<div class="level3">

<p>
Notez encore une fois que <strong>depuis Ubuntu 14.04 LTS, la commande TRIM est activée par défaut</strong><sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup>. L&#039;usage de la méthode décrite ici n&#039;est pas recommandée actuellement par Ubuntu.
</p>

<p>
Il suffit d&#039;ajouter l&#039;option <code>discard</code> dans les lignes correspondant aux partitions Ext4 sur le disque électronique dans le fichier /etc/fstab :
</p>
<pre class="code bash">gksu gedit <span class="sy0">/</span>etc<span class="sy0">/</span>fstab</pre>

<p>
Et :
</p>
<pre class="file"># /dev/sda1
UUID=f0d9c48e-00c4-4225-ab21-1c5a42194bc8 /               ext4    noatime,errors=remount-ro 0       1</pre>

<p>
devient :
</p>
<pre class="file"># /dev/sda1
UUID=f0d9c48e-00c4-4225-ab21-1c5a42194bc8 /               ext4    noatime,discard,errors=remount-ro 0       1</pre>

<p>
Dès le prochain démarrage, la commande TRIM sera activée de façon entièrement transparente.
</p>
<div class="notetip">Il semble qu&#039;une meilleure méthode, plus véloce lors d&#039;effacement de nombreux petits fichiers, soit de lancer un script une fois par jour pour la commande TRIM (fstrim+tâche cron). Voir l&#039;article <a href="http://www.webupd8.org/2013/01/enable-trim-on-ssd-solid-state-drives.html" class="urlextern" title="http://www.webupd8.org/2013/01/enable-trim-on-ssd-solid-state-drives.html" rel="nofollow">Enable TRIM On SSD (Solid-State Drives) In Ubuntu For Better Performance - Web UPD8</a> (en anglais).
<p>
Justification : Si le disque électronique est constamment réécrit, il peut rapidement venir à bout de blocs vierges et donc les performances reviendront au même à ce qu&#039;elles seraient si la commande TRIM n&#039;était pas exécutée avec la méthode du script …  <br/>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> : C&#039;est pourtant la méthode qui semble actuellement implémentée et conseillée par ubuntu et d&#039;autres distributions (modulo le fait que le cron est hebdomadaire).
</p>

</div>
</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[La commande TRIM à la volée du côté kernel] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_commande_trim_a_la_volee_du_cote_kernel" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="6994-8729" /><button type="submit" title="La commande TRIM à la volée du côté kernel" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="activer_le_trim_avec_fstrim">Activer le TRIM avec fstrim</h3>
<div class="level3">

<p>
Il n&#039;est pas recommandé le montage des fichiers systèmes avec l&#039;option &quot;<strong>discard</strong>&quot;, car cela se traduira probablement par une baisse des performances en utilisation normale. Cependant, vous pouvez utiliser TRIM en exécutant la commande <strong>fstrim</strong> occasionnellement ou de créer votre propre tâche cron qui exécute fstrim via un calendrier.
</p>

<p>
Pour activer le TRIM de votre SSD sur Ubuntu, il suffit d&#039;ouvrir un terminal et exécutez la commande suivante :
</p>
<pre class="code bash"><span class="kw2">sudo</span> fstrim <span class="re5">-v</span> <span class="sy0">/</span> </pre>

<p>
Vous pouvez exécuter la commande ci-dessus de temps en temps pour éviter la dégradation des performances sur les SSD.
</p>

<p>
<strong>Combien de fois vous devez l’exécuter ?</strong>
</p>

<p>
Cela dépend de combien de fois des fichiers sont supprimés à partir de votre SSD. Vous verrez une erreur si vous essayez d&#039;exécuter la commande avec un lecteur qui ne prend pas en charge TRIM.
</p>

<p>
Si vous souhaitez exécuter TRIM régulièrement, vous pouvez simplement créer une tâche cron qui exécute la commande fstrim pour vous.
Voilà comment faire une tâche cron qui le fera automatiquement
d&#039;abord, exécutez la commande suivante pour ouvrir l&#039;éditeur de texte de <a href="/nano" class="wikilink1" title="nano">nano</a> avec les permissions root:
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">nano</span> <span class="sy0">/</span>etc<span class="sy0">/</span>cron.daily<span class="sy0">/</span>fstrim </pre>

<p>
Saisir ou copier et coller le code suivant dans le fichier :
</p>
<pre class="file">#!/bin/sh
fstrim / </pre>

<p>
Enregistrez le fichier en appuyant sur <strong>Ctrl + O</strong> et appuyez sur <strong>Entrée</strong> pour confirmer. Appuyez sur <strong>Ctrl + X</strong> pour fermer nano après avoir sauvegardé le fichier.
</p>

<p>
Dernièrement, exécutez la commande suivante pour rendre le script exécutable :
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chmod</span> +x <span class="sy0">/</span>etc<span class="sy0">/</span>cron.daily<span class="sy0">/</span>fstrim </pre>

<p>
Ubuntu va maintenant lancer <strong>fstrim</strong> via un calendrier, comme il le fait pour d&#039;autres tâches de maintenance du système.
</p>

<p>
<a href="http://www.howtogeek.com/176978/ubuntu-doesnt-trim-ssds-by-default-why-not-and-how-to-enable-it-yourself/" class="urlextern" title="http://www.howtogeek.com/176978/ubuntu-doesnt-trim-ssds-by-default-why-not-and-how-to-enable-it-yourself/" rel="nofollow">Source originale de cette procédure</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Activer le TRIM avec fstrim] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="activer_le_trim_avec_fstrim" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="8730-10696" /><button type="submit" title="Activer le TRIM avec fstrim" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="la_commande_trim_manuelle">La commande TRIM manuelle</h3>
<div class="level3">

<p>
Cette méthode n&#039;est nécessaire que dans le cas d&#039;une partition principale Ext3 <strong>ou</strong> d&#039;un noyau inférieur à 2.6.33.
Il est conseillé d&#039;exécuter la commande TRIM manuellement environ une fois par mois pour une utilisation normale du disque électronique.
On ne peut pas lancer la commande TRIM manuellement sur une partition utilisée. Il faudra donc amorcer le système d&#039;une clef <abbr title="Universal Serial Bus">USB</abbr> autonome ou d&#039;un disque dur externe.
</p>

<p>
Nous allons utiliser le script <strong>wiper.sh</strong> qui est fourni avec le paquet <strong>hdparm</strong>. Il faut la version 9.28 ou une plus récente de hdparm. On peut vérifier la version dans un terminal :
</p>
<pre class="code bash">hdparm <span class="re5">-V</span></pre>
<div class="notetip">Il est fortement conseillé d&#039;utiliser les sources les plus récentes de hdparm (pour moins de risques d&#039;incompatibilité…) ; ce qui implique de télécharger et de recompiler les sources du paquet hdparm. Vous serez guidés :<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Téléchargez la <a href="http://sourceforge.net/projects/hdparm/files/latest/download" class="urlextern" title="http://sourceforge.net/projects/hdparm/files/latest/download" rel="nofollow">dernière version de hdparm</a></div>
</li>
<li class="level1"><div class="li"> Décompressez l&#039;archive et copiez le dossier à la racine de la clef <abbr title="Universal Serial Bus">USB</abbr> autonome</div>
</li>
<li class="level1"><div class="li"> Amorcez le système de la clé <abbr title="Universal Serial Bus">USB</abbr> en mode autonome, sans installer Ubuntu.</div>
</li>
<li class="level1"><div class="li"> Ouvrez un terminal</div>
</li>
<li class="level1"><div class="li"> Allez dans le dossier contenant hdparm (normalement, <code>/cdrom/hdparm-9.xx</code>)en lançant : <code>cd /cdrom/hdparm-9.*</code></div>
</li>
<li class="level1"><div class="li"> Lancez, l&#039;une après l&#039;autre, les commandes : <pre class="code bash"><span class="kw2">make</span> 
<span class="kw2">sudo</span> <span class="kw2">make</span> <span class="kw2">install</span></pre>
</div>
</li>
</ul>

</div><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Allez dans le dossier <code>wiper</code> :  <pre class="code bash"><span class="kw3">cd</span> wiper<span class="st_h">''</span></pre>
</div>
</li>
<li class="level1"><div class="li"> Exécuter une simulation de la commande TRIM sur votre partition : <pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">bash</span> wiper.sh <span class="sy0">/</span>dev<span class="sy0">/</span>sda1</pre>
</div>
</li>
<li class="level1"><div class="li"> Si la simulation se passe bien, vous pouvez lancer réellement la commande TRIM en lançant : <pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">bash</span> wiper.sh <span class="re5">--commit</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda1</pre>
</div>
</li>
</ul>

<p>
Si tout se passe bien, vous devriez pouvoir réamorcer le système de votre disque électronique. <br/>

Il faut malheureusement recompiler et réinstaller hdparm à chaque démarrage sur la clef <abbr title="Universal Serial Bus">USB</abbr> (à moins d&#039;avoir une clef <abbr title="Universal Serial Bus">USB</abbr> en mode persistant).
</p>

<p>
→ <a href="/hdparm" class="wikilink1" title="hdparm">Plus d&#039;informations sur l&#039;utilisation de « hdparm »</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[La commande TRIM manuelle] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_commande_trim_manuelle" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="10697-12810" /><button type="submit" title="La commande TRIM manuelle" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="la_commande_trim_d_un_volume_ntfs">La commande TRIM d&#039;un volume NTFS</h3>
<div class="level3">

<p>
Grâce au même script <code>wiper.sh</code> que précédemment, nous pouvons exécuter la commande TRIM sur une partition NTFS. C&#039;est très utile dans le cas d&#039;un double amorçage <abbr title="GNU&#039;s Not Unix">GNU</abbr>-Linux/Windows (XP ou Vista) qui ne prennent pas en charge la commande TRIM.
Il faut que le volume NTFS ne soit pas en cours d&#039;utilisation (il doit être démonté).
</p>

<p>
Le script <code>wiper.sh</code> se trouve normalement dans une archive, dans le dossier /usr/share/doc/hdparm/wiper/. Nous allons donc lancer :
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>doc<span class="sy0">/</span>hdparm<span class="sy0">/</span>wiper<span class="sy0">/</span>
<span class="kw2">sudo</span> <span class="kw2">gzip</span> <span class="re5">-d</span> wiper.sh.gz
<span class="kw2">sudo</span> <span class="kw2">fdisk</span> <span class="re5">-l</span> <span class="co0"># Pour repérer votre partition NTFS</span>
<span class="kw2">sudo</span> <span class="kw2">umount</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sdxx <span class="co0"># Remplacez /dev/sdxx par l'identifiant de votre partition NTFS, pour la démonter</span>
<span class="kw2">sudo</span> <span class="kw2">bash</span> wiper.sh <span class="sy0">/</span>dev<span class="sy0">/</span>sdxx <span class="co0"># Simulation de la commande TRIM</span></pre>

<p>
Si tout se passe bien pendant la simulation, vous pouvez exécuter réellement la commande TRIM :
</p>
<pre class="code bash"><span class="kw2">sudo</span> wiper.sh <span class="sy0">/</span>dev<span class="sy0">/</span>sdxx <span class="re5">--commit</span></pre>
<div class="notetip">Message si la partition NTFS n&#039;a pas été démontée :<pre class="code">       ## &quot;This is where we finally discover whether the filesystem actually
       ## supports --fallocate or not.  Some folks will be disappointed here.&quot;</pre>

</div>
</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[La commande TRIM d&#039;un volume NTFS] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_commande_trim_d_un_volume_ntfs" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="12811-14016" /><button type="submit" title="La commande TRIM d&#039;un volume NTFS" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="choix_du_systeme_de_fichier">Choix du système de fichier</h2>
<div class="level2">

<p>
Le choix du système de fichiers pour un disque électronique est problématique. En effet, comme on l&#039;a dit précédemment, on cherche à éviter au maximum les écritures inutiles sur un disque électronique pour en préserver au maximum la durée de vie.
Par la même occasion, les systèmes de fichiers modernes sont tous <em>journalisés</em>, c&#039;est-à-dire qu&#039;ils stockent de nombreuses informations sur les accès aux fichiers, ce qui génère de nombreuses écritures mais garantit également dans une certaine mesure la sécurité des données en cas de plantage du système. On se trouve donc devant un conflit d&#039;intérêt.
</p>

<p>
Le <a href="/btrfs" class="wikilink1" title="btrfs">BTRFS</a> est certes le meilleur système de fichiers, mais étant encore « en développement », il est à proscrire pour les non avertis (malgré tout sa stabilité/fiabilité est devenue tout à fait potable à partir de Ubuntu 13.04).
</p>

<p>
Il faut malgré tout préciser que les disques électroniques ont été conçus pour être utilisés sur des systèmes d&#039;exploitations modernes, utilisant tous des systèmes de fichiers journalisés, comme NTFS sous Windows, HFS+ sous Mac <abbr title="Operating System">OS</abbr> X, et Ext4 sous <abbr title="GNU&#039;s Not Unix">GNU</abbr>-Linux.
On peut donc clairement modérer les répercussions négatives de ces systèmes de fichiers sur l&#039;usure d&#039;un disque électronique.
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Choix du système de fichier] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="choix_du_systeme_de_fichier" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="14017-15335" /><button type="submit" title="Choix du système de fichier" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="utilisation_d_un_systeme_de_fichiers_journalise">Utilisation d&#039;un système de fichiers journalisé</h3>
<div class="level3">

<p>
Le principal intérêt des systèmes de fichiers journalisés est de garantir une bien plus grande sécurité des données en cas de plantage du système ou d&#039;extinction brutale de la machine. La journalisation entrant en conflit avec la durée de vie des disques électroniques, il est difficile de faire un choix.
</p>

<p>
Néanmoins, ce qui ressort des discussions sur la toile et des déclarations des fabricants autant que des sites spécialisés est que l&#039;égalisation de l&#039;usure permet de s&#039;affranchir de ce problème, en gérant directement au niveau du contrôleur (un petit processeur en interne dans le disque électronique) l&#039;usure des puces mémoire. L&#039;utilisation des systèmes de fichiers Ext4 ou ReiserFS ne devrait donc poser aucun problème sur les disques électroniques assez récents (à partir de 2016 ???), qui incorporent une bonne gestion de l&#039;égalisation de l&#039;usure.
</p>

<p>
Pour finir, on soulignera que seul Ext4 et <a href="/btrfs" class="wikilink1" title="btrfs">BTRFS</a> prennent en charge la commande TRIM à la volée pour les disques électroniques qui le permettent (voir le paragraphe sur la commande TRIM).
Sur les disques électroniques actuels, la prise en charge de la commande TRIM a une conséquence bien plus bénéfique sur leur durée de vie que l’absence de journalisation.
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Utilisation d&#039;un système de fichiers journalisé] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_d_un_systeme_de_fichiers_journalise" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="15336-16657" /><button type="submit" title="Utilisation d&#039;un système de fichiers journalisé" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="utilisation_d_un_systeme_de_fichier_non_journalise">Utilisation d&#039;un système de fichier non journalisé</h3>
<div class="level3">

<p>
Désactiver la journalisation permet de ne pas générer d&#039;écritures en dehors de l&#039;écriture brute de données. Sans journal, un système de fichiers n&#039;est plus capable de savoir quand des données ont été interrompues en pleine écriture. Le tout peut créer des défections en cas de coupure de courant, etc.
</p>

<p>
Le journal est une petite partie du système de fichier écrite à chaque changement du système de fichier. Ce journal est situé invariablement au même endroit du disque dur. Cette dernière caractéristique fait que l&#039;on peut être préoccupé par l&#039;usure de cette partie du disque électronique si votre disque électronique a une mauvaise gestion de l&#039;égalisation de l&#039;usure.
</p>

<p>
Si vous le voulez vous pouvez donc désactiver la journalisation de Ext4.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Pour savoir si une partition Ext4 est journalisée, il faut regarder si le drapeau <strong>has_journal</strong> est présent avec la commande suivante en remplaçant <strong>sda1</strong> par l&#039;identifiant de votre partition (sda2, hdb1, …) : <pre class="code bash"><span class="kw2">sudo</span> tune2fs <span class="re5">-l</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda1 <span class="sy0">|</span> <span class="kw2">grep</span> feature
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize</pre>
</div>
</li>
<li class="level1"><div class="li"> Pour passer d&#039;une partition journalisée à une partition non journalisée, il suffit de désactiver la journalisation, puis lancer l&#039;utilitaire de vérification du système de fichier Ext4 qui se chargera de supprimer le journal: <pre class="code bash"><span class="kw2">sudo</span> tune2fs -O^has_journal <span class="sy0">/</span>dev<span class="sy0">/</span>sda1
<span class="kw2">sudo</span> e2fsck <span class="re5">-f</span> <span class="re5">-v</span> <span class="re5">-C0</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda1</pre>
</div>
</li>
</ul>

<p>
(Si votre partition est une partition système, le procédé devra être fait à partir d&#039;un cédérom ou d&#039;une clef <abbr title="Universal Serial Bus">USB</abbr> autonome par exemple. Au cours de la manipulation en live il faut démonter le disque concerné).
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Utilisation d&#039;un système de fichier non journalisé] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_d_un_systeme_de_fichier_non_journalise" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="16658-18485" /><button type="submit" title="Utilisation d&#039;un système de fichier non journalisé" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit12 page-header" id="minimiser_l_usage_du_disque_electronique">Minimiser l&#039;usage du disque électronique</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Minimiser l&#039;usage du disque électronique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="minimiser_l_usage_du_disque_electronique" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="18486-18539" /><button type="submit" title="Minimiser l&#039;usage du disque électronique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="placer_les_dossiers_a_contenu_volatile_sur_un_disque_mecanique">Placer les dossiers à contenu volatile sur un disque mécanique</h3>
<div class="level3">

<p>
Les systèmes POSIX ont l&#039;intérêt d&#039;identifier clairement <strong>/var</strong> comme le dossier système dont les fichiers sont modifiés le plus fréquemment.
Ainsi, si l&#039;on monte <strong>/var</strong> et <strong>/home</strong> sur les partitions d&#039;un disque mécanique, l&#039;usure du SSD sur lequel est monté la racine du système est grandement réduite. Par ailleurs, si le disque mécanique ne contient que <strong>/var</strong> et <strong>/home</strong>, il peut tourner à faible vitesse (&lt; 6000 tours/minute) pour réduire la consommation, le bruit et l&#039;usure mécanique.
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Placer les dossiers à contenu volatile sur un disque mécanique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="placer_les_dossiers_a_contenu_volatile_sur_un_disque_mecanique" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="18540-19130" /><button type="submit" title="Placer les dossiers à contenu volatile sur un disque mécanique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="placer_les_fichiers_temporaires_en_memoire_vive">Placer les fichiers temporaires en mémoire vive</h3>
<div class="level3">

<p>
Le système utilise un certain nombre de fichiers temporaires, qu&#039;il n&#039;est pas nécessaire de conserver d&#039;un démarrage à l&#039;autre. Il est ainsi possible de les placer dans la mémoire vive (qui est vidée à l&#039;arrêt de l&#039;ordinateur) au lieu de les avoir sur le disque électronique.
</p>

</div>

<h4 id="pourtmp">Pour « /tmp »</h4>
<div class="level4">

<p>
Pour mettre les fichiers temporaires en mémoire vive, <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">ouvrez le ficher</a> <strong>/etc/fstab</strong> avec les droits d&#039;administration et ajoutez-y la ligne suivante (ici, pour une taille maximale de 1 Gio) :
</p>
<pre class="code file fstab">tmpfs      /tmp            tmpfs        defaults,size=1g           0    0</pre>

</div>

<h4 id="mettrevarlogen_memoire_vive">Mettre « /var/log/ » en mémoire vive</h4>
<div class="level4">

<p>
Sous <abbr title="GNU&#039;s Not Unix">GNU</abbr>-Linux, il y a une quantité impressionnante de fichiers <strong>logs</strong> (journaux d&#039;activité) générés par le système, les démons, des processus divers et des applications.
</p>

<p>
Tous ces fichiers n&#039;ont aucune incidence sur le système ou les applications – ce ne sont que des rapports d&#039;activité de processus internes – et de surcroît ils n&#039;ont pas d&#039;intérêt particulier pour l&#039;utilisateur lambda.
</p>

<p>
<strong>On peut monter ce dossier en mémoire vive au démarrage.</strong>
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Avantage : diminution considérable d&#039;écritures inutiles faites en continu sur le disque électronique</div>
</li>
<li class="level1"><div class="li"> Inconvénient : tous les journaux seront perdus à chaque redémarrage (plus d&#039;historique)</div>
</li>
</ul>

<p>
Il suffit d&#039;effectuer (presque) la même chose que pour <code>/tmp</code>, en ajoutant dans /etc/fstab la ligne :
</p>
<pre class="file">tmpfs /var/log tmpfs defaults,nosuid,nodev,noatime,mode=0755,size=5% 0 0</pre>

<p>
Après un redémarrage, tous ces fichiers de journalisation seront écrits dans un dossier temporaire en mémoire vive et perdus à l&#039;arrêt du système.
</p>
<div class="notetip">À noter : les journaux de la session <em class="u">en cours</em> seront toujours disponibles ainsi que la commande terminal <strong>dmesg</strong> et l&#039;application « <a href="/gnome-system-log" class="wikilink2" title="gnome-system-log" rel="nofollow">Visionneur de journaux système</a> ».

</div><div class="noteimportant">Vu l&#039;utilité <strong>considérable</strong>, en dépannage, des logs des sessions <em class="u">précédentes</em>, mettre /var/log en mémoire vive est un choix très <strong>contestable</strong>, sinon aberrant.<br/>
À chacun de choisir entre <strong>léger</strong> gain de rapidité et <strong>fiabilité</strong>.<br/>
<br/>
Nota : on peut aussi mettre /var/log sur le <em class="u">disque classique</em> (ou, à défaut car c&#039;est un peu moins rapide et moins durable, sur une <em class="u">carte mémoire</em>).

</div>
</div>

<h4 id="cache_des_mises_a_jour_et_paquets_telecharges">Cache des mises à jour et paquets téléchargés</h4>
<div class="level4">
<div class="notewarning">Ceci peut bloquer les mises à jour du système si vous êtes sous la 18.04 et ultérieur
</div>
<p>
Même technique que précédemment, mais il est toutefois conseillé d&#039;être équipé d&#039;un minimum de 6 Gio de mémoire vive pour cette opération.
</p>
<pre class="code file fstab">tmpfs    /var/cache/apt/archives    tmpfs    defaults,size=4g    0    0</pre>

<p>
Avant le prochain redémarrage, il faut également vider le cache d&#039;apt, via cette commande :
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">apt-get clean</span></pre>

<p>
Cette opération a cependant un défaut : en cas d&#039;impossibilité pour votre machine, d&#039;accéder à l&#039;Internet, vous ne pourrez pas installer les paquets qui seraient restés dans le cache lors d&#039;un redémarrage.
Par contre, sachant que tous les fichiers sont téléchargés en mémoire vive, votre système pourra installer des logiciels et se mettre à jour bien plus vite, tant par le débit en lecture de la mémoire vive, que le fait de soulager le disque électronique en lecture, permettant ainsi un débit optimal en écriture.
Enfin évidemment, vu la fréquence d&#039;apparitions de mises à jour, autant économiser la durée de vie du disque électronique au maximum.
</p>

</div>

<h4 id="autres_dossiers_systeme">Autres dossiers système</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Les dossiers /var/run et /var/lock sont maintenant des liens pointant vers /run lui-même monté en tmpfs par le système au démarrage, les mettre dans le fstab est donc redondant.</div>
</li>
<li class="level1"><div class="li"> Le passage de /var/log en tmpfs <strong>pose des problèmes</strong> avec apache, qui a besoin que le dossier /var/log/apache2 soit créé avant de démarrer. Pour une solution à ce problème voir : <a href="http://weits.blogspot.fr/2012/03/laptop-ssd-tmpfs-and-apache.html" class="urlextern" title="http://weits.blogspot.fr/2012/03/laptop-ssd-tmpfs-and-apache.html" rel="nofollow">cette page</a></div>
</li>
<li class="level1"><div class="li"> Apparemment, même constat avec Samba que Apache</div>
</li>
<li class="level1"><div class="li"> Apparemment, même constat avec mysql que Apache</div>
</li>
<li class="level1"><div class="li"> /var/tmp ne doit <strong>absolument pas</strong> se trouver dans tmpfs, comme il est indiqué <a href="http://ubuntuone.com/6KWd2jN40GRqdVkVpQFOv0" class="urlextern" title="http://ubuntuone.com/6KWd2jN40GRqdVkVpQFOv0" rel="nofollow">ici</a></div>
</li>
</ul>

<p>
Vous pouvez ajouter autant de dossiers que vous souhaitez en mémoire vive. Contrairement à Windows et ses disques virtuels réclamant immédiatement la mémoire allouée sur la mémoire vive, ici son utilisation est dynamique : ne sera donc consommé que ce qui est utilisé par les dossiers mis en mémoire vive.
</p>

</div>

<h4 id="le_cache_personnel">Le cache personnel</h4>
<div class="level4">
<div class="notewarning">Attention, la procédure suivante est susceptible de casser votre session <strong>Unity</strong>. Unity n&#039;a pas l&#039;air d&#039;apprécier qu&#039;on lui ôte le dossier /home/nom-d&#039;utilisateur/.cache.

</div>
<p>
Même technique que pour ci-dessus, il suffit de remplacer le chemin /tmp par /home/nomd&#039;utilisateur/.cache, ce qui donne :
</p>
<pre class="code file fstab">tmpfs    /home/nomd'utilisateur/.cache    tmpfs    defaults,size=1g    0    0</pre>

<p>
Vu les temps d&#039;accès des disques électroniques, il est inutile de conserver les caches d&#039;applications indéfiniment.
</p>
<div class="notewarning">La procédure ci-dessus supprime aussi le cache de <a href="/shotwell" class="wikilink1" title="shotwell">Shotwell</a>, obligeant celui-ci à reconstruire toute la base de vignettes de prévisualisation à chaque démarrage.

</div>
<p>
Avant l&#039;opération, pensez à supprimer le contenu du dossier « .cache » de votre dossier personnel.
</p>

</div>

<h4 id="modifier_le_cache_de_firefox">Modifier le cache de Firefox</h4>
<div class="level4">

<p>
Pour que Firefox place son cache dans « /tmp » (qui est en mémoire vive) :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> allez à la page <code>about:config</code> dans Firefox ;</div>
</li>
<li class="level1"><div class="li"> clic-droit → <em>Créez une nouvelle chaîne de caractères</em>, que vous nommerez <code>browser.cache.disk.parent_directory</code> et entrez dans la case <code>/tmp</code>.</div>
</li>
</ul>

<p>
Autre option : désactiver le cache de Firefox.
</p>

</div>

<h4 id="interdire_la_compression_des_fichiers_de_trace">Interdire la compression des fichiers de trace</h4>
<div class="level4">

<p>
Si le repertoire <strong>/var</strong> continue d&#039;être stocké dans le SSD, il peut être intéressant d&#039;interdire la compression des vieux fichiers de trace ou leur conservation en durée exagérée voir pour cela la page <a href="/logrotate#la_compression" class="wikilink1" title="logrotate">logrotate</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Placer les fichiers temporaires en mémoire vive] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="placer_les_fichiers_temporaires_en_memoire_vive" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="19131-25402" /><button type="submit" title="Placer les fichiers temporaires en mémoire vive" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="la_partition_d_echange_swap">La partition d&#039;échange (SWAP)</h3>
<div class="level3">

<p>
Il est possible de ne pas créer de partition d&#039;échange durant l&#039;installation d&#039;Ubuntu en définissant les partitions manuellement (avancé). Cela permet de forcer l&#039;utilisation de la mémoire vive et d&#039;économiser l&#039;espace qu&#039;aurait pris cette partition sur le disque dur !
Mais cette opération est hautement déconseillée !
</p>

<p>
La partition d&#039;échange sert en effet aussi pour bénéficier de l&#039;hibernation (mise en veille prolongée) et aussi permet de soulager la mémoire vive en cas de pénurie, sans ça l&#039;ordinateur figerait purement et simplement pendant un certain nombre de secondes et finira par fermer aléatoirement un programme pour permettre de continuer à utiliser l&#039;ordinateur dans de bonnes conditions.
</p>

<p>
Pour ne pas utiliser la partition d&#039;échange, il existe deux méthodes :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Activer <a href="/zram" class="wikilink1" title="zram">zRAM</a>, qui est un module du noyau qui compresse la mémoire vive au lieu de la déplacer dans la partition d&#039;échange en cas de manque de mémoire vive. La partition d&#039;échange ne servant que si la mémoire vive est entièrement compressée (pour ce faire il suffit d&#039;<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installer le paquet</a> <strong><a href="apt://zram-config" class="interwiki iw_apt" title="apt://zram-config">zram-config</a></strong>).</div>
</li>
<li class="level1"><div class="li"> Diminuer au minimum la priorité de la partition d&#039;échange <a href="/swap#regler_le_declenchement_du_swap" class="wikilink1" title="swap">Swap</a>. Ce faisant celle-ci ne sera utilisée qu&#039;en dernier recours. Ce qui va fortement réduire les performances si la mémoire vive arrive quasi à saturation (la mémoire vive n&#039;aura plus la place de contenir un cache permettant d&#039;accélérer diverses opérations). Je vous conseille donc d&#039;utiliser zRam ! <img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /></div>
</li>
</ul>

<p>
Si vous souhaitez tout de même utiliser la seconde méthode, <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">ouvrez le ficher</a> <strong>/etc/sysctl.conf</strong> (avec les droits d&#039;administration) et ajoutez à la fin :
</p>
<pre class="file">vm.swappiness=5</pre>

<p>
Vous pouvez changer « 0 » par « 1 » qui indique d&#039;utiliser la partition d&#039;échange que lorsqu&#039;il ne reste que 1 % de disponible en mémoire vive, « 2 » quand il reste 2 %, etc.
</p>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[La partition d&#039;échange (SWAP)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_partition_d_echange_swap" /><input type="hidden" name="codeblockOffset" value="23" /><input type="hidden" name="range" value="25403-27450" /><button type="submit" title="La partition d&#039;échange (SWAP)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="diminuer_la_frequence_d_ecriture_des_partitions">Diminuer la fréquence d&#039;écriture des partitions</h3>
<div class="level3">

<p>
Utilisez l&#039;option <code>noatime</code> pour éviter d&#039;écrire sur le disque la date du dernier accès en lecture lorsqu&#039;il n&#039;y a pas d&#039;écriture.
</p>

<p>
<strong>De nos jours ubuntu utilise par défaut l&#039;option relatime qui est une variante de noatime, vous n&#039;avez donc rien à faire si vous utilisez Ubuntu 12.04 LTS ou une version plus récente.</strong>
</p>

<p>
en 20.04 ,dans fstab une partition sans l&#039;option  …time
</p>
<pre class="file">/etc/fstab
# / was on /dev/sde3 during installation
UUID=525a0522-f476-4670-bc78-063abbf871c5/     ext4    errors=remount-ro 0  1 </pre>

<p>
est montée avec relatime
</p>
<pre class="file">mount
/dev/sde3 on / type ext4 (rw,relatime,errors=remount-ro)</pre>
<div class="noteclassic"><code>nodiratime</code> est superflu, car <code>noatime</code> est un sur-ensemble de <code>nodiratime</code> (qui est alors sous-entendu), voir <a href="http://blog.endpoint.com/2010/02/on-linux-noatime-includes-nodiratime.html" class="urlextern" title="http://blog.endpoint.com/2010/02/on-linux-noatime-includes-nodiratime.html" rel="nofollow">la source</a>.
</div>
<p>
En <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">modifiant</a> <code>/etc/fstab</code> avec les droits d&#039;administration, vous pouvez ajouter l&#039;option <code>noatime</code> dans les lignes correspondant à de l&#039;Ext4 sur un disque électronique. Par exemple :
</p>
<pre class="file">UUID=57480a3f-e7db-4a5e-9fca-7df45f5a7d9d  /               ext4    noatime,errors=remount-ro 0       1</pre>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Diminuer la fréquence d&#039;écriture des partitions] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="diminuer_la_frequence_d_ecriture_des_partitions" /><input type="hidden" name="codeblockOffset" value="24" /><input type="hidden" name="range" value="27451-28717" /><button type="submit" title="Diminuer la fréquence d&#039;écriture des partitions" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit17" id="gagner_de_l_espace_disque">Gagner de l&#039;espace disque</h3>
<div class="level3">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/deplacer_repertoire_usr" class="wikilink1" title="deplacer_repertoire_usr">Déplacer son dossier usr (UNIX System Resources)</a></div>
</li>
<li class="level1"><div class="li"> <a href="/tutoriel/deplacer_home" class="wikilink1" title="tutoriel:deplacer_home">Déplacer son dossier home</a></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Gagner de l&#039;espace disque] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="gagner_de_l_espace_disque" /><input type="hidden" name="codeblockOffset" value="27" /><input type="hidden" name="range" value="28718-28897" /><button type="submit" title="Gagner de l&#039;espace disque" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit18" id="eviter_d_ecrire_en_double_exemplaire_les_traces_du_fonctionnement_du_logiciel">Eviter d&#039;écrire en double exemplaire les traces du fonctionnement du logiciel</h3>
<div class="level3">

<p>
Depuis quelques années, le logiciel écrit ses traces de fonctionnement de façon  standard dans le répertoires <strong>/var/log/journal.</strong> Pour raison de compatibilité avec le passé, il duplique dans les fichiers <strong>/var/log/syslog</strong> et <strong>/var/log/kern</strong>.
Cependant il faut savoir tourner la page. Surtout qu&#039;il  fournit un  <a href="/systemd" class="wikilink1" title="systemd">outil de consultation</a>  dans le nouveau mode et  pas dans l&#039;ancienne méthode. 
<a href="https://unix.stackexchange.com/questions/506423/how-to-keep-kern-log-out-of-syslog" class="urlextern" title="https://unix.stackexchange.com/questions/506423/how-to-keep-kern-log-out-of-syslog" rel="nofollow">voir l&#039;explication</a>
</p>
<pre class="code bash"><span class="kw2">head</span> <span class="re5">-13</span> <span class="sy0">/</span>etc<span class="sy0">/</span>rsyslog.d<span class="sy0">/</span><span class="nu0">50</span>-default.conf
<span class="co0">#  Default rules for rsyslog.</span>
<span class="co0">#</span>
<span class="co0">#			For more information see rsyslog.conf(5) and /etc/rsyslog.conf</span>
&nbsp;
<span class="co0">#</span>
<span class="co0"># First some standard log files.  Log by facility.</span>
<span class="co0">#</span>
auth,authpriv.<span class="sy0">*</span>			<span class="sy0">/</span>var<span class="sy0">/</span>log<span class="sy0">/</span>auth.log
<span class="co0">#######*.*;auth,authpriv.none		-/var/log/syslog</span>
<span class="co0">#cron.*				/var/log/cron.log</span>
<span class="co0">#daemon.*			-/var/log/daemon.log</span>
<span class="co0">#######kern.*				-/var/log/kern.log</span>
<span class="co0">#lpr.*				-/var/log/lpr.log </span></pre>

<p>
Il est possible de faire la modification en lignes de commandes
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">cp</span> <span class="re5">-v</span>  <span class="sy0">/</span>etc<span class="sy0">/</span>rsyslog.d<span class="sy0">/</span><span class="nu0">50</span>-default.conf <span class="sy0">/</span>etc<span class="sy0">/</span>rsyslog.d<span class="sy0">/</span><span class="nu0">50</span>-default.conf.REF
<span class="kw2">sudo</span> <span class="kw2">sed</span> <span class="re5">-i</span> <span class="st_h">'s/*.*;auth,authpriv.none/###########   *.*;auth,authpriv.none/'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>rsyslog.d<span class="sy0">/</span><span class="nu0">50</span>-default.conf
<span class="kw2">sudo</span> <span class="kw2">sed</span> <span class="re5">-i</span> <span class="st_h">'s/kern./###########   kern./'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>rsyslog.d<span class="sy0">/</span><span class="nu0">50</span>-default.conf</pre>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Eviter d&#039;écrire en double exemplaire les traces du fonctionnement du logiciel] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="eviter_d_ecrire_en_double_exemplaire_les_traces_du_fonctionnement_du_logiciel" /><input type="hidden" name="codeblockOffset" value="27" /><input type="hidden" name="range" value="28898-30279" /><button type="submit" title="Eviter d&#039;écrire en double exemplaire les traces du fonctionnement du logiciel" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit19 page-header" id="aligner_les_partitions">Aligner les partitions</h2>
<div class="level2">

<p>
→ Voir le <a href="#vocabulaire_de_la_technologie_ssd" title="ssd_solid_state_drive ↵" class="wikilink1">vocabulaire de la technique des disques électroniques</a> juste au-dessus !
</p>

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Aligner les partitions] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="aligner_les_partitions" /><input type="hidden" name="codeblockOffset" value="29" /><input type="hidden" name="range" value="30280-30440" /><button type="submit" title="Aligner les partitions" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit20" id="votre_disque_electronique_est-il_aligne">Votre disque électronique est-il aligné ?</h3>
<div class="level3">

<p>
Par défaut, à l&#039;installation, Ubuntu <strong>aligne les partitions automatiquement</strong> (y compris en partitionnement manuel).
</p>

<p>
Si vous voulez en être sûr, tapez la commande ci-dessous :
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">fdisk</span> <span class="re5">-lu</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda</pre>

<p>
Vous obtiendrez alors une réponse comme ceci :
</p>
<pre class="file">Disque /dev/sda: ---- Go, -------------- octets
--- têtes, -- secteurs/piste, ------ cylindres, total ------- secteurs
Unités = secteurs de 1 * 512 = 512 octets
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Identifiant de disque : ----------

Périphérique Amorce  Début        Fin      Blocs     Id  Système
/dev/sda1            XXXX        YYYY       ZZZZ     83  Linux</pre>

<p>
Vous pouvez alors vérifier que le début de chaque partition (&quot;XXXX&quot;) est un multiple de 2048 (secteurs). Comme un secteur fait 512 octets, et que 2048 × 512 = 1 Mio, votre disque électronique est aligné <img src="/lib/images/smileys/icon_smile2.gif" class="icon" alt="=)" />
A partir de 2018 (et surement avant aussi), fdisk fait cette vérification pour vous. Si le disque n&#039;est pas aligné, vous verrez le message suivant : &quot;La partition X ne démarre pas sur une limite de secteur physique.&quot;
</p>
<div class="noteclassic"><img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Pour que tout le monde comprenne, expliquer d&#039;ou vient le chiffre 2048 (secteurs). Expliquer aussi si chaque début de partition doit être un multiple de 2048 ou un multiple de 1 Mio
</div><div class="noteimportant">Cela est vrai sur un disque dur vierge mais n&#039;a pas l&#039;air de fonctionner si on installe Ubuntu à la suite de Windows sur le disque. Si des partitions sont déjà présentes, il faut supprimer et recréer toutes les partitions pour qu&#039;elles soient alignées.
<p>
(Car Ubuntu ne peut pas réaligner les partitions que Windows aurait pu créer non alignées par erreur… À voir si Windows continue de mal aligner les partitions après Windows XP. Windows 7 a une bonne prise en charge des disques électroniques, ça ne devrait plus être le cas.) <img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div><div class="noteclassic"><img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Selon les fabricants de disques SSD, comme par exemple <a href="http://kb-fr.sandisk.com/app/answers/detail/a_id/9508/~/recommandations-de-performance-ssd" class="urlextern" title="http://kb-fr.sandisk.com/app/answers/detail/a_id/9508/~/recommandations-de-performance-ssd" rel="nofollow">Sandisk</a>, les partitions peuvent se contenter d&#039;un alignement sur les pages de 4Ko, soit tous les 8 secteurs. Il n&#039;est pas indispensable d&#039;aligner les partitions sur les blocs de 1Mo, sauf, bien-sûr, pour la première.
</div>
<p>
Si vous souhaitez aller plus loin, vous pouvez <a href="#minimiser_l_usage_du_disque_electronique_ssd" title="ssd_solid_state_drive ↵" class="wikilink1">utiliser au mieux Ubuntu pour votre disque électronique</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Votre disque électronique est-il aligné ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="votre_disque_electronique_est-il_aligne" /><input type="hidden" name="codeblockOffset" value="29" /><input type="hidden" name="range" value="30441-32980" /><button type="submit" title="Votre disque électronique est-il aligné ?" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit21" id="formatage_manuel_du_disque_electronique_utilisation_avancee">Formatage manuel du disque électronique (utilisation avancée)</h3>
<div class="level3">

<p>
<strong>Cette partie est inutile si vous utilisez une version encore maintenue par Ubuntu, l&#039;alignement se fait automatiquement avec n&#039;importe quelle méthode « normale » de partitionnement.</strong>
</p>
<div class="notewarning">Attention cette méthode vient du forum <a href="http://forum.hardware.fr/hfr/OSAlternatifs/Hardware-2/recensement-optimisation-conseils-sujet_69473_1.htm" class="urlextern" title="http://forum.hardware.fr/hfr/OSAlternatifs/Hardware-2/recensement-optimisation-conseils-sujet_69473_1.htm" rel="nofollow">hardware.fr</a> (un grand merci à eux) et a initialement été conçue pour Arch. La méthode de partitionnement est susceptible de varier sous Ubuntu. Ne suivez cette méthode que si vous êtes sûr de vous et que si vous savez résoudre des problèmes pouvant survenir au cours d&#039;un formatage !
</div><div class="notewarning"> La procédure d&#039;origine était faite pour un OCZ-Vertex avec une taille de bloc de 128 Kio, ce qui n&#039;est plus le cas sur les disques électroniques récents (&gt; 2010). Par conséquent, la documentation a été réécrite pour une taille de bloc de 1024 Kio qui permet de garantir un alignement avec tous ses sous-multiples (512, 256, 128, etc.). Vous perdez 1 Mio sur l&#039;ensemble du disque ce qui est négligeable et cela assure une compatibilité et un alignement parfait avec tous les disques électroniques. Le fichier de calcul a également été mis à jour en conséquence.
</div>
</div>

<h4 id="decouper_son_disque_electronique_-_methode_avec_la_table_de_partitions_classique">Découper son disque électronique - Méthode avec la table de partitions classique</h4>
<div class="level4">

<p>
Cette méthode semble donner de bons résultats.
</p>

<p>
Pour Ubuntu, il faut amorcer un système d&#039;un cédérom ou d&#039;une clef <abbr title="Universal Serial Bus">USB</abbr> autonome. Une fois connecté, en console, on se servira de <code>parted</code>. On se retrouve donc sur l&#039;invite de parted, première vérification : la version du disque électronique :
</p>
<pre class="file">(parted) print
Model: ATA INTEL SSDSA2M040 (scsi)
Disk /dev/sda: 40,0GB
Sector size (logical/physical): 512B/512B</pre>

<p>
Ici, mettre à jour le micrologiciel si besoin est pour profiter de toutes les évolutions techniques de votre disque électronique.
Vous trouverez la documentation nécessaire sur le site du fabricant.
La taille d&#039;un bloc, étant d&#039;un multiple de 1024 Kio, et un secteur représentant 512 octets, on en déduit que chaque bloc est composé de 2048 secteurs (1024 Kio ÷ 512 octets). On va donc aligner les partitions en comptant le nombre de secteurs, de manière que chaque début de partition tombe sur un multiple de 2048, soit un début de bloc. D&#039;autre part, afin de tenir compte du premier secteur réservé par le MBR, on va volontairement décaler la première partition jusqu&#039;au premier secteur multiple de 2048. Cela ne gâche qu&#039;un seul Mio et permet de rester aligné quoi qu&#039;il arrive.
</p>
<div class="noteclassic">Si  parted vous répond :<blockquote><div class="no">
Error: /dev/sda: unrecognised disk label</div></blockquote>

<p>
C&#039;est que vous n&#039;avez pas de table de partition, alors tapez :
</p>
<pre class="code">(parted) /dev/sda mklabel msdos</pre>

<p>
puis recommencez.
</p>

</div>
<p>
Commençons par déterminer quel est le dernier secteur du disque électronique, en changeant d&#039;abord l&#039;unité utilisée pour afficher les informations de ce dernier (l&#039;unité devient le secteur) :
</p>
<pre class="code">(parted) unit s
(parted) print free
Number  Start  End        Size       Type  File system  Flags
        63s    78165359s  78165297s        Free Space</pre>

<p>
À l&#039;aide d&#039;un petit tableau dans une feuille Calc (que vous pouvez télécharger <a href="http://www.mediafire.com/?b0yjtzzkty8mv51" class="urlextern" title="http://www.mediafire.com/?b0yjtzzkty8mv51" rel="nofollow">ici</a>), on calcule, à partir de la taille souhaitée des partitions, le secteur de début et de fin de chacune des partitions en suivant la règle suivante :
Taille de la partition en secteurs = taille de la partition en Mo * 1024 * 1024 / 512.
Une partition est donc définie par son secteur de début et son secteur de fin, ce dernier étant le secteur de début + la taille de la partition en secteur - 1 (on retranche 1 pour tenir compte du secteur du début). La partition suivante commence au secteur suivant qui sera forcément, grâce à la méthode de calcul, un multiple de 2048.
Donc, on déduit le tableau suivant :
</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Partition  </th><th class="col1 leftalign"> Point de montage  </th><th class="col2 rightalign">  Début </th><th class="col3 rightalign">  Taille (Mio) </th><th class="col4 rightalign">  Fin </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> /dev/sda1  </td><td class="col1 leftalign"> /  </td><td class="col2 rightalign">  2048 </td><td class="col3 rightalign">  8400 </td><td class="col4 rightalign">  17205247 </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> /dev/sda2  </td><td class="col1 leftalign"> swap  </td><td class="col2 rightalign">  17205248 </td><td class="col3 rightalign">  256 </td><td class="col4 rightalign">  17729535 </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> /dev/sda3  </td><td class="col1 leftalign"> /home  </td><td class="col2 rightalign">  17729536 </td><td class="col3 rightalign">  29500 </td><td class="col4 rightalign">  78145535 </td>
	</tr>
</table></div>

<p>
Alors, dans parted, il devient très simple de créer ses partitions à partir des infos calculées :
</p>
<pre class="code bash"><span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mkpart primary <span class="nu0">2048</span> <span class="nu0">17205247</span>
<span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mkpart primary <span class="nu0">17205248</span> <span class="nu0">17729535</span>
<span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mkpart primary <span class="nu0">17729536</span> <span class="nu0">78145535</span></pre>

<p>
On peut vérifier le résultat une fois les partitions créées :
</p>
<pre class="code bash"><span class="br0">&#40;</span>parted<span class="br0">&#41;</span> print
Number  Start           End             Size            Type     File System    Flags
 <span class="nu0">1</span>      2048s           17205247s       17203199s       primary
 <span class="nu0">2</span>      17205248s       17729535s         524287s       primary
 <span class="nu0">3</span>      17729536s       78145535s       60415999s       primary</pre>

<p>
Si on affiche à nouveau les informations avec l&#039;octet comme unité, on peut vérifier la taille des partitions de manière plus parlante :
</p>
<pre class="code bash"><span class="br0">&#40;</span>parted<span class="br0">&#41;</span> unit MB                 <span class="sy0">//</span>ou unit GB
<span class="br0">&#40;</span>parted<span class="br0">&#41;</span> print
Number  Start           End             Size            Type     File System    Flags
<span class="nu0">1</span>       <span class="nu0">1</span>,05MB          xxxxMB          xxxxMB          primary
<span class="nu0">2</span>       xxxxMB          xxxxMB          xxxxMB          primary
<span class="nu0">3</span>       xxxxMB          xxxxMB          xxxxMB          primary</pre>

<p>
Il ne reste plus qu&#039;à placer le drapeau <em>&quot;boot&quot;</em> sur la première partition pour s&#039;assurer du bon fonctionnement du <em>gestionnaire d&#039;amorçage</em> et du chargement du futur SE :
</p>
<pre class="code bash"><span class="br0">&#40;</span>parted<span class="br0">&#41;</span> <span class="kw1">set</span>
<span class="nu0">1</span>
boot
on</pre>

<p>
Vérification du résultat :
</p>
<pre class="code bash">Number  Start           End             Size            Type    File System     Flags
<span class="nu0">1</span>       <span class="nu0">0</span>,00GB          <span class="nu0">8</span>,40GB          <span class="nu0">8</span>,40GB          primary                 boot</pre>

<p>
Il faut maintenant créer les systèmes de fichiers. Ici, on passera par Ext4, que l&#039;on montera ensuite avec l&#039;option noatime pour ne pas provoquer d&#039;écriture lors d&#039;une simple lecture. Là encore, on se sert des options de formatage du système de fichiers Ext4 pour aligner la partition. Il faut aligner la partition avec des blocs logiques de 4 Ko (4096 o), et un &quot;stride&quot; respectant l&#039;alignement des blocs physiques du disque électronique. Les blocs logiques font 4 Ko, on sait que les blocs physiques font 128 Ko, on aura donc un &quot;stride&quot; de 32 (128 Ko / 4 Ko). Cette histoire de &quot;stride&quot; n&#039;est pas claire, mais l&#039;utilisation de ces deux valeurs permet visiblement de tout aligner correctement. On crée donc les systèmes de fichiers ext4 sur les partitions adéquats :
</p>
<pre class="code bash">mkfs.ext4 <span class="re5">-b</span> <span class="nu0">4096</span> <span class="re5">-E</span> <span class="re2">stride</span>=<span class="nu0">32</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda1
mkfs.ext4 <span class="re5">-b</span> <span class="nu0">4096</span> <span class="re5">-E</span> <span class="re2">stride</span>=<span class="nu0">32</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda3
mkfs.ext4 <span class="re5">-b</span> <span class="nu0">4096</span> <span class="re5">-E</span> <span class="re2">stride</span>=<span class="nu0">32</span> <span class="sy0">/</span>dev<span class="sy0">/</span>sda4</pre>

<p>
Si vous souhaitez utiliser ReiserFS, il est possible de formater vos partitions en forçant  la taille des blocs logiques, mais pas le &quot;stride&quot;. Ne sachant pas quelle est l&#039;influence de ce paramètre, je ne sais pas si cela va réellement dégrader les performances ou pas, mais a priori, cela reste négligeable voire inexistant :
</p>
<pre class="code">mkreiserfs -b 4096 /dev/sda1</pre>
<div class="noteclassic">Si quelqu&#039;un sait comment forcer ces paramètres sur la partition d&#039;échange, qu&#039;il complète cette section !
</div>
<p>
Même si, en fin de compte, on ne monte pas forcément cette partition (ou alors on en minimise l&#039;accès), Ubuntu impose d&#039;avoir une partition d&#039;échange au moment de l&#039;installation, donc autant que cette dernière soit également alignée. Ensuite, lors de l&#039;installation, on définit les point de montage, mais on ne les formate pas. Ils le sont déjà, et un nouveau formatage ne réutiliserait pas forcément les valeurs de bloc et de &quot;stride&quot; que l&#039;on a utilisées, ruinant alors l&#039;alignement. 
</p>

</div>

<h4 id="decouper_son_disque_electronique_-_methode_avec_la_table_de_partitions_gpt">Découper son disque électronique - Méthode avec la table de partitions GPT</h4>
<div class="level4">

<p>
Avec cette méthode, on ne change que la façon de compter les partitions, mais pas celle de compter les blocs. Ainsi, on gardera les mêmes partitions que dans la méthode précédente, avec les mêmes secteurs de début et de fin, mais on utilise une autre façon de créer les partitions.
</p>
<div class="notewarning">Il est donc conseillé donc de lire la méthode précédente avant de vous lancer dans celle-ci qui en reprend les grands principes.
</div>
<p>
Le problème de la méthode précédente est qu&#039;elle se limite à 4 partitions, puisque les tables de partitions standards se limitent à 4 partitions primaires. Une autre solution consisterait à ne créer qu&#039;une partition étendue sur l&#039;intégralité du disque dur, et de tailler ses lecteurs logiques dedans. Néanmoins, il existe une autre façon de créer ses partitions : utiliser une table de partition de type GPT. Avec ce type de table, qu&#039;on pourrait qualifier de &quot;moderne&quot;, la nuance entre partition principale et étendue n&#039;existe plus, toutes les partitions étant du même type (primaire), et il n&#039;y a plus de limite au nombre de partitions que l&#039;on peut créer sur un disque.
</p>
<div class="noteimportant">Ce qu&#039;il faut savoir avant de se jeter sur cette méthode, qui semble mettre tout le monde d&#039;accord de prime abord :<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> les partitions référencées dans une table GPT sont accessibles sous Windows comme sous <abbr title="GNU&#039;s Not Unix">GNU</abbr>-Linux, mais a priori, seul ce dernier saura s&#039;amorcer avec GPT via GRUB. Du coup, pas de double amorçage Windows/<abbr title="GNU&#039;s Not Unix">GNU</abbr>-Linux avec cette méthode. <strong>(FAUX, si Windows est installé en mode UEFI, la prise en charge GPT fonctionne sans problème. Windows n&#039;est simplement pas capable d&#039;amorcer une version non UEFI sur une partition GPT)</strong></div>
</li>
<li class="level1"><div class="li"> les partitions référencées dans une table GPT portent forcément une étiquette, ainsi il est préférable de savoir ce que l&#039;on va mettre sur ses partitions avant de se lancer dans le partitionnement afin de donner aux partitions des étiquettes cohérentes.</div>
</li>
<li class="level1"><div class="li"> la création d&#039;une table GPT efface l&#039;intégralité <del>du disque</del> de la table des partitions. Donc, on utilise cette méthode lorsqu&#039;on a un disque neuf ou après une sauvegarde de toutes ses données, car la création manuelle des entrées de la table des partitions est un exercice périlleux et réservé aux utilisateurs avertis.</div>
</li>
</ul>

</div>
<p>
Ceci mis au clair, on peut découper le disque, toujours avec Parted. Pour cela, une fois Parted lancé, on commence par créer la table GPT (c&#039;est à ce moment que toutes les partitions antérieures et les données qu&#039;elles contenaient deviendront inaccessibles) :
</p>
<pre class="code bash"><span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mklabel
Nouveau <span class="kw3">type</span> d<span class="st_h">'étiquette de disque ? gpt</span></pre>

<p>
On change l&#039;unité de parted pour le secteur :
</p>
<pre class="code bash"><span class="br0">&#40;</span>parted<span class="br0">&#41;</span> unit s
<span class="br0">&#40;</span>parted<span class="br0">&#41;</span> print <span class="kw2">free</span>
Number    Start     End           Size          Type   File        System Flags
          0s        50069679s     250069680s           Free Space</pre>

<p>
Ensuite, on crée les partitions en utilisant les secteurs trouvés par les calculs de la méthode précédente, en donnant à chaque partition l&#039;étiquette qui correspond au type de données qu&#039;elles vont recevoir :
</p>
<pre class="code bash"><span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mkpart linux_root <span class="nu0">256</span> <span class="nu0">17203455</span>
<span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mkpart linux_swap <span class="nu0">17203456</span> <span class="nu0">17727743</span>
<span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mkpart linux_home <span class="nu0">17727744</span> <span class="nu0">27967743</span>
<span class="br0">&#40;</span>parted<span class="br0">&#41;</span> mkpart linux_datas <span class="nu0">27967744</span> <span class="nu0">250069679</span></pre>

<p>
Les partitions créées, on reprendra la méthode précédente pour la création des systèmes de fichier, les règles sur la taille de bloc et de &quot;stride&quot; pour les volumes Ext4 semblant toujours d&#039;actualité avec ce type de partitionnement.
</p>

</div>
<div class='secedit editbutton_section editbutton_21'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Formatage manuel du disque électronique (utilisation avancée)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="formatage_manuel_du_disque_electronique_utilisation_avancee" /><input type="hidden" name="codeblockOffset" value="31" /><input type="hidden" name="range" value="32981-44376" /><button type="submit" title="Formatage manuel du disque électronique (utilisation avancée)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit23 page-header" id="conseils_d_ameliorations_specifiques_a_certains_disques_electroniques">Conseils d&#039;améliorations spécifiques à certains disques électroniques</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_23'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Conseils d&#039;améliorations spécifiques à certains disques électroniques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="conseils_d_ameliorations_specifiques_a_certains_disques_electroniques" /><input type="hidden" name="codeblockOffset" value="43" /><input type="hidden" name="range" value="44377-44463" /><button type="submit" title="Conseils d&#039;améliorations spécifiques à certains disques électroniques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit24" id="planification_des_entreessorties">Planification des entrées/sorties</h3>
<div class="level3">

<p>
<strong>Cette opération n&#039;est plus utile sur les disques électroniques relativement récents, seuls les tous premiers nécessitent cette modification.</strong>
</p>
<div class="noteimportant"><a href="http://libre-ouvert.toile-libre.org/?article72/ssd-crucial-m4-64-go-linux-trim-ext4-noatime#cfq" class="urlextern" title="http://libre-ouvert.toile-libre.org/?article72/ssd-crucial-m4-64-go-linux-trim-ext4-noatime#cfq" rel="nofollow">Cette amélioration n&#039;est plus nécessaire avec la mise à jour de l&#039;ordonnanceur &quot;cfq&quot;</a>
</div>
<p>
Ce mécanisme de réarrangement des IOCTL a pour objet d&#039;améliorer les commandes E/S vers le disque dur ATA/<abbr title="Serial Advanced Technology Attachment">SATA</abbr> en prenant en compte la nature du disque dur en question et certaines contraintes en découlant. <br/>

Il y a trois différentes options : <code>cfq</code>, <code>noop</code> et <code>deadline</code>. <br/>

Vous pouvez vérifier quel ordonnanceur d&#039;E/S est utilisé par votre système dans un terminal comme ceci :
</p>
<pre class="code bash"><span class="kw2">cat</span> <span class="sy0">/</span>sys<span class="sy0">/</span>block<span class="sy0">/</span>sda<span class="sy0">/</span>queue<span class="sy0">/</span>scheduler</pre>

<p>
Vous obtenez quelque chose comme cela :
</p>
<pre class="file">noop deadline [cfq]</pre>

<p>
où l&#039;ordonnanceur présentement utilisé est indiqué entre des crochets.
</p>

<p>
La meilleure option pour les disques électroniques est <code>deadline</code>.<br/>

Si cela n&#039;est pas le cas, on peut spécifier de charger le noyau Linux avec cette option &quot;deadline&quot; lors du démarrage. 
</p>

<p>
Il faut <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">modifier le fichier</a> <code>/etc/default/grub</code> et ajouter <code>elevator=deadline</code> à la ligne d&#039;options :
</p>
<pre class="code bash"><span class="re2">GRUB_CMDLINE_LINUX_DEFAULT</span>=<span class="st0">&quot;elevator=deadline quiet splash&quot;</span></pre>

<p>
puis mettre à jour : 
</p>
<pre class="code bash"><span class="kw2">sudo</span> update-grub</pre>

<p>
→ <a href="http://www.ab9il.net/linux/solid-state-drives1.html" class="urlextern" title="http://www.ab9il.net/linux/solid-state-drives1.html" rel="nofollow">Source</a>
</p>

<p>
Afin d&#039; améliorer les performances des systèmes comportant a la fois des disques SSD et des disques mécaniques il est possible grâce à UDEV de définir automatiquement le scheduleur à utiliser en fonction du type de disque (a plateaux ou SSD) avec la méthode suivante  :
editer ou creer le fichier avec les droits super-utilisateur : /etc/udev/rules.d/60-schedulers.rules
</p>
<pre class="code bash">gksu gedit <span class="sy0">/</span>etc<span class="sy0">/</span>udev<span class="sy0">/</span>rules.d<span class="sy0">/</span><span class="nu0">60</span>-schedulers.rules</pre>

<p>
puis ajoutez y le code suivant :
</p>
<pre class="file"># set deadline scheduler for non-rotating disks
ACTION==&quot;add|change&quot;, KERNEL==&quot;sd[a-z]&quot;, ATTR{queue/rotational}==&quot;0&quot;, ATTR{queue/scheduler}=&quot;deadline&quot;
 
# set cfq scheduler for rotating disks
ACTION==&quot;add|change&quot;, KERNEL==&quot;sd[a-z]&quot;, ATTR{queue/rotational}==&quot;1&quot;, ATTR{queue/scheduler}=&quot;cfq&quot;</pre>

<p>
→ <a href="https://wiki.deimos.fr/Optimiser_les_performances_des_disques_dur_sur_Linux#Alignement_des_partitions" class="urlextern" title="https://wiki.deimos.fr/Optimiser_les_performances_des_disques_dur_sur_Linux#Alignement_des_partitions" rel="nofollow">Source</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_24'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Planification des entrées/sorties] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="planification_des_entreessorties" /><input type="hidden" name="codeblockOffset" value="43" /><input type="hidden" name="range" value="44464-46924" /><button type="submit" title="Planification des entrées/sorties" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit25" id="desactiver_completement_l_archivage">Désactiver complètement l&#039;archivage</h3>
<div class="level3">

<p>
Sur certains disques électroniques (comme le Corsair&lt;Crucial plutôt&gt; V4) il se peut que vous ayez des ralentissements lors d&#039;une mise à jour (ou apt-get), pour y remédier, il suffit d&#039;ajouter l&#039;option 
</p>
<pre class="code">data=writeback</pre>

<p>
 dans /etc/fstab. Il faut exécuter le code suivant pour le désactiver tout d&#039;abord : 
</p>
<pre class="code">sudo tune2fs -o journal_data_writeback /dev/sda1</pre>

<p>
 en remplaçant <strong>sda1</strong> par l&#039;identifiant de votre partition (sda2, hdb1, …) :
</p>

</div>
<div class='secedit editbutton_section editbutton_25'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Désactiver complètement l&#039;archivage] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="desactiver_completement_l_archivage" /><input type="hidden" name="codeblockOffset" value="49" /><input type="hidden" name="range" value="46925-47436" /><button type="submit" title="Désactiver complètement l&#039;archivage" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit26" id="desactiver_ureadhead">Désactiver &quot;ureadhead&quot;</h3>
<div class="level3">

<p>
&quot;Ureadhead&quot; est destiné à améliorer les performances de démarrage sur les disques durs traditionnels en organisant l&#039;ordre de lecture sur le disque. Malheureusement sur certains disques électroniques très vieux, il réduit aujourd&#039;hui les performances car les programmes ne démarrent pas pendant le chargement &quot;ureadhead&quot; alors que les performances du disque électronique permettent un accès direct au données bien plus efficace lors de l&#039;exécution des programmes. Le ticket de la bogue <a href="https://bugs.launchpad.net/bugs/577763" class="urlextern" title="https://bugs.launchpad.net/bugs/577763" rel="nofollow">LP #577763</a> à ce sujet est ouvert.
</p>

<p>
Un contournement pour désactiver &quot;ureadhead&quot; est de désactiver le lancement du démon correspondant dans le script d&#039;amorçage upstart :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Ouvrir le fichier /etc/init/ureadahead.conf avec les droits super-utilisateur</div>
</li>
<li class="level1"><div class="li"> Commenter la ligne <code>exec /sbin/ureadahead –daemon</code> en ajoutant un dièse (#) tout au début</div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs principaux : Kortex@HFR et Albator du <a href="http://forum.hardware.fr/hfr/OSAlternatifs/Hardware-2/recensement-optimisation-conseils-sujet_69473_1.htm" class="urlextern" title="http://forum.hardware.fr/hfr/OSAlternatifs/Hardware-2/recensement-optimisation-conseils-sujet_69473_1.htm" rel="nofollow">forum.hardware.fr</a>, un grand merci à eux.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_26'><form class="button btn_secedit form-inline" method="post" action="/ssd_solid_state_drive"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1623911301" /><input type="hidden" name="summary" value="[Désactiver &quot;ureadhead&quot;] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="desactiver_ureadhead" /><input type="hidden" name="codeblockOffset" value="51" /><input type="hidden" name="range" value="47437-" /><button type="submit" title="Désactiver &quot;ureadhead&quot;" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div><hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">Source : <a href="http://www.leaseweblabs.com/2013/12/ubuntu-14-04-lts-supports-trim-ssd-drives/" class="urlextern" title="http://www.leaseweblabs.com/2013/12/ubuntu-14-04-lts-supports-trim-ssd-drives/" rel="nofollow">http://www.leaseweblabs.com/2013/12/ubuntu-14-04-lts-supports-trim-ssd-drives/</a></div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="ssd_solid_state_drive.txt">ssd_solid_state_drive.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 17/06/2021, 08:28">Le 17/06/2021, 08:28</span></li><li class="text-muted">par 90.30.127.167</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=ssd_solid_state_drive&amp;1635564266" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>probleme_apt [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="apt,paquet,depots"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/probleme_apt?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/probleme_apt?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/probleme_apt"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/probleme_apt"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/probleme_apt"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"probleme_apt","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="probleme_apt">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/probleme_apt?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/probleme_apt?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/probleme_apt?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/probleme_apt?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/probleme_apt?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/probleme_apt?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/probleme_apt?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">probleme_apt</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/probleme_apt?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/probleme_apt?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/probleme_apt?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#impossible_de_verrouillervarlibdpkglock","title":"Impossible de verrouiller \/var\/lib\/dpkg\/lock","level":1},{"link":"#dpkg_was_interrupted","title":"Dpkg was interrupted","level":1},{"link":"#dpkgerror_processing_archive","title":"Dpkg: error processing archive","level":1},{"link":"#erreur_de_sortie_d_etat_1","title":"Erreur de sortie d'\u00e9tat 1","level":1},{"link":"#erreur_de_sortie_d_etat_2","title":"Erreur de sortie d'\u00e9tat 2","level":1},{"link":"#erreur_de_sortie_d_etat_127","title":"Erreur de sortie d'\u00e9tat 127","level":1},{"link":"#erreur_libapt-pkgso412","title":"Erreur libapt-pkg.so.4.12","level":1},{"link":"#erreur_du_busistes_de_paquets","title":"Erreur du busistes de paquets","level":1},{"link":"#le_paquet_installe_n_apparait_pas_dans_la_liste_de_synaptic","title":"Le paquet install\u00e9 n\u2019appara\u00eet pas dans la liste de Synaptic","level":1},{"link":"#erreurs_dans_le_fichieretcaptsourceslist","title":"Erreurs dans le fichier \/etc\/apt\/sources.list","level":1},{"link":"#eencountered_a_section_with_no_packageheader","title":"E: Encountered a section with no Package: header","level":1},{"link":"#erreur_de_signature","title":"Erreur de Signature","level":1},{"link":"#erreur_gpg","title":"Erreur GPG","level":2},{"link":"#signature_non_verifiee","title":"Signature non v\u00e9rifi\u00e9e","level":2},{"link":"#impossible_de_verrouillervarlibdpkgstatus","title":"Impossible de verrouiller \/var\/lib\/dpkg\/status","level":1},{"link":"#wfailed_to_fetch_gzipvarlibaptlistspartiallors_d_une_mise_a_jour","title":"\"W: Failed to fetch gzip:\/var\/lib\/apt\/lists\/partial\/...\" lors d'une mise \u00e0 jour","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#impossible_de_verrouillervarlibdpkglock">Impossible de verrouiller /var/lib/dpkg/lock</a></li>
<li class="level1"><a href="#dpkg_was_interrupted">Dpkg was interrupted</a></li>
<li class="level1"><a href="#dpkgerror_processing_archive">Dpkg: error processing archive</a></li>
<li class="level1"><a href="#erreur_de_sortie_d_etat_1">Erreur de sortie d&#039;état 1</a></li>
<li class="level1"><a href="#erreur_de_sortie_d_etat_2">Erreur de sortie d&#039;état 2</a></li>
<li class="level1"><a href="#erreur_de_sortie_d_etat_127">Erreur de sortie d&#039;état 127</a></li>
<li class="level1"><a href="#erreur_libapt-pkgso412">Erreur libapt-pkg.so.4.12</a></li>
<li class="level1"><a href="#erreur_du_busistes_de_paquets">Erreur du busistes de paquets</a></li>
<li class="level1"><a href="#le_paquet_installe_n_apparait_pas_dans_la_liste_de_synaptic">Le paquet installé n’apparaît pas dans la liste de Synaptic</a></li>
<li class="level1"><a href="#erreurs_dans_le_fichieretcaptsourceslist">Erreurs dans le fichier /etc/apt/sources.list</a></li>
<li class="level1"><a href="#eencountered_a_section_with_no_packageheader">E: Encountered a section with no Package: header</a></li>
<li class="level1"><a href="#erreur_de_signature">Erreur de Signature</a>
<ul class="nav toc">
<li class="level2"><a href="#erreur_gpg">Erreur GPG</a></li>
<li class="level2"><a href="#signature_non_verifiee">Signature non vérifiée</a></li>
</ul>
</li>
<li class="level1"><a href="#impossible_de_verrouillervarlibdpkgstatus">Impossible de verrouiller /var/lib/dpkg/status</a></li>
<li class="level1"><a href="#wfailed_to_fetch_gzipvarlibaptlistspartiallors_d_une_mise_a_jour">&quot;W: Failed to fetch gzip:/var/lib/apt/lists/partial/...&quot; lors d&#039;une mise à jour</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/apt" class="wikilink1" title="apt" rel="tag">apt</a>,
	<a href="/paquet" class="wikilink1" title="paquet" rel="tag">paquet</a>,
	<a href="/depots" class="wikilink1" title="depots" rel="tag">dépôts</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="problemes_avec_les_gestionnaires_de_paquets">Problèmes avec les gestionnaires de paquets</h1>
<div class="level1">

<p>
Cette page est destinée à alléger la page principale <a href="/apt" class="wikilink1" title="apt">APT</a>, si vous avez besoin d&#039;informations générales sur APT consultez-la.
</p>
<div class="noteimportant">Pensez à effectuer une copie de <a href="/tutoriel/comment_sauver_et_restaurer_un_fichier" class="wikilink1" title="tutoriel:comment_sauver_et_restaurer_un_fichier">sauvegarde</a> du ou des fichier(s) que vous allez modifier voire supprimer!
</div>
<p>
<br/>

</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Problèmes avec les gestionnaires de paquets] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="problemes_avec_les_gestionnaires_de_paquets" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="35-421" /><button type="submit" title="Problèmes avec les gestionnaires de paquets" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="impossible_de_verrouillervarlibdpkglock">Impossible de verrouiller /var/lib/dpkg/lock</h2>
<div class="level2">
<pre class="code">E: Impossible de verrouiller /var/lib/dpkg/lock - open (11 Ressource temporairement non disponible)
E: Unable to lock the administration directory (/var/lib/dpkg/), is another process using it?</pre>

<p>
Ce message indique qu&#039;un autre processus utilise très probablement <a href="/apt" class="wikilink1" title="apt">APT</a>.
</p>

<p>
Sur Ubuntu toutes les interfaces de gestion de paquets ou de logiciels telles que <a href="/gnome-software" class="wikilink1" title="gnome-software">GNOME Logiciels</a>, <a href="/synaptic" class="wikilink1" title="synaptic">Synaptic</a>, <a href="/gnome-packagekit" class="wikilink1" title="gnome-packagekit">GNOME paquets</a>, <a href="/apt-cli" class="wikilink1" title="apt-cli">apt</a>, <a href="/apt-get" class="wikilink1" title="apt-get">apt-get</a>, <a href="/aptitude" class="wikilink1" title="aptitude">Aptitude</a>, ou les <a href="/gestionnaire_de_mises_a_jour" class="wikilink1" title="gestionnaire_de_mises_a_jour">gestionnaires de mises à jour</a> reposent sur le même système : <a href="/apt" class="wikilink1" title="apt">APT</a>.
</p>

<p>
Afin d&#039;éviter des conflits, une seule instance d&#039;APT peut être utilisée en même temps, voilà pourquoi APT utilise un fichier <code>/var/lib/dpkg/lock</code> : afin de bloquer les autres tentatives d&#039;utilisation simultanées d&#039;APT.
</p>

<p>
Ce message d&#039;erreur indique donc que ce fichier <code>/var/lib/dpkg/lock</code> existe et bloque la suite des opérations. Cela peut être le cas pour deux raisons différentes :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Soit un autre <a href="/gestionnaire_de_paquets" class="wikilink1" title="gestionnaire_de_paquets">gestionnaire de paquets</a> (ou de mise à jour) est ouvert. Si c&#039;est le cas, fermez-le proprement puis relancez votre commande.</div>
</li>
<li class="level1"><div class="li"> Soit l&#039;un de ces gestionnaires a &quot;planté&quot;, ou l&#039;ordinateur a été éteint sauvagement pendant une opération, et le gestionnaire n&#039;a pas terminé normalement ses opérations en supprimant ce fichier. Dans ce cas (si vous êtes absolument certain·e qu&#039;aucun autre gestionnaire ne tourne), vous pouvez supprimer ce fichier au moyen d&#039;un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> :</div>
</li>
</ul>
<pre class="code">cd /var/lib/dpkg/ &amp;&amp; sudo rm -v lock</pre>
<div class="notewarning">Il est <strong>impératif</strong> que tous les gestionnaires de paquets soient fermés au moment d&#039;exécuter la commande ci-dessus !
<p>
Vous pouvez lister la liste des processus utilisant le fichier <code>/var/lib/dpkg/lock</code> au moyen de la commande suivante :
</p>
<pre class="code">sudo lsof /var/lib/dpkg/lock</pre>

</div>
<p>
&#039;
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Impossible de verrouiller /var/lib/dpkg/lock] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="impossible_de_verrouillervarlibdpkglock" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="422-2363" /><button type="submit" title="Impossible de verrouiller /var/lib/dpkg/lock" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="dpkg_was_interrupted">Dpkg was interrupted</h2>
<div class="level2">

<p>
Si un <a href="/gestionnaire_de_paquets" class="wikilink1" title="gestionnaire_de_paquets">gestionnaire de paquets</a> vous dit quelque chose comme ça :
</p>
<pre class="code">E: dpkg was interrupted, you must manually run &#039;dpkg --configure -a&#039; to correct the problem. 
E: _cache-&gt;open(!) failed, please report.</pre>

<p>
Enfin en tous cas quelque chose qui dit <strong>dpkg --configure -a</strong> dans le texte.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Faites : <pre class="code">sudo dpkg --configure -a </pre>
</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Si ça ne marche toujours pas faites : <pre class="code">sudo apt install -f </pre>
</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Si ça ne marche toujours pas (encore… cas rare) : <pre class="code">sudo dpkg --force-all --configure -a </pre>
</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Sinon : <pre class="code">sudo dpkg -P --force-all &#039;le paquet qui bloque&#039; </pre>
</div>
</li>
</ul>
<div class="noteclassic">Pour connaître le paquet qui bloque, quand vous faites un <strong>sudo dpkg --configure -a</strong>, c&#039;est simplement le premier paquet qui apparaît.
<p>
Exemple :
</p>
<pre class="code">dudumomo@dudumomo-laptop:~$ sudo dpkg --configure -a
dpkg: dependency problems prevent configuration of skype:
 skype depends on libqt4-core (&gt;= 4.2.1); however:
  Package libqt4-core is not installed.
 skype depends on libqt4-gui (&gt;= 4.2.1); however:
  Package libqt4-gui is not installed.
dpkg: error processing skype (--configure):
 dependency problems - leaving unconfigured
Setting up initramfs-tools (0.85eubuntu19) ...
update-initramfs: deferring update (trigger activated)

Setting up lm-sensors (1:2.10.4-1ubuntu1) ...
/usr/bin/ucf: line 351: getopt: command not found
dpkg: error processing lm-sensors (--configure):
 subprocess post-installation script returned error exit status 127
Setting up libpaper1 (1.1.22ubuntu1) ...
/usr/bin/ucf: line 351: getopt: command not found
dpkg: error processing libpaper1 (--configure):
 subprocess post-installation script returned error exit status 127
dpkg: dependency problems prevent configuration of libpaper-utils:
 libpaper-utils depends on libpaper1; however:
  Package libpaper1 is not configured yet.
dpkg: error processing libpaper-utils (--configure):
 dependency problems - leaving unconfigured
Processing trigers for initramfs-tools ...
update-initramfs: Generating /boot/initrd.img-2.6.22-12-generic
/usr/sbin/mkinitramfs: 13: getopt: not found
Terminating...
update-initramfs: failed for /boot/initrd.img-2.6.22-12-generic
dpkg: subprocess post-installation script returned error exit status 1</pre>

<p>
Là le paquet en question c&#039;est <strong>skype</strong>
</p>

</div>
</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Dpkg was interrupted] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="dpkg_was_interrupted" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="2364-4706" /><button type="submit" title="Dpkg was interrupted" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="dpkgerror_processing_archive">Dpkg: error processing archive</h2>
<div class="level2">

<p>
Si vous voyez l&#039;erreur &quot;dpkg : error processing archive&quot; lors d&#039;une mise à jour ou de l&#039;installation d&#039;un paquet, comme le montre l&#039;exemple ci-dessous, cette erreur est provoquée par un paquet &quot;mal fait&quot; (provenant probablement d&#039;un ppa) voulant écraser (dans le sens de l&#039;overwrite) des fichiers appartenant à d&#039;autres paquets. Dpkg se termine alors avec l&#039;erreur mentionnée et l&#039;installation ou la mise à jour s&#039;interrompt. Dans la plupart des cas, une telle erreur arrive quand un fichier est déplacé d&#039;un paquet vers un autre avec une version plus récente. 
</p>

<p>
Exemple: 
</p>
<pre class="code">Préparation du décompactage de .../ubuntu-mate-default-settings_0.3.9~trusty2_all.deb ...
Décompactage de ubuntu-mate-default-settings (0.3.9~trusty2) ...
dpkg: error processing archive /var/cache/apt/archives/ubuntu-mate-default-settings_0.3.9~trusty2_all.deb (--unpack):
 tentative de remplacement de « /var/lib/polkit-1/localauthority/10-vendor.d/org.ubuntu-mate.desktop.pkla », qui appartient aussi au paquet policykit-desktop-privileges-ubuntu-mate 0.3.6~trusty3
Sélection du paquet ubuntu-mate-core précédemment désélectionné.
Préparation du décompactage de .../ubuntu-mate-core_1.118~trusty4_amd64.deb ...
Décompactage de ubuntu-mate-core (1.118~trusty4) ...
E: Sub-process /usr/bin/dpkg returned an error code (1)</pre>

<p>
Afin de fixer cette erreur, il faut tout d&#039;abord localiser le fichier du paquet qui l&#039;a causée. Le répertoire dans lequel le logiciel apt télécharge les paquets est, par défaut, /var/cache/apt/archives/. Dans l&#039;exemple du haut, le fichier qui a causé l&#039;erreur est /var/cache/apt/archives/ubuntu-mate-core_1.118~trusty4_amd64.deb.
Une fois le fichier est localisé, ouvrez un terminal et tapez la commande suivante:
</p>
<pre class="code">sudo dpkg -i --force-overwrite /var/cache/apt/archives/ubuntu-mate-core_1.118~trusty4_amd64.deb</pre>

<p>
Si, l&#039;option --force-overwrite ne résout pas le problème, essayez avec --force-all.
</p>

<p>
Dans la commande ci-dessus, remplacez &quot;/var…&quot; avec le chemin exact du fichier &quot;.deb&quot; qui a causé l&#039;erreur. Si vous avez téléchargé le fichier manuellement, le fichier &quot;.deb&quot; n&#039;est pas localisé dans &quot;/var/cache/apt/archives&quot; mais dans le répertoire où vous l&#039;aviez téléchargé (~/Téléchargements/). Cette commande va permettre à dpkg de forcer l&#039;installation en écrasant les fichiers qui existent dans les 2 paquets. Finalement, pour être sûr que tous les paquets sont bien installés, tapez cette commande :
</p>
<pre class="code">sudo apt install -f</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Dpkg: error processing archive] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="dpkgerror_processing_archive" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="4707-7274" /><button type="submit" title="Dpkg: error processing archive" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="erreur_de_sortie_d_etat_1">Erreur de sortie d&#039;état 1</h2>
<div class="level2">

</div>

<h4 id="cas_1">Cas 1</h4>
<div class="level4">
<pre class="code">dpkg : erreur de traitement de &#039;le paquet qui bloque&#039; (--purge) :
le sous-processus post-removal script a retourné une erreur de sortie d&#039;état 1
Des erreurs ont été rencontrées pendant l&#039;exécution :
&#039;le paquet qui bloque&#039;
E: Sub-process /usr/bin/dpkg returned an error code (1)</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez le fichier</a> <strong>/var/lib/dpkg/info/&#039;le paquet qui bloque&#039;.postrm</strong></div>
</li>
<li class="level1"><div class="li"> Puis remplacez &quot;exit 1&quot; par &quot;exit 0&quot; et s&#039;il n&#039;y a pas &quot;exit 1&quot; mettez &quot;exit 0&quot; à la fin. (ou l&#039;inverse, etc.)</div>
</li>
<li class="level1"><div class="li"> Si le fichier est vide, ajoutez-y :<pre class="file">#!/bin/sh
set -e
exit 0</pre>
</div>
</li>
</ul>
<div class="noteclassic">Si cela ne fonctionne toujours pas, remplacez le contenu de <strong>/var/lib/dpkg/info/&#039;le paquet qui bloque&#039;.postrm</strong> par :
<pre class="file">#!/bin/bash
/bin/true</pre>

<p>
Veillez aussi à ce que le fichier soit bien exécutable, notamment si vous avez dû créer le fichier.
</p>

</div><div class="noteimportant">Dans ce cas, le script bloquant était le <strong>le sous-processus post-removal</strong> donc nous avons édité le ficher <strong>.postrm</strong>.<br/>

Si nous avions eu : <strong>le sous-processus post-installation</strong>, nous aurions dû éditer le fichier <strong>.postinst</strong>

</div>
<p>
Si cela ne marche toujours pas, essayez de remplacer le fichier <strong>/var/lib/dpkg/status</strong> par <strong>/var/lib/dpkg/status-old</strong> (vérifier la présence de ce fichier avant).<br/>

Il peut exister également des sauvegardes du fichier status dans <strong>/var/backups</strong> (compressées ou non).<br/>

Si ce n&#039;est pas mieux éditer le fichier <strong>/var/lib/dpkg/status</strong> et retirer chaque section comportant le paquet bloquant suivi des commandes :
</p>
<pre class="code">sudo dpkg --configure -a
sudo apt update
sudo apt full-upgrade</pre>

</div>

<h4 id="cas_2">Cas 2</h4>
<div class="level4">

<p>
Un problème retournant la même erreur survient si vous rajoutez un disque contenant une partition bootable avec <a href="/grub-pc" class="wikilink1" title="grub-pc">grub-pc</a> (grub2).<br/>

Essayez dans ce cas la solution proposée dans le forum <a href="http://forum.ubuntu-fr.org/viewtopic.php?pid=3642612#p3642612" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?pid=3642612#p3642612" rel="nofollow">ici</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreur de sortie d&#039;état 1] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_de_sortie_d_etat_1" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="7275-9266" /><button type="submit" title="Erreur de sortie d&#039;état 1" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="erreur_de_sortie_d_etat_2">Erreur de sortie d&#039;état 2</h2>
<div class="level2">

<p>
Si vous obtenez ce message d&#039;erreur :
</p>
<pre class="code">E: Sub-process /usr/bin/dpkg returned an error code (2)</pre>

<p>
la commande qui va vous sauver est toute simple :
</p>
<pre class="code">sudo apt clean </pre>

<p>
Puis réinstaller le ou les paquets qui posaient problème :
</p>
<pre class="code">sudo apt install nom_du_paquet </pre>

<p>
Si cela ne fonctionne pas, forcer la désinstallation du paquet qui pose problème :
</p>
<pre class="code">sudo mv /var/lib/dpkg/info/nom_du_paquet.* /tmp/
sudo dpkg --remove --force-remove-reinstreq nom_du_paquet</pre>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreur de sortie d&#039;état 2] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_de_sortie_d_etat_2" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="9267-9806" /><button type="submit" title="Erreur de sortie d&#039;état 2" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="erreur_de_sortie_d_etat_127">Erreur de sortie d&#039;état 127</h2>
<div class="level2">
<pre class="code">le sous-processus post-installation script a retourné une erreur de sortie d&#039;état 127
Des erreurs ont été rencontrées pendant l&#039;exécution : &#039;le paquet qui bloque&#039;</pre>

<p>
Faites : 
</p>
<pre class="code">gksu gedit /var/lib/dpkg/info/lepaquetquibloque.postrm</pre>

<p>
Supprimer tout jusqu&#039;au <a href="http://fr.wikipedia.org/wiki/Shebang" class="urlextern" title="http://fr.wikipedia.org/wiki/Shebang" rel="nofollow">Shebang</a> Bash, et ajouter juste après le <a href="http://fr.wikipedia.org/wiki/Shebang" class="urlextern" title="http://fr.wikipedia.org/wiki/Shebang" rel="nofollow">Shebang</a> Bash ceci :
</p>
<pre class="code">/bin/true</pre>

<p>
Vous devez donc avoir dans votre fichier .postrm ceci et rien de plus :
</p>
<pre class="code">#!/bin/bash
/bin/true</pre>

<p>
Veuillez sauvegarder vos modifications, et ensuite, dans un terminal, veuillez taper :
</p>
<pre class="code">sudo dpkg -r --force-remove-reinstreq &#039;le paquet qui bloque&#039;</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreur de sortie d&#039;état 127] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_de_sortie_d_etat_127" /><input type="hidden" name="codeblockOffset" value="20" /><input type="hidden" name="range" value="9807-10569" /><button type="submit" title="Erreur de sortie d&#039;état 127" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit8 page-header" id="erreur_libapt-pkgso412">Erreur libapt-pkg.so.4.12</h2>
<div class="level2">

<p>
Après un crash de Ubuntu, le système de mise à jour affiche un sens interdit, dans la zone de notification.
Impossible de lancer la logithèque, synaptic ou le système de mise à jour en mode graphique.
</p>

<p>
Dans un terminal, la commande :
</p>
<pre class="code">sudo synaptic </pre>

<p>
affiche
</p>
<pre class="code">synaptic: error while loading shared libraries: libapt-pkg.so.4.12: cannot open shared object file: No such file or directory </pre>

<p>
Pour résoudre le problème, saisir dans un terminal :
</p>
<pre class="code">sudo dpkg-reconfigure libapt-pkg4.12 </pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreur libapt-pkg.so.4.12] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_libapt-pkgso412" /><input type="hidden" name="codeblockOffset" value="25" /><input type="hidden" name="range" value="10570-11132" /><button type="submit" title="Erreur libapt-pkg.so.4.12" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="erreur_du_busistes_de_paquets">Erreur du busistes de paquets</h2>
<div class="level2">

<p>
Si <em>apt update</em> vous renvoie :
</p>
<pre class="code">Erreur du busistes de paquets... 0% </pre>

<p>
 ou 
</p>
<pre class="code">Erreur du bus (core dumped)</pre>

<p>
supprimez les fichiers <strong>/var/cache/apt/pkgcache.bin</strong> et <strong>/var/cache/apt/srcpkgcache.bin</strong> :
</p>
<pre class="code">sudo mv /var/cache/apt/pkgcache.bin ~/pkgcache.bin
sudo mv /var/cache/apt/srcpkgcache.bin ~/srcpkgcache.bin</pre>

<p>
Puis refaites :
</p>
<pre class="code">sudo apt update</pre>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreur du busistes de paquets] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_du_busistes_de_paquets" /><input type="hidden" name="codeblockOffset" value="28" /><input type="hidden" name="range" value="11133-11566" /><button type="submit" title="Erreur du busistes de paquets" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit10 page-header" id="le_paquet_installe_n_apparait_pas_dans_la_liste_de_synaptic">Le paquet installé n’apparaît pas dans la liste de Synaptic</h2>
<div class="level2">

<p>
<em class="u">Problème rencontré :</em><br/>

L&#039;installation de paquets .deb avec <em><strong><a href="/gdebi" class="wikilink1" title="gdebi">gdebi</a></strong></em> se passe sans souci mais ces paquets n&#039;apparaissent pas dans <a href="/synaptic" class="wikilink1" title="synaptic">Synaptic</a> et <a href="/apt-cli" class="wikilink1" title="apt-cli">apt</a> ne les trouve pas non plus (par exemple pour les supprimer).<br/>

Ils sont pourtant installés car lorsqu&#039;on appelle les programmes correspondants, ils se lancent sans problème.
</p>

<p>
<em class="u">La solution consiste à :</em>
</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Localiser le binaire <pre class="code">dpkg -S /chemin/binaire
aptitude show nompaquet</pre>
</div>
</li>
<li class="level1"><div class="li"> ouvrir <a href="/synaptic" class="wikilink1" title="synaptic">Synaptic</a> et vérifier la présence des paquets.</div>
</li>
</ol>

<p>
<em>Merci à PK pour la solution.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Le paquet installé n’apparaît pas dans la liste de Synaptic] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="le_paquet_installe_n_apparait_pas_dans_la_liste_de_synaptic" /><input type="hidden" name="codeblockOffset" value="32" /><input type="hidden" name="range" value="11567-12218" /><button type="submit" title="Le paquet installé n’apparaît pas dans la liste de Synaptic" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit11 page-header" id="erreurs_dans_le_fichieretcaptsourceslist">Erreurs dans le fichier /etc/apt/sources.list</h2>
<div class="level2">

<p>
Les erreurs de type : 
</p>
<pre class="code">&#039;E:Ligne 56 mal formée dans la liste des sources /etc/apt/sources.list (analyse de l&#039;URI), E:La liste des sources ne peut être lue.&#039;</pre>

<p>
indiquent une erreur dans le fichier <strong>/etc/apt/sources.list.</strong>
</p>

<p>
Il suffit d&#039;<a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditer</a> avec les <a href="/sudo" class="wikilink1" title="sudo">droits d&#039;administration</a> le fichier <strong>/etc/apt/sources.list</strong> pour supprimer ou commenter (c&#039;est à dire ajouter un # au début de la ligne) les lignes mal formées de ce fichier (à noter que le message d&#039;erreur peut n&#039;indiquer qu&#039;une seule ligne alors que plusieurs lignes sont à supprimer).
</p>

<p>
Les lignes mal formées se reconnaissent facilement : elles ne sont pas commentées et ne respectent pas la syntaxe du sources.list (on trouve des exemples de lignes correctes <a href="/sources.list" class="wikilink1" title="sources.list">ici</a>).
</p>

<p>
Une fois la modification effectuée, il faut sauver puis quitter, et faire :
</p>
<pre class="code">sudo apt update</pre>

<p>
En cas de doute, on peut également régénérer complètement son sources.list, par exemple à partir de <a href="http://sources-list.ubuntu-fr-secours.org/" class="urlextern" title="http://sources-list.ubuntu-fr-secours.org/" rel="nofollow">ce site</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreurs dans le fichier /etc/apt/sources.list] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreurs_dans_le_fichieretcaptsourceslist" /><input type="hidden" name="codeblockOffset" value="33" /><input type="hidden" name="range" value="12219-13360" /><button type="submit" title="Erreurs dans le fichier /etc/apt/sources.list" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit12 page-header" id="eencountered_a_section_with_no_packageheader">E: Encountered a section with no Package: header</h2>
<div class="level2">

<p>
Un bug semble parfois empêcher l&#039;accès aux applications de la <a href="/software-center" class="wikilink2" title="software-center" rel="nofollow">logithèque</a> (idem avec <a href="/synaptic" class="wikilink1" title="synaptic">Synaptic</a>), lors d&#039;une mise à jour de la liste des paquets (via <code>apt update</code>), la console retourne une erreur de ce type :
</p>
<pre class="code">E: Encountered a section with no Package: header
E: Problem with MergeList /var/lib/apt/lists/[...]</pre>

<p>
La suppression du contenu du dossier /var/lib/apt/lists/ règle souvent le problème :
</p>
<pre class="code">sudo rm /var/lib/apt/lists/* -vf
sudo apt update</pre>

<p>
<a href="http://forum.ubuntu-fr.org/viewtopic.php?id=481901" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?id=481901" rel="nofollow">Discussion à propos de ce problème sur le forum ubuntu-fr</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[E: Encountered a section with no Package: header] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="eencountered_a_section_with_no_packageheader" /><input type="hidden" name="codeblockOffset" value="35" /><input type="hidden" name="range" value="13361-14043" /><button type="submit" title="E: Encountered a section with no Package: header" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit13 page-header" id="erreur_de_signature">Erreur de Signature</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Informations à  croiser avec <a href="/ppa#erreur_du_serveur_de_cles" class="wikilink1" title="ppa">erreur_du_serveur_de_cles</a> et/ou <a href="/apt-key" class="wikilink1" title="apt-key">apt-key</a><br/>

</p>

<p>
Les dépôts utilisent des clés publiques pour authentifier leur contenu. Si vous avez ajouté un dépôt non officiel (Medibuntu, ppa.launchpad …) à votre liste de canaux logiciels, il vous faut l&#039;authentifier.<br/>

Consultez le site du dépôt en question, ou la documentation Ubuntu, afin de pouvoir récupérer la clé et l&#039;installer.
</p>
<div class="notetip">Ces messages d&#039;erreurs ne sont qu&#039;un avertissement. En effet, vous pouvez tout à fait ne pas en tenir compte et continuer vos mises à jours ou installations
</div>
</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreur de Signature] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_de_signature" /><input type="hidden" name="codeblockOffset" value="37" /><input type="hidden" name="range" value="14044-14687" /><button type="submit" title="Erreur de Signature" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="erreur_gpg">Erreur GPG</h3>
<div class="level3">
<pre class="code">W: Erreur de GPG : http://archive.canonical.com oneiric Release : Les signatures suivantes ne sont pas valables : BADSIG 40976EAF437D05B5 Ubuntu Archive Automatic Signing Key &lt;ftpmaster@ubuntu.com&gt;
W: Une erreur s&#039;est produite lors du contrôle de la signature. Le dépôt n&#039;est pas mis à jour et les fichiers d&#039;index précédents seront utilisés. Erreur de GPG : http://extras.ubuntu.com oneiric Release : Les signatures suivantes ne sont pas valables : BADSIG 16126D3A3E5C1192 Ubuntu Extras Archive Automatic Signing Key &lt;ftpmaster@ubuntu.com&gt;

W: Impossible de récupérer http://extras.ubuntu.com/ubuntu/dists/oneiric/Release  

W: Le téléchargement de quelques fichiers d&#039;index a échoué, ils ont été ignorés, ou les anciens ont été utilisés à la place.</pre>

<p>
Si vous avez ce message d&#039;erreur et que vous avez tenté la commande <a href="/apt-key" class="wikilink1" title="apt-key">apt-key</a> comme ceci qui au final ne résout pas le problème :
</p>
<pre class="code">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 40976EAF437D05B5</pre>

<p>
Lancez cette série de commande :
</p>
<pre class="code">sudo rm -r /var/lib/apt/lists
sudo mkdir -p /var/lib/apt/lists/partial
sudo apt update</pre>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Erreur GPG] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_gpg" /><input type="hidden" name="codeblockOffset" value="37" /><input type="hidden" name="range" value="14688-15862" /><button type="submit" title="Erreur GPG" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="signature_non_verifiee">Signature non vérifiée</h3>
<div class="level3">
<pre class="code">W: GPG error: &#039;adresse d&#039;un dépôt&#039; Release: Les signatures suivantes n&#039;ont pas pu être vérifiées car la clé publique n&#039;est pas disponible : NO_PUBKEY &#039;XXXXXXXXXXXXXX&#039;</pre>

<p>
L&#039;erreur est parfois bloquante, il semblerait que ce soit un problème de proxy. Il est possible de le régler en <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditant le fichier</a> <strong>/etc/apt/apt.conf.d/90no-cache</strong> :
</p>
<pre class="file">Acquire
{
http
{
No-Cache &quot;true&quot;;
};
};</pre>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Vous pouvez également essayer 
</p>
<pre class="code">sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com XXXX</pre>

<p>
 où XXXX est la série de chiffre après NO_PUBKEY.
</p>

<p>
Si ça ne marche pas avec keyserver.ubuntu.com remplacer par :
hkp://subkeys.pgp.net ou
hkp://pgp.mit.edu ou 
hkp://pool.sks-keyservers.net (serveurs aléatoires)
hkp://keys.nayr.net ou encore
<a href="http://keys.gnupg.net" class="urlextern" title="http://keys.gnupg.net" rel="nofollow">http://keys.gnupg.net</a> <em>exemple:</em>
</p>
<pre class="code">sudo apt-key adv --recv-keys --keyserver hkp://subkeys.pgp.net XXXX</pre>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Signature non vérifiée] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="signature_non_verifiee" /><input type="hidden" name="codeblockOffset" value="40" /><input type="hidden" name="range" value="15863-16853" /><button type="submit" title="Signature non vérifiée" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit16 page-header" id="impossible_de_verrouillervarlibdpkgstatus">Impossible de verrouiller /var/lib/dpkg/status</h2>
<div class="level2">
<pre class="code">E: Impossible de verrouiller /var/lib/dpkg/status - open (2 Aucun fichier ou répertoire de ce type)
E: Les listes de paquets ou le fichier « status » ne peuvent être analysés ou lus. </pre>

<p>
Soit le fichier &quot;status&quot; est corrompu, soit il a été effacé. Ce fichier contient l&#039;ensemble des informations relatives aux paquets installés sur votre système et toutes les manipulations que vous avez effectuées. Sans ce fichier apt et dpkg sont bloqués. Le fonctionnement de votre système est alors fortement compromis.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Solution simple, utiliser le fichier status.old généré automatiquement par le système et le renommer en status :<pre class="code">cp /var/lib/dpkg/status.old /var/lib/dpkg/status</pre>

<p>
Attention, si il y a trop de différence entre le fichier status et le old, la solution devient aléatoire.<br/>
Processus complet à suivre dans tous les cas, au delà de la récupération du fichier status.old :
</p>
<pre class="code">## au cas ou un gestionnaire de paquets est encore lancé
sudo rm /var/lib/apt/lists/lock
## un petit backup au cas ou, prudence
sudo cp -arf /var/lib/dpkg /var/lib/dpkg.backup
## on remplace
sudo cp /var/lib/dpkg/status-old /var/lib/dpkg/status
sudo cp /var/lib/dpkg/available-old /var/lib/dpkg/available
## on purge
sudo rm -rf /var/lib/dpkg/updates/*
sudo rm -rf /var/lib/apt/lists
sudo mkdir /var/lib/apt/lists
sudo mkdir /var/lib/apt/lists/partial
sudo rm /var/cache/apt/*.bin
## et on relance
sudo apt clean
sudo apt autoclean
sudo apt update
sudo dpkg --clear-avail
sudo dpkg --configure -a
sudo apt install -f
sudo apt update
sudo apt upgrade</pre>
</div>
</li>
<li class="level1"><div class="li"> Si le fichier status.old(ou status-old) n&#039;est plus disponible, le plus sûr, hélas, va consister à réinstaller votre système (ou a le laisser en l&#039;état, sans mise à jour possible ni aucune installation de nouveau paquets possible. </div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[Impossible de verrouiller /var/lib/dpkg/status] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="impossible_de_verrouillervarlibdpkgstatus" /><input type="hidden" name="codeblockOffset" value="44" /><input type="hidden" name="range" value="16854-18748" /><button type="submit" title="Impossible de verrouiller /var/lib/dpkg/status" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit17 page-header" id="wfailed_to_fetch_gzipvarlibaptlistspartiallors_d_une_mise_a_jour">&quot;W: Failed to fetch gzip:/var/lib/apt/lists/partial/...&quot; lors d&#039;une mise à jour</h2>
<div class="level2">

<p>
 Voici la solution trouvée sur <a href="http://www.kubuntuforums.net/showthread.php?57567-Ubuntu-problems-on-update" class="urlextern" title="http://www.kubuntuforums.net/showthread.php?57567-Ubuntu-problems-on-update" rel="nofollow">ce forum</a> (en) :
</p>
<pre class="code">cd /var/lib/apt 
sudo mv lists lists.old 
sudo mkdir -p lists/partial 
sudo apt clean 
sudo apt update</pre>
<hr />

<p>
<em>Contributeurs: <a href="/utilisateurs/fabien26" class="wikilink1" title="utilisateurs:fabien26">Fabien26</a>, <a href="/utilisateurs/%D0%BD%D0%B0_%D0%BA%D1%80%D0%B0%D1%8E" class="wikilink1" title="utilisateurs:на_краю">на_краю</a>, <a href="/utilisateurs/sheep" class="wikilink1" title="utilisateurs:sheep">sheep</a>, <a href="/utilisateurs/beaver" class="wikilink1" title="utilisateurs:beaver">BeAvEr</a>, <a href="/utilisateurs/krodelabestiole" class="wikilink1" title="utilisateurs:krodelabestiole">krodelabestiole</a></em>
</p>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/probleme_apt"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1585733613" /><input type="hidden" name="summary" value="[&quot;W: Failed to fetch gzip:/var/lib/apt/lists/partial/...&quot; lors d&#039;une mise à jour] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="wfailed_to_fetch_gzipvarlibaptlistspartiallors_d_une_mise_a_jour" /><input type="hidden" name="codeblockOffset" value="47" /><input type="hidden" name="range" value="18749-" /><button type="submit" title="&quot;W: Failed to fetch gzip:/var/lib/apt/lists/partial/...&quot; lors d&#039;une mise à jour" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="probleme_apt.txt">probleme_apt.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 01/04/2020, 11:33">Le 01/04/2020, 11:33</span></li><li class="text-muted">par 81.243.237.128</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=probleme_apt&amp;1635561198" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>udev [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="systeme,materiel"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/udev?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/udev?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/udev"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/udev"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/udev"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"udev","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="udev">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/udev?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/udev?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/udev?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/udev?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/udev?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/udev?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/udev?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">udev</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/udev?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/udev?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/udev?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#preambule","title":"Pr\u00e9ambule","level":1},{"link":"#les_concepts","title":"Les concepts","level":1},{"link":"#terminologiedevfs_sysfs_nodes_etc","title":"Terminologie: devfs, sysfs, nodes, etc.","level":2},{"link":"#pourquoi","title":"Pourquoi ?","level":2},{"link":"#donner_un_nom_persistant_a_un_peripherique","title":"Donner un nom persistant \u00e0 un p\u00e9riph\u00e9rique","level":2},{"link":"#redigez_vos_regles","title":"R\u00e9digez vos r\u00e8gles","level":1},{"link":"#fichiers_de_regles_et_syntaxes","title":"Fichiers de r\u00e8gles et syntaxes","level":2},{"link":"#syntaxe_d_une_regle","title":"Syntaxe d'une r\u00e8gle","level":2},{"link":"#regles_basiques","title":"R\u00e8gles basiques","level":2},{"link":"#les_attributs_de_sysfs","title":"Les attributs de sysfs","level":2},{"link":"#substitution_simple_de_caracteres","title":"Substitution simple de caract\u00e8res","level":2},{"link":"#reconnaissance_evoluee_de_noms","title":"Reconnaissance \u00e9volu\u00e9e de noms","level":2},{"link":"#utilisation_de_sysfs","title":"Utilisation de sysfs","level":1},{"link":"#organisation_de_sysfs","title":"Organisation de sysfs","level":2},{"link":"#udevadm_info","title":"udevadm info","level":2},{"link":"#trouver_un_peripherique_tout_juste_branche","title":"Trouver un p\u00e9riph\u00e9rique tout juste branch\u00e9","level":2},{"link":"#methodes_alternatives","title":"M\u00e9thodes Alternatives","level":2},{"link":"#le_coin_du_geek","title":"Le coin du geek","level":1},{"link":"#creer_des_permissions_et_des_proprietes","title":"Cr\u00e9er des permissions et des propri\u00e9t\u00e9s","level":2},{"link":"#utiliser_des_programmes_pour_nommer_les_peripheriques","title":"Utiliser des programmes pour nommer les p\u00e9riph\u00e9riques","level":2},{"link":"#executer_des_programmes_sur_des_evenements","title":"Ex\u00e9cuter des programmes sur des \u00e9v\u00e9nements","level":2},{"link":"#interactions_avec_l_environnement","title":"Interactions avec l'environnement","level":2},{"link":"#options_additionnelles","title":"Options additionnelles","level":2},{"link":"#exemples_pratiques","title":"Exemples pratiques","level":1},{"link":"#imprimante_usb","title":"Imprimante USB","level":2},{"link":"#appareil_photo_usb","title":"Appareil photo USB","level":2},{"link":"#disque_dur_usb","title":"Disque Dur USB","level":2},{"link":"#lecteurs_de_carte_usb","title":"Lecteurs de carte USB","level":2},{"link":"#palm_usb","title":"Palm USB","level":2},{"link":"#lecteurs_cddvd","title":"Lecteurs CD\/DVD","level":2},{"link":"#interfaces_reseau","title":"Interfaces R\u00e9seau","level":2},{"link":"#manettes_de_jeu","title":"Manettes de jeu","level":2},{"link":"#essais_et_deboggage","title":"Essais et deboggage","level":1},{"link":"#activez_vos_regles","title":"Activez vos r\u00e8gles","level":2},{"link":"#udevtest","title":"udevtest","level":2},{"link":"#auteur_et_contact","title":"Auteur et contact","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#preambule">Préambule</a></li>
<li class="level1"><a href="#les_concepts">Les concepts</a>
<ul class="nav toc">
<li class="level2"><a href="#terminologiedevfs_sysfs_nodes_etc">Terminologie: devfs, sysfs, nodes, etc.</a></li>
<li class="level2"><a href="#pourquoi">Pourquoi ?</a></li>
<li class="level2"><a href="#donner_un_nom_persistant_a_un_peripherique">Donner un nom persistant à un périphérique</a></li>
</ul>
</li>
<li class="level1"><a href="#redigez_vos_regles">Rédigez vos règles</a>
<ul class="nav toc">
<li class="level2"><a href="#fichiers_de_regles_et_syntaxes">Fichiers de règles et syntaxes</a></li>
<li class="level2"><a href="#syntaxe_d_une_regle">Syntaxe d&#039;une règle</a></li>
<li class="level2"><a href="#regles_basiques">Règles basiques</a></li>
<li class="level2"><a href="#les_attributs_de_sysfs">Les attributs de sysfs</a></li>
<li class="level2"><a href="#substitution_simple_de_caracteres">Substitution simple de caractères</a></li>
<li class="level2"><a href="#reconnaissance_evoluee_de_noms">Reconnaissance évoluée de noms</a></li>
</ul>
</li>
<li class="level1"><a href="#utilisation_de_sysfs">Utilisation de sysfs</a>
<ul class="nav toc">
<li class="level2"><a href="#organisation_de_sysfs">Organisation de sysfs</a></li>
<li class="level2"><a href="#udevadm_info">udevadm info</a></li>
<li class="level2"><a href="#trouver_un_peripherique_tout_juste_branche">Trouver un périphérique tout juste branché</a></li>
<li class="level2"><a href="#methodes_alternatives">Méthodes Alternatives</a></li>
</ul>
</li>
<li class="level1"><a href="#le_coin_du_geek">Le coin du geek</a>
<ul class="nav toc">
<li class="level2"><a href="#creer_des_permissions_et_des_proprietes">Créer des permissions et des propriétés</a></li>
<li class="level2"><a href="#utiliser_des_programmes_pour_nommer_les_peripheriques">Utiliser des programmes pour nommer les périphériques</a></li>
<li class="level2"><a href="#executer_des_programmes_sur_des_evenements">Exécuter des programmes sur des événements</a></li>
<li class="level2"><a href="#interactions_avec_l_environnement">Interactions avec l&#039;environnement</a></li>
<li class="level2"><a href="#options_additionnelles">Options additionnelles</a></li>
</ul>
</li>
<li class="level1"><a href="#exemples_pratiques">Exemples pratiques</a>
<ul class="nav toc">
<li class="level2"><a href="#imprimante_usb">Imprimante USB</a></li>
<li class="level2"><a href="#appareil_photo_usb">Appareil photo USB</a></li>
<li class="level2"><a href="#disque_dur_usb">Disque Dur USB</a></li>
<li class="level2"><a href="#lecteurs_de_carte_usb">Lecteurs de carte USB</a></li>
<li class="level2"><a href="#palm_usb">Palm USB</a></li>
<li class="level2"><a href="#lecteurs_cddvd">Lecteurs CD/DVD</a></li>
<li class="level2"><a href="#interfaces_reseau">Interfaces Réseau</a></li>
<li class="level2"><a href="#manettes_de_jeu">Manettes de jeu</a></li>
</ul>
</li>
<li class="level1"><a href="#essais_et_deboggage">Essais et deboggage</a>
<ul class="nav toc">
<li class="level2"><a href="#activez_vos_regles">Activez vos règles</a></li>
<li class="level2"><a href="#udevtest">udevtest</a></li>
</ul>
</li>
<li class="level1"><a href="#auteur_et_contact">Auteur et contact</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/systeme" class="wikilink1" title="systeme" rel="tag">système</a>,
	<a href="/materiel" class="wikilink1" title="materiel" rel="tag">matériel</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="udevcomment_ca_marche">UDEV : Comment ça marche ?</h1>
<div class="level1">

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[UDEV : Comment ça marche ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="udevcomment_ca_marche" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="36-76" /><button type="submit" title="UDEV : Comment ça marche ?" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="preambule">Préambule</h2>
<div class="level2">

<p>
Comme vous l&#039;aurez compris, ceci est un tutoriel sur UDEV. Il est très complet, il explique en détail le fonctionnement de la bête. Je vous conseille de ne pas le lire en diagonale: il contient beaucoup d&#039;informations, toutes nécessaires pour faire fonctionner correctement vos règles.
</p>

<p>
En général une règle s&#039;écrit en quelques lignes dans un fichiers <code>.rules</code> qui se trouve dans  /etc/udev/rules.d, mais nécessite beaucoup de rigueur pour qu&#039;elle fonctionne. 
</p>

<p>
<strong>Donc prenez votre temps pour tout lire jusqu&#039;au bout et comprendre ce que vous faites</strong> !
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Préambule] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="preambule" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="77-665" /><button type="submit" title="Préambule" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="les_concepts">Les concepts</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Les concepts] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_concepts" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="666-689" /><button type="submit" title="Les concepts" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="terminologiedevfs_sysfs_nodes_etc">Terminologie: devfs, sysfs, nodes, etc.</h3>
<div class="level3">

<p>
Voici une introduction basique. 
</p>

<p>
Sur les systèmes à base de Linux, le répertoire <code>/dev</code> sert à contenir les périphériques sous forme de fichier, les &quot;nodes&quot;, qui se rapportent aux périphériques système. Chaque &quot;node&quot; se réfère à un périphérique, qui peut -ou pas- exister. Les applications utilisateur peuvent utiliser ces &quot;nodes&quot; pour interagir avec le périphérique. Par exemple, le serveur graphique X va &quot;écouter&quot; <code>/dev/input/mice</code> qui se réfère à la souris et faire bouger le pointeur à l&#039;écran.
</p>

<p>
Le répertoire original <code>/dev</code> contenait tous les fichiers correspondant à tous les périphériques possibles et imaginables que l&#039;on pouvait trouver dans une configuration matérielle. De ce fait, il était très volumineux. <strong>Devfs</strong> a été créé pour simplifier cette utilisation, mais ce système a montré ses limites lorsqu&#039;il y a des problèmes compliqués à résoudre. 
</p>

<p>
<em><strong>Udev</strong></em> est le nouveau système pour gérer le répertoire <code>/dev</code>, conçu pour repousser les limites mises en avant par les précédentes versions de <code>/dev</code>, et fournir un lien robuste. Dans le but de créer et nommer les périphériques dans <code>/dev</code>, les &quot;nodes&quot; qui correspondent aux périphériques système, <em>udev</em> fait le lien entre les informations données par <em>sysfs</em> et les règles données par l&#039;utilisateur. Ce wiki a pour but d&#039;expliquer comment écrire les règles <em>udev</em>.
</p>

<p>
<em><strong>Sysfs</strong></em> a été officialisé avec les noyaux de la série 2.6. Il est géré par le noyau pour exporter les informations basiques sur les périphériques actuellement connectés au système. <em>Udev</em> utilise ces informations pour créer les &#039;nodes&#039; correspondant aux périphériques de votre ordinateur. <em>Sysfs</em> est monté sur <code>/sys</code> et vous pouvez le parcourir: vous pouvez regarder ces fichiers avant de vous plonger dans <em>udev</em>. Dans ce wiki, j&#039;utiliserai <code>/sys</code> et <em>sysfs</em>, qui signifient la même chose. 
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Terminologie: devfs, sysfs, nodes, etc.] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="terminologiedevfs_sysfs_nodes_etc" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="690-2681" /><button type="submit" title="Terminologie: devfs, sysfs, nodes, etc." class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="pourquoi">Pourquoi ?</h3>
<div class="level3">

<p>
Les règles <em>udev</em> sont flexibles et très puissantes. Voici quelques exemples de ce que vous pouvez faire : 
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> changer le nom assigné par défaut à un périphérique;</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> donner un nom alternatif ou permanent à un périphérique en créant un lien symbolique;</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> nommer un périphérique en fonction de la sortie d&#039;un programme;</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> changer les permissions et les propriétés d&#039;un périphérique;</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> lancer un script quand un périphérique est créé ou supprimé (en général pour un périphérique qui se branche à chaud, comme l&#039;<abbr title="Universal Serial Bus">USB</abbr>);</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> renommer les interfaces réseaux </div>
</li>
</ul>

<p>
L&#039;écriture de règles n&#039;est pas une solution s&#039;il n&#039;existe pas du tout de périphérique &quot;node&quot; pour votre périphérique particulier. S&#039;il n&#039;y a pas de règle, <em>udev</em> va créer le périphérique &quot;node&quot; avec le nom donné par défaut par le noyau.
</p>

<p>
Il y a plusieurs avantages à avoir un nom de périphérique constant. Supposons que vous ayez deux périphériques <abbr title="Universal Serial Bus">USB</abbr> : une webcam et une clé <abbr title="Universal Serial Bus">USB</abbr>. Ces périphériques sont normalement assignés aux périphériques &quot;nodes&quot; <code>/dev/sda</code> et <code>/dev/sdb</code>, mais cela dépend de l&#039;ordre dans lequel ils ont été connectés. C&#039;est pourquoi il est plus pratique de nommer les périphériques à chaque fois de la même manière, par exemple <code>/dev/camera</code> et <code>/dev/flashdisk</code>. 
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Pourquoi ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pourquoi" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2682-4029" /><button type="submit" title="Pourquoi ?" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="donner_un_nom_persistant_a_un_peripherique">Donner un nom persistant à un périphérique</h3>
<div class="level3">

<p>
<em>Udev</em> fournit un nom persistant pour certains types de périphériques. C&#039;est un dispositif très pratique, qui signifie que vous n&#039;avez pas besoin d&#039;écrire de règle pour ceux-ci.
</p>

<p>
Par exemple, <em>Udev</em> fournit des noms persistants pour les périphériques de stockage dans le répertoire <code>/dev/disk</code>. Pour les voir, vous pouvez utiliser la commande suivante : 
</p>
<pre class="code">ls -lR /dev/disk</pre>

<p>
Cela fonctionne pour tous les types de périphériques de stockage. <em class="u">Par exemple</em>, <em>udev</em> a créé <code>/dev/disk/by-id/scsi-<abbr title="Serial Advanced Technology Attachment">SATA</abbr>_ST3120827AS_4MS1NDXZ-part3</code> qui est un lien symbolique vers le nom persistant de ma partition root. <em>Udev</em> crée <code>/dev/disk/by-id/usb-Prolific_Technology_Inc._<abbr title="Universal Serial Bus">USB</abbr>_Mass_Storage_Device-part1</code> quand on branche une clé <abbr title="Universal Serial Bus">USB</abbr>, qui est aussi un nom persistant. 
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Donner un nom persistant à un périphérique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="donner_un_nom_persistant_a_un_peripherique" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="4030-4878" /><button type="submit" title="Donner un nom persistant à un périphérique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="redigez_vos_regles">Rédigez vos règles</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Rédigez vos règles] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="redigez_vos_regles" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="4879-4910" /><button type="submit" title="Rédigez vos règles" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="fichiers_de_regles_et_syntaxes">Fichiers de règles et syntaxes</h3>
<div class="level3">

<p>
Pour décider comment nommer un périphérique et quelles actions a faire, <em>udev</em> utilise une série de fichiers de règles. Ces fichiers se trouvent dans le répertoire <code>/etc/udev/rules.d</code>, et doivent tous avoir l&#039;extension <code>.rules</code>. 
Les règles <em>udev</em> créées par défaut sont dans le fichier <code>/lib/udev/rules.d/50-udev-default.rules</code>. Il pourrait être intéressant d&#039;y jeter un œil – il contient quelques exemples -, et certaines règles contiennent un exemple de sortie de <em>devfs</em> que vous trouverez dans <code>/dev</code> par défaut. Cependant, il est conseillé de ne pas écrire de règle directement dedans.
</p>

<p>
Les fichiers de <code>/lib/udev/rules.d/</code> sont triés par ordre <strong>alphabétique</strong>, et dans certaines circonstances, l&#039;ordre dans lequel ils sont analysés est important. En général, vous voulez que vos propres règles soient prises en compte avant les règles créées par défaut, donc créez votre fichier comme ceci: <code>/etc/udev/rules.d/10-local.rules</code> (le nombre 10 influe sur l&#039;ordre de prise en compte) et écrivez vos propres règles dans ce fichier. 
</p>

<p>
Dans un fichier de règles, les lignes commençant par &quot;<code>#</code>&quot; sont traitées comme des commentaires. Toutes les autres lignes sont donc considérées comme des règles. Les règles s&#039;écrivent sur une seule ligne (on ne les coupe pas par un passage à la ligne avec <em>ENTRÉE</em>).
</p>

<p>
Un périphérique peut être contrôlé par plusieurs règles. Ceci peut être avantageux lorsque par exemple, nous écrivons deux règles pour un périphérique, qui donnent un nom différent pour le même périphérique. Les deux règles seront appliquées même si ces règles sont dans des fichiers séparés. Il est important de comprendre que <em>udev</em> ne s&#039;interrompt pas quand il trouve une règle, il continue sa recherche et tente d&#039;appliquer chaque règle trouvée.
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Fichiers de règles et syntaxes] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="fichiers_de_regles_et_syntaxes" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="4911-6797" /><button type="submit" title="Fichiers de règles et syntaxes" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="syntaxe_d_une_regle">Syntaxe d&#039;une règle</h3>
<div class="level3">

<p>
Chaque règle est faite d&#039;un ensemble de <em>clefs de correspondances</em> et de <em>clefs d&#039;assignation</em>, séparées par des virgules. Les <em>clefs de correspondances</em> sont les conditions utilisées pour identifier le périphérique sur lequel la règle agit. <strong>Quand toute la série de ces clefs de correspondance correspond bien au périphérique, alors la règle est appliquée et les actions des clefs d&#039;assignation sont appliquées</strong>. Chaque règle doit se composer d&#039;au moins une clef de correspondance et d&#039;une clef d&#039;assignation. 
</p>

<p>
Prenons par exemple :
</p>
<pre class="code">KERNEL==&quot;hdb&quot;, NAME=&quot;my_spare_disk&quot;</pre>

<p>
Cette règle inclut une clef de correspondance (<code>KERNEL</code>) et une clef d&#039;assignation (<code>NAME</code>). La sémantique de ces clefs et leurs propriétés seront détaillées par la suite. Il est important de noter que la clef de correspondance est liée à sa valeur par un double égal (<code>==</code>), alors que la clef d&#039;assignation est liée à sa valeur par un simple égal (<code>=</code>). 
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Syntaxe d&#039;une règle] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="syntaxe_d_une_regle" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="6798-7811" /><button type="submit" title="Syntaxe d&#039;une règle" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="regles_basiques">Règles basiques</h3>
<div class="level3">

<p>
Dans une règle, <em>Udev</em> peut utiliser plusieurs clefs pour identifier un périphérique de manière très précise. Les clefs les plus communes sont présentées ci-dessous, les autres seront traitées plus loin. Pour la liste complète, consultez l&#039;aide de <em>udev</em> avec la commande <code>man udev</code>. 
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>KERNEL</code> – le nom du périphérique donné par le noyau;</div>
</li>
<li class="level1"><div class="li"> <code>SUBSYSTEM</code> - le nom du sous système contenant le périphérique;</div>
</li>
<li class="level1"><div class="li"> <code>DRIVER</code> - le nom du pilote du périphérique.</div>
</li>
</ul>

<p>
Après avoir utilisé une série de clefs pour définir précisément le périphérique, <em>udev</em> vous donne le contrôle, grâce aux clefs d&#039;assignation. Pour la liste complète de ces clefs, consultez l&#039;aide de <em>udev</em> avec la commande <code>man udev</code>. Les clefs d&#039;assignation les plus fréquentes se trouvent ci-dessous, les autres seront traités plus loin. 
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>NAME</code> – nom du périphérique &quot;node&quot;;</div>
</li>
<li class="level1"><div class="li"> <code>SYMLINK</code> - <strong>liste</strong> des liens symboliques, ceux-ci étant les noms alternatifs pour le périphérique.</div>
</li>
</ul>

<p>
Comme il a été dit au début, <em>udev</em> crée un seul vrai périphérique &quot;node&quot; pour un périphérique. Si vous souhaitez fournir plusieurs noms pour ce périphérique, utilisez le lien symbolique. Avec l&#039;assignation <code>SYMLINK</code>, vous créez une liste de liens symboliques, qui pointent vers le périphérique &quot;node&quot;. Pour utiliser cette liste de liens, nous introduisons un nouvel opérateur <code>+=</code>, qui permet d&#039;ajouter des éléments à la liste. Vous pouvez utiliser plusieurs noms sur la liste quelle que soit la règle en les séparant par un espace.
</p>
<pre class="code">KERNEL==&quot;hdb&quot;, NAME=&quot;my_spare_disk&quot;</pre>

<p>
Soit la règle : «<em>pour le périphérique que le noyau a appelé <code>hdb</code>, le renommer en <code>my_spare_disk</code></em>». Le périphérique &quot;node&quot; apparaîtra maintenant comme <code>/dev/my_spare_disk</code>.
</p>
<pre class="code">KERNEL==&quot;hdb&quot;, DRIVER==&quot;ide-disk&quot;, SYMLINK+=&quot;sparedisk&quot;</pre>

<p>
Soit la règle : «<em>pour le périphérique que le noyau à appelé <code>hdb</code>» <strong>et</strong>
«</em>quand le pilote est <code>ide-disk</code>», alors «<em>créer un lien symbolique (de plus) nommé <code>sparedisk</code></em>». Notez que nous n&#039;avons pas spécifié de nom au périphérique &quot;node&quot;, donc <em>udev</em> gardera celui par défaut. Afin de préserver la disposition standard dans <code>/dev</code>, il est conseillé d&#039;écrire vos propres règles sans <code>NAME</code>, et de préférer ajouter des <code>SYMLINK</code>s et/ou donner d&#039;autres assignations.
</p>
<pre class="code">KERNEL==&quot;hdc&quot;, SYMLINK+=&quot;cdrom cdrom0&quot;</pre>

<p>
Cette règle est probablement la plus commune que vous écrirez. Cela crée deux liens symboliques, <code>/dev/cdrom</code> et <code>/dev/cdrom0</code>, qui pointeront tous deux sur <code>/dev/hdc</code>. Une fois de plus, pas d&#039;assignation <code>NAME</code> spécifiée, donc le nom par défaut donné par le kernel (<code>hdc</code>) sera utilisé.
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Règles basiques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="regles_basiques" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="7812-10594" /><button type="submit" title="Règles basiques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="les_attributs_de_sysfs">Les attributs de sysfs</h3>
<div class="level3">

<p>
Les clefs introduites précédemment semblent avoir des possibilités limitées. Cependant, vous pouvez avoir besoin d&#039;un contrôle plus précis : pour identifier un périphérique par le numéro du <em>vendor</em>, le nom exact du produit, le numéro de série, la capacité de stockage, le nombre de partitions, etc.
Certains pilotes exportent ces informations dans le <em>sysfs</em>, et <em>udev</em> vous permet d&#039;utiliser ces informations pour vos propres règles, à l&#039;aide de la clé <code>ATTR</code> par syntaxe particulière. 
</p>

<p>
Voici plusieurs exemples utilisant <em>sysfs</em>, plus de détails par la suite.
</p>
<pre class="code">KERNEL==&quot;sda&quot;, ATTR{model}==&quot;ST3120827AS&quot;, SYMLINK+=&quot;my_hard_disk&quot;

SUBSYSTEM==&quot;block&quot;, ATTR{size}==&quot;234441648&quot;, SYMLINK+=&quot;my_disk&quot;

BUS==&quot;usb&quot;, ATTR{manufacturer}==&quot;OLYMPUS&quot;, ATTR{product}==&quot;X250,D560Z,C350Z&quot;, SYMLINK+=&quot;camera&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Les attributs de sysfs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_attributs_de_sysfs" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="10595-11463" /><button type="submit" title="Les attributs de sysfs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="substitution_simple_de_caracteres">Substitution simple de caractères</h3>
<div class="level3">

<p>
Pour écrire des règles agissant sur plusieurs périphériques similaires, les opérateurs de substitution de <em>udev</em> (à la manière de <code>printf</code>) sont très utiles. Vous pouvez inclure simplement ces opérateurs dans n&#039;importe quel assignement dans vos règles, et <em>udev</em> les évaluera quand ils seront exécutés. 
</p>

<p>
Les opérateurs les plus communs sont <code>%k</code> et <code>%n</code>. <code>%k</code> est remplacé par le nom que le noyau avait assigné au périphérique, e.g. <code>sda3</code> pour le périphérique qui apparaîtra par défaut sur <code>/dev/sda3</code>. <code>%n</code> est remplacé par le numéro que le noyau a assigné au périphérique (pour le périphérique de stockage, c&#039;est le numéro de partition), e.g. <code>3</code> pour <code>/dev/sda3</code>.
</p>

<p>
<em>Udev</em> fournit d&#039;autres opérateurs de substitution pour créer des fonctions plus avancées que vous pourrez consulter dans l&#039;aide de <em>udev</em> (dans une console, tapez <code>man udev</code>). Il y a une syntaxe alternative pour ces opérateurs - <code>$kernel</code> et <code>$number</code> pour les exemples précédents. Et si vous voulez utiliser un <code>%</code> littéral dans une règle, il vous suffira de mettre <code>%%</code>; si vous voulez utiliser un <code>$</code> littéral dans une règle, mettez <code>$$</code>.
</p>

<p>
<em class="u">Par exemple :</em>
</p>
<pre class="code">KERNEL==&quot;mice&quot;, NAME=&quot;input/%k&quot;
KERNEL==&quot;loop0&quot;, NAME=&quot;loop/%n&quot;, SYMLINK+=&quot;%k&quot;</pre>

<p>
La première règle assure que le périphérique &quot;node&quot; appelé <code>mice</code> (pour une souris) apparaîtra exclusivement dans le répertoire <code>/dev/input</code> (donc <code>/dev/input/mice</code>, au lieu du défaut <code>/dev/mice</code>). La deuxième règle assure que le périphérique &quot;node&quot; <code>loop0</code> soit créé comme <code>/dev/loop/0</code>, mais crée aussi un lien symbolique <code>/dev/loop0</code> pour être compatible.
</p>

<p>
On peut se demander quel est le véritable intérêt dans le cas de ces deux règles, car elles peuvent être utilisées sans aucun opérateur de substitution. Le véritable intérêt des substitutions va être expliqué dans la section suivante. 
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Substitution simple de caractères] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="substitution_simple_de_caracteres" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="11464-13452" /><button type="submit" title="Substitution simple de caractères" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="reconnaissance_evoluee_de_noms">Reconnaissance évoluée de noms</h3>
<div class="level3">

<p>
Lorsque vous précisez un nom dans une clef d&#039;identification, il est possible d&#039;utiliser une expression, similaire à celles proposées par le <em>shell</em>. Les caractères spéciaux sont:
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>?</code> - signifie n&#039;importe quel caractère (ex: &quot;<code>d?v</code>&quot; correspondra pour <code>dev</code>, <code>duv</code>, <code>d_v</code> mais pas <code>dv</code>);</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>*</code> - signifie plusieurs caractères (ex: &quot;<code>d*</code>&quot; correspondra pour <code>dev</code>, mais aussi pour <code>d</code>, alors que <code>edev</code> n&#039;ira pas);</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>[<em>liste</em>]</code> - signifie un caractère, de la liste (ex: &quot;<code>d[aei]v</code>&quot; correspondra pour <code>dev</code> et <code>dav</code>, mais pas <code>dov</code>)</div>
</li>
</ul>

<p>
Voici quelques exemples, notez l&#039;utilisation des opérateurs de substitution:
</p>
<pre class="code">KERNEL==&quot;fd[0-9]*&quot;, NAME=&quot;floppy/%n&quot;, SYMLINK+=&quot;%k&quot;
KERNEL==&quot;hiddev*&quot;, NAME=&quot;usb/%k&quot;</pre>

<p>
La première règle est pour les lecteurs de disquette, elle assure que tous les périphériques &quot;nodes&quot; seront placés par leur numéro dans le répertoire <code>/dev/floppy</code> et ajoute un lien avec le nom par défaut dans <code>/dev/</code>.
</p>

<p>
La seconde règle place tous les périphériques dont le nom commence par <code>hiddev</code> dans le répertoire <code>/dev/usb</code> sans modifier le nom que le noyau leur a donné.
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Reconnaissance évoluée de noms] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="reconnaissance_evoluee_de_noms" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="13453-14660" /><button type="submit" title="Reconnaissance évoluée de noms" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit14 page-header" id="utilisation_de_sysfs">Utilisation de sysfs</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Utilisation de sysfs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_de_sysfs" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="14661-14693" /><button type="submit" title="Utilisation de sysfs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="organisation_de_sysfs">Organisation de sysfs</h3>
<div class="level3">

<p>
L&#039;utilisation de <em>sysfs</em> a été brièvement évoquée précédemment. Dans le but d&#039;écrire des règles basées sur ces informations, il vous faut connaître le nom des attributs et leurs valeurs. 
<em>Sysfs</em> a une structure très simple. Il est logiquement divisé en répertoires, chacun comportant un certain nombre de fichiers (<em>attributs</em>) qui contiennent en général une seule valeur. Certains liens symboliques sont présents, parcourant plusieurs branches de &quot;l&#039;arbre&quot; <em>sysfs</em>. 
</p>

<p>
Certains répertoires sont situés sur les niveaux supérieurs du dispositif. Le niveau supérieur lie d&#039;autres parties de <em>sysfs</em> vers le périphérique en question. Les chemins des périphériques du niveau supérieur sont classifiés dans le répertoire <em>sysfs</em>, contenant un fichier <code>dev</code>. La commande suivante permet de les lister :
</p>
<pre class="code">find /sys -name dev</pre>

<p>
Par exemple, sur un système, le répertoire <code>/sys/block/sda</code> peut être le chemin du périphérique du disque dur (fourni par la commande &quot;udevadm info -q path -n /dev/sda&quot;). Il est lié au contrôleur sur lequel celui-ci est connecté avec le lien symbolique <code>/sys/block/sda/device/</code>, qui en même temps est lié au pilote du périphérique avec le lien symbolique <code>/sys/block/sda/device/driver/</code>.
</p>

<p>
Quand vous écrivez des règles basées sur les informations de <em>sysfs</em>, vous devez simplement remplacer les attributs par ceux trouvés dans ces fichiers. Par exemple, on peut lire la taille du disque dur avec :
</p>
<pre class="code">cat /sys/block/sda/size
234441648</pre>

<p>
On peut donc utiliser dans une règle <em>udev</em> <code>ATTR{size}==&quot;234441648&quot;</code> pour identifier ce disque. Comme <em>udev</em> fait une recherche dans toute la branche du périphérique, on peut aussi choisir d&#039;afficher une autre partie de cette branche (e.g. <code>attributes</code> dans <code>/sys/class/block/sda/device/</code>). Cependant il y a d&#039;autres choses à prendre en considération quand on utilise d&#039;autres parties de la branche, comme cela est décrit plus loin. 
</p>

<p>
Bien que cela serve d&#039;introduction utile pour la structure du <em>sysfs</em> et pour comprendre le fonctionnement de <em>udev</em>, le changement avec <em>sysfs</em> est souvent une perte de temps qui n&#039;est donc pas nécessaire.
</p>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Organisation de sysfs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="organisation_de_sysfs" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="14694-16936" /><button type="submit" title="Organisation de sysfs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="udevadm_info">udevadm info</h3>
<div class="level3">

<p>
<em>udevadm info</em> est probablement l&#039;outil le plus puissant pour aider dans la construction des règles. Tout ce que vous devez connaître est la dénomination <em>sysfs</em> du périphérique en question. Par exemple :
</p>
<pre class="code">udevadm info -a -p /sys/block/sda

------------------**INFORMATIONS DE TYPE 1**------------------
  looking at device &#039;/block/sda&#039;:
    KERNEL==&quot;sda&quot;
    SUBSYSTEM==&quot;block&quot;
    ATTR{stat}==&quot;  128535     2246  2788977   766188    73998   317300  3132216  5735004        0   516516  6503316&quot;
    ATTR{size}==&quot;234441648&quot;
    ATTR{removable}==&quot;0&quot;
    ATTR{range}==&quot;16&quot;
    ATTR{dev}==&quot;8:0&quot;

------------------**INFORMATIONS DE TYPE 2**------------------
  looking at device &#039;/devices/pci0000:00/0000:00:07.0/host0/target0:0:0/0:0:0:0&#039;:
    ID==&quot;0:0:0:0&quot;
    BUS==&quot;scsi&quot;
    DRIVER==&quot;sd&quot;
    ATTR{ioerr_cnt}==&quot;0x0&quot;
    ATTR{iodone_cnt}==&quot;0x31737&quot;
    ATTR{iorequest_cnt}==&quot;0x31737&quot;
    ATTR{iocounterbits}==&quot;32&quot;
    ATTR{timeout}==&quot;30&quot;
    ATTR{state}==&quot;running&quot;
    ATTR{rev}==&quot;3.42&quot;
    ATTR{model}==&quot;ST3120827AS     &quot;
    ATTR{vendor}==&quot;ATA     &quot;
    ATTR{scsi_level}==&quot;6&quot;
    ATTR{type}==&quot;0&quot;
    ATTR{queue_type}==&quot;none&quot;
    ATTR{queue_depth}==&quot;1&quot;
    ATTR{device_blocked}==&quot;0&quot;</pre>

<p>
Comme vous pouvez le voir, <code>udevadm info</code> renvoie une liste d&#039;informations que vous pouvez utiliser dans vos règles <em>udev</em>. Avec l&#039;exemple précédant on peut créer deux règles pour ce périphérique :
</p>
<pre class="code">SUBSYSTEM==&quot;block&quot;, ATTR{size}==&quot;234441648&quot;, NAME=&quot;my_hard_disk&quot;

BUS==&quot;scsi&quot;, ATTR{model}==&quot;ST3120827AS&quot;, NAME=&quot;my_hard_disk&quot;</pre>

<p>
Dans ces exemples, vous avez pu voir la <strong>séparation des informations</strong> (<code>type 1</code> et <code>type 2</code>), car vous <strong>ne</strong> pouvez <strong>pas</strong> mélanger ces informations dans une règle, sinon elle ne fonctionnera pas. En effet, ils sont considérés comme des périphériques différents (<code>looking at device &#039;/block/sda</code>&#039; et <code>looking at device &#039;/devices/pci0000:00/0000:00:07.0/host0/target0:0:0/0:0:0:0</code>&#039; sont <strong>deux</strong> périphériques <strong>distincts</strong>).
</p>

<p>
Par exemple, cette règle est <strong>invalide</strong> :
</p>
<pre class="code"># **règle fausse**
SUBSYSTEM==&quot;block&quot;, ATTR{size}==&quot;234441648&quot;, ATTR{model}==&quot;ST3120827AS&quot;, NAME=&quot;my_hard_disk&quot;</pre>

<p>
Normalement vous aurez beaucoup d&#039;attributs, et vous devrez en choisir quelques uns (de la même section) pour construire votre règle. En général, vous voudrez choisir les attributs qui identifient votre périphérique de façon unique et persistante. Dans ces exemples on choisit la taille et le numéro de série de son disque. On n&#039;a pas utilisé les nombres sans signification comme <code>ATTR{iodone_cnt}==&quot;0x31737&quot;</code>.
</p>

<p>
Notez aussi que les attributs donnés par <code>udevadm info</code> sont séparés par des espaces (voyez <code>ST3120827AS</code> dans l&#039;exemple précédent). Dans vos règles, vous pouvez spécifier les espaces supplémentaires, ou les couper comme précédemment.
</p>

<p>
Là où <code>udevadm info</code> se complique, c&#039;est que vous devez connaître les branches supérieures (<code>/sys/block/sda</code> dans l&#039;exemple précédant), ce qui n&#039;est pas toujours évident. Cependant, comme en général vous écrivez des règles pour les périphériques &quot;nodes&quot; existants, vous pouvez utiliser <em>udev</em> pour trouver la branche supérieure :
</p>
<pre class="code">udevadm info -a -p $(udevadm info -q path -n /dev/sda)</pre>

<p>
Apparement, il y a beaucoup plus simple :
</p>
<pre class="code">udevadm info -a -n /dev/sda</pre>

<p>
voire même :
</p>
<pre class="code">udevadm info -a -n sda</pre>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[udevadm info] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="udevadm_info" /><input type="hidden" name="codeblockOffset" value="10" /><input type="hidden" name="range" value="16937-20368" /><button type="submit" title="udevadm info" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit17" id="trouver_un_peripherique_tout_juste_branche">Trouver un périphérique tout juste branché</h3>
<div class="level3">

<p>
Pour un périphérique <abbr title="Universal Serial Bus">USB</abbr>, tapez la commande suivante :
</p>
<pre class="code">find /dev/bus/usb/ ! -type d -mmin -5</pre>

<p>
ou bien la commande :
</p>
<pre class="code">find /sys/devices/ -type d -mmin -5 | grep net/usb.$</pre>

<p>
puis faire un <strong><code>udevadm info</code></strong> sur le résultat :
</p>
<pre class="code">$ udevadm info /sys/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0 
P: /devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0
E: DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0
E: ID_BUS=usb
E: ID_MM_CANDIDATE=1
E: ID_MODEL=Sailfish
E: ID_MODEL_ENC=Sailfish
E: ID_MODEL_ID=0a02
E: ID_NET_NAME_MAC=enx827fe191698f
E: ID_NET_NAME_PATH=enp0s18u1u3
E: ID_REVISION=0228
E: ID_SERIAL=Jolla_Sailfish_0123456789
E: ID_SERIAL_SHORT=0123456789
E: ID_TYPE=generic
E: ID_USB_DRIVER=rndis_host
E: ID_USB_INTERFACES=:e00103:0a0000:
E: ID_USB_INTERFACE_NUM=00
E: ID_VENDOR=Jolla
E: ID_VENDOR_ENC=Jolla
E: ID_VENDOR_FROM_DATABASE=Advanced Micro Devices, Inc.
E: ID_VENDOR_ID=2931
E: IFINDEX=29
E: INTERFACE=usb0
E: SUBSYSTEM=net
E: USEC_INITIALIZED=275352985</pre>

<p>
Autre méthode plus rapide mais plus compliquée à comprendre, tapez la commande suivante puis brancher et débrancher le périphérique :
</p>
<pre class="code">$ udevadm monitor --prop --udev | egrep &quot;DEVNAME=|DEVPATH=|ID_MODEL=|ID_SERIAL|ID_VENDOR=|SUBSYSTEM=&quot;
DEVNAME=/dev/bus/usb/001/004
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3
ID_MODEL=Sailfish
ID_SERIAL=Jolla_Sailfish_0123456789
ID_SERIAL_SHORT=0123456789
ID_VENDOR=Jolla
SUBSYSTEM=usb
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0
SUBSYSTEM=usb
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.1
SUBSYSTEM=usb
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0
ID_MODEL=Sailfish
ID_SERIAL=Jolla_Sailfish_0123456789
ID_SERIAL_SHORT=0123456789
ID_VENDOR=Jolla
SUBSYSTEM=net
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0/queues/tx-0
SUBSYSTEM=queues
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0/queues/rx-0
SUBSYSTEM=queues
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0/queues/rx-0
SUBSYSTEM=queues
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0/queues/tx-0
SUBSYSTEM=queues
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.1
SUBSYSTEM=usb
DEVPATH=/devices/pci0000:00/0000:00:12.0/usb1/1-1/1-1.3/1-1.3:1.0/net/usb0
ID_MODEL=Sailfish</pre>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Trouver un périphérique tout juste branché] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="trouver_un_peripherique_tout_juste_branche" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="20369-22853" /><button type="submit" title="Trouver un périphérique tout juste branché" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit18" id="methodes_alternatives">Méthodes Alternatives</h3>
<div class="level3">

<p>
Bien que <code>udevadm info</code> soit la méthode la plus sûre pour lister les attributs exacts pour construire vos règles, certains utilisateurs préféreront utiliser d&#039;autres outils. Les outils comme <code>usbview</code> montrent des informations similaires, pouvant être utilisées pour créer des règles.
</p>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Méthodes Alternatives] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="methodes_alternatives" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="22854-23185" /><button type="submit" title="Méthodes Alternatives" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit19 page-header" id="le_coin_du_geek">Le coin du geek</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Le coin du geek] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="le_coin_du_geek" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="23186-23212" /><button type="submit" title="Le coin du geek" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit20" id="creer_des_permissions_et_des_proprietes">Créer des permissions et des propriétés</h3>
<div class="level3">

<p>
<em>Udev</em> vous permet de gérer dans vos règles les propriétés et les permissions de chaque périphérique.
</p>

<p>
La clef d&#039;assignation <code>GROUP</code> vous permet de définir à quel groupe appartient un périphérique &quot;node&quot;. Dans cet exemple, les périphériques <em>framebuffer</em> appartiennent au groupe <code>Video</code> :
</p>
<pre class="code">KERNEL==&quot;fb[0-9]*&quot;, NAME=&quot;fb/%n&quot;, SYMLINK+=&quot;%k&quot;, GROUP=&quot;video&quot;</pre>

<p>
La clef <code>OWNER</code>, peut-être moins intéressante, vous permet de définir le propriétaire du périphérique &quot;node&quot;. Dans cet exemple, l&#039;utilisateur <em>John</em> sera mis comme propriétaire pour les lecteurs de disquettes :
</p>
<pre class="code">KERNEL==&quot;fd[0-9]*&quot;, OWNER=&quot;john&quot;</pre>

<p>
Par défaut, <em>udev</em> crée les permissions pour &quot;node&quot; avec les droits <code>0660</code> (lire/écrire pour tous les utilisateurs/groupes, vous pouvez trouver quelques informations sur ces chiffres dans la documentation de <em>chmod</em>, avec la commande <code>man chmod</code>). Si c&#039;est nécessaire, vous pouvez les modifier pour certains périphériques en utilisant les règles avec la clef d&#039;assignation <code>MODE</code>. Cet exemple définit que le périphérique peut être utilisé par tout le monde :
</p>
<pre class="code">KERNEL==&quot;inotify&quot;, NAME=&quot;misc/%k&quot;, SYMLINK+=&quot;%k&quot;, MODE=&quot;0666&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Créer des permissions et des propriétés] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creer_des_permissions_et_des_proprietes" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="23213-24481" /><button type="submit" title="Créer des permissions et des propriétés" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit21" id="utiliser_des_programmes_pour_nommer_les_peripheriques">Utiliser des programmes pour nommer les périphériques</h3>
<div class="level3">

<p>
Dans certaines circonstances, vous pouvez avoir besoin de plus de flexibilité que les règles <em>udev</em> en donnent. Dans ce cas vous pouvez demander à <em>udev</em> de lancer un programme, afin d&#039;utiliser ce qui est sorti par ce programme pour créer le nom de périphérique.
</p>

<p>
Pour utiliser cette fonction, vous devez simplement spécifier la ligne de commande entière du programme à utiliser (ainsi que ses paramètres) dans la clef d&#039;assignation <code>PROGRAM</code>, vous pouvez trouver des variantes d&#039;utilisation du <code>%c</code> dans les sections <em>NAME/SYMLINK</em>. 
</p>

<p>
Les exemples suivants se référent a un programme fictif appelé <code>/bin/device_namer</code>. Ce <code>device_namer</code> prendrait un argument en ligne de commande, qui est le nom donné par le noyau au périphérique. À partir de ce nom, <code>device_namer</code> donnerait les informations sur sa sortie (<code>stdout</code>), séparées en plusieurs parties. Chaque partie est un seul mot et les parties sont séparées par un seul espace. 
</p>

<p>
Dans ce premier exemple, nous considérons que les informations en sortie de <code>device_namer</code> sont un nombre de parties, chacune forme un lien symbolique pour le périphérique en question.
</p>
<pre class="code">KERNEL==&quot;hda&quot;, PROGRAM=&quot;/bin/device_namer %k&quot;, SYMLINK+=&quot;%c&quot;</pre>

<p>
L&#039;exemple suivant considère que les informations en sortie de <code>device_namer</code> contiennent deux parties, la première est le nom du périphérique, et la seconde est le nom pour un lien symbolique additionnel. Nous introduisons maintenant la substitution <code>%c{<em>N</em>}</code>, en référence au nombre de parties des informations en sortie :
</p>
<pre class="code">KERNEL==&quot;hda&quot;, PROGRAM=&quot;/bin/device_namer %k&quot;, NAME=&quot;%c{1}&quot;, SYMLINK+=&quot;%c{2}&quot;</pre>

<p>
Le prochain exemple considère que <code>device_namer</code> retourne le nom du périphérique, suivi par un nombre variable de liens symboliques. Pour accéder à ces derniers, nous introduisons la substitution <code>%c{<em>N</em>+}</code>, qui sera remplacé par les parties <em>N</em>, <em>N</em>+1, <em>N</em>+2… jusqu&#039;à la dernière.
</p>
<pre class="code">KERNEL==&quot;hda&quot;, PROGRAM=&quot;/bin/device_namer %k&quot;, NAME=&quot;%c{1}&quot;, SYMLINK+=&quot;%c{2+}&quot;</pre>

<p>
Les réponses créées à partir de la sortie du programme peuvent être utilisées dans n&#039;importe quelle clef d&#039;assignation et pas seulement avec <code>NAME</code> et <code>SYMLINK</code>. L&#039;exemple suivant utilise un programme fictif qui déterminerait le groupe qui doit avoir les droits de ce périphérique :
</p>
<pre class="code">KERNEL==&quot;hda&quot;, PROGRAM=&quot;/bin/who_owns_device %k&quot;, GROUP=&quot;%c&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_21'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Utiliser des programmes pour nommer les périphériques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utiliser_des_programmes_pour_nommer_les_peripheriques" /><input type="hidden" name="codeblockOffset" value="21" /><input type="hidden" name="range" value="24482-26983" /><button type="submit" title="Utiliser des programmes pour nommer les périphériques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit22" id="executer_des_programmes_sur_des_evenements">Exécuter des programmes sur des événements</h3>
<div class="level3">

<p>
Une autre raison d&#039;écrire des règles <em>udev</em> est de lancer un programme quand un périphérique est connecté ou déconnecté. Par exemple, vous voulez lancer un script qui va télécharger automatiquement les photos de votre appareil photo lorsque vous le connectez.
</p>

<p>
<strong>Ne confondez pas</strong> ceci avec la fonction <code>PROGRAM</code> décrite précédemment. <code>PROGRAM</code> sert à lancer des programmes qui génèrent des noms de périphériques et rien d&#039;autre. Quand ces programmes sont exécutés, le périphérique &quot;node&quot; n&#039;a pas encore été créé, donc faire une action sur ce périphérique n&#039;est pas possible.
</p>

<p>
La fonction introduite ici vous permet de lancer un programme après la mise en place du périphérique. Ce programme peut interagir avec le périphérique, cependant il doit s&#039;exécuter rapidement car <em>udev</em> est mis en pause quand ces programmes sont lancés. Il ne faut donc pas négliger de s&#039;assurer que le programme s&#039;arrête de lui même.
</p>

<p>
Voici un exemple de règle qui utilise l&#039;assignation <code>RUN</code> :
</p>
<pre class="code">KERNEL==&quot;sdb&quot;, RUN+=&quot;/usr/bin/my_program&quot;</pre>

<p>
Quand <code>/usr/bin/my_program</code> est exécuté, plusieurs informations de <em>udev</em> sont accessibles par les variables d&#039;environnement. Ceci inclut les clefs comme <code>SUBSYSTEM</code>. Vous pouvez aussi utiliser la variable d&#039;environnement <code>ACTION</code> pour détecter si le périphérique est connecté (valeur &quot;<code>add</code>&quot;) ou déconnecté (valeur &quot;<code>remove</code>&quot;). 
</p>

</div>
<div class='secedit editbutton_section editbutton_22'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Exécuter des programmes sur des événements] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="executer_des_programmes_sur_des_evenements" /><input type="hidden" name="codeblockOffset" value="25" /><input type="hidden" name="range" value="26984-28468" /><button type="submit" title="Exécuter des programmes sur des événements" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit23" id="interactions_avec_l_environnement">Interactions avec l&#039;environnement</h3>
<div class="level3">

<p>
<em>Udev</em> fournit une clef <code>ENV</code> pour les variables d&#039;environnement qui peut être utilisée à la fois pour <em>trouver</em> et <em>assigner</em> des variables.
</p>

<p>
Dans le cas d&#039;une assignation, vous pouvez placer des variables d&#039;environnement que vous pourrez retrouver par la suite. Vous pourrez aussi y accéder depuis les programmes externes lancés à l&#039;aide des techniques décrites précédemment. Voici un exemple de syntaxe de règle pour créer une variable d&#039;environnement :
</p>
<pre class="code">KERNEL==&quot;fd0&quot;, SYMLINK+=&quot;floppy&quot;, ENV{some_var}=&quot;value&quot;</pre>

<p>
Dans le cas de la <em>recherche</em>, vous pouvez vous assurer que les règles se lancent seulement selon une variable d&#039;environnement. Notez que l&#039;environnement que <em>udev</em> voit ne sera pas le même que celui que l&#039;utilisateur voit en console. Voici un exemple de règle :
</p>
<pre class="code">KERNEL==&quot;fd0&quot;, ENV{an_env_var}==&quot;yes&quot;, SYMLINK+=&quot;floppy&quot;</pre>

<p>
Cette règle ne crée le lien <code>/dev/floppy</code> que si <code>$an_env_var</code> est égal à &quot;<code>yes</code>&quot; dans l&#039;environnement <em>udev</em>.
</p>

</div>
<div class='secedit editbutton_section editbutton_23'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Interactions avec l&#039;environnement] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interactions_avec_l_environnement" /><input type="hidden" name="codeblockOffset" value="26" /><input type="hidden" name="range" value="28469-29524" /><button type="submit" title="Interactions avec l&#039;environnement" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit24" id="options_additionnelles">Options additionnelles</h3>
<div class="level3">

<p>
La clef <code>OPTIONS</code> est une liste d&#039;options supplémentaire pour le traitement de la règle :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>all_partitions</code>: crée autant de partitions que possible pour un disque, plutôt que seulement celles créées au démarrage;</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>ignore_device</code>: ignore complétement l&#039;événement;</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>last_rule</code>: empêche l&#039;éxécution des règles suivantes.</div>
</li>
</ul>

<p>
Par exemple, cette règle place un disque dur dans le groupe <code>disk</code> et s&#039;assure qu&#039;aucune règle qui suit n&#039;aura d&#039;effet dessus :
</p>
<pre class="code">KERNEL==&quot;sda&quot;, GROUP=&quot;disk&quot;, OPTIONS+=&quot;last_rule&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_24'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Options additionnelles] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="options_additionnelles" /><input type="hidden" name="codeblockOffset" value="28" /><input type="hidden" name="range" value="29525-30111" /><button type="submit" title="Options additionnelles" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit25 page-header" id="exemples_pratiques">Exemples pratiques</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_25'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Exemples pratiques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="exemples_pratiques" /><input type="hidden" name="codeblockOffset" value="29" /><input type="hidden" name="range" value="30112-30141" /><button type="submit" title="Exemples pratiques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit26" id="imprimante_usb">Imprimante USB</h3>
<div class="level3">

<p>
Lorsque on allume son imprimante, elle se voit assignée au périphérique <code>/dev/lp0</code>. Non satisfait de ce nom, on décide de créer une règle <em>udev</em> pour le changer. Pour commencer, on cherche les informations sur celle-ci :
</p>
<pre class="code">udevadm info -a -p $(udevadm info -q path -n /dev/lp0)

looking at the device chain at &#039;/sys/devices/pci0000:00/0000:00:02.1/usb3/3-3&#039;:
BUS==&quot;usb&quot;
ATTR{manufacturer}==&quot;EPSON&quot;
ATTR{product}==&quot;USB Printer&quot;
ATTR{serial}==&quot;L72010011070626380&quot;</pre>

<p>
On peut maintenant faire une règle comme celle-ci : 
</p>
<pre class="code">BUS==&quot;usb&quot;, ATTR{serial}==&quot;L72010011070626380&quot;, SYMLINK+=&quot;epson_680&quot;</pre>

<p>
(si <em>udev</em> trouve, sur le bus <em><abbr title="Universal Serial Bus">USB</abbr></em>, un périphérique dont le numéro de série est <code>L72…</code>, alors il ajoute un lien symbolique sous le nom <code>epson_680</code>)
</p>

</div>
<div class='secedit editbutton_section editbutton_26'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Imprimante USB] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="imprimante_usb" /><input type="hidden" name="codeblockOffset" value="29" /><input type="hidden" name="range" value="30142-30952" /><button type="submit" title="Imprimante USB" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit27" id="appareil_photo_usb">Appareil photo USB</h3>
<div class="level3">

<p>
Comme la plupart des appareils photo, mon appareil photo est identifié comme un disque dur externe branché en <abbr title="Universal Serial Bus">USB</abbr>, utilisant le transport SCSI. Pour accéder à ses photos, on monte le périphérique et on copie les images sur son disque dur. 
</p>

<p>
Tous les appareils photo ne fonctionnent pas forcément avec cette méthode : certains utilisent un protocole non-storage comme les appareils photo supportés par <a href="http://www.gphoto.org/" class="urlextern" title="http://www.gphoto.org/" rel="nofollow">gphoto2</a>.
Dans le cas de <a href="http://www.gphoto.org/" class="urlextern" title="http://www.gphoto.org/" rel="nofollow">gphoto</a>, vous n&#039;avez pas à faire de règle pour votre appareil, car le contrôle est fait par un programme en espace utilisateur, à l&#039;opposé d&#039;un pilote spécifique dans le noyau.
</p>

<p>
Pour identifier le périphérique:
</p>
<pre class="code">udevadm info -a -p $(udevadm info -q path -n /dev/sdb1)
  looking at device &#039;/devices/pci0000:00/0000:00:02.0/usb2/2-1/2-1:1.0/host6/target6:0:0/6:0:0:0&#039;:
    ID==&quot;6:0:0:0&quot;
    BUS==&quot;scsi&quot;
    DRIVER==&quot;sd&quot;
    ATTR{rev}==&quot;1.00&quot;
    ATTR{model}==&quot;X250,D560Z,C350Z&quot;
    ATTR{vendor}==&quot;OLYMPUS &quot;
    ATTR{scsi_level}==&quot;3&quot;
    ATTR{type}==&quot;0&quot;</pre>

<p>
Un problème avec les appareils photo <abbr title="Universal Serial Bus">USB</abbr> est qu&#039;ils sont identifiés comme des disques contenant une seule partition, dans ce cas le disque <code>/dev/sdb</code> avec la partition <code>/dev/sdb1</code>. Le périphérique <code>sdb</code> est inutile pour moi, mais <code>sdb1</code> est intéressant: c&#039;est celui que je veux monter. Il y a un problème car <em>sysfs</em> est attaché aux deux de manière identique, les attributs utiles produits par <em>udevadm info</em> pour <code>/dev/sdb1</code> sont identiques que ceux de <code>/dev/sdb</code>.
</p>

<p>
Notre règle va donc devoir différencier les deux. Pour résoudre ceci, vous devez chercher ce qui diffère entre <code>sdb</code> et <code>sdb1</code>. C&#039;est étonnement simple : seul le nom diffère, donc nous pouvons utiliser une règle simple sur le champ <code>NAME</code>.
</p>

<p>
Ma règle est alors : 
</p>
<pre class="code">KERNEL==&quot;sd?1&quot;, BUS==&quot;scsi&quot;, ATTR{model}==&quot;X250,D560Z,C350Z&quot;, SYMLINK+=&quot;camera&quot;</pre>

<p>
(pour les périphériques auxquels  le noyau a attribué un nom du type &quot;<code>sd?1</code>&quot;&quot;, qui sont sur le bus SCSI, et dont le modèle est &quot;<code>X250,…</code>&quot;, ajouter un lien nommé <code>camera</code>)
</p>

</div>
<div class='secedit editbutton_section editbutton_27'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Appareil photo USB] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="appareil_photo_usb" /><input type="hidden" name="codeblockOffset" value="31" /><input type="hidden" name="range" value="30953-33090" /><button type="submit" title="Appareil photo USB" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit28" id="disque_dur_usb">Disque Dur USB</h3>
<div class="level3">

<p>
Pour un Disque Dur <abbr title="Universal Serial Bus">USB</abbr>, c&#039;est comparable à l&#039;exemple de l&#039;appareil photo <abbr title="Universal Serial Bus">USB</abbr> que l&#039;on vient de décrire, cependant le modèle à utiliser est différent. Pour l&#039;appareil photo, le périphérique <code>sdb</code> ne nous intéressait pas, mais si vous avez un disque dur <abbr title="Universal Serial Bus">USB</abbr> de 100Go, c&#039;est très compréhensible de vouloir le partitionner, et vous aurez besoin de <code>sdb</code>. Dans ce cas nous pouvons tirer avantage de la substitution par <em>udev</em> :
</p>
<pre class="code">BUS==&quot;usb&quot;, KERNEL==&quot;sd*&quot;, ATTR{product}==&quot;USB 2.0 Storage Device&quot;, NAME=&quot;%k&quot;, SYMLINK+=&quot;usbhd%n&quot;</pre>

<p>
Cette règle crée des liens symboliques comme ceci : 
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <code>/dev/usbhd</code> – Le périphérique pour <code>fdisk</code>;</div>
</li>
<li class="level1"><div class="li"> <code>/dev/usbhd1</code> – La première partition (montable);</div>
</li>
<li class="level1"><div class="li"> <code>/dev/usbhd2</code> – La seconde partition (montable).</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_28'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Disque Dur USB] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="disque_dur_usb" /><input type="hidden" name="codeblockOffset" value="33" /><input type="hidden" name="range" value="33091-33899" /><button type="submit" title="Disque Dur USB" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit29" id="lecteurs_de_carte_usb">Lecteurs de carte USB</h3>
<div class="level3">

<p>
Les Lecteurs de carte <abbr title="Universal Serial Bus">USB</abbr> (<em>CompactFlash</em>, <em>SmartMedia</em>, etc.) sont encore un autre type de périphériques de stockage <abbr title="Universal Serial Bus">USB</abbr>, avec un usage différent. 
</p>

<p>
Ces périphériques n&#039;informent pas l&#039;ordinateur hôte lors d&#039;un changement de média. Ainsi, si vous connectez le périphérique sans carte, puis que vous y insérez une carte, l&#039;ordinateur ne va pas le détecter et vous n&#039;aurez pas accès à la partition de votre carte.
</p>

<p>
La seule solution est de tirer avantage de l&#039;option <code>all_partitions</code>, qui va créer 16 partitions pour chaque périphérique, comme illustré dans cet exemple :
</p>
<pre class="code">BUS==&quot;usb&quot;, ATTR{product}==&quot;USB 2.0 CompactFlash Reader&quot;, SYMLINK+=&quot;cfrdr%n&quot;, OPTIONS+=&quot;all_partitions&quot;</pre>

<p>
Vous aurez donc les périphériques : <code>cfrdr</code>, <code>cfrdr1</code>, <code>cfrdr2</code>, <code>cfrdr3</code>, …, <code>cfrdr15</code>. 
</p>

</div>
<div class='secedit editbutton_section editbutton_29'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Lecteurs de carte USB] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="lecteurs_de_carte_usb" /><input type="hidden" name="codeblockOffset" value="34" /><input type="hidden" name="range" value="33900-34747" /><button type="submit" title="Lecteurs de carte USB" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit30" id="palm_usb">Palm USB</h3>
<div class="level3">

<p>
Ces périphériques se déclarent comme des ports série <abbr title="Universal Serial Bus">USB</abbr>, donc par défaut vous n&#039;aurez que le périphérique <code>ttyUSB1</code>. Les utilitaires pour <em>palm</em> cherchent en général <code>/dev/pilot</code>, nombre d&#039;utilisateurs apprécieront q&#039;une règle gère cela. <a href="http://www.clasohm.com/blog/one-entry?entry%5fid=12096" class="urlextern" title="http://www.clasohm.com/blog/one-entry?entry%5fid=12096" rel="nofollow">Le post du blog de Carsten Clasohm</a> propose une solution, voici la règle qu&#039;il suggère :
</p>
<pre class="code">BUS==&quot;usb&quot;, ATTR{product}==&quot;Palm Handheld*&quot;, KERNEL==&quot;ttyUSB[1359]&quot;, SYMLINK+=&quot;pilot&quot;</pre>

<p>
Faites attention au <code>ATTR{product}</code> qui est différent selon le matériel, pensez à le vérifier avec <em>udevadm info</em>.
</p>

</div>
<div class='secedit editbutton_section editbutton_30'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Palm USB] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="palm_usb" /><input type="hidden" name="codeblockOffset" value="35" /><input type="hidden" name="range" value="34748-35396" /><button type="submit" title="Palm USB" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit31" id="lecteurs_cddvd">Lecteurs CD/DVD</h3>
<div class="level3">

<p>
Par exemple on a deux lecteurs optiques : un lecteur de DVD (<code>hdc</code>), et un graveur de DVD (<code>hdd</code>). Inutile de les modifier, à moins de les bouger physiquement. Cependant certains utilisateur souhaiteront qu&#039;ils soient détectés en tant que <code>/dev/dvd</code> pour plus de facilité. 
</p>

<p>
Comme nous savons les noms donnés par le noyau pour ces périphériques, l&#039;écriture de règles est très simple :
</p>
<pre class="code">BUS==&quot;ide&quot;, KERNEL==&quot;hdc&quot;, SYMLINK+=&quot;dvd&quot;, GROUP=&quot;cdrom&quot;
BUS==&quot;ide&quot;, KERNEL==&quot;hdd&quot;, SYMLINK+=&quot;dvdrw&quot;, GROUP=&quot;cdrom&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_31'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Lecteurs CD/DVD] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="lecteurs_cddvd" /><input type="hidden" name="codeblockOffset" value="36" /><input type="hidden" name="range" value="35397-35953" /><button type="submit" title="Lecteurs CD/DVD" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit32" id="interfaces_reseau">Interfaces Réseau</h3>
<div class="level3">

<p>
Etant référencées par leur noms, les interfaces réseau n&#039;ont par défaut pas de périphérique &quot;node&quot; attribué. L&#039;écriture de règles reste cependant identique.
</p>

<p>
Il est logique d&#039;utiliser simplement l&#039;adresse <abbr title="Medium Access Control">MAC</abbr> de votre interface dans la règle, puisque celle-ci est unique. Cependant, soyez certain d&#039;utiliser l&#039;adresse <abbr title="Medium Access Control">MAC</abbr> exacte, telle que montrée par <em>udevadm info</em>, sinon votre règle ne fonctionnera pas. 
</p>
<pre class="code"> udevadm info -a -p /sys/class/net/eth0
  looking at class device &#039;/sys/class/net/eth0&#039;:
    ATTR{address}==&quot;00:52:8b:d5:04:48&quot;</pre>

<p>
Voilà la règle correspondante :
</p>
<pre class="code">KERNEL==&quot;eth*&quot;, ATTR{address}==&quot;00:52:8b:d5:04:48&quot;, NAME=&quot;lan&quot;</pre>

<p>
Une fois le fichier de <em>udev</em> modifié, vous devrez recharger le pilote pour faire appliquer cette règle. Vous pouvez soit décharger et recharger le module du noyau correspondant, soit redémarrer votre ordinateur. Vous devrez aussi reconfigurer votre système pour utiliser «<code>lan</code>» à la place de «<code>eth0</code>». 
</p>

<p>
<em>Note</em>: Il peut y avoir quelques problèmes pour le faire fonctionner (l&#039;interface n&#039;est pas renommée) tant que l&#039;on n&#039;a pas <strong>complètement</strong> retiré toutes les références à «<code>eth0</code>». Après ça, vous pourrez utiliser «<code>lan</code>» à la place de «<code>eth0</code>» dans n&#039;importe quel utilitaire, comme <code>ifconfig</code>.
</p>

</div>

<h4 id="fixer_son_adresse_mac">Fixer son adresse MAC</h4>
<div class="level4">

<p>
Certaines cartes réseaux changent d’adresse <abbr title="Medium Access Control">MAC</abbr> à chaque redémarrage ; on peut lire dans les messages kernel :
</p>
<pre class="code">dmesg

forcedeth 0000:00:07.0: Invalid MAC address detected: ff:ff:ff:ff:ff:ff - Please complain to your hardware vendor.
forcedeth 0000:00:07.0: Using random MAC address: 26:f1:b2:e5:d5:24</pre>

<p>
Si l&#039;on souhaite avoir une adresse <abbr title="Medium Access Control">MAC</abbr> fixe, on peut la configurer avec <em>udev</em> de la façon suivante :
</p>
<pre class="code">KERNEL==&quot;eth*&quot;, DRIVERS==&quot;forcedeth&quot;, PROGRAM=&quot;/sbin/ip link set dev %k address xx:xx:xx:xx:xx:xx&quot;</pre>

<p>
Dans cette illustration  le driver est &quot;forcedeth&quot; : il vous faudra peut-être le remplacer par le vôtre. Il faut également renseigner une adresse <abbr title="Medium Access Control">MAC</abbr> valide.
</p>

</div>
<div class='secedit editbutton_section editbutton_32'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Interfaces Réseau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interfaces_reseau" /><input type="hidden" name="codeblockOffset" value="37" /><input type="hidden" name="range" value="35954-38039" /><button type="submit" title="Interfaces Réseau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit33" id="manettes_de_jeu">Manettes de jeu</h3>
<div class="level3">

<p>
Les manettes de jeu apparaissent comme <code>/dev/input/jsX</code> voire <code>/dev/input/eventX</code>. Certaines applications (<em>Wine</em> par exemple) veulent accéder aux manettes par <code>/dev/input/eventX</code>, mais cela n&#039;est pas forcément possible du fait des droits de ces fichiers :
</p>

<p>
On peut ajouter la règle :
</p>
<pre class="code">KERNEL==&quot;event[0-9]*&quot;, ENV{ID_CLASS}==&quot;joystick&quot;, MODE=&quot;0666&quot;</pre>

<p>
ou
</p>
<pre class="code">KERNEL==&quot;event[0-9]*&quot;, ENV{ID_CLASS}==&quot;joystick&quot;, GROUP=&quot;SOMEGROUP&quot;, MODE=&quot;0660&quot;</pre>

<p>
qui donnent les droits de lecture/écriture à tout le monde dans le premier cas, ou à toutes les personnes du groupe <code>SOMEGROUP</code> dans le deuxième cas.
</p>

</div>
<div class='secedit editbutton_section editbutton_33'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Manettes de jeu] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="manettes_de_jeu" /><input type="hidden" name="codeblockOffset" value="41" /><input type="hidden" name="range" value="38040-38690" /><button type="submit" title="Manettes de jeu" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit34 page-header" id="essais_et_deboggage">Essais et deboggage</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_34'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Essais et deboggage] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="essais_et_deboggage" /><input type="hidden" name="codeblockOffset" value="43" /><input type="hidden" name="range" value="38691-38721" /><button type="submit" title="Essais et deboggage" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit35" id="activez_vos_regles">Activez vos règles</h3>
<div class="level3">

<p>
Si vous êtes sur un noyau avec le support <em>inotify</em>, <em>udev</em> surveillera votre répertoire de règles et prendra en compte automatiquement les modifications faites dans vos règles.
</p>

<p>
A l&#039;encontre de ceci, <strong><em>udev</em> ne remontera pas automatiquement les périphériques, mais tentera d&#039;appliquer les règles</strong>. Par exemple, si vous écrivez une règle pour ajouter un lien symbolique pour votre appareil photo alors que celui-ci est déjà branché au PC, ne vous attendez pas à ce que le lien symbolique soit créé. 
Pour créer le lien symbolique, vous pouvez simplement débrancher et rebrancher votre appareil photo. Si le périphérique ne peut pas être débranché, vous pouvez lancer dans une console la commande <code>udevadm trigger</code>.
</p>

<p>
Si votre noyau n&#039;a pas le support <em>inotify</em>, les nouvelles règles ne seront pas détectées automatiquement. Dans ce cas, vous devrez demander la relecture de celles-ci en lançant dans une console la commande <code>sudo udevadm control –reload</code> après avoir créé ou modifié une règle pour que cela prenne effet.
</p>

</div>
<div class='secedit editbutton_section editbutton_35'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Activez vos règles] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="activez_vos_regles" /><input type="hidden" name="codeblockOffset" value="43" /><input type="hidden" name="range" value="38722-39816" /><button type="submit" title="Activez vos règles" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit36" id="udevtest">udevtest</h3>
<div class="level3">

<p>
Si vous connaissez la branche qui gère votre périphérique dans <em>sysfs</em>, vous pouvez utiliser <em>udevtest</em> pour voir les actions que <em>udev</em> va faire. Cela pourra vous aider pour corriger vos règles. Par exemple, vous voulez vérifier une règle qui agit sur <code>/sys/class/sound/dsp</code> :
</p>
<pre class="code"> udevtest /class/sound/dsp
main: looking at device &#039;/class/sound/dsp&#039; from subsystem &#039;sound&#039;
udev_rules_get_name: add symlink &#039;dsp&#039;
udev_rules_get_name: rule applied, &#039;dsp&#039; becomes &#039;sound/dsp&#039;
udev_device_event: device &#039;/class/sound/dsp&#039; already known, remove possible symlinks
udev_node_add: creating device node &#039;/dev/sound/dsp&#039;, major = &#039;14&#039;, minor = &#039;3&#039;, mode = &#039;0660&#039;, uid = &#039;0&#039;, gid = &#039;18&#039;
udev_node_add: creating symlink &#039;/dev/dsp&#039; to &#039;sound/dsp&#039;</pre>

<p>
Notez que le préfixe <code>/sys</code> a été supprimé des arguments de la ligne de commande de <code>udevtest</code>, la raison étant que <em>udev</em> opère sur le chemin du périphérique. Notez aussi que <em>udevtest</em> est juste un outil de test/debug, cela ne créera pas de périphérique, contrairement à ce que <em>udevtest</em> vous dit (c&#039;est une simulation) ! 
</p>

<p>
Dans le cas où <em>udevtest</em> ne fonctionnerait pas, il est aussi possible d&#039;utiliser <em>udevadm</em> comme dans l&#039;exemple suivant (où le périphérique est un disque dur externe qui se nomme sdb) :
</p>
<pre class="code">udevadm test /sys/block/sdb</pre>

</div>
<div class='secedit editbutton_section editbutton_36'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[udevtest] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="udevtest" /><input type="hidden" name="codeblockOffset" value="43" /><input type="hidden" name="range" value="39817-41183" /><button type="submit" title="udevtest" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit37 page-header" id="auteur_et_contact">Auteur et contact</h2>
<div class="level2">

<p>
<a href="http://www.reactivated.net/writing_udev_rules.html" class="urlextern" title="http://www.reactivated.net/writing_udev_rules.html" rel="nofollow">Ce document a été rédigé originellement en anglais</a> par Daniel Drake <a href="mailto:&#x64;&#x61;&#x6e;&#x40;&#x72;&#x65;&#x61;&#x63;&#x74;&#x69;&#x76;&#x61;&#x74;&#x65;&#x64;&#x2e;&#x6e;&#x65;&#x74;" class="mail" title="&#x64;&#x61;&#x6e;&#x40;&#x72;&#x65;&#x61;&#x63;&#x74;&#x69;&#x76;&#x61;&#x74;&#x65;&#x64;&#x2e;&#x6e;&#x65;&#x74;">&#x64;&#x61;&#x6e;&#x40;&#x72;&#x65;&#x61;&#x63;&#x74;&#x69;&#x76;&#x61;&#x74;&#x65;&#x64;&#x2e;&#x6e;&#x65;&#x74;</a> et traduit par <a href="/utilisateurs/acp" class="wikilink1" title="utilisateurs:acp">Acp</a>. Les retours en anglais sont appréciés par Daniel Drake :) et modifié par la suite.
</p>

<p>
Pour le support, envoyez un mail (en anglais) à la mailing liste de linux hotplug : <a href="mailto:&#x6c;&#x69;&#x6e;&#x75;&#x78;&#x2d;&#x68;&#x6f;&#x74;&#x70;&#x6c;&#x75;&#x67;&#x2d;&#x64;&#x65;&#x76;&#x65;&#x6c;&#x40;&#x6c;&#x69;&#x73;&#x74;&#x73;&#x2e;&#x73;&#x6f;&#x75;&#x72;&#x63;&#x65;&#x66;&#x6f;&#x72;&#x67;&#x65;&#x2e;&#x6e;&#x65;&#x74;" class="mail" title="&#x6c;&#x69;&#x6e;&#x75;&#x78;&#x2d;&#x68;&#x6f;&#x74;&#x70;&#x6c;&#x75;&#x67;&#x2d;&#x64;&#x65;&#x76;&#x65;&#x6c;&#x40;&#x6c;&#x69;&#x73;&#x74;&#x73;&#x2e;&#x73;&#x6f;&#x75;&#x72;&#x63;&#x65;&#x66;&#x6f;&#x72;&#x67;&#x65;&#x2e;&#x6e;&#x65;&#x74;">&#x6c;&#x69;&#x6e;&#x75;&#x78;&#x2d;&#x68;&#x6f;&#x74;&#x70;&#x6c;&#x75;&#x67;&#x2d;&#x64;&#x65;&#x76;&#x65;&#x6c;&#x40;&#x6c;&#x69;&#x73;&#x74;&#x73;&#x2e;&#x73;&#x6f;&#x75;&#x72;&#x63;&#x65;&#x66;&#x6f;&#x72;&#x67;&#x65;&#x2e;&#x6e;&#x65;&#x74;</a>. 
</p>

<p>
Copyright (C) 2003-2006 Daniel Drake.
<a href="http://www.gnu.org/licenses/gpl.html" class="urlextern" title="http://www.gnu.org/licenses/gpl.html" rel="nofollow">Ce document est sous licence GNU General Public License, Version 2</a>
</p>
<hr />

<p>
<em>Contributeurs : <a href="/utilisateurs/acp" class="wikilink1" title="utilisateurs:acp">Acp</a>, <a href="/utilisateurs/lobotomy" class="wikilink2" title="utilisateurs:lobotomy" rel="nofollow">Lobotomy</a>, <a href="/utilisateurs/ignace72" class="wikilink2" title="utilisateurs:ignace72" rel="nofollow">Ignace72</a>, <a href="/utilisateurs/daeavelwyn" class="wikilink1" title="utilisateurs:daeavelwyn">daeavelwyn</a></em>
</p>

</div>
<div class='secedit editbutton_section editbutton_37'><form class="button btn_secedit form-inline" method="post" action="/udev"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1592485303" /><input type="hidden" name="summary" value="[Auteur et contact] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="auteur_et_contact" /><input type="hidden" name="codeblockOffset" value="45" /><input type="hidden" name="range" value="41184-" /><button type="submit" title="Auteur et contact" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="udev.txt">udev.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 18/06/2020, 15:01">Le 18/06/2020, 15:01</span></li><li class="text-muted">par 37.167.203.25</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=udev&amp;1635566287" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>mysecureshell_sftp-server [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="xenial,serveur,ftp,securite"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/mysecureshell_sftp-server?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/mysecureshell_sftp-server?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/mysecureshell_sftp-server"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/mysecureshell_sftp-server"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/mysecureshell_sftp-server"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"mysecureshell_sftp-server","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="mysecureshell_sftp-server">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/mysecureshell_sftp-server?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/mysecureshell_sftp-server?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/mysecureshell_sftp-server?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/mysecureshell_sftp-server?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/mysecureshell_sftp-server?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/mysecureshell_sftp-server?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/mysecureshell_sftp-server?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">mysecureshell_sftp-server</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/mysecureshell_sftp-server?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/mysecureshell_sftp-server?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/mysecureshell_sftp-server?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#a_propos_de_mss","title":"\u00c0 propos de MSS","level":1},{"link":"#installation","title":"Installation","level":1},{"link":"#gestion_des_utilisateurs","title":"Gestion des utilisateurs","level":1},{"link":"#connexion_au_serveur_sftp","title":"Connexion au serveur sftp","level":1},{"link":"#tester_en_local","title":"Tester en local","level":2},{"link":"#tester_en_reseau","title":"Tester en r\u00e9seau","level":2},{"link":"#parametrage_avec_l_outil_graphique_java","title":"Param\u00e9trage avec l'outil graphique java","level":1},{"link":"#lanceur","title":"Lanceur","level":1},{"link":"#parametrage_manuel","title":"Param\u00e9trage manuel","level":1},{"link":"#sftp_config","title":"sftp_config","level":2},{"link":"#sshd_config","title":"sshd_config","level":2},{"link":"#securite","title":"S\u00e9curit\u00e9","level":1},{"link":"#utilisation_des_clefs_ssh","title":"Utilisation des clefs SSH","level":2},{"link":"#se_proteger_contre_le_ssh_brute_force","title":"Se prot\u00e9ger contre le SSH Brute Force","level":2}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#a_propos_de_mss">À propos de MSS</a></li>
<li class="level1"><a href="#installation">Installation</a></li>
<li class="level1"><a href="#gestion_des_utilisateurs">Gestion des utilisateurs</a></li>
<li class="level1"><a href="#connexion_au_serveur_sftp">Connexion au serveur sftp</a>
<ul class="nav toc">
<li class="level2"><a href="#tester_en_local">Tester en local</a></li>
<li class="level2"><a href="#tester_en_reseau">Tester en réseau</a></li>
</ul>
</li>
<li class="level1"><a href="#parametrage_avec_l_outil_graphique_java">Paramétrage avec l&#039;outil graphique java</a></li>
<li class="level1"><a href="#lanceur">Lanceur</a></li>
<li class="level1"><a href="#parametrage_manuel">Paramétrage manuel</a>
<ul class="nav toc">
<li class="level2"><a href="#sftp_config">sftp_config</a></li>
<li class="level2"><a href="#sshd_config">sshd_config</a></li>
</ul>
</li>
<li class="level1"><a href="#securite">Sécurité</a>
<ul class="nav toc">
<li class="level2"><a href="#utilisation_des_clefs_ssh">Utilisation des clefs SSH</a></li>
<li class="level2"><a href="#se_proteger_contre_le_ssh_brute_force">Se protéger contre le SSH Brute Force</a></li>
</ul></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/xenial" class="wikilink1" title="xenial" rel="tag">Xenial</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/ftp" class="wikilink1" title="ftp" rel="tag">ftp</a>,
	<a href="/securite" class="wikilink1" title="securite" rel="tag">sécurité</a>
</span></div>

<h1 class="sectionedit1 page-header" id="serveur_sftpmysecureshell">Serveur SFTP : MySecureShell</h1>
<div class="level1">

<p>
<a href="/_detail/applications/mss_02.png?id=mysecureshell_sftp-server" class="media" title="applications:mss_02.png"><img src="/_media/applications/mss_02.png" class="media img-responsive" alt="" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Serveur SFTP : MySecureShell] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="serveur_sftpmysecureshell" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="40-112" /><button type="submit" title="Serveur SFTP : MySecureShell" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="a_propos_de_mss">À propos de MSS</h2>
<div class="level2">

<p>
<strong>MySecureShell</strong> (MSS) est un logiciel s&#039;appuyant sur le chiffrement de SSH et sur son <abbr title="File Transfer Protocol">FTP</abbr> sécurisé &quot;sftp-server&quot;. MySecureShell est un shell qui permet d&#039;ajouter plusieurs fonctionnalités à sftp-server et qui se rapproche des grands serveurs <abbr title="File Transfer Protocol">FTP</abbr> tel que ProFtpd.
Les avantages de MySecureShell sont qu&#039;il s&#039;appuie sur le protocole sécurisé SSH et qu&#039;il permet un chiffrement complet des données et des requêtes émises. Il est très simple à installer, à utiliser et hautement configurable.
</p>

<p>
Site officiel : <a href="http://mysecureshell.sourceforge.net/" class="urlextern" title="http://mysecureshell.sourceforge.net/" rel="nofollow">http://mysecureshell.sourceforge.net/</a><br/>

Pour plus d&#039;aide rendez-vous sur <a href="https://github.com/mysecureshell/mysecureshell" class="urlextern" title="https://github.com/mysecureshell/mysecureshell" rel="nofollow">github</a> directement.
</p>

<p>
<strong>Pourquoi installer MySecureShell (sftp - Secure File Transfert Protocol) au lieu d&#039;un serveur FTPS (File Transfert Protocol over SSL) ?</strong>
</p>

<p>
Voici les différentes motivations d&#039;un tel choix :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Simplicité d&#039;installation.</div>
</li>
<li class="level1"><div class="li"> Puissance de chiffrement d&#039;OpenSSH qui est développé pour la protection des données (shell distant).</div>
</li>
<li class="level1"><div class="li"> Pas de problèmes de certificat non-certifié (car payant pour qu&#039;il soit certifié authentique) ou de génération de certificat.</div>
</li>
<li class="level1"><div class="li"> Support des clefs privées et publiques pour une authentification sans mot de passe.</div>
</li>
<li class="level1"><div class="li"> Un unique port à ouvrir pour le SSH et SFTP (port 22 par défaut).</div>
</li>
<li class="level1"><div class="li"> Clients disponibles également sous Windows (Filezilla par exemple)</div>
</li>
<li class="level1"><div class="li"> C&#039;est une question de choix qui ne coûte rien si l&#039;on veut essayer.</div>
</li>
</ul>

<p>
<strong>Mais alors pourquoi ne pas utiliser un client SCP ?</strong>
</p>

<p>
Le problème vient du compte créé pour l&#039;utilisateur qui doit utiliser un shell valide pour se connecter au serveur à l&#039;aide d&#039;un logiciel SCP.
Ce choix implique l&#039;existence d&#039;une grande confiance en l&#039;utilisateur.
Avec MySecureShell, le client n&#039;est pas obligé de posséder un shell valide qui pourrait nuire a la sécurité du serveur.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[À propos de MSS] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="a_propos_de_mss" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="113-1986" /><button type="submit" title="À propos de MSS" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="installation">Installation</h2>
<div class="level2">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://mysecureshell" class="interwiki iw_apt" title="apt://mysecureshell">mysecureshell</a></strong>.
</p>
<div class="noteclassic">Pour en savoir plus sur SSH vous pouvez lire cette <a href="/ssh" class="wikilink1" title="ssh">documentation</a>.
</div>
</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1987-2195" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="gestion_des_utilisateurs">Gestion des utilisateurs</h2>
<div class="level2">

<p>
Créer maintenant les utilisateurs autorisés à faire du sftp et autorisés à ne faire que du sftp. Pour fixer les idées, je vais créer l&#039;utilisateur toto et lui attribuer comme dossier personnel /home/toto :
</p>
<pre class="code">sudo adduser --home /home/toto --shell /usr/bin/mysecureshell toto</pre>

<p>
Mais il y a plus simple, l&#039;outil graphique vous permet désormais de gérer les clients ! <img src="/lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> La boîte de dialogue de gestion des utilisateurs est vide dans MSS 1.6…Il faut se résigner à éditer à la main /etc/ssh/sftp_config.
</p>

<p>
ou :
</p>

<p>
Créer les groupes et utilisateurs que vous souhaitez pour une utilisation du serveur sftp. Une fois créé vous allez devoir <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">éditer le fichier</a> &quot;/etc/passwd&quot; en tant que root. Ensuite placez vous sur les &quot;shells&quot; des utilisateurs que vous voulez intégrer au serveur sftp et remplacez le &quot;shell&quot; existant (ex: /bin/sh) par &quot;/bin/MySecureShell&quot;.
Ceci:
</p>
<pre class="code">msstest:x:1006:500:MMS Testing:/home/sftpusers/msstest:/bin/sh</pre>

<p>
est à remplacer par:
</p>
<pre class="code">msstest:x:1006:500:MMS Testing:/home/sftpusers/msstest:/bin/MySecureShell</pre>

<p>
Enregistrez et quittez.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Gestion des utilisateurs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="gestion_des_utilisateurs" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2196-3385" /><button type="submit" title="Gestion des utilisateurs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="connexion_au_serveur_sftp">Connexion au serveur sftp</h2>
<div class="level2">

<p>
Les tests qui suivent sont fait avec le programme <a href="/lftp" class="wikilink1" title="lftp">lftp</a>. Il est normalement présent par défaut dans les distributions Ubuntu.
Dans le cas contraire, il suffit d&#039;<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installer le paquet</a> <a href="apt://lftp" class="urlextern" title="apt://lftp" rel="nofollow">lftp</a>.
</p>

<p>
D&#039;autres clients comme <a href="/filezilla" class="wikilink1" title="filezilla">FileZilla</a>, <a href="http://www.mkssoftware.com/docs/man1/sftp.1.asp" class="urlextern" title="http://www.mkssoftware.com/docs/man1/sftp.1.asp" rel="nofollow">sftp</a> et <a href="/gftp" class="wikilink1" title="gftp">Gftp</a> gèrent aussi le sftp.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Connexion au serveur sftp] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="connexion_au_serveur_sftp" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="3386-3827" /><button type="submit" title="Connexion au serveur sftp" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="tester_en_local">Tester en local</h3>
<div class="level3">
<pre class="code">$ lftp sftp://toto@localhost</pre>

<p>
Après avoir entré le mot de passe, vous devriez obtenir ceci :
</p>
<pre class="code">$ lftp toto@localhost:~&gt;</pre>

<p>
En cas de problème vérifier que le fichier sftp-server_MSS se trouve bien dans le répertoire /usr/lib/openssh/ . Si ce n&#039;est pas le cas vous pouvez le copier à partir de /usr/lib/
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Tester en local] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="tester_en_local" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="3828-4166" /><button type="submit" title="Tester en local" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="tester_en_reseau">Tester en réseau</h3>
<div class="level3">
<blockquote><div class="no">
 Le port 22/<abbr title="Transmission Control Protocol">TCP</abbr> doit être ouvert.</div></blockquote>
<pre class="code">$ lftp sftp://toto@IP_du_Serveur</pre>

<p>
Si vous obtenez l&#039;invite ci-dessous c&#039;est que ça marche.
</p>

<p>
 Code:
</p>
<pre class="code">$ lftp toto@IP_du_Serveur:~&gt;</pre>

<p>
Pour plus de renseignements sur lftp
</p>
<pre class="code">$ man lftp</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Tester en réseau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="tester_en_reseau" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="4167-4422" /><button type="submit" title="Tester en réseau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit8 page-header" id="parametrage_avec_l_outil_graphique_java">Paramétrage avec l&#039;outil graphique java</h2>
<div class="level2">

<p>
L&#039;environnement <a href="/java" class="wikilink1" title="java">Java</a> doit être installé dans votre système.
</p>

<p>
Télécharger l&#039;outil graphique sur <a href="http://sourceforge.net/projects/mysecureshell/files/MySecureShell%20Graphical%20Tools/" class="urlextern" title="http://sourceforge.net/projects/mysecureshell/files/MySecureShell%20Graphical%20Tools/" rel="nofollow">le site officiel</a> et taper dans un terminal ce qui suit:
</p>

<p>
Vous devez d&#039;abord éditer le fichier /etc/ssh/sftp_config et y ajouter
</p>
<pre class="code">&lt;User toto&gt;
    IsAdmin    true
&lt;/User&gt;</pre>

<p>
en remplacant toto par votre nom d&#039;utilisateur
</p>
<pre class="code">unzip -d MSS_Frontend MSS_Frontend_v*.zip
cd MSS_Frontend
sudo java -jar sftp-mss.jar</pre>

<p>
et vous obtiendrez,
</p>

<p>
<a href="/_detail/applications/gajim/interface_graphique_v1.4_pour_mysecureshell_v0.8.png?id=mysecureshell_sftp-server" class="media" title="applications:gajim:interface_graphique_v1.4_pour_mysecureshell_v0.8.png"><img src="/_media/applications/gajim/interface_graphique_v1.4_pour_mysecureshell_v0.8.png" class="media img-responsive" alt="" /></a>
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>Sftp-Who</strong> : permet de savoir qui est connecté et de pouvoir déconnecter n&#039;importe quel utilisateur.</div>
</li>
<li class="level1"><div class="li"> <strong>Sftp-State</strong> : permet d&#039;activer ou de désactiver le serveur SFTP et de vérifier son état.</div>
</li>
<li class="level1"><div class="li"> <strong>Config</strong> : permet de faire la configuration du serveur.</div>
</li>
<li class="level1"><div class="li"> <strong>Log</strong> : vous pouvez voir tout ce qui se passe et s&#039;est passé sur votre serveur.</div>
</li>
<li class="level1"><div class="li"> <strong>Connexion distante</strong> : c&#039;est avec cet onglet que vous allez pouvoir administrer à distance votre serveur MySecureShell.</div>
</li>
<li class="level1"><div class="li"> <strong> Paramètres</strong> : Cet onglet permet la localisation de certains fichiers et le choix du langage de l&#039;interface graphique.</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Paramétrage avec l&#039;outil graphique java] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="parametrage_avec_l_outil_graphique_java" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="4423-5718" /><button type="submit" title="Paramétrage avec l&#039;outil graphique java" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="lanceur">Lanceur</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

<p>
smeg est introuvable dans les dépôts depuis Feisty; indiquer la source
</p>

<p>
Pour plus de convivialité vous pouvez créer un lanceur grâce à Smeg.
</p>
<pre class="code">smeg</pre>

<p>
Et créer une entrée comme suit,
</p>

<p>
<a href="/_detail/applications/entry_editor.png?id=mysecureshell_sftp-server" class="media" title="applications:entry_editor.png"><img src="/_media/applications/entry_editor.png" class="media img-responsive" alt="" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Lanceur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="lanceur" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="5719-5984" /><button type="submit" title="Lanceur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit10 page-header" id="parametrage_manuel">Paramétrage manuel</h2>
<div class="level2">

<p>
Vous souhaitez configurer et administrer votre serveur manuellement, c&#039;est bien sûr possible.
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Paramétrage manuel] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="parametrage_manuel" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="5985-6114" /><button type="submit" title="Paramétrage manuel" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="sftp_config">sftp_config</h3>
<div class="level3">

<p>
MSS possède son propre fichier de paramétrage, sftp_config.
</p>
<pre class="code">$ sudo nano /etc/ssh/sftp_config  </pre>

<p>
Les modifications sont immédiates. Voici toutes les <a href="http://mysecureshell.sourceforge.net/fr/tags.html" class="urlextern" title="http://mysecureshell.sourceforge.net/fr/tags.html" rel="nofollow">directives</a> que vous pourrez utiliser <img src="/lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />.
</p>

<p>
Cette <a href="http://mysecureshell.sourceforge.net/fr/confman.html" class="urlextern" title="http://mysecureshell.sourceforge.net/fr/confman.html" rel="nofollow">documentation</a> devrait grandement vous aider.
</p>

<p>
<em>(en particulier, modifiez l&#039;encodage ISO-8859-15 par UTF8)</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[sftp_config] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="sftp_config" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="6115-6561" /><button type="submit" title="sftp_config" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="sshd_config">sshd_config</h3>
<div class="level3">

<p>
La configuration d&#039;<a href="/ssh#le_fichier_de_configuration_du_serveur_ssh" class="wikilink1" title="ssh">Openssh-server</a> se trouve dans le fichier sshd_config. 
</p>
<pre class="code">$ sudo nano /etc/ssh/sshd_config</pre>

<p>
Toute modification ne sera prise en compte qu&#039;après un redémarrage du serveur.
</p>
<pre class="code">$ sudo /etc/init.d/ssh restart</pre>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[sshd_config] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="sshd_config" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="6562-6865" /><button type="submit" title="sshd_config" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit13 page-header" id="securite">Sécurité</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Sécurité] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="securite" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="6866-6889" /><button type="submit" title="Sécurité" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="utilisation_des_clefs_ssh">Utilisation des clefs SSH</h3>
<div class="level3">

<p>
Dans le cas ou vous devez administrer de multiples serveurs, retaper à chaque fois son mot de passe est pénible surtout quand on est déjà logué sur une machine sûre.
</p>

<p>
Le sujet a déjà été développé sur les pages suivantes que je vous invite à lire:
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://mysecureshell.sourceforge.net/fr/securessh.html#question6" class="urlextern" title="http://mysecureshell.sourceforge.net/fr/securessh.html#question6" rel="nofollow">Comment utiliser l&#039;authentification par clefs à la place des mots de passe ?</a></div>
</li>
<li class="level1"><div class="li"> <a href="/ssh#authentification_par_mot_de_passe" class="wikilink1" title="ssh">wiki SSH</a></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Utilisation des clefs SSH] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_des_clefs_ssh" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="6890-7396" /><button type="submit" title="Utilisation des clefs SSH" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="se_proteger_contre_le_ssh_brute_force">Se protéger contre le SSH Brute Force</h3>
<div class="level3">

<p>
Généralement les mots de passe de la plupart des logiciels sont stockés chiffrés dans un fichier. Pour obtenir un mot de passe, il suffit de récupérer ce fichier et de lancer un logiciel de brute force cracking. Ce procédé consiste à tester de façon exhaustive toutes les combinaisons possibles de caractères (alphanumériques + symboles), de manière à trouver au moins un mot de passe valide.
Cette attaque se base sur le fait que n&#039;importe quel mot de passe est crackable. Ce n&#039;est qu&#039;une histoire de temps. Mais la puissance des machines double tous les deux ans. De plus, les crackers n&#039;hésitent pas à fabriquer des cartes électroniques de cracking, ce qui améliore en conséquence la rapidité de la machine, et donc les chances de trouver un mot de passe valide.
En général, cette méthode est empruntée lorsque la <a href="http://www.securiteinfo.com/attaques/cracking/dictionarycracking.shtml" class="urlextern" title="http://www.securiteinfo.com/attaques/cracking/dictionarycracking.shtml" rel="nofollow">méthode du dictionary cracking</a> a échoué. 
</p>

<p>
Pour se faire lire :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://mysecureshell.sourceforge.net/fr/securessh.html#question1" class="urlextern" title="http://mysecureshell.sourceforge.net/fr/securessh.html#question1" rel="nofollow">Peut-on bloquer des intrusions après un certain nombre de tentatives ? </a></div>
</li>
<li class="level1"><div class="li"> <a href="http://blog.andrew.net.au/2005/02/16#psychologically_scarred" class="urlextern" title="http://blog.andrew.net.au/2005/02/16#psychologically_scarred" rel="nofollow">blog.andrew</a></div>
</li>
</ul>

<p>
 — <em><a href="/mysecureshell_sftp-server" class="wikilink1 curid" title="mysecureshell_sftp-server" data-curid="true">mysecureshell_sftp-server</a> 2006/03/04 16:55</em>
</p>

<p>
P.S.: Ne gère pas les utilisateurs virtuels, ce qui est logique en SSH. Un utilisateur virtuel, c&#039;est un utilisateur qui ne possède pas de dossier personnel dans le répertoire &quot;/home&quot;. Un utilisateur virtuel peut être lié à un autre compte déjà existant et télécharger vers lui des données, mais ne pourra pas en envoyer sur le serveur sftp, peu importe les droits qu&#039;on lui attribuera au moyen de la configuration de MySecureShell. Pour des droits d&#039;accès complet, il faut absolument que l&#039;utilisateur possède son répertoire dans &quot;/home&quot;.
</p>

<p>
<strong><a href="/fail2ban" class="wikilink1" title="fail2ban">fail2ban</a></strong> permet de se protéger contre le brute-force du serveur SSH en bloquant les demandes en provenance d&#039;une adresse IP qui a déjà émis trop de demandes. Les seuils (durée, nombre de requêtes) sont personnalisables.
</p>
<hr />

<p>
<em>Contributeurs : <a href="/utilisateurs/arvin" class="wikilink2" title="utilisateurs:arvin" rel="nofollow">arvin</a></em>
</p>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/mysecureshell_sftp-server"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1503170012" /><input type="hidden" name="summary" value="[Se protéger contre le SSH Brute Force] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="se_proteger_contre_le_ssh_brute_force" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="7397-" /><button type="submit" title="Se protéger contre le SSH Brute Force" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="mysecureshell_sftp-server.txt">mysecureshell_sftp-server.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 19/08/2017, 21:13">Le 19/08/2017, 21:13</span></li><li class="text-muted">par L&#039;Africain</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=mysecureshell_sftp-server&amp;1635558412" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

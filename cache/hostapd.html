<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>hostapd [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="wifi,reseau"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/hostapd?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/hostapd?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/hostapd"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/hostapd"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/hostapd"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"hostapd","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="hostapd">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/hostapd?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/hostapd?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/hostapd?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/hostapd?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/hostapd?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/hostapd?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/hostapd?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">hostapd</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/hostapd?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/hostapd?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/hostapd?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#support_du_mode_ap_ou_master","title":"Support du mode AP ou Master","level":1},{"link":"#installation_configuration_et_lancement_de_hostapd","title":"Installation, configuration et lancement de Hostapd","level":1},{"link":"#configuration_d_un_point_d_acces_en_wi-fi_80211n_support_mimo","title":"Configuration d'un point d'acc\u00e8s en WI-FI 802.11n (support MIMO)","level":2},{"link":"#creation_d_un_point_d_acces_wi-fi_partage_de_connexion_internet","title":"Cr\u00e9ation d'un point d'acc\u00e8s Wi-Fi & Partage de connexion Internet","level":1},{"link":"#configuration_de_l_interface_wlan","title":"Configuration de l'interface WLAN","level":2},{"link":"#configuration_du_daemon_hostapd","title":"Configuration du daemon hostapd","level":2},{"link":"#configuration_dhcpd_serveur","title":"Configuration Dhcpd Serveur","level":2},{"link":"#configuration_dnsmasq_serveur","title":"Configuration Dnsmasq Serveur","level":2},{"link":"#configuration_de_ip_forwarding","title":"Configuration de IP forwarding","level":2},{"link":"#configuration_de_la_mascarade_du_firewall","title":"Configuration de la Mascarade & du Firewall","level":2},{"link":"#exemple_de_script","title":"Exemple de script","level":2},{"link":"#liens","title":"Liens","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#support_du_mode_ap_ou_master">Support du mode AP ou Master</a></li>
<li class="level1"><a href="#installation_configuration_et_lancement_de_hostapd">Installation, configuration et lancement de Hostapd</a>
<ul class="nav toc">
<li class="level2"><a href="#configuration_d_un_point_d_acces_en_wi-fi_80211n_support_mimo">Configuration d&#039;un point d&#039;accès en WI-FI 802.11n (support MIMO)</a></li>
</ul>
</li>
<li class="level1"><a href="#creation_d_un_point_d_acces_wi-fi_partage_de_connexion_internet">Création d&#039;un point d&#039;accès Wi-Fi &amp; Partage de connexion Internet</a>
<ul class="nav toc">
<li class="level2"><a href="#configuration_de_l_interface_wlan">Configuration de l&#039;interface WLAN</a></li>
<li class="level2"><a href="#configuration_du_daemon_hostapd">Configuration du daemon hostapd</a></li>
<li class="level2"><a href="#configuration_dhcpd_serveur">Configuration Dhcpd Serveur</a></li>
<li class="level2"><a href="#configuration_dnsmasq_serveur">Configuration Dnsmasq Serveur</a></li>
<li class="level2"><a href="#configuration_de_ip_forwarding">Configuration de IP forwarding</a></li>
<li class="level2"><a href="#configuration_de_la_mascarade_du_firewall">Configuration de la Mascarade &amp; du Firewall</a></li>
<li class="level2"><a href="#exemple_de_script">Exemple de script</a></li>
</ul>
</li>
<li class="level1"><a href="#liens">Liens</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/wifi" class="wikilink1" title="wifi" rel="tag">wifi</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="hostap_daemon">HostAP daemon</h1>
<div class="level1">

<p>
Hostapd s&#039;appuie sur les protocoles IEEE 802.11 AP et IEEE 802.1X/WPA/WPA2/EAP/RADIUS authentificateur.
</p>

<p>
Hostapd permet la création d&#039;un point d&#039;accès Wi-Fi, technologie sans fil utilisée pour se connecter à un réseau informatique.
Dans les réseaux informatiques, un point d&#039;accès sans fil (spot ou AP) est un dispositif qui relie les appareils de communication sans fil pour former un réseau sans fil. Le spot Wi-Fi se connecte généralement à un réseau câblé, et peut transmettre des données entre les appareils sans fil et les périphériques câblés. Plusieurs spots peuvent être liés ensemble pour former un réseau plus large qui permet le &quot;roaming&quot; (l&#039;itinérance). Pour rappel, en revanche, un réseau où les machines clientes gèrent elles-mêmes - sans avoir besoin de point d&#039;accès - devient un réseau ad-hoc.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[HostAP daemon] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="hostap_daemon" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="27-897" /><button type="submit" title="HostAP daemon" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="support_du_mode_ap_ou_master">Support du mode AP ou Master</h2>
<div class="level2">

<p>
Votre adaptateur Wi-Fi doit supporter le mode AP ou Master, avant tout vérifiez que votre adaptateur supporte ce mode avec la commande &quot;iw&quot;.
</p>

<p>
Le <strong>mode AP</strong> doit apparaître :
</p>

<p>
# iw list
</p>
<pre class="code">[...]
Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor
                 * mesh point
[...]</pre>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Support du mode AP ou Master] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="support_du_mode_ap_ou_master" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="898-1339" /><button type="submit" title="Support du mode AP ou Master" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="installation_configuration_et_lancement_de_hostapd">Installation, configuration et lancement de Hostapd</h2>
<div class="level2">

<p>
Installation depuis dépots officiel
</p>
<pre class="code">sudo apt-get -y install hostapd</pre>

<p>
Le fichier de configuration <strong>/etc/hostapd/hostapd.conf</strong> contient tous les paramètres de configuration du point d&#039;accès Wi-Fi.
</p>

<p>
La configuration minimale (Wi-Fi ouvert/OPEN) :
</p>
<pre class="code"># interface wlan du Wi-Fi
interface=wlan0

# nl80211 avec tous les drivers Linux mac80211 
driver=nl80211

# Nom du spot Wi-Fi
ssid=Nexus

# mode Wi-Fi (a = IEEE 802.11a, b = IEEE 802.11b, g = IEEE 802.11g)
hw_mode=g

# canal de fréquence Wi-Fi (1-14)
channel=6

# Wi-Fi ouvert, pas d&#039;authentification !
auth_algs=0

# Beacon interval in kus (1.024 ms)
beacon_int=100

# DTIM (delivery trafic information message) 
dtim_period=2

# Maximum number of stations allowed in station table
max_num_sta=255

# RTS/CTS threshold; 2347 = disabled (default)
rts_threshold=2347

# Fragmentation threshold; 2346 = disabled (default)
fragm_threshold=2346</pre>

<p>
Le driver nl80211 est utilisé avec tous les drivers Linux mac80211.
Hostapd supporte les adaptateurs Wi-Fi utilisant les drivers madwifi, prism.
</p>

</div>

<h4 id="authentification_wpawpa2">Authentification WPA/WPA2</h4>
<div class="level4">

<p>
Activez l&#039;authentification en modifiant la clé auth_algs=1
</p>

<p>
Avec  Wi-Fi WPA (WPA-PSK-TKIP) :
</p>
<pre class="code">wpa=1
#wpa_psk=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
wpa_passphrase=passphrase
wpa_key_mgmt=WPA-PSK
wpa_pairwise=TKIP</pre>

<p>
Avec Wi-Fi WPA2 (WPA2-PSK-CCMP) :
</p>
<pre class="code">wpa=2
#wpa_psk=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
wpa_passphrase=passphrase
wpa_key_mgmt=WPA-PSK
wpa_pairwise=CCMP
rsn_pairwise=CCMP</pre>

</div>

<h4 id="filtrage_mac">Filtrage MAC</h4>
<div class="level4">

<p>
Activez le Filtrage des adresses <abbr title="Medium Access Control">MAC</abbr> des clients sans fil :
</p>
<pre class="code"># Station MAC address -based authentication (driver=hostap or driver=nl80211)
# 0 = accept unless in deny list
# 1 = deny unless in accept list
# 2 = use external RADIUS server (accept/deny lists are searched first)
macaddr_acl=1

# Accept/deny lists are read from separate files
accept_mac_file=/etc/hostapd/hostapd.accept
#deny_mac_file=/etc/hostapd/hostapd.deny</pre>

<p>
Exemple de fichier hostapd.accept :
</p>
<pre class="code">b4:24:63:73:f8:14
00:07:a5:f9:a7:80
...</pre>

</div>

<h4 id="lancement_de_hostapd">Lancement de hostapd</h4>
<div class="level4">

<p>
Lancement de hostapd :
</p>
<pre class="code">hostapd /etc/hostapd/hostapd.conf</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Installation, configuration et lancement de Hostapd] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_configuration_et_lancement_de_hostapd" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="1340-3637" /><button type="submit" title="Installation, configuration et lancement de Hostapd" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="configuration_d_un_point_d_acces_en_wi-fi_80211n_support_mimo">Configuration d&#039;un point d&#039;accès en WI-FI 802.11n (support MIMO)</h3>
<div class="level3">

<p>
L&#039;agrégation de la bande passante (HT) se base sur l&#039;addition de deux canaux en 20 <abbr title="Megahertz">MHz</abbr> chacun, pour obtenir une large bande passante de communication de 40MHz. L&#039;intervalle de garde (GI) en 800 ns ou en 400 ns détermine le délai utilisé pour s&#039;assurer qu&#039;une transmission n&#039;interfère par avec d&#039;autres (le délai est automatiquement sélectionné en fonction de la qualité du lien entre AP et son client Wi-Fi N) . Le nombre de flux avec antennes utilisées, active le mode MIMO (Multiple Input, Multiple Output) qui signifie de multiple entrées et sorties dans ce mode de communication, anciennement &quot;mode diversity&quot;. Tous ces paramètres détermineront votre débit final, affecté par un dernier paramètre, les capacités matérielles (la puce/chipset) de cryptage (AES, TKIP, <abbr title="Wireless Equivalent Privacy">WEP</abbr>) de votre adaptateur WI-FI 802.11n. Les débits montent de 6.5 Mbps minimum à 300 Mbps et plus en WI-FI 802.11n, par exemple un AP MIMO 2x2, donc 2 flux en réception (RX) et 2 en transmission (TX) est capable de soutenir un client MIMO, aussi en 2x2, à 300 Mbps sur une courte distance.
</p>

<p>
Tableau montrant l&#039;impact des modes HT20 / HT40 GI (guard interval) et du nombre de flux sur le débit du réseau, avec chaque fois la meilleur modulation possible 64-QAM : <br/>

</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0">Bande passante </th><th class="col1 leftalign">  </th><th class="col2 leftalign">HT 20MHz	</th><th class="col3">HT 40MHz</th><th class="col4"> </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"><strong>Nombre de Flux</strong> </td><td class="col1 leftalign">800 ns Gi	</td><td class="col2 leftalign">400 ns Gi	</td><td class="col3 leftalign">800 ns  Gi	</td><td class="col4">400 ns Gi</td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign">1 flux	</td><td class="col1 leftalign">65 Mbps	</td><td class="col2 leftalign">75 Mbps	</td><td class="col3 leftalign">135 Mbps	</td><td class="col4">150 Mbps</td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign">2 flux	</td><td class="col1 leftalign">130 Mbps	</td><td class="col2 leftalign">150 Mbps	</td><td class="col3 leftalign">270 Mbps	</td><td class="col4">300 Mbps</td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign">3 flux	</td><td class="col1 leftalign">195 Mbps	</td><td class="col2 leftalign">225 Mbps	</td><td class="col3 leftalign">405 Mbps	</td><td class="col4">450 Mbps</td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign">4 flux	</td><td class="col1 leftalign">260 Mbps	</td><td class="col2 leftalign">290 Mbps	</td><td class="col3 leftalign">540 Mbps	</td><td class="col4">600 Mbps</td>
	</tr>
</table></div>

<p>
Tableau des canaux dans le mode HT40 inférieur/supérieur : <br/>

</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign">fréquences	</th><th class="col1 leftalign"> HT40-		</th><th class="col2"> HT40+ </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign">2.4 <abbr title="Gigahertz">GHz</abbr>	        </td><td class="col1 leftalign">5-13		</td><td class="col2">1-7 (1-9 en Europe/Japon)</td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign">5 <abbr title="Gigahertz">GHz</abbr>		</td><td class="col1 leftalign">40,48,56,64	</td><td class="col2">36,44,52,60</td>
	</tr>
</table></div>

<p>
Les règles sont les suivantes : vous ne devez pas paramètrer les canaux 1,2,3 ou 4 dans le mode HT40 inférieur, et vous ne devez pas paramétrer les canaux 10,11,12 ou 13 dans le mode HT 40 supérieur. Les canaux 5,6 ou 7 marcheront donc dans les deux modes HT40 -/+.
</p>

<p>
Petit rappel du mode standard IEEE 802.11g, entre 2,4GHz et 2,5GHz il y a 100Mhz et il y a 14 canaux de 20MHz espacés de 5MHz seulement, et se chevauchant obligatoirement dans cette espace de la bande. En mode 802.11n la bande passant additionné de 2 canaux couvre 40MHz, chevauchant par conséquent beaucoup plus de canaux entre 2,4GHz et 2,5GHz.  
</p>

<p>
Paramètrage Wi-Fi N en mode IEEE 802.11g (2,4GHz) et channel :
</p>
<pre class="code"># mode Wi-Fi 
hw_mode=g
channel=6</pre>

<p>
Paramètrage Wi-Fi N en mode IEEE 802.11a (5GHz) et channel :
</p>
<pre class="code"># mode Wi-Fi 
hw_mode=a
channel=36</pre>

<p>
Hostapd implémente des règles très strictes en 802.11n en particulier IEEE_802.11n Draft 7.0 section 11.14.3.2. Au démarrage hostap scannera donc les APs HT20/40 actifs dans son environnement présent, et déterminera si votre fréquence primaire est en adéquation avec la fréquences secondaire conséquente du choix canal inférieur/supérieur pour chaque AP présent. Si un seul de ces APs environnants est détecté chevauchant sur vos fréquences primaire et secondaire, hostapd ne se lancera alors qu&#039;en mode HT20, et uniquement dans ce mode 20MHz. Vous remarquerez sûrement dans un environnement non contrôlé (urbain et dense), que certaines BOX AP/router polluent et perturbent allègrement le 2,4GHz (la bande des 5GHz est bien plus calme), ne respectant pas certaines règles du 802.11n en 40MHz… Ce ne doit pas être la règle du premier arrivé qui doit être servi en premier en 40MHz et ceci sans limite de temps!
</p>

<p>
Ce patch est fonctionnel pour activer le mode 40MHz dans un environnement non contrôlé et perturbé, fichier IEEE_802.11n_D7.0_11.14.3.2.patch :
</p>
<pre class="code c">hostapd<span class="sy0">-</span>0.7.3<span class="sy0">/</span>hostapd<span class="co2"># diff -ur ../src.orign/ap/hw_features.c ../src/ap/hw_features.c &gt; IEEE_802.11n_D7.0_11.14.3.2.patch</span>
<span class="sy0">---</span> ..<span class="sy0">/</span>src.<span class="me1">orign</span><span class="sy0">/</span>ap<span class="sy0">/</span>hw_features.<span class="me1">c</span>       <span class="nu0">2011</span><span class="sy0">-</span><span class="nu0">11</span><span class="sy0">-</span><span class="nu8">01</span> <span class="nu0">21</span><span class="sy0">:</span><span class="nu8">05</span><span class="sy0">:</span><span class="nu16">04.041307566</span> <span class="sy0">+</span><span class="nu8">0100</span>
<span class="sy0">+++</span> ..<span class="sy0">/</span>src<span class="sy0">/</span>ap<span class="sy0">/</span>hw_features.<span class="me1">c</span>     <span class="nu0">2011</span><span class="sy0">-</span><span class="nu0">11</span><span class="sy0">-</span><span class="nu8">01</span> <span class="nu0">23</span><span class="sy0">:</span><span class="nu8">01</span><span class="sy0">:</span><span class="nu16">08.873747763</span> <span class="sy0">+</span><span class="nu8">0100</span>
@@ <span class="sy0">-</span><span class="nu0">378</span><span class="sy0">,</span><span class="nu0">8</span> <span class="sy0">+</span><span class="nu0">378</span><span class="sy0">,</span><span class="nu0">17</span> @@
                                sec <span class="sy0">=</span> pri <span class="sy0">+</span> <span class="nu0">20</span><span class="sy0">;</span>
                <span class="br0">&#125;</span>
&nbsp;
<span class="sy0">-</span>               <span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>pri <span class="sy0">&lt;</span> affected_start <span class="sy0">||</span> pri <span class="sy0">&gt;</span> affected_end<span class="br0">&#41;</span> <span class="sy0">&amp;&amp;</span>
<span class="sy0">-</span>                   <span class="br0">&#40;</span>sec <span class="sy0">&lt;</span> affected_start <span class="sy0">||</span> sec <span class="sy0">&gt;</span> affected_end<span class="br0">&#41;</span><span class="br0">&#41;</span>
<span class="sy0">+</span>               wpa_printf<span class="br0">&#40;</span>MSG_DEBUG<span class="sy0">,</span> <span class="st0">&quot;Tested BSS &quot;</span> MACSTR
<span class="sy0">+</span>                         <span class="st0">&quot; &lt;%d,%d&gt; (pri=%d%c sec=%d) vs. &lt;%d,%d&gt;&quot;</span><span class="sy0">,</span>
<span class="sy0">+</span>                               MAC2STR<span class="br0">&#40;</span>bss<span class="sy0">-&gt;</span>bssid<span class="br0">&#41;</span><span class="sy0">,</span>
<span class="sy0">+</span>                               pri<span class="sy0">,</span> sec<span class="sy0">,</span> pri_chan<span class="sy0">,</span>
<span class="sy0">+</span>                               sec <span class="sy0">&gt;</span> pri <span class="sy0">?</span> <span class="st0">'+'</span> <span class="sy0">:</span> <span class="st0">'-'</span><span class="sy0">,</span>
<span class="sy0">+</span>                               sec_chan<span class="sy0">,</span> pri_freq<span class="sy0">,</span> sec_freq<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="sy0">+</span>
<span class="sy0">+</span>               <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>pri <span class="sy0">&lt;</span> affected_start <span class="sy0">||</span> pri <span class="sy0">&gt;</span> affected_end<span class="br0">&#41;</span> <span class="sy0">&amp;&amp;</span>
<span class="sy0">+</span>                   <span class="br0">&#40;</span>sec <span class="sy0">&lt;</span> affected_start <span class="sy0">||</span> sec <span class="sy0">&gt;</span> affected_end<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">||</span>
<span class="sy0">+</span>                  <span class="br0">&#40;</span><span class="br0">&#40;</span>pri <span class="sy0">&gt;</span> affected_start <span class="sy0">&amp;&amp;</span> sec <span class="sy0">&gt;</span> affected_end<span class="br0">&#41;</span> <span class="sy0">||</span>  <span class="co1">//correction for &lt;2447,2467&gt; (chan=8+) vs. &lt;2437,2417&gt;</span>
<span class="sy0">+</span>                   <span class="br0">&#40;</span>pri <span class="sy0">&lt;</span> affected_start <span class="sy0">&amp;&amp;</span> sec <span class="sy0">&lt;</span> affected_end<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="co1">// and reverse</span>
                        <span class="kw1">continue</span><span class="sy0">;</span> <span class="coMULTI">/* not within affected channel range */</span>
&nbsp;
                wpa_printf<span class="br0">&#40;</span>MSG_DEBUG<span class="sy0">,</span> <span class="st0">&quot;Neighboring BSS: &quot;</span> MACSTR
@@ <span class="sy0">-</span><span class="nu0">451</span><span class="sy0">,</span><span class="nu0">7</span> <span class="sy0">+</span><span class="nu0">460</span><span class="sy0">,</span><span class="nu0">14</span> @@
                iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>secondary_channel <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
                iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>ht_capab <span class="sy0">&amp;=</span> ~HT_CAP_INFO_SUPP_CHANNEL_WIDTH_SET<span class="sy0">;</span>
        <span class="br0">&#125;</span>
<span class="sy0">-</span>
<span class="sy0">+</span>       <span class="kw1">else</span> wpa_printf<span class="br0">&#40;</span>MSG_INFO<span class="sy0">,</span> <span class="st0">&quot;20/40 MHz permitted on &quot;</span>
<span class="sy0">+</span>                          <span class="st0">&quot;channel pri=%d%c sec=%d/%d &quot;</span><span class="sy0">,</span>
<span class="sy0">+</span>                          iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>channel<span class="sy0">,</span>
<span class="sy0">+</span>                          iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>channel <span class="sy0">&gt;</span> iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>secondary_channel <span class="sy0">?</span> <span class="st0">'+'</span> <span class="sy0">:</span> <span class="st0">'-'</span><span class="sy0">,</span>
<span class="sy0">+</span>                          iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>channel <span class="sy0">+</span>
<span class="sy0">+</span>                          iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>secondary_channel<span class="sy0">,</span>
<span class="sy0">+</span>                          iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>channel <span class="sy0">+</span>
<span class="sy0">+</span>                          iface<span class="sy0">-&gt;</span>conf<span class="sy0">-&gt;</span>secondary_channel <span class="sy0">*</span> <span class="nu0">4</span><span class="br0">&#41;</span><span class="sy0">;</span>
        hostapd_setup_interface_complete<span class="br0">&#40;</span>iface<span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span></pre>

<p>
Exemple de configuration WI-FI 802.11n :
</p>
<pre class="code">ieee80211n=1
ht_capab=[HT40+][SHORT-GI-40][RX-STBC1][DSSS_CCK-40][MAX-AMSDU-3839]</pre>

<p>
Ici nous utilisons les modes HT20/HT40 supérieur, avec un intervalle de garde court en 40 <abbr title="Megahertz">MHz</abbr>, avec 1 seul flux spatial, avec prise en charge du DSSS/CCK Mode en 40 <abbr title="Megahertz">MHz</abbr>, avec un AMSDU de longueur maximum à 3839 bytes (par défaut). Canal 6 avec cryptage WPA2-PSK-CCMP configuré plus haut dans la config de hostapd.
</p>

<p>
Utilisez la commande &quot;iw list&quot; pour déterminer les capacités de votre adaptateur en Wi-Fi 802.11n :
</p>
<pre class="code"># iw list
Wiphy phy1
        Band 1:
	      Capabilities: 0x114e
                        HT20/HT40
                        SM Power Save disabled
                        RX HT40 SGI
                        RX STBC 1-stream
                        Max AMSDU length: 3839 bytes
                        DSSS/CCK HT40
                Maximum RX AMPDU length 65535 bytes (exponent: 0x003)
                Minimum RX AMPDU time spacing: 8 usec (0x06)
                HT TX/RX MCS rate indexes supported: 0-15
[...]</pre>

<p>
Attention aux messages d&#039;erreur lors du lancement de hostapd :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Driver does not support configured HT capability [SHORT-GI-20]</div>
</li>
<li class="level1"><div class="li"> Driver does not support configured HT capability [DSSS_CCK-40]</div>
</li>
<li class="level1"><div class="li"> Driver does not support configured HT capability [RX-STBC*]</div>
</li>
<li class="level1"><div class="li"> HT (IEEE 802.11n) with WPA/WPA2 requires CCMP to be enabled</div>
</li>
</ul>

<p>
N&#039;oubliez pas, vous êtes limités aux capacités matérielles de votre Point d&#039;Accès en 802.11n (AP) et de vos clients (stations) en Wi-Fi N, ainsi qu&#039;aux limites du driver Wi-Fi N que vous utilisez…
</p>

<p>
Lancement de hostapd en Wi-Fi N avec son fichier de configuration :
</p>
<pre class="code">hostapd /etc/hostapd/hostapd.conf</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Configuration d&#039;un point d&#039;accès en WI-FI 802.11n (support MIMO)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_d_un_point_d_acces_en_wi-fi_80211n_support_mimo" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="3638-11184" /><button type="submit" title="Configuration d&#039;un point d&#039;accès en WI-FI 802.11n (support MIMO)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="creation_d_un_point_d_acces_wi-fi_partage_de_connexion_internet">Création d&#039;un point d&#039;accès Wi-Fi &amp; Partage de connexion Internet</h2>
<div class="level2">

<p>
Cet exemple vous permettra de créer un point d&#039;accès Wi-Fi sur une interface wlan0 (Wireless <abbr title="Réseau Local">LAN</abbr>) avec un partage de la connexion Internet d&#039;une autre interface wlan6 (mais aussi bien eth0…)
</p>

<p>
<a href="/_detail/reseau/wifi_ap_1_.jpg?id=hostapd" class="media" title="reseau:wifi_ap_1_.jpg"><img src="/_media/reseau/wifi_ap_1_.jpg" class="media img-responsive" title="wifi_ap_1_.jpg" alt="wifi_ap_1_.jpg" /></a>
</p>

<p>
<code> 
Client Wi-Fi [PhoneWeb/Blu-Ray Disc/TV] ←—100 mètres—→ AP Wi-Fi ←—[ PC Linux ]—→ Client Wi-Fi ←—300 mètres—→ [Spot/AP Router] Internet
                                                                                                                         
</code>
</p>

<p>
Ce type de configuration WI-Fi permet à des adaptateurs WI-Fi installés sur des périphériques, comme votre WebPhone, votre Blu-Ray Disc ou bien votre Téléviseur par exemple, d&#039;accéder à votre réseau local maison et à Internet. De distribuer en Wi-Fi tout type de contenu, comme de la vidéo, images, musiques par l&#039;intermédiaire de <a href="/minidlna" class="wikilink1" title="minidlna">minidlna</a> par exemple…
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Création d&#039;un point d&#039;accès Wi-Fi &amp; Partage de connexion Internet] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creation_d_un_point_d_acces_wi-fi_partage_de_connexion_internet" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="11185-12146" /><button type="submit" title="Création d&#039;un point d&#039;accès Wi-Fi &amp; Partage de connexion Internet" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="configuration_de_l_interface_wlan">Configuration de l&#039;interface WLAN</h3>
<div class="level3">

<p>
Il nous faut activer l&#039;interface wlan0 sur une adresse IP, prenons l&#039;IP 192.168.0.1 et un masque 255.255.255.0 :
</p>
<pre class="code">sudo ifconfig wlan0 down
sudo ifconfig wlan0 192.168.0.1 netmask 255.255.255.0 up</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Configuration de l&#039;interface WLAN] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_de_l_interface_wlan" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="12147-12404" /><button type="submit" title="Configuration de l&#039;interface WLAN" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="configuration_du_daemon_hostapd">Configuration du daemon hostapd</h3>
<div class="level3">

<p>
Lancement du daemon hostapd avec son fichier de configuration pointant sur l&#039;interface wlan0 :
</p>
<pre class="code">sudo hostapd /etc/hostapd/hostapd.conf &amp;</pre>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Configuration du daemon hostapd] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_du_daemon_hostapd" /><input type="hidden" name="codeblockOffset" value="15" /><input type="hidden" name="range" value="12405-12600" /><button type="submit" title="Configuration du daemon hostapd" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="configuration_dhcpd_serveur">Configuration Dhcpd Serveur</h3>
<div class="level3">

<p>
La création d&#039;un point d&#039;accès Wi-Fi nécessite un sous-réseau configuré derrière ce spot Wi-Fi. Un serveur <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> distribuera automatiquement des adresses aux clients sans fil. Configurons le serveur dhcpd-server avec un sous-réseau ayant pour adresse et masque 192.168.0.0/24.
</p>

<p>
Le fichier de configuration /etc/dhcp/dhcpd.conf
</p>
<pre class="code">option domain-name-servers 192.168.0.1;

default-lease-time 600;
max-lease-time 7200;

authoritative;

log-facility local7;

subnet 192.168.0.0 netmask 255.255.255.0 {
     #option domain-name &quot;wifi.localhost&quot;;
     option routers 192.168.0.1;
     option subnet-mask 255.255.255.0;
     option broadcast-address 192.168.0.0;
     option domain-name-servers 192.168.0.1; 
     range dynamic-bootp 192.168.0.15 192.168.0.100;
}</pre>

<p>
Lancement de dhcpd-server : 
</p>
<pre class="code">sudo dhcpd -d -f -pf /var/run/dhcp-server/dhcpd.pid -cf /etc/dhcp/dhcpd.conf wlan0 &amp;</pre>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Configuration Dhcpd Serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_dhcpd_serveur" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="12601-13546" /><button type="submit" title="Configuration Dhcpd Serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="configuration_dnsmasq_serveur">Configuration Dnsmasq Serveur</h3>
<div class="level3">

<p>
Notre sous-réseau étant créé, il ne reste plus qu&#039;à configurer un serveur de cache <abbr title="Domain Name System">DNS</abbr> sur notre interface, qui transformera toute demande d&#039;un domaine en adresse Ip. 
</p>

<p>
Attention notre <abbr title="Domain Name System">DNS</abbr> ne fait que lire le fichier &#039;/etc/resolv.conf&#039; déjà alimenté de serveur <abbr title="Domain Name System">DNS</abbr> par une autre interface ayant Internet.
</p>

<p>
Le fichier de configuration /etc/dnsmasq.conf
</p>
<pre class="code">bogus-priv
filterwin2k
# no-resolv
interface=wlan0
no-dhcp-interface=wlan0</pre>

<p>
Bien que dnsmasq puisse distribuer des adresses IP d&#039;un sous-réseau, nous n&#039;utiliserons pas cette fonctionnalité puisque nous utilisons déjà dhcpd-server.
</p>

<p>
Lancement de dnsmasq : 
</p>
<pre class="code">sudo dnsmasq -x /var/run/dnsmasq.pid -C /etc/dnsmasq.conf</pre>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Configuration Dnsmasq Serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_dnsmasq_serveur" /><input type="hidden" name="codeblockOffset" value="18" /><input type="hidden" name="range" value="13547-14299" /><button type="submit" title="Configuration Dnsmasq Serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="configuration_de_ip_forwarding">Configuration de IP forwarding</h3>
<div class="level3">

<p>
Notre interface wlan nouvellement créée a besoin de communiquer avec notre seconde interface ayant Internet, nous devons configurer l&#039;IP forwarding. 
</p>

<p>
Activez la prise en charge de l&#039;IP forwarding, pour faire suivre les paquets d&#039;une interface à l&#039;autre :
</p>
<pre class="code">echo 1 &gt; /proc/sys/net/ipv4/ip_forward</pre>

<p>
Ou bien si vous voulez rendre cela permanent :
</p>

<p>
Éditez le fichier /etc/sysctl.conf et dé-commentez la ligne :
</p>
<pre class="code"># Uncomment the next line to enable packet forwarding for IPv4
net.ipv4.ip_forward=1</pre>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Configuration de IP forwarding] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_de_ip_forwarding" /><input type="hidden" name="codeblockOffset" value="20" /><input type="hidden" name="range" value="14300-14869" /><button type="submit" title="Configuration de IP forwarding" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="configuration_de_la_mascarade_du_firewall">Configuration de la Mascarade &amp; du Firewall</h3>
<div class="level3">

<p>
Notre sous-réseau 192.168.0.0/24 étant opérationnel, il ne reste plus qu&#039;à activer la Mascarade et de lui permet de traverser notre firewall.
</p>

<p>
Pour traduire des adresses entre deux interfaces nous devons activer le masquerading (<abbr title="Network Address Translation">NAT</abbr>/Network Address Translation) dans le noyau Linux :
</p>

<p>
Chargez le module :
</p>
<pre class="code">sudo modprobe ipt_MASQUERADE</pre>

</div>

<h4 id="configuration_du_firewall_avec_iptables">Configuration du Firewall avec iptables</h4>
<div class="level4">

<p>
Activer la mascarade sur l&#039;interface partageant Internet :
</p>
<pre class="code">sudo iptables -A POSTROUTING -t nat -o wlan6 -j MASQUERADE</pre>

<p>
Accepter toutes les connexions établies et reliées entre elles :
</p>
<pre class="code">sudo iptables -A FORWARD --match state --state RELATED,ESTABLISHED --jump ACCEPT</pre>

<p>
Accepter les nouvelles connexions venant de l&#039;interface wlan0 et ayant pour destination notre sous-réseau :
</p>
<pre class="code">sudo iptables -A FORWARD -i wlan0 --destination 192.168.0.0/24 --match state --state NEW --jump ACCEPT</pre>

<p>
Enfin accepter les connexions entrantes venant de notre sous-réseau :
</p>
<pre class="code">sudo iptables -A INPUT -s 192.168.0.0/24 --jump ACCEPT</pre>

</div>

<h4 id="configuration_du_firewall_avec_ufw">Configuration du Firewall avec Ufw</h4>
<div class="level4">

<p>
En premier lieux, il faut changer la règle par défaut du transfert de paquets d&#039;une interface à l&#039;autre dans ufw.<br/>

Editer le fichier /etc/default/ufw et modifier la clé DEFAULT_FORWARD_POLICY de DROP en ACCEPT :
</p>
<pre class="code">DEFAULT_FORWARD_POLICY=&quot;ACCEPT&quot;</pre>

<p>
Editer le fichier /etc/ufw/sysctl.conf qui doit contenir ceci pour activer l&#039;IP forwarding :
</p>
<pre class="code">net.ipv4.ip_forward=1</pre>

<p>
Éditer le fichier /etc/ufw/before.rules qui contient les règles de Ufw :
</p>

<p>
Juste après l&#039;entête du fichier ajouter une nouvelle section <abbr title="Network Address Translation">NAT</abbr> : 
</p>
<pre class="code"># nat Table rules
*nat
:POSTROUTING ACCEPT [0:0]

# Forward traffic from eth1 through eth0.
-A POSTROUTING -s 192.168.0.0/24 -o wlan6 -j MASQUERADE

# don&#039;t delete the &#039;COMMIT&#039; line or these nat table rules won&#039;t be processed
COMMIT</pre>

<p>
Dans la section *filter ajoutez : 
</p>
<pre class="code">-A ufw-before-forward -m state --state RELATED,ESTABLISHED -j ACCEPT
-A ufw-before-forward -i wlan0 -s 192.168.0.0/24 -o wlan6 -m state --state NEW -j ACCEPT</pre>

<p>
Finalement autorisez le sous-réseau :
</p>
<pre class="code">sudo ufw allow from 192.168.0.0/24</pre>

<p>
ou bien avec Gufw :
</p>

<p>
<a href="/_detail/administration/gufw_firewall1.png?id=hostapd" class="media" title="administration:gufw_firewall1.png"><img src="/_media/administration/gufw_firewall1.png" class="media img-responsive" alt="" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Configuration de la Mascarade &amp; du Firewall] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_de_la_mascarade_du_firewall" /><input type="hidden" name="codeblockOffset" value="22" /><input type="hidden" name="range" value="14870-17190" /><button type="submit" title="Configuration de la Mascarade &amp; du Firewall" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="exemple_de_script">Exemple de script</h3>
<div class="level3">

<p>
Fichier bash wifi_ap.sh
</p>
<pre class="code bash"><span class="co0">#!/bin/bash</span>
&nbsp;
<span class="co0">#Description: Création d'un point d'accès wifi sur une interface wlan et partage la connexion Internet d'une autre interface avec celle-ci.</span>
<span class="co0">#Requirements: Necessite les paquets hostapd isc-dhcp-server isc-dhcp-common isc-dhcp-client dnsmasq dnsmasq-base macchanger</span>
<span class="co0">#Optionnel: paquet macchanger optionnel</span>
<span class="co0">#Auteur: Nexus6[at]altern.org 01.12.2010</span>
&nbsp;
<span class="co0">### WARNING : kill hostapd dnsmasq &amp; dhcpd à la fin...</span>
&nbsp;
<span class="co0"># Configuration des interfaces </span>
<span class="re2">INT_WIFI</span>=<span class="st0">&quot;wlan0&quot;</span> <span class="co0"># interface du point d'accès wifi</span>
<span class="re2">INT_NET</span>=<span class="st0">&quot;wlan6&quot;</span> <span class="co0"># interface wlan ou eth0 ayant Internet</span>
&nbsp;
<span class="co0"># IP &amp; mask du sous-réseau créé sur l'interface wlan</span>
<span class="re2">SUBNET</span>=<span class="st0">&quot;192.168.0.0/24&quot;</span> 
<span class="re2">IP</span>=<span class="st0">&quot;192.168.0.1&quot;</span>
<span class="re2">MASK</span>=<span class="st0">&quot;255.255.255.0&quot;</span>
<span class="co0">#GW=&quot;192.168.0.1&quot;</span>
&nbsp;
<span class="co0"># Change l'adresse mac ?</span>
<span class="re2">MACCHANGER</span>=<span class="st0">&quot;0&quot;</span> <span class="co0">#0=change la MAC, 1 garde la MAC d'origine</span>
&nbsp;
<span class="co0"># Definition de quelques couleurs </span>
<span class="re2">red</span>=<span class="st_h">'\e[0;31m'</span>
<span class="re2">redhl</span>=<span class="st_h">'\e[0;31;7m'</span>
<span class="re2">RED</span>=<span class="st_h">'\e[1;31m'</span>
<span class="re2">blue</span>=<span class="st_h">'\e[0;34m'</span>
<span class="re2">BLUE</span>=<span class="st_h">'\e[1;34m'</span>
<span class="re2">cyan</span>=<span class="st_h">'\e[0;36m'</span>
<span class="re2">CYAN</span>=<span class="st_h">'\e[1;36m'</span>
<span class="re2">NC</span>=<span class="st_h">'\e[0m'</span> <span class="co0"># No Color</span>
&nbsp;
<span class="co0">#Mode Debug Dhcp ?</span>
<span class="re2">DBG</span>=<span class="st0">&quot;-d&quot;</span>
<span class="re2">DBG</span>=<span class="st0">&quot;&quot;</span>     <span class="co0">#Ligne à décommenter pour désactiver le debug du serveur dhcpd</span>
&nbsp;
&nbsp;
<span class="co0">#Regarde si l'execution est bien en root (i.e. sudo)</span>
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$USER</span> <span class="sy0">!</span>= <span class="st0">&quot;root&quot;</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
    <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$RED</span><span class="st0">&quot;Vous devez être root pour lancer ce progamme!&quot;</span><span class="re1">$NC</span>
    <span class="kw3">exit</span> <span class="nu0">1</span>
<span class="kw1">fi</span>
&nbsp;
<span class="co0">#Verifie si tous les modules sont bien installes</span>
<span class="re2">ifconfig</span>=$<span class="br0">&#40;</span><span class="kw2">which</span> <span class="kw2">ifconfig</span><span class="br0">&#41;</span> 
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="sy0">!</span>= <span class="nu0">0</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
    <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$RED</span><span class="st0">&quot;Erreur Fatale: Un problème est survenue: Impossible de trouver la commande ifconfig!&quot;</span><span class="re1">$NC</span>
    <span class="kw3">exit</span> <span class="nu0">1</span>
<span class="kw1">fi</span>
&nbsp;
<span class="re2">hostapd</span>=$<span class="br0">&#40;</span><span class="kw2">which</span> hostapd<span class="br0">&#41;</span>
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="sy0">!</span>= <span class="nu0">0</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
    <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$RED</span><span class="st0">&quot;Erreur Fatale: Vous devez installer hostapd!&quot;</span><span class="re1">$NC</span>
    <span class="kw3">exit</span> <span class="nu0">1</span>
<span class="kw1">fi</span>
&nbsp;
<span class="re2">dnsmasq</span>=$<span class="br0">&#40;</span><span class="kw2">which</span> dnsmasq<span class="br0">&#41;</span>
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="sy0">!</span>= <span class="nu0">0</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
    <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$RED</span><span class="st0">&quot;Erreur Fatale: Vous devez installer dnsmasq!&quot;</span><span class="re1">$NC</span>
    <span class="kw3">exit</span> <span class="nu0">1</span>
<span class="kw1">fi</span>
&nbsp;
<span class="re2">dhcpd3</span>=$<span class="br0">&#40;</span><span class="kw2">which</span> dhcpd<span class="br0">&#41;</span>
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="sy0">!</span>= <span class="nu0">0</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
    <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$RED</span><span class="st0">&quot;Erreur Fatale: Vous devez installer dhcpd!&quot;</span><span class="re1">$NC</span>
    <span class="kw3">exit</span> <span class="nu0">1</span>
<span class="kw1">fi</span>
&nbsp;
<span class="re2">macchanger</span>=$<span class="br0">&#40;</span><span class="kw2">which</span> macchanger<span class="br0">&#41;</span>
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re4">$?</span> <span class="sy0">!</span>= <span class="nu0">0</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
    <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$RED</span><span class="st0">&quot;Avertissement: macchanger non trouvé. L'adresse mac ne sera pas modifiée!&quot;</span><span class="re1">$NC</span>
    <span class="re2">MACCHANGER</span>=<span class="st0">&quot;1&quot;</span>
<span class="kw1">fi</span>
&nbsp;
<span class="co0">#Change les @ MAC si macchanger trouve</span>
<span class="kw1">if</span> <span class="br0">&#91;</span> <span class="re1">$MACCHANGER</span> == <span class="st0">&quot;0&quot;</span> <span class="br0">&#93;</span>
<span class="kw1">then</span>
    <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Macchanger random...&quot;</span><span class="re1">$NC</span>
    <span class="kw2">sudo</span> <span class="re1">$ifconfig</span> <span class="re1">$INT_WIFI</span> down
    <span class="kw2">sudo</span> <span class="re1">$macchanger</span> <span class="re5">--random</span> <span class="re1">$INT_WIFI</span> <span class="re1">$NC</span>
<span class="kw1">fi</span>
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Démarrage et configuration de l'interface wifi <span class="es2">$INT_WIF</span>...&quot;</span><span class="re1">$NC</span>
<span class="kw2">sudo</span> <span class="kw2">ifconfig</span> <span class="re1">$INT_WIFI</span> down
<span class="kw2">sleep</span> <span class="nu0">0.5</span>
<span class="kw2">sudo</span> <span class="kw2">ifconfig</span> <span class="re1">$INT_WIFI</span> <span class="re1">$IP</span> netmask <span class="re1">$MASK</span> up
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Démarrage daemon hostapd...&quot;</span><span class="re1">$NC</span>
<span class="co0"># start hostapd server (see /etc/hostapd/hostapd.conf)</span>
<span class="kw2">sudo</span> hostapd <span class="sy0">/</span>etc<span class="sy0">/</span>hostapd<span class="sy0">/</span>hostapd.conf <span class="sy0">&amp;</span>
<span class="kw2">sleep</span> <span class="nu0">1</span>
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Démarrage daemon dnsmasq... &quot;</span><span class="re1">$NC</span>
<span class="co0"># start dnsmasq server (see /etc/dnsmasq.conf) -7 /etc/dnsmasq.d</span>
<span class="kw2">sudo</span> dnsmasq <span class="re5">-x</span> <span class="sy0">/</span>var<span class="sy0">/</span>run<span class="sy0">/</span>dnsmasq.pid <span class="re5">-C</span> <span class="sy0">/</span>etc<span class="sy0">/</span>dnsmasq.conf
<span class="kw2">sleep</span> <span class="nu0">1</span>
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Démarrage daemon dhcpd... &quot;</span><span class="re1">$NC</span>
<span class="co0"># start or resart dhcpd server (see /etc/dhcpd/dhcpd.conf)</span>
<span class="kw2">sudo</span> <span class="kw2">touch</span> <span class="sy0">/</span>var<span class="sy0">/</span>lib<span class="sy0">/</span>dhcp<span class="sy0">/</span>dhcpd.leases
<span class="co0">#sudo mkdir -p /var/run/dhcp-server</span>
<span class="co0">#sudo chown dhcpd:dhcpd /var/run/dhcp-server</span>
<span class="kw2">sudo</span> dhcpd <span class="re1">$DBG</span> <span class="re5">-f</span> <span class="re5">-pf</span> <span class="sy0">/</span>var<span class="sy0">/</span>run<span class="sy0">/</span>dhcp-server<span class="sy0">/</span>dhcpd.pid <span class="re5">-cf</span> <span class="sy0">/</span>etc<span class="sy0">/</span>dhcp<span class="sy0">/</span>dhcpd.conf <span class="re1">$INT_WIFI</span> <span class="sy0">&amp;</span>
<span class="co0">#/etc/init.d/dhcp-server restart</span>
<span class="kw2">sleep</span> <span class="nu0">2</span>
&nbsp;
<span class="co0"># Turn on IP forwarding (faire suivre les paquets d'une interface à l'autre)</span>
<span class="kw3">echo</span> <span class="nu0">1</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>proc<span class="sy0">/</span>sys<span class="sy0">/</span>net<span class="sy0">/</span>ipv4<span class="sy0">/</span>ip_forward
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Activation iptables NAT MASQUERADE interface <span class="es2">$NC</span><span class="es2">$red</span><span class="es2">$INT_NET</span><span class="es2">$NC</span>&quot;</span>
<span class="co0"># load masquerade module</span>
<span class="kw2">sudo</span> modprobe ipt_MASQUERADE
<span class="kw2">sudo</span> iptables <span class="re5">-A</span> POSTROUTING <span class="re5">-t</span> nat <span class="re5">-o</span> <span class="re1">$INT_NET</span> <span class="re5">-j</span> MASQUERADE
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Activation iptables FORWARD &amp; INPUT entre interface <span class="es2">$NC</span><span class="es2">$red</span><span class="es2">$INT_WIFI</span><span class="es2">$NC</span><span class="es2">$blue</span> &amp; sous-réseau <span class="es2">$NC</span><span class="es2">$red</span><span class="es2">$SUBNET</span><span class="es2">$NC</span>&quot;</span>
<span class="kw2">sudo</span> iptables <span class="re5">-A</span> FORWARD <span class="re5">--match</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">--jump</span> ACCEPT
<span class="kw2">sudo</span> iptables <span class="re5">-A</span> FORWARD <span class="re5">-i</span> <span class="re1">$INT_WIFI</span> <span class="re5">--destination</span> <span class="re1">$SUBNET</span> <span class="re5">--match</span> state <span class="re5">--state</span> NEW <span class="re5">--jump</span> ACCEPT
<span class="kw2">sudo</span> iptables <span class="re5">-A</span> INPUT <span class="re5">-s</span> <span class="re1">$SUBNET</span> <span class="re5">--jump</span> ACCEPT
&nbsp;
<span class="co0"># Wait user interaction !!!</span>
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$redhl</span><span class="st0">&quot;[Terminé!!! Ne pas fermer la console! ]&quot;</span><span class="re1">$NC</span>
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$redhl</span><span class="st0">&quot;[ENTER = STOP hostapd dhcpd dnsmasq   ]&quot;</span><span class="re1">$NC</span>
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$redhl</span><span class="st0">&quot;[        STOP interface wifi <span class="es2">$INT_WIFI</span>    ]&quot;</span><span class="re1">$NC</span>
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$redhl</span><span class="st0">&quot;[        EFFACE les règles iptables   ]&quot;</span><span class="re1">$NC</span>
<span class="kw2">read</span> none
&nbsp;
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$cyan</span><span class="st0">&quot;Stop hostapd, dhcpd, dnsmasq &amp; interface wifi <span class="es2">$INT_WIFI</span>...&quot;</span><span class="re1">$NC</span>
<span class="co0"># kill hostapd, dnsmasq &amp; dhcpd</span>
<span class="kw2">sudo</span> <span class="kw2">killall</span> hostapd dnsmasq dhcpd
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$cyan</span><span class="st0">&quot;Désactivation iptables NAT MASQUERADE...<span class="es2">$NC</span><span class="es2">$red</span><span class="es2">$INT_NET</span><span class="es2">$NC</span>&quot;</span><span class="re1">$NC</span>
<span class="kw2">sudo</span> iptables <span class="re5">-D</span> POSTROUTING <span class="re5">-t</span> nat <span class="re5">-o</span> <span class="re1">$INT_NET</span> <span class="re5">-j</span> MASQUERADE <span class="nu0">2</span><span class="sy0">&gt;/</span>dev<span class="sy0">/</span>null <span class="sy0">||</span> <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$cyan</span><span class="st0">&quot;POSTROUTING <span class="es2">$INT_NET</span> MASQUERADE clean OK!&quot;</span><span class="re1">$NC</span>
<span class="kw2">sudo</span> iptables <span class="re5">-D</span> FORWARD <span class="re5">-i</span> <span class="re1">$INT_WIFI</span> <span class="re5">--destination</span> <span class="re1">$SUBNET</span> <span class="re5">--match</span> state <span class="re5">--state</span> NEW <span class="re5">--jump</span> ACCEPT <span class="nu0">2</span><span class="sy0">&gt;/</span>dev<span class="sy0">/</span>null <span class="sy0">||</span> <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$cyan</span><span class="st0">&quot;FORWARD <span class="es2">$INT_NET</span>/<span class="es2">$SUBNET</span> clean OK!&quot;</span><span class="re1">$NC</span>
<span class="kw2">sudo</span> iptables <span class="re5">-D</span> FORWARD <span class="re5">--match</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">--jump</span> ACCEPT <span class="nu0">2</span><span class="sy0">&gt;/</span>dev<span class="sy0">/</span>null <span class="sy0">||</span> <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$cyan</span><span class="st0">&quot;FORWARD ESTABLISHED clean OK!&quot;</span><span class="re1">$NC</span>
<span class="kw2">sudo</span> iptables <span class="re5">-D</span> INPUT <span class="re5">-s</span> <span class="re1">$SUBNET</span> <span class="re5">--jump</span> ACCEPT <span class="nu0">2</span><span class="sy0">&gt;/</span>dev<span class="sy0">/</span>null <span class="sy0">||</span> <span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$cyan</span><span class="st0">&quot;INPUT <span class="es2">$SUBNET</span> clean OK!&quot;</span><span class="re1">$NC</span>
&nbsp;
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$cyan</span><span class="st0">&quot;Désactivation iptables FORWARD &amp; INPUT...<span class="es2">$NC</span> <span class="es2">$red</span><span class="es2">$INT_WIFI</span><span class="es2">$NC</span><span class="es2">$blue</span> &amp; <span class="es2">$NC</span><span class="es2">$red</span><span class="es2">$SUBNET</span><span class="es2">$NC</span>&quot;</span>
<span class="co0"># interface weak up!</span>
<span class="kw2">sudo</span> <span class="kw2">ifconfig</span> <span class="re1">$INT_WIFI</span> down
<span class="kw2">sudo</span> <span class="kw2">ifconfig</span> <span class="re1">$INT_WIFI</span> up
&nbsp;
<span class="co0"># Turn off IP forwarding</span>
<span class="kw3">echo</span> <span class="nu0">0</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>proc<span class="sy0">/</span>sys<span class="sy0">/</span>net<span class="sy0">/</span>ipv4<span class="sy0">/</span>ip_forward
<span class="kw3">echo</span> <span class="re5">-e</span> <span class="re1">$blue</span><span class="st0">&quot;Done!&quot;</span><span class="re1">$NC</span></pre>

<p>
Lancement :
</p>
<pre class="code">./wifi_ap.sh</pre>

<p>
Si pendant l’exécution du script précédent vous obtenez l&#039;erreur &quot;SIOCSIFFLAGS: Opération impossible du fait de RF-kill
&quot;, exécuter ou rajouter la commande suivante en début de script :
</p>
<pre class="code">rfkill unblock wifi</pre>

</div>

<h5 id="monitoring_ap">Monitoring AP</h5>
<div class="level5">

<p>
L&#039;outil &#039;iw&#039; couplé à &#039;iwconfig&#039; permet d&#039;avoir une vue d&#039;ensemble sur notre installation, les clients connectés à l&#039;AP wlan0, l&#039;AP Wi-Fi lui-même wlan0, mais aussi la passerelle Wi-Fi wlan6 vers Internet : 
</p>
<pre class="code">watch -d -n 3 &quot;iw dev wlan0 station dump; iwconfig wlan0; iwconfig mon.wlan0; iw dev wlan6 station dump; iwconfig wlan6;cat /proc/net/wireless&quot;</pre>

<p>
<a href="/_detail/administration/iw_ap_clients.png?id=hostapd" class="media" title="administration:iw_ap_clients.png"><img src="/_media/administration/iw_ap_clients.png" class="media img-responsive" alt="" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Exemple de script] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="exemple_de_script" /><input type="hidden" name="codeblockOffset" value="32" /><input type="hidden" name="range" value="17191-23000" /><button type="submit" title="Exemple de script" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit15 page-header" id="liens">Liens</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://wireless.kernel.org/en/users/Documentation/hostapd" class="urlextern" title="http://wireless.kernel.org/en/users/Documentation/hostapd" rel="nofollow">http://wireless.kernel.org/en/users/Documentation/hostapd</a> site officiel de hostapd (anglais)</div>
</li>
<li class="level1"><div class="li"> <a href="http://wireless.kernel.org/en/users/Drivers" class="urlextern" title="http://wireless.kernel.org/en/users/Drivers" rel="nofollow">http://wireless.kernel.org/en/users/Drivers</a> Drivers et Documentations Linux (anglais)</div>
</li>
<li class="level1"><div class="li"> <a href="http://doc.ubuntu-fr.org/partage_de_connexion_internet" class="urlextern" title="http://doc.ubuntu-fr.org/partage_de_connexion_internet" rel="nofollow">http://doc.ubuntu-fr.org/partage_de_connexion_internet</a> Partage de connexion Internet </div>
</li>
<li class="level1"><div class="li"> <a href="http://standards.ieee.org/getieee802/download/802.11n-2009.pdf" class="urlextern" title="http://standards.ieee.org/getieee802/download/802.11n-2009.pdf" rel="nofollow">http://standards.ieee.org/getieee802/download/802.11n-2009.pdf</a></div>
</li>
</ul>

<p>
—-
<em>Contributeurs principaux : Nexus6</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/hostapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1522507433" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens" /><input type="hidden" name="codeblockOffset" value="36" /><input type="hidden" name="range" value="23001-" /><button type="submit" title="Liens" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="hostapd.txt">hostapd.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 31/03/2018, 16:43">Le 31/03/2018, 16:43</span></li><li class="text-muted">par 46.193.66.47</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=hostapd&amp;1635553410" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

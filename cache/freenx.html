<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>freenx [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="precise,serveur,bureau a distance,brouillon"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/freenx?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/freenx?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/freenx"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/freenx"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/freenx"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"freenx","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="freenx">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/freenx?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/freenx?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/freenx?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/freenx?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/freenx?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/freenx?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/freenx?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">freenx</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/freenx?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/freenx?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/freenx?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#introduction","title":"Introduction","level":1},{"link":"#installation_et_configuration_de_ssh","title":"Installation et configuration de SSH","level":1},{"link":"#installation_et_configuration_de_freenx","title":"Installation et configuration de Freenx","level":1},{"link":"#installation_de_freenx","title":"Installation de Freenx","level":1},{"link":"#premiere_methode","title":"Premi\u00e8re m\u00e9thode","level":2},{"link":"#seconde_methode","title":"Seconde m\u00e9thode","level":2},{"link":"#ajout_d_utilisateurs","title":"Ajout d'utilisateurs","level":1},{"link":"#probleme_de_connexion_message_de_coupure_reseau","title":"Probl\u00e8me de connexion (message de coupure r\u00e9seau)","level":1},{"link":"#erreur_a_la_connexion_du_typeerrorcall_to_bind_failed_for_font_tcp_port_xxxxx","title":"Erreur \u00e0 la connexion du type : \"Error: Call to bind failed for font TCP port xxxxx\"","level":1},{"link":"#installation_et_configuration_du_client_nomachine","title":"Installation et configuration du client NoMachine","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#introduction">Introduction</a></li>
<li class="level1"><a href="#installation_et_configuration_de_ssh">Installation et configuration de SSH</a></li>
<li class="level1"><a href="#installation_et_configuration_de_freenx">Installation et configuration de Freenx</a></li>
<li class="level1"><a href="#installation_de_freenx">Installation de Freenx</a>
<ul class="nav toc">
<li class="level2"><a href="#premiere_methode">Première méthode</a></li>
<li class="level2"><a href="#seconde_methode">Seconde méthode</a></li>
</ul>
</li>
<li class="level1"><a href="#ajout_d_utilisateurs">Ajout d&#039;utilisateurs</a></li>
<li class="level1"><a href="#probleme_de_connexion_message_de_coupure_reseau">Problème de connexion (message de coupure réseau)</a></li>
<li class="level1"><a href="#erreur_a_la_connexion_du_typeerrorcall_to_bind_failed_for_font_tcp_port_xxxxx">Erreur à la connexion du type : &quot;Error: Call to bind failed for font TCP port xxxxx&quot;</a></li>
<li class="level1"><a href="#installation_et_configuration_du_client_nomachine">Installation et configuration du client NoMachine</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Selon les <a href="/tags">tags</a> présents sur cette page, celle-ci n'a pas été vérifiée pour une des <a href="/versions">versions LTS supportées d'Ubuntu</a>.<br />
Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/precise" class="wikilink1" title="precise" rel="tag">Precise</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/bureau_a_distance" class="wikilink1" title="bureau_a_distance" rel="tag">bureau à distance</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="freenx_mise_en_œuvre">Freenx, mise en œuvre</h1>
<div class="level1">
<div class="noteimportant">FreeNX n&#039;est pas compatible avec les dernières versions du client de <a href="http://www.nomachine.com/" class="urlextern" title="http://www.nomachine.com/" rel="nofollow">NoMachine</a>. Le <a href="/serveur_nomachine" class="wikilink1" title="serveur_nomachine">serveur NoMachine</a> est donc indispensable si vous souhaitez installer un client sous Windows Vista. (corrigé avec la dernière version) 
</div><div class="noteimportant">Le développement de freenx semble fortement ralenti depuis 2008<sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup>. Le programme <a href="/x2go" class="wikilink1" title="x2go">x2go</a> prends la suite avec sa simplicité d’installation et ses clients libres pour tous <abbr title="Operating System">OS</abbr>.
</div><div class="noteclassic">Le serveur FreeNX des dépôts launchpad ppa fonctionne sans problème avec le dernier client NX NoMachines (3.3.0-6)
</div>
<p>
NoMachine met maintenant gratuitement à disposition sur son site web un serveur dont l&#039;installation est très facile, mais il n&#039;est pas open source. Vivement une mise à disposition via Synaptic. Cependant le nombre d&#039;utilisateurs pouvant se connecter via le serveur de NoMachine est limité à 2 ! Dans les autres cas il faut utiliser FreeNX.
</p>

<p>
Que vous vouliez installer le client ou le serveur, il faudra commencer par installer le package node. Il y a une dépendance avec libstdc++6 que vous devez donc installer préalablement avec synaptic. Ensuite vous installez nx free server ou le client. Vous trouverez avec chaque package les instructions pour l&#039;installer. C&#039;est beaucoup plus simple que pour freenx. 
</p>

<p>
Les directives de cette page pour configurer ssh correctement restent d&#039;actualité.
</p>

<p>
Une page spécifique à l&#039;installation et la configuration du client et du serveur NoMachine devrait être réalisée. (elle existe maintenant <a href="/serveur_nomachine" class="wikilink1" title="serveur_nomachine">ici</a>)
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Freenx, mise en œuvre] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="freenx_mise_en_œuvre" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="62-1796" /><button type="submit" title="Freenx, mise en œuvre" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="introduction">Introduction</h2>
<div class="level2">

<p>
Freenx est un serveur que vous installez sur votre ordinateur Ubuntu et qui vous permettra de vous y connecter à partir d&#039;un autre ordinateur. Freenx surclasse les autres solutions du même type grâce à l&#039;utilisation d&#039;un protocole compressé propriétaire. La différence est particulièrement notable si la connexion passe par une liaison WiFi, <abbr title="Asymetric Digital Subscriber Line">ADSL</abbr> ou même modem. 
</p>

<p>
Le système est, à la base, développé et commercialisé par <a href="http://www.nomachine.com/" class="urlextern" title="http://www.nomachine.com/" rel="nofollow">NoMachine</a>. Mais ils ont mis les sources de leur serveur à disposition du public sous license <abbr title="GNU General Public License">GPL</abbr>. Freenx est une réalisation de la communauté du logiciel libre qui utilise ces sources. Ce serveur est parfaitement compatible avec les clients fournis gratuitement par NoMachine pour différents systèmes d&#039;exploitation.  
</p>

<p>
Pour l&#039;illustration de la mise en œuvre de Freenx, nous utiliserons le client Windows.
</p>

<p>
Pour l&#039;installation nous utilisons le terminal, même si certaines opérations pourraient se faire avec Synaptic. Pour ouvrir un terminal, lancez le programme <em>Applications → Accessoires → Terminal</em>.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Introduction] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="introduction" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1797-2909" /><button type="submit" title="Introduction" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="installation_et_configuration_de_ssh">Installation et configuration de SSH</h2>
<div class="level2">

<p>
La connexion à Freenx se fait via SSH.
Pour installer SSH, <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://ssh" class="interwiki iw_apt" title="apt://ssh">ssh</a></strong>.
Lorsque c&#039;est terminé, ssh est opérationnel. 
</p>

<p>
Pour pouvoir se connecter à Freenx, il faut changer certains paramètres <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">dans le fichier</a> de configuration <strong>/etc/ssh/sshd_config</strong>. 
</p>

<p>
Dans ce fichier vous devriez trouver une section « Authentification ». Modifiez cette section pour avoir ce qui suit :
</p>
<pre class="file"># Authentication:
LoginGraceTime 120
PermitRootLogin no
StrictModes yes
 
RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile      %h/.ssh/authorized_keys</pre>

<p>
Normalement, vous devriez n&#039;avoir qu&#039;a dé-commenter la dernière ligne. Le « <code>PermitRootLogin no</code> » n&#039;est pas indispensable. C&#039;est juste une mesure de sécurité. Songez aussi à changer le numéro de port; le port par défaut est en effet la cible de constantes tentatives de pénétration automatisées. Si vous ne comprenez pas de quoi il s&#039;agit, ne vous en souciez pas. Ce changement n&#039;est pas critique pour utiliser Freenx ou pour la sécurité, étant donné la sécurité inhérente à ssh. 
</p>

<p>
Il faut maintenant faire en sorte que SSH prenne en compte cette nouvelle configuration. Pour cela, tapez la commande suivante : 
</p>
<pre class="code">sudo service ssh restart</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Installation et configuration de SSH] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_et_configuration_de_ssh" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2910-4304" /><button type="submit" title="Installation et configuration de SSH" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="installation_et_configuration_de_freenx">Installation et configuration de Freenx</h2>
<div class="level2">
<div class="notetip">Utilisateurs de Lucid (10.04), des instructions sont disponibles <a href="https://help.ubuntu.com/community/FreeNX" class="urlextern" title="https://help.ubuntu.com/community/FreeNX" rel="nofollow">sur le wiki anglophone</a> et permettent une installation beaucoup plus rapide, notamment grâce au script <em>nxsetup</em> maintenant fourni avec le paquet FreeNX et qui automatise toute l&#039;installation
</div><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_modifier_sources_maj" class="wikilink1" title="tutoriel:comment_modifier_sources_maj">Modifiez vos sources de mises à jour</a> pour y ajouter le dépôt suivant :</div>
</li>
</ul>
<pre class="file">deb http://ppa.launchpad.net/freenx-team/ppa/ubuntu precise main</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Il est ensuite nécessaire d&#039;ajouter la clé <abbr title="Pretty Good Privacy">PGP</abbr> à votre distribution, on ouvre donc un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> : <pre class="code">gpg --keyserver subkeys.pgp.net --recv-keys D018A4CE
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 2A8E3034D018A4CE</pre>
</div>
</li>
</ul>
<div class="notetip">Si la commande ci-dessus ne fonctionne pas, vous pouvez taper la commande suivante:<pre class="code">    gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-key D018A4CE &amp;&amp; gpg -a --export D018A4CE | sudo apt-key add -</pre>

</div><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> puis <a href="/tutoriel/comment_modifier_sources_maj#recharger_la_liste_des_paquets" class="wikilink1" title="tutoriel:comment_modifier_sources_maj">rechargez la liste des paquets</a>.</div>
</li>
<li class="level1"><div class="li"> <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://freenx" class="interwiki iw_apt" title="apt://freenx">freenx</a></strong>.</div>
</li>
</ul>

<p>
Une fois installé, reste à paramétrer le serveur, et sécuriser le tout. <strong>Pour cela deux choses, d&#039;une part modifier le port ssh par défaut, puis d&#039;autre par créer votre propre certificat.</strong>
</p>

<p>
Ouvrez le fichier de configuration de freenx:
</p>
<pre class="code">    sudo nano /etc/nxserver/node.conf</pre>

<p>
trouvez la ligne suivante:
</p>
<pre class="code">    # The port number where local &#039;sshd&#039; is listening.
    #SSHD_PORT=22</pre>

<p>
décommentez et modifier le port ssh par celui souhaité
</p>

<p>
Attention le port doit être celui précisé au préalable dans le fichier de configuration de votre serveur ssh, qui se trouve dans <strong>/etc/ssh/sshd_config</strong>
</p>

<p>
Ce qui donnera par exemple:
</p>
<pre class="code">    # The port number where local &#039;sshd&#039; is listening.
    SSHD_PORT=8008</pre>

<p>
Une fois le port ssh par défaut modifié, il est préférable de créer votre propre certificat, que vous préciserez lorsque vous vous connecterez à partir d&#039;un client quelconque.
</p>

<p>
Toujours dans un terminal:
</p>
<pre class="code">    sudo dpkg-reconfigure freenx-server</pre>

<p>
Valider la première page, puis sur la seconde sélectionnez &#039;<em>Create new custom keys</em>&#039;.
</p>

<p>
Une clé nommée <strong>client.id_dsa.key</strong> sera créée dans le répertoire <em>/var/lib/nxserver/home/custom_keys</em>/, que vous vous empresserez de copier dans votre <em>Home</em>.
</p>
<pre class="code">    sudo cp /var/lib/nxserver/home/custom_keys/client.id_dsa.key ~/</pre>

<p>
Ca sera cette clé qu&#039;il faudra entrer à partir du poste client, pensez donc à la copier sur un espace sécurisé, sur le net pour y avoir accès depuis un autre poste!
</p>

<p>
Votre serveur est désormais paramétré, rendez vous sur le site de No Machine afin de télécharger le client (<a href="http://www.nomachine.com/download.php" class="urlextern" title="http://www.nomachine.com/download.php" rel="nofollow">http://www.nomachine.com/download.php</a>) afin de prendre la main à distance. 
</p>

<p>
lors de la copie sous votre Home, la clé appartient au compte Root. Pour pouvoir la copier sur votre clé usb vous devez changer le propriétaire :
ls -alp /home/votrecompte/client.id_dsa.key pour vérifier les droits
sudo chown votrecompte:votregroupe /home/votrecompte/client.id_dsa.key pour changer le propriétaire
ls -alp /home/votrecompte/client.id_dsa.key pour vérifier les nouveaux droits
Maintenant vous pouvez la copier sur votre clé.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Installation et configuration de Freenx] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_et_configuration_de_freenx" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="4305-7687" /><button type="submit" title="Installation et configuration de Freenx" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="installation_de_freenx">Installation de Freenx</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Installation de Freenx] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_de_freenx" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="7688-7723" /><button type="submit" title="Installation de Freenx" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="premiere_methode">Première méthode</h3>
<div class="level3">

<p>
Là, les choses redeviennent plus familières et plus simple : <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong>freenx</strong>.
</p>

<p>
À un moment donné, une question importante et décisive vous sera posée par le programme d&#039;installation. Il faut spécifier quel type de configuration vous voulez installer. Sélectionnez « Custom Keys ». Ceci indique que la procédure d&#039;installation doit générer des bi-clés d&#039;authentification spécifiques à votre configuration. 
</p>

<p>
Lorsque l&#039;installation est terminée, votre ordinateur est presque opérationnel. Il y a juste quelques détails à régler. 
</p>

<p>
Pour cela il est plus aisé de se mettre en mode administrateur. Puis allez dans le répertoire où sont placés les bi-clés d&#039;authentification.
</p>
<pre class="code">sudo -i
cd /var/lib/nxserver/home/.ssh
ls</pre>

<p>
Vous verrez que l&#039;installation de Freenx a créé un fichier « authorized_keys2 ». Le « 2 » est de trop. Pour le retirer tapez la commande suivante :
</p>
<pre class="code">mv authorized_keys2 authorized_keys</pre>

<p>
À côté de ce fichier, vous trouverez deux fichiers nommés « id_dsa » et « id_dsa.pub ». Le fichier qui nous intéresse ici est « id_dsa » car il contient la clé privée. C&#039;est un fichier texte dont vous pouvez afficher le contenu avec la commande suivante :
</p>
<pre class="code"># cat client.id_dsa.key
-----BEGIN DSA PRIVATE KEY-----
MIIBuwIBAAKBgQDXfUJs6cUZ67OgM//u3XV7nZD3k/nsCv/V/tXiGqvNk2FHXT3/
...
AFXytgRve3vJgWPIXiBV
-----END DSA PRIVATE KEY-----</pre>

<p>
Il vous faudra copier cette clé (le texte) sur l&#039;ordinateur distant. Là je n&#039;ai pas de ligne de commande à vous proposer. Vous devrez soit utiliser une disquette, une clé <abbr title="Universal Serial Bus">USB</abbr>, ou un autre moyen de transfert. Si vous avez mis en œuvre Samba, l&#039;opération sera triviale à réaliser. 
</p>

<p>
Arrivés ici, nous en avons fini avec la configuration de votre ordinateur Ubuntu. Nous pouvons passer au client qui dans notre cas d&#039;école est un ordinateur Windows XP. 
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Première méthode] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="premiere_methode" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="7724-9675" /><button type="submit" title="Première méthode" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="seconde_methode">Seconde méthode</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong>expect openssh-server tcl8.4 nxlibs nxagent nxproxy freenx nxclient</strong>.
</p>

<p>
Pour les manipulations décrites ci-dessus, les fichiers se trouvent respectivement à <strong>/home/votre_login/.ssh</strong> pour <em>authorized_keys2</em> et <strong>/etc/nxserver/<em class="u">users</em>.id_dsa</strong> pour la clé privée. Il n&#039;y a pas de « .key » final.
</p>

<p>
Ainsi, chaque utilisateur pourra récupérer sa clé privée dans son répertoire.
</p>

<p>
L&#039;inconvénient est que ça nécessite un moyen de transmission sécuritaire, ou réputé tel : une clé <abbr title="Universal Serial Bus">USB</abbr>. Ce n&#039;est pas pratique dans le cas où vous souhaiteriez donner accès à un utilisateur qui n&#039;a jamais eu accès physiquement à la machine.
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Seconde méthode] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="seconde_methode" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="9676-10414" /><button type="submit" title="Seconde méthode" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit8 page-header" id="ajout_d_utilisateurs">Ajout d&#039;utilisateurs</h2>
<div class="level2">

<p>
Avant de pouvoir se connecter à la machine à distance, les utilisateurs doivent être ajoutés; comme le système NX est basé sur SSH, on ne peut ajouter que les utilisateurs qui possèdent leur dossier dans <strong>/home</strong>.
</p>

<p>
Tapez :
</p>
<pre class="code">sudo nxserver --adduser votre_login</pre>

<p>
ainsi qu&#039;un mot de passe:
</p>
<pre class="code">sudo nxserver --passwd &lt;username&gt;</pre>

<p>
Redémarrez ensuite le serveur NX:
</p>
<pre class="code">sudo nxserver --restart</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Ajout d&#039;utilisateurs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ajout_d_utilisateurs" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="10415-10846" /><button type="submit" title="Ajout d&#039;utilisateurs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="probleme_de_connexion_message_de_coupure_reseau">Problème de connexion (message de coupure réseau)</h2>
<div class="level2">

<p>
Le début de la connexion semble fonctionner mais au démarrage du serveur X, la connexion se ferme brutalement. Pour faire fonctionner la connexion, il faut <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">ajouter dans le fichier de configuration</a> de FreeNX (vers la fin) <strong>/etc/nxserver/node.conf</strong> la ligne suivante à mettre sur une seule ligne et sans espace après les virgules :
</p>
<pre class="file">AGENT_EXTRA_OPTIONS_X=&quot;-fp
/usr/share/fonts/X11/misc/,
/usr/share/fonts/X11/75dpi/:unscaled,
/usr/share/fonts/X11/100dpi/:unscaled,
/usr/share/fonts/X11/Type1/,
/usr/share/fonts/X11/100dpi/,
/usr/share/fonts/X11/75dpi/&quot;
/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType</pre>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Problème de connexion (message de coupure réseau)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="probleme_de_connexion_message_de_coupure_reseau" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="10847-11573" /><button type="submit" title="Problème de connexion (message de coupure réseau)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit10 page-header" id="erreur_a_la_connexion_du_typeerrorcall_to_bind_failed_for_font_tcp_port_xxxxx">Erreur à la connexion du type : &quot;Error: Call to bind failed for font TCP port xxxxx&quot;</h2>
<div class="level2">

<p>
Si on utilise plusieurs serveurs différents avec le même client, il peut y avoir des conflits d&#039;adresses. Voici l&#039;erreur rapportée côté client.
</p>
<pre class="file">Info: Connection with remote proxy completed.
Error: Call to bind failed for font TCP port 11000. Error is 48 &#039;Address already in use&#039;.
Session: Session terminated at &#039;Mon May 30 21:58:21 2011&#039;.</pre>

<p>
Si on a accès à l&#039;un des serveurs, la solution consiste à changer le numéro de base des sessions
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> soit dans  <strong>/etc/nxserver/node.conf</strong></div>
</li>
<li class="level3"><div class="li"> ou bien en ajoutant un fichier nommé <strong>11_display_base</strong> (les deux chiffres &gt; 10 en tête du nom du fichier sont importants) dans le répertoire <strong>/usr/share/freenx-server/node.conf.d</strong> avec comme contenu : </div>
</li>
</ul>
<pre class="file"># The base display number from which sessions are started.
DISPLAY_BASE=2000</pre>

<p>
Ainsi les ports utilisés seront 12000 et suivants au lieu de 11000, ce qui évitera le conflit.
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Erreur à la connexion du type : &quot;Error: Call to bind failed for font TCP port xxxxx&quot;] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="erreur_a_la_connexion_du_typeerrorcall_to_bind_failed_for_font_tcp_port_xxxxx" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="11574-12588" /><button type="submit" title="Erreur à la connexion du type : &quot;Error: Call to bind failed for font TCP port xxxxx&quot;" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit11 page-header" id="installation_et_configuration_du_client_nomachine">Installation et configuration du client NoMachine</h2>
<div class="level2">

<p>
Rendez vous sur le site web de <a href="http://www.nomachine.com/" class="urlextern" title="http://www.nomachine.com/" rel="nofollow">NoMachine</a> et téléchargez le client qui vous convient. Dans notre cas se sera celui de Windows.
</p>

<p>
L&#039;installation est une procédure classique pour tout utilisateur Windows. A la fin il vous propose de configurer une connexion à l&#039;aide d&#039;un assistant (Wizard). 
</p>
<blockquote><div class="no">
 <img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> : à développer</div></blockquote>

<p>
Dans la fenêtre configurer, il y a un bouton « Key ». Là vous verrez la clé privée du client. Remplacez la par celle qui se trouve sur votre ordinateur Ubuntu. Sauvez. Dans les onglets, vous trouverez une option pour activer le chiffrement SSL. C&#039;est fortement conseillé. Il faut également activer la transmission du son. Ce n&#039;est pas activé par défaut. 
</p>

<p>
Choisissez un nom pour la session. Je vous suggère de créer un raccourci sur le bureau. Pensez à configurer le numéro de port et le nom de votre ordinateur Ubuntu comme il se doit. 
</p>

<p>
Si vous rencontrez des problèmes avec la version 2.0 du client proposé par NoMachine, 
</p>
<div class="notewarning">essayez la version 1.5 disponible <a href="http://documentation.dedibox.fr/doku.php?id=distrib:desktop&amp;s=nomachine" class="urlextern" title="http://documentation.dedibox.fr/doku.php?id=distrib:desktop&amp;s=nomachine" rel="nofollow">ici</a> &gt; Lien mort
</div>
<p>
. 
</p>
<hr />

<p>
<em>Contributeurs : <a href="/utilisateurs/chmeessen" class="wikilink1" title="utilisateurs:chmeessen">ChMeessen</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1483511245" /><input type="hidden" name="summary" value="[Installation et configuration du client NoMachine] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_et_configuration_du_client_nomachine" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="12589-" /><button type="submit" title="Installation et configuration du client NoMachine" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div><hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content"><a href="http://linuxfr.org/users/fravashyo/journaux/x2go-le-digne-successeur-de-freenx/" class="urlextern" title="http://linuxfr.org/users/fravashyo/journaux/x2go-le-digne-successeur-de-freenx/" rel="nofollow">http://linuxfr.org/users/fravashyo/journaux/x2go-le-digne-successeur-de-freenx/</a>|lien d&#039;un article linux-fr</div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="freenx.txt">freenx.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 04/01/2017, 07:27">Le 04/01/2017, 07:27</span></li><li class="text-muted">par L&#039;Africain</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=freenx&amp;1635551031" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>


{{tag>Bionic Focal imprimante}}

====== Interface Web de CUPS ======

Cette page vous explique comment paramétrer une imprimante via l'interface "web" de configuration de CUPS votre imprimante. \\
Vous allez voir, cette interface est hors du commun, mais simple et puissante ! Elle sera particulièrement utile :

  * Si l'interface graphique de votre variante d'Ubuntu ne fonctionne pas correctement ;
  * si vous avez une imprimante sur port parallèle ou série ;
  * si vous êtes simplement très curieux, 

{{  :imprimante:cups_web_xenial.png?550  |copie d'écran de l'interface web de CUPS 2.1}}

=====Installation=====

Si jamais cups n'est pas installé sur votre machine, [[:tutoriel:comment_installer_un_paquet|installez les paquets]]  **[[apt>cups|cups]] et [[apt>cups-client|cups-client]]**.

====Cups en français====
Afin d'avoir la page d'administration en français, il est indispensable de mettre français(fr) en première position  dans votre navigateur web dans les paramètres linguistiques et non en français(fr_FR) (Contenu et langues dans Firefox).\\ 
Cela ne vous concerne probablement pas car votre système est déjà configuré pour être en français. Sinon voir [[tutoriel:comment_traduire_ubuntu_en_francais|comment traduire Ubuntu et ses applications en français]].

===== Configuration =====

Un simple utilisateur n'a, par défaut, pas le droit d'installer et de manipuler les imprimantes locales. Afin de rendre cette opération possible, il faut ajouter votre login au groupe **lpadmin** : 
<code bash>sudo adduser $USER lpadmin</code>

Relancez ensuite cupsys pour prendre en compte ce changement: 
<code bash>sudo service cups restart</code>

===== Accéder à l'interface Web =====

Un simple navigateur Internet est maintenant suffisant pour configurer et gérer votre imprimante. \\ 

Il suffit de se connecter à l'adresse suivante : [[http://localhost:631/admin|Console webadmin de CUPS]]. \\ 
Il s'agit de l'adresse de l'interface web de CUPS, éventuellement protégée par votre mot de passe (login et password habituels, évitez d'utiliser le mot de passe de "root" !). \\

Le navigateur vous demande alors votre login et votre mot de passe système (ceux d'Ubuntu).

Si l'authentification échoue, il peut être efficace de redémarrer CUPS par :
<code bash>sudo service cups restart </code>

Il peut arriver que le popup demandant login et mot de passe ne soit pas affiché par le navigateur (problème vécu avec Chromium). Changez de paramétrage navigateur des popups, ou passez par un autre navigateur.

==== Ajouter une imprimante ====
Pour ajouter une imprimante, nous allons cliquer sur //Ajouter une imprimante //. Entrez votre nom d'utilisateur et votre mot de passe, puis suivez les instructions.

==== Gérer les imprimantes ====
Allez dans l'onglet //Imprimantes// et cliquez sur l'imprimante dont vous souhaitez modifier les paramètres.

===== Configuration via le fichier=====
Le fichier de configuration à créer //en root// se nomme **''printers.conf''** et ce place dans **''/etc/cups/''**

Exemple pour l'imprimante HP Photosmart C4100 installée sur le PC 192.168.1.2

**Le fichier de l'hôte 192.168.1.2**
<file bash /etc/cups/printers.conf>
# Printer configuration file for CUPS v1.4.3
# Written by cupsd
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
<Printer Photosmart-C4100-series-2>
Info HP Photosmart C4100 series
Location Principal
MakeModel HP Photosmart c4100 Series hpijs, 3.10.2rc1.9
DeviceURI hp:/usb/Photosmart_C4100_series?serial=MY****12P6***J7
State Idle
StateTime 1303903433
Type 8425500
Filter application/vnd.cups-raw 0 -
Filter application/vnd.cups-postscript 100 foomatic-rip-hplip
Filter application/vnd.cups-pdf 0 foomatic-rip-hplip
Accepting Yes
Shared Yes
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy retry-job
</Printer></file>
\\ \\ 

Pour qu'un autre poste puisse partager cette imprimante, il suffit d'ajouter l'option //"Shared yes"// dans le fichier ''printers.conf'' de cet utilisateur. \\ 
Par exemple, pour la machine dont l'adresse IP est 192.168.1.5,  :

<file bash /etc/cups/printers.conf>
# Printer configuration file for CUPS v1.4.3
# Written by cupsd
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
<DefaultPrinter Photosmart_C4100_series>
AuthInfoRequired none
Info Photosmart_C4100_series
Location Photosmart_C4100_series
MakeModel HP Photosmart c4100 Series hpijs, 3.10.2
DeviceURI http://192.168.1.2:631/printers/Photosmart-C4100-series-2
State Idle
StateTime 1302521428
Type 8425500
Filter application/vnd.cups-raw 0 -
Filter application/vnd.cups-postscript 100 foomatic-rip
Filter application/vnd.cups-pdf 0 foomatic-rip
Accepting Yes
Shared Yes
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy retry-job
</Printer></file>

Puis redémarrez cups via cette commande :
<code bash>sudo /etc/init.d/cups restart</code>

===== Imprimante bluetooth =====
Consulter la page dédiée [[Imprimantes Bluetooth]].

===== Problèmes et solutions =====
==== l'authentification échoue ====
Redémarrez le serveur :
<code bash>sudo service cups restart </code>
Pour connaître l'état du service :
<code bash>sudo service cups status</code>
 
==== Imprimante en pause ====

En cas de problème d'impression car l'imprimante est dite « en pause », \\
 ⇒ aller dans l'[[http://localhost:631|interface de gestion de CUPS]], \\
 ⇒ cliquer sur « //Administration ⇒ Gérer les imprimantes// » \\
 puis sur l'imprimante problématique, et \\
 ⇒ sélectionner « //démarrer l'imprimante// » dans le menu « //Maintenance// ». \\

=====Voir aussi=====

  * [[:gtklp|Interface graphique à CUPS]],
  * En plus de l'interface web, il existe aussi une petite interface graphique de configuration, [[:system-config-printer]], permet notamment de dupliquer des imprimantes.

----

//Contributeurs : [[utilisateurs:Calaereb|Calaereb]], [[utilisateurs:Id2ndR]], [[utilisateurs:ymulleneers]], [[:utilisateurs:david96|david96]]//. \\
//Autres contributeurs : [[utilisateurs:eagle08]] : rédaction, typos, Accessiweb//.
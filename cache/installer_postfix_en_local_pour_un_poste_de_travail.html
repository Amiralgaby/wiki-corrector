<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>installer_postfix_en_local_pour_un_poste_de_travail [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="messagerie,courriel,postfix,mta,serveur"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/installer_postfix_en_local_pour_un_poste_de_travail?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/installer_postfix_en_local_pour_un_poste_de_travail?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/installer_postfix_en_local_pour_un_poste_de_travail"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/installer_postfix_en_local_pour_un_poste_de_travail"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/installer_postfix_en_local_pour_un_poste_de_travail"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"installer_postfix_en_local_pour_un_poste_de_travail","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="installer_postfix_en_local_pour_un_poste_de_travail">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">installer_postfix_en_local_pour_un_poste_de_travail</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/installer_postfix_en_local_pour_un_poste_de_travail?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#installation_du_serveur_de_messagerie_postfix","title":"Installation du serveur de messagerie Postfix","level":1},{"link":"#definir_le_gestionnaire_de_messagerie","title":"D\u00e9finir le gestionnaire de messagerie","level":1},{"link":"#configurer_le_dns_pour_votre_serveur_de_messagerie","title":"Configurer le DNS pour votre serveur de messagerie","level":1},{"link":"#si_vous_ne_voulez_pas_d_un_serveur_dns_dedie_a_votre_messagerie","title":"Si vous ne voulez pas d'un serveur DNS d\u00e9di\u00e9 \u00e0 votre messagerie","level":2},{"link":"#configurer_le_serveur_de_messagerie_par_le_paquet_d_installation","title":"Configurer le serveur de messagerie par le paquet d'installation","level":1},{"link":"#emplacement_des_boites_aux_lettres_des_utilisateurs_du_systeme","title":"Emplacement des bo\u00eetes aux lettres des utilisateurs du syst\u00e8me","level":1},{"link":"#configurer_le_client_mail_mua_systeme","title":"Configurer le client mail MUA syst\u00e8me","level":1},{"link":"#configurer_une_distribution_smtp_locale_securisee","title":"Configurer une distribution SMTP locale s\u00e9curis\u00e9e","level":1},{"link":"#bloquer_le_port_25_smtp_standard","title":"Bloquer le port 25 SMTP standard","level":2},{"link":"#mettre_en_place_la_connexion_tls","title":"Mettre en place la connexion TLS","level":2},{"link":"#mettre_en_place_l_authentification_sasl","title":"Mettre en place l'authentification SASL","level":2},{"link":"#considerations_de_securites_sur_une_architecture_lan_et_au-dela","title":"Consid\u00e9rations de s\u00e9curit\u00e9s sur une architecture LAN et au-del\u00e0","level":1},{"link":"#filtrage_des_courriels_indesirables","title":"Filtrage des courriels ind\u00e9sirables","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#installation_du_serveur_de_messagerie_postfix">Installation du serveur de messagerie Postfix</a></li>
<li class="level1"><a href="#definir_le_gestionnaire_de_messagerie">Définir le gestionnaire de messagerie</a></li>
<li class="level1"><a href="#configurer_le_dns_pour_votre_serveur_de_messagerie">Configurer le DNS pour votre serveur de messagerie</a>
<ul class="nav toc">
<li class="level2"><a href="#si_vous_ne_voulez_pas_d_un_serveur_dns_dedie_a_votre_messagerie">Si vous ne voulez pas d&#039;un serveur DNS dédié à votre messagerie</a></li>
</ul>
</li>
<li class="level1"><a href="#configurer_le_serveur_de_messagerie_par_le_paquet_d_installation">Configurer le serveur de messagerie par le paquet d&#039;installation</a></li>
<li class="level1"><a href="#emplacement_des_boites_aux_lettres_des_utilisateurs_du_systeme">Emplacement des boîtes aux lettres des utilisateurs du système</a></li>
<li class="level1"><a href="#configurer_le_client_mail_mua_systeme">Configurer le client mail MUA système</a></li>
<li class="level1"><a href="#configurer_une_distribution_smtp_locale_securisee">Configurer une distribution SMTP locale sécurisée</a>
<ul class="nav toc">
<li class="level2"><a href="#bloquer_le_port_25_smtp_standard">Bloquer le port 25 SMTP standard</a></li>
<li class="level2"><a href="#mettre_en_place_la_connexion_tls">Mettre en place la connexion TLS</a></li>
<li class="level2"><a href="#mettre_en_place_l_authentification_sasl">Mettre en place l&#039;authentification SASL</a></li>
</ul>
</li>
<li class="level1"><a href="#considerations_de_securites_sur_une_architecture_lan_et_au-dela">Considérations de sécurités sur une architecture LAN et au-delà</a></li>
<li class="level1"><a href="#filtrage_des_courriels_indesirables">Filtrage des courriels indésirables</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/messagerie?do=showtag&amp;tag=messagerie" class="wikilink1" title="messagerie" rel="tag">messagerie</a>,
	<a href="/courriel" class="wikilink1" title="courriel" rel="tag">courriel</a>,
	<a href="/postfix" class="wikilink1" title="postfix" rel="tag">postfix</a>,
	<a href="/mta?do=showtag&amp;tag=MTA" class="wikilink1" title="mta" rel="tag">MTA</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>
</span></div>

<h1 class="sectionedit1 page-header" id="installer_postfix_en_local_pour_un_poste_de_travail">Installer Postfix en local pour un poste de travail</h1>
<div class="level1">

<p>
Pour une correspondance entre vos utilisateurs d&#039;un poste de travail et avec les applications locales de la machine, il est important d&#039;installer un serveur de courrier MTA. Pour plus d&#039;informations sur la messagerie lire <a href="/comment_fonctionne_le_courriel_sous_linux" class="wikilink1" title="comment_fonctionne_le_courriel_sous_linux">Comment fonctionne le courriel sous Linux ?</a>, et sur les principes du serveur Postfix lire <a href="/comment_configurer_sa_distribution_de_courriels_systemes_mta" class="wikilink1" title="comment_configurer_sa_distribution_de_courriels_systemes_mta">Comment configurer sa distribution de courriels systèmes MTA avec Postfix ?</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Installer Postfix en local pour un poste de travail] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installer_postfix_en_local_pour_un_poste_de_travail" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="50-618" /><button type="submit" title="Installer Postfix en local pour un poste de travail" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="installation_du_serveur_de_messagerie_postfix">Installation du serveur de messagerie Postfix</h2>
<div class="level2">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> du serveur de messagerie <strong><a href="apt://postfix" class="interwiki iw_apt" title="apt://postfix">postfix</a></strong>.
Choisir «pas de configuration» si l&#039;installation demande de paramétrer le serveur de messagerie.
</p>

<p>
<img src="/_media/doc/02_pasdeconfiguration.png?w=600&amp;tok=56255b" class="mediacenter img-responsive" alt="" width="600" />
</p>

<p>
Installer le client <a href="/mutt" class="wikilink1" title="mutt">Mutt</a> de messagerie MUA <strong><a href="apt://mutt" class="interwiki iw_apt" title="apt://mutt">mutt</a></strong> (les clients MUA de mailutils et de bsd-mailx ne supportent que le format mbox pour la gestion locale, vous pouvez aussi utiliser <a href="https://neomutt.org" class="urlextern" title="https://neomutt.org" rel="nofollow">Neomutt</a> avec plus de fonctionnalités en remplacement de Mutt <strong><a href="apt://neomutt" class="interwiki iw_apt" title="apt://neomutt">Neomutt</a></strong>). 
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Installation du serveur de messagerie Postfix] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_du_serveur_de_messagerie_postfix" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="619-1268" /><button type="submit" title="Installation du serveur de messagerie Postfix" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="definir_le_gestionnaire_de_messagerie">Définir le gestionnaire de messagerie</h2>
<div class="level2">

<p>
<strong>Vous devez définir qui va avoir la supervision de la messagerie</strong>. Donc si l&#039;utilisateur root est le superviseur de la messagerie, ou si c&#039;est un utilisateur du système (serveur ou desktop Linux). Le fichier <strong>/etc/aliases</strong> (<code>kate /etc/aliases</code>) est à paramétrer comme suit.
</p>

<p>
Avec l&#039;utilisateur directement gestionnaire de messagerie :
</p>
<pre class="file">postmaster:    utilisateur</pre>

<p>
Avec l&#039;utilisateur gestionnaire de la machine Linux (relais postmater à l&#039;utilisateur root) :
</p>
<pre class="file">postmaster:    root
root:    utilisateur</pre>
<div class="notetip">Pour valider dans Postfix la configuration après modification (en ayant créer une première configuration du serveur de messagerie avec l&#039;étape de configuration ci-après) :
<pre class="code bash"><span class="kw2">sudo</span> postalias <span class="sy0">/</span>etc<span class="sy0">/</span>aliases</pre>

</div><div class="notewarning">Par défaut, lors de la configuration du serveur de messagerie, celui-ci sera positionné avec l&#039;utilisateur root
</div>
</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Définir le gestionnaire de messagerie] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="definir_le_gestionnaire_de_messagerie" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1269-2232" /><button type="submit" title="Définir le gestionnaire de messagerie" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="configurer_le_dns_pour_votre_serveur_de_messagerie">Configurer le DNS pour votre serveur de messagerie</h2>
<div class="level2">

<p>
<a href="/configuration_serveur_dns_bind9_pour_son_poste_de_travail" class="wikilink1" title="configuration_serveur_dns_bind9_pour_son_poste_de_travail">Pour configurer un serveur DNS local avec Bind9 pour votre poste de travail</a>.
</p>

<p>
<a href="/configuration_serveur_dns_pour_son_poste_de_travail" class="wikilink1" title="configuration_serveur_dns_pour_son_poste_de_travail">Pour configurer un serveur DNS local avec Dnsmasq pour votre poste de travail</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Configurer le DNS pour votre serveur de messagerie] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configurer_le_dns_pour_votre_serveur_de_messagerie" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="2233-2572" /><button type="submit" title="Configurer le DNS pour votre serveur de messagerie" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="si_vous_ne_voulez_pas_d_un_serveur_dns_dedie_a_votre_messagerie">Si vous ne voulez pas d&#039;un serveur DNS dédié à votre messagerie</h3>
<div class="level3">

<p>
Pour créer un domaine 
dns local pour votre messagerie :
</p>
<pre class="code bash"><span class="kw2">sudo</span> hostnamectl set-hostname ma-machine.local.fr <span class="re5">--static</span></pre>

<p>
Remplacez local.fr par le non <abbr title="Domain Name System">DNS</abbr> que vous voulez, et ma-machine avec le non d&#039;ordinateur.
</p>

<p>
Vérifiez que le <abbr title="Domain Name System">DNS</abbr> fonctionne bien :
</p>
<pre class="code bash"><span class="kw2">hostname</span></pre>

<p>
retourne le nom d&#039;ordinateur
</p>
<pre class="code">ma-machine.local.fr</pre>
<pre class="code bash"><span class="kw2">hostname</span> <span class="re5">-d</span></pre>

<p>
retourne le domaine <abbr title="Domain Name System">DNS</abbr> de l&#039;ordinateur
</p>
<pre class="code">local.fr</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Si vous ne voulez pas d&#039;un serveur DNS dédié à votre messagerie] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="si_vous_ne_voulez_pas_d_un_serveur_dns_dedie_a_votre_messagerie" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="2573-3098" /><button type="submit" title="Si vous ne voulez pas d&#039;un serveur DNS dédié à votre messagerie" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="configurer_le_serveur_de_messagerie_par_le_paquet_d_installation">Configurer le serveur de messagerie par le paquet d&#039;installation</h2>
<div class="level2">

<p>
Vous pouvez maintenant configurer le serveur de messagerie Postfix.
</p>

<p>
Si votre application est déjà installée, tapez :
</p>
<pre class="code bash"><span class="kw2">sudo</span> dpkg-reconfigure postfix</pre>

<p>
Entrez les détails suivants
<img src="/_media/doc/01_ecrandemarage.png" class="mediacenter img-responsive" alt="" />
Touche tabulation pour basculer sur OK, et touche Entrée pour valider le message d&#039;information.
</p>
<hr />

<p>
<img src="/_media/doc/02_localuniquement2.png" class="mediacenter img-responsive" alt="" />
Choisissez le type de configuration automatique Postfix de serveur de messagerie que vous voulez faire. Ici c&#039;est <strong>Local Uniquement</strong>
</p>
<hr />

<p>
<img src="/_media/doc/03_nomducourriel_local.png" class="mediacenter img-responsive" alt="" />
Ici on va fixer le non de domaine de messagerie (par exemple @local.fr). Donc <strong>saisissez le nom du domaine de messagerie que vous voulez pour vos courriels locaux</strong> des utilisateurs de la machine.
</p>

<p>
La variable du fichier Ubuntu <strong>/etc/mailname</strong> et le paramètre Postfix <strong>myorigin</strong> sont donc paramétrés ici.
</p>
<hr />

<p>
<img src="/_media/doc/04_adminserveur_local.png" class="mediacenter img-responsive" alt="" />
Ici on fixe le gestionnaire de messagerie. 
</p>
<div class="notewarning">Si vous n&#039;avez pas précisé en amont de cette configuration le gestionnaire de messagerie, le configurateur du serveur de messagerie remplacera le nom d&#039;utilisateur que vous avez saisie par root dans le fichier /etc/aliases (<code>postmaster: root</code>)
</div><hr />

<p>
<img src="/_media/doc/05_domainesmessagerie_locale.png" class="mediacenter img-responsive" alt="" />
Ici on fixe les domaines de messagerie à accepter comme courriels au départ. Par exemple pour des adresses @Ma-Machine (résultat de la commande bash <code>hostname</code>) ajouter Ma-Machine, pour des courriels @local.fr ajouter local.fr, etc.
</p>

<p>
Donc dans notre cas :
</p>
<pre class="code">Ma-Machine, Ma-Machine.local.fr, localhost.localdomain, localhost, local.fr</pre>

<p>
C&#039;est la variable <strong>mydestination</strong> du fichier /etc/postfix/main.cf qui est modifiée.
</p>
<hr />

<p>
<img src="/_media/doc/06_synchrofileattente.png" class="mediacenter img-responsive" alt="" />
</p>
<hr />

<p>
<img src="/_media/doc/07_reseauxdistribution_aucun.png" class="mediacenter img-responsive" alt="" />
Définit sur quel réseau distribuer les courriels.
</p>
<pre class="code">127.0.0.1/32 [::1]/128</pre>

<p>
C&#039;est la variable <strong>mynetworks</strong> du fichier /etc/postfix/main.cf qui est modifiée.
</p>
<hr />

<p>
<img src="/_media/doc/08_taillebal.png" class="mediacenter img-responsive" alt="" />
Fixe un taille limite pour les boites aux lettres des comptes utilisateur du système.
</p>

<p>
C&#039;est la variable <strong>mailbox_size_limit</strong> du fichier /etc/postfix/main.cf qui est modifiée.
</p>
<hr />

<p>
<img src="/_media/doc/09_extadresse.png" class="mediacenter img-responsive" alt="" />
Définit une extension pour des sous domaines de messagerie.
</p>

<p>
C&#039;est la variable <strong>recipient_delimiter</strong> du fichier /etc/postfix/main.cf qui est modifiée.
</p>
<hr />

<p>
<img src="/_media/doc/10_protocoles.png" class="mediacenter img-responsive" alt="" />
Définit les protocoles du réseaux de transport qui doivent être utiliser.
</p>

<p>
C&#039;est la variable <strong>inet_protocols</strong> du fichier /etc/postfix/main.cf qui est modifiée.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Configurer le serveur de messagerie par le paquet d&#039;installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configurer_le_serveur_de_messagerie_par_le_paquet_d_installation" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="3099-5843" /><button type="submit" title="Configurer le serveur de messagerie par le paquet d&#039;installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="emplacement_des_boites_aux_lettres_des_utilisateurs_du_systeme">Emplacement des boîtes aux lettres des utilisateurs du système</h2>
<div class="level2">

<p>
Nous remarquons que le «configurateur» de Postfix ne demande pas de préciser où les boîtes aux lettres des utilisateurs sont situées. 
</p>

<p>
La commande de la file d&#039;attente :
</p>
<pre class="code bash">postconf queue_directory</pre>

<p>
renvoie
</p>
<pre class="code">queue_directory = /var/spool/postfix</pre>

<p>
La commande de boîtes postales :
</p>
<pre class="code bash">postconf mail_spool_directory</pre>

<p>
renvoie
</p>
<pre class="code">mail_spool_directory = /var/mail</pre>

<p>
Si on passe la commande de boîtes aux lettres utilisateurs :
</p>
<pre class="code bash">postconf home_mailbox</pre>

<p>
Nous avons :
</p>
<pre class="code">home_mailbox =</pre>

<p>
Nous voyons alors que les boîtes aux lettres des utilisateurs sont des boîtes postales et se situent dans /var/mail/utilisateur.
</p>

<p>
Il nous faudra donc éditer le fichier /etc/postfix/main.cf (<code>kate /etc/postfix/main.cf</code>) et ajouter la variable <strong>home_mailbox</strong> pour vos utilisateurs.
</p>

<p>
Par exemple :
</p>
<pre class="file"># au format maildir
home_mailbox = .local/share/courriels/arrivées/</pre>

<p>
ou passer la commande dans un terminal :
</p>
<pre class="code bash"><span class="kw2">sudo</span> postconf <span class="re5">-e</span> <span class="re2">home_mailbox</span>=.local<span class="sy0">/</span>share<span class="sy0">/</span>courriels<span class="sy0">/</span>arrivées<span class="sy0">/</span></pre>

<p>
afin que le courriel soit directement distribué dans la boîte aux lettres locale de l&#039;utilisateur.
</p>

<p>
Pour valider la configuration dans Postfix, tapez :
</p>
<pre class="code bash">systemctl restart postfix</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Emplacement des boîtes aux lettres des utilisateurs du système] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="emplacement_des_boites_aux_lettres_des_utilisateurs_du_systeme" /><input type="hidden" name="codeblockOffset" value="11" /><input type="hidden" name="range" value="5844-7185" /><button type="submit" title="Emplacement des boîtes aux lettres des utilisateurs du système" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit8 page-header" id="configurer_le_client_mail_mua_systeme">Configurer le client mail MUA système</h2>
<div class="level2">

<p>
Testez la lecture de la boîte aux lettres :
</p>
<pre class="code bash">mutt</pre>

<p>
Si vous avez un message du genre :
</p>
<pre class="code">/home/utidisateur/Mail n&#039;existe pas. Le créer ? ([oui]/non):</pre>

<p>
C&#039;est que votre client mail est mal configuré.
</p>

<p>
Tapez : 
</p>
<pre class="code">n</pre>

<p>
 puis pour quitter Mutt 
</p>
<pre class="code">q</pre>

<p>
Éditer le fichier .muttrc dans votre dossier /home/utilisateur (<code>kate ~/.muttrc</code>)
Et ajouter ou modifier ces lignes :
</p>
<pre class="file"># Configuration de base
set realname=&quot;{Prénom NOM}&quot;
set header_cache=~/.mutt/cache/headers
set certificate_file=~/.mutt/certificates
set message_cachedir=~/.mutt/cache/bodies
set beep
set use_from = yes

# Boite de réception
set spoolfile=~/.local/share/courriels/arrivées/
# Boite aux lettres de Mutt
set folder=~/.local/share/courriels

# Autres dossiers
set postponed=+brouillons
set record=+envoyés

# Encodage à utiliser
set charset=utf-8
set send_charset=utf-8
# Format de la date à afficher avant les citations lors d&#039;une réponse
set date_format=&quot;%A %d %B %Y à %I:%M:%S%p&quot;
set index_format=&quot;%4C %Z %{%b %d} %-15.15F (%4l) %s&quot;
set fast_reply
set include=yes

# Configuration SMTP
set sendmail=&quot;/usr/sbin/sendmail&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Configurer le client mail MUA système] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configurer_le_client_mail_mua_systeme" /><input type="hidden" name="codeblockOffset" value="20" /><input type="hidden" name="range" value="7186-8390" /><button type="submit" title="Configurer le client mail MUA système" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="configurer_une_distribution_smtp_locale_securisee">Configurer une distribution SMTP locale sécurisée</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Configurer une distribution SMTP locale sécurisée] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configurer_une_distribution_smtp_locale_securisee" /><input type="hidden" name="codeblockOffset" value="25" /><input type="hidden" name="range" value="8391-8454" /><button type="submit" title="Configurer une distribution SMTP locale sécurisée" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="bloquer_le_port_25_smtp_standard">Bloquer le port 25 SMTP standard</h3>
<div class="level3">

</div>

<h4 id="test_de_la_connexion_sur_le_port_25">Test de la connexion sur le port 25</h4>
<div class="level4">

<p>
Déjà testons que le port 25 est ouvert.
Pour cela tapez la commande :
</p>
<pre class="code bash">telnet localhost <span class="nu0">25</span></pre>

<p>
Ce qui affiche
</p>
<pre class="code">Trying 127.0.0.1...
Connected to localhost.
Escape character is &#039;^]&#039;.
220 Ma-Machine ESMTP Postfix (Ubuntu)</pre>

<p>
Tapez :
</p>
<pre class="code">HELO Ma-Machine</pre>

<p>
retourne
</p>
<pre class="code">250 Ma-Machine</pre>

<p>
Puis saisissez l&#039;identifiant d&#039;un compte local :
</p>
<pre class="code">MAIL FROM: utilisateur</pre>

<p>
retourne
</p>
<pre class="code">250 2.1.0 Ok</pre>

<p>
Saisissez le destinataire :
</p>
<pre class="code">RCPT TO: utilisateur@localhost</pre>

<p>
retourne
</p>
<pre class="code">250 2.1.5 Ok</pre>

<p>
Saisissez :
</p>
<pre class="code">DATA</pre>

<p>
retourne
</p>
<pre class="code">354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</pre>

<p>
Et enfin vous pouvez saisir votre courriel :
</p>
<pre class="code">From: utilisateur
To: utilisateur
Subject: Test de message sur port 25
Ceci est un test d&#039;envoie sur port 25
Merci de votre coopération
.</pre>

<p>
retourne
</p>
<pre class="code">250 2.0.0 Ok: queued as 9E77AA02321</pre>

<p>
Pour quitter tapez :
</p>
<pre class="code">QUIT</pre>

<p>
retourne
</p>
<pre class="code">221 2.0.0 Bye
Connection closed by foreign host.</pre>

<p>
Vous avez expédié un courriels <img src="/lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

</div>

<h4 id="blocage_du_port_25">Blocage du port 25</h4>
<div class="level4">

<p>
Modifier le fichier master.cf (<code>kate /etc/postfix/master.cf</code>)
</p>

<p>
Changer 
</p>
<pre class="file">smtp      inet  n       -       y       -       -       smtpd</pre>

<p>
en
</p>
<pre class="file">587     inet    n       -       y       -       -       smtpd
      -o content_filter=dksign:[127.0.0.1]:12028</pre>

<p>
Redémarrage de Postfix pour valider les changements :
</p>
<pre class="code bash">systemctl restart postfix</pre>

</div>

<h4 id="test_du_verrouillage_du_port_25">Test du verrouillage du port 25</h4>
<div class="level4">

<p>
Pour cela taper :
</p>
<pre class="code bash">telnet localhost <span class="nu0">25</span></pre>

<p>
retourne
</p>
<pre class="code">Trying 127.0.0.1...
telnet: Unable to connect to remote host: Connection refused</pre>

</div>

<h4 id="test_de_l_acces_sur_le_port_587">Test de l&#039;accès sur le port 587</h4>
<div class="level4">

<p>
Pour cela taper :
</p>
<pre class="code bash">telnet localhost <span class="nu0">587</span></pre>

<p>
retourne
</p>
<pre class="code">Trying 127.0.0.1...
Connected to localhost.
Escape character is &#039;^]&#039;.
220 Ma-Machine ESMTP Postfix (Ubuntu)</pre>

<p>
Tapez :
</p>
<pre class="code">HELO Ma-Machine</pre>

<p>
retourne
</p>
<pre class="code">250 Ma-Machine</pre>

<p>
Puis saisissez l&#039;identifiant d&#039;un compte local :
</p>
<pre class="code">MAIL FROM: utilisateur</pre>

<p>
retourne
</p>
<pre class="code">250 2.1.0 Ok</pre>

<p>
Tapez pour quitter :
</p>
<pre class="code">QUIT</pre>

<p>
retourne
</p>
<pre class="code">221 2.0.0 Bye
Connection closed by foreign host.</pre>

</div>

<h4 id="renforcer_la_securite">Renforcer la sécurité</h4>
<div class="level4">

<p>
Vous pouvez modifier la directive 
</p>
<pre class="file">smtpd_banner = $myhostname ESMTP (Courriels)</pre>

<p>
 dans le fichier main.cf si vous voulez plus de sécurité. Cela retournera lors de la connexion telnet sur le port 587 :
</p>
<pre class="code">Trying 127.0.0.1...
Connected to localhost.
Escape character is &#039;^]&#039;.
220 Ma-Machine ESMTP (Courriels)</pre>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Bloquer le port 25 SMTP standard] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="bloquer_le_port_25_smtp_standard" /><input type="hidden" name="codeblockOffset" value="25" /><input type="hidden" name="range" value="8455-11089" /><button type="submit" title="Bloquer le port 25 SMTP standard" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="mettre_en_place_la_connexion_tls">Mettre en place la connexion TLS</h3>
<div class="level3">

<p>
Pour valider le transport <a href="https://fr.wikipedia.org/wiki/Transport_Layer_Security" class="urlextern" title="https://fr.wikipedia.org/wiki/Transport_Layer_Security" rel="nofollow">TLS</a> il faut modifier le fichier main.cf (<code>kate /etc/postfix/main.cf</code>) comme suit :
</p>
<pre class="file"># TLS pour le serveur smtpd de Postfix
# Utilise le générateur de nombres aléatoires de Linux
tls_random_source = dev:/dev/urandom
# Active le protocole de cryptage TLS
smtpd_use_tls = yes
# N&#039;autorise que les connections TLS
smtpd_tls_auth_only = yes
# Niveau de sécurité dans la négociation du protocole
smtpd_tls_security_level = may
# Les clefs du cryptage
smtpd_tls_cert_file = /etc/ssl/certs/ssl-cert-snakeoil.pem
smtpd_tls_key_file = /etc/ssl/private/ssl-cert-snakeoil.key

# TLS pour le client
# Active le protocole de cryptage TLS
smtp_use_tls = yes
# Niveau de sécurité dans la négociation du protocole
smtp_tls_security_level = may
# Les clefs du cryptage
smtp_tls_CApath = /etc/ssl/certs
# Répertoire de cache pour la communication
smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache</pre>

</div>

<h4 id="tester_le_fonctionnement_de_tls">Tester le fonctionnement de TLS</h4>
<div class="level4">

<p>
Connexion normale
Tapez :
</p>
<pre class="code bash">telnet localhost <span class="nu0">587</span></pre>

<p>
retourne
</p>
<pre class="code">Trying 127.0.0.1...
Connected to localhost.
Escape character is &#039;^]&#039;.
220 Ma-Machine ESMTP (Courriels)</pre>

<p>
Tapez :
</p>
<pre class="code">ehlo Ma-Machine</pre>

<p>
retourne
</p>
<pre class="code">250-Ma-Machine
250-PIPELINING
250-SIZE 10240000
250-VRFY
250-ETRN
250-STARTTLS
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-DSN
250-SMTPUTF8
250 CHUNKING</pre>

<p>
Tapez :
</p>
<pre class="code">MAIL FROM: utilisateur</pre>

<p>
retourne
</p>
<pre class="code">250 2.1.0 Ok</pre>

<p>
Tapez :
</p>
<pre class="code">QUIT</pre>

<p>
retourne
</p>
<pre class="code">221 2.0.0 Bye
Connection closed by foreign host.</pre>

<p>
Pour vous connecter en <abbr title="Transport Layer Security">TLS</abbr> :
</p>
<pre class="code bash">openssl s_client <span class="re5">-starttls</span> smtp <span class="re5">-connect</span> localhost:<span class="nu0">587</span></pre>

<p>
retourne
</p>
<pre class="code">CONNECTED(00000003)
…
    Start Time: 1598437512
    Timeout   : 7200 (sec)
    Verify return code: 0 (ok)
    Extended master secret: no
    Max Early Data: 0
---
read R BLOCK</pre>

<p>
Tapez :
</p>
<pre class="code">ehlo Ma-Machine</pre>

<p>
retourne
</p>
<pre class="code">250-Ma-Machine
250-PIPELINING
250-SIZE 10240000
250-VRFY
250-ETRN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-DSN
250-SMTPUTF8
250 CHUNKING</pre>

<p>
Tapez :
</p>
<pre class="code">MAIL FROM: utilisateur</pre>

<p>
retourne
</p>
<pre class="code">250 2.1.0 Ok</pre>

<p>
Tapez :
</p>
<pre class="code">QUIT</pre>

<p>
retourne
</p>
<pre class="code">221 2.0.0 Bye
Connection closed by foreign host.</pre>

</div>

<h4 id="bloquer_les_connections_non_tls">Bloquer les connections non TLS</h4>
<div class="level4">

<p>
Pour cela il faut modifier le fichier master.cf (<code>kate /etc/postfix/master.cf</code>)
</p>

<p>
Modifier le fichier comme ci-dessous :
</p>
<pre class="file">#587      inet  n       -       y       -       -       smtpd
#  -o content_filter=dksign:[127.0.0.1]:12028
⋅⋅⋅
submission inet n       -       y       -       -       smtpd
  -o syslog_name=postfix/submission
  -o smtpd_tls_security_level=encrypt
  -o smtpd_sasl_auth_enable=yes
  -o smtpd_tls_auth_only=yes
  -o smtpd_reject_unlisted_recipient=no
#  -o smtpd_client_restrictions=$mua_client_restrictions
#  -o smtpd_helo_restrictions=$mua_helo_restrictions
#  -o smtpd_sender_restrictions=$mua_sender_restrictions
  -o smtpd_recipient_restrictions=
  -o smtpd_relay_restrictions=permit_sasl_authenticated,reject
  -o milter_macro_daemon_name=ORIGINATING</pre>

</div>

<h4 id="verifier_le_blocage_des_connexions_non_tls">Vérifier le blocage des connexions non TLS</h4>
<div class="level4">

<p>
Tester la connexion telnet :
</p>
<pre class="code bash">telnet localhost <span class="nu0">587</span></pre>

<p>
retourne                                
</p>
<pre class="code">Trying 127.0.0.1...
Connected to localhost.
Escape character is &#039;^]&#039;.
220 Ma-Machine ESMTP (Courriels)</pre>

<p>
Taper :
</p>
<pre class="code">ehlo Ma-Machine</pre>

<p>
retourne
</p>
<pre class="code">250-Ma-Machine
250-PIPELINING
250-SIZE 10240000
250-VRFY
250-ETRN
250-STARTTLS
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-DSN
250-SMTPUTF8
250 CHUNKING</pre>

<p>
Taper :
</p>
<pre class="code">MAIL FROM: utilisateur</pre>

<p>
retourne
</p>
<pre class="code">530 5.7.0 Must issue a STARTTLS command first</pre>

<p>
Taper :
</p>
<pre class="code">quit</pre>

<p>
retourne
</p>
<pre class="code">221 2.0.0 Bye
Connection closed by foreign host.</pre>

<p>
Tester la connection <abbr title="Transport Layer Security">TLS</abbr> :
</p>
<pre class="code bash">openssl s_client <span class="re5">-starttls</span> smtp <span class="re5">-connect</span> localhost:<span class="nu0">587</span></pre>

<p>
retourne
</p>
<pre class="code">CONNECTED(00000003)
…
read R BLOCK</pre>

<p>
Tapez :
</p>
<pre class="code">ehlo Ma-Machine</pre>

<p>
retourne
</p>
<pre class="code">250-Ma-Machine
250-PIPELINING
250-SIZE 10240000
250-VRFY
250-ETRN
250-AUTH DIGEST-MD5 NTLM CRAM-MD5 PLAIN LOGIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-DSN
250-SMTPUTF8
250 CHUNKING</pre>

<p>
Tapez :
</p>
<pre class="code">MAIL FROM: utilisateur</pre>

<p>
retourne
</p>
<pre class="code">250 2.1.0 Ok</pre>

<p>
Tapez :
</p>
<pre class="code">QUIT</pre>

<p>
retourne
</p>
<pre class="code">221 2.0.0 Bye
Connection closed by foreign host.</pre>

<p>
Vos échanges de courriels sont maintenant cryptés lors du transport en SMTP. 
</p>

<p>
On peut encore <a href="/renforcer_la_securite_du_cryptage_tls_dans_postfix" class="wikilink1" title="renforcer_la_securite_du_cryptage_tls_dans_postfix">Renforcer la sécurité du cryptage TLS dans Postfix</a>.
</p>

<p>
C&#039;est maintenant à l&#039;authentification système au niveau utilisateur que nous allons agir pour renforcer la sécurité <img src="/lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Mettre en place la connexion TLS] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="mettre_en_place_la_connexion_tls" /><input type="hidden" name="codeblockOffset" value="54" /><input type="hidden" name="range" value="11090-15889" /><button type="submit" title="Mettre en place la connexion TLS" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="mettre_en_place_l_authentification_sasl">Mettre en place l&#039;authentification SASL</h3>
<div class="level3">

<p>
Si vous voulez pousser la sécurité à l&#039;extrême, vous pouvez authentifier vos utilisateurs de façon plus poussé pour la messagerie.
</p>

</div>

<h4 id="installer_les_applications_complementaires">Installer les applications complémentaires</h4>
<div class="level4">

<p>
Pour la partie authentification <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez les paquets</a> <strong><a href="apt://libsasl2-modules, sasl2bin" class="interwiki iw_apt" title="apt://libsasl2-modules, sasl2bin">libsasl2-modules sasl2bin</a></strong>.
</p>

</div>

<h5 id="postfix_doit_etre_membre_du_groupe_sasl">Postfix doit être membre du groupe sasl</h5>
<div class="level5">
<pre class="code bash"><span class="kw2">getent</span> group sasl</pre>

<p>
doit retourner
</p>
<pre class="code">sasl:x:45:postfix</pre>

<p>
Pour ajouter l&#039;utilisateur «postfix» au groupe sasl, tapez dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> :
</p>
<pre class="code bash"><span class="kw2">sudo</span> adduser postfix sasl</pre>

</div>

<h4 id="voir_quels_sont_les_types_d_authentifications_acceptes_par_postfix">Voir quels sont les types d&#039;authentifications acceptés par Postfix</h4>
<div class="level4">

<p>
Pour le serveur smtpd de Postfix :
</p>
<pre class="code bash">postconf <span class="re5">-a</span></pre>

<p>
retourne
</p>
<pre class="code">cyrus
dovecot</pre>

<p>
Pour le client smtp de Posfix :
</p>
<pre class="code bash">postconf <span class="re5">-A</span></pre>

<p>
retourne
</p>
<pre class="code">cyrus</pre>

</div>

<h4 id="configurons_le_serveur_smtpd_de_postfix_pour_accepter_l_authentification_sasl_cyrius">Configurons le serveur smtpd de Postfix pour accepter l&#039;authentification SASL Cyrius</h4>
<div class="level4">

<p>
Afin de permettre l&#039;authentification SASL Cyrius par Postfix, il va être nécessaire de modifier la configuration générale. Nous allons ajouter les options suivantes à main.cf afin de n&#039;autoriser l&#039;accès au SMTP qu&#039;aux utilisateurs identifiés (par un login qui est leur adresse e-mail, et le mot de passe de ce compte e-mail).
</p>

<p>
Éditer le fichier main.cf (kate /etc/postfix/main.cf) et modifiez/ajoutez les lignes suivantes :
</p>
<pre class="file"># Paramétrages SASL du serveur smtpd de Postfix
# Variable postfix contenant le hostname Ma-Machine
smtpd_sasl_local_domain = $myhostname
# Active l&#039;authentification SASL pour le serveur smtpd de Postfix
smtpd_sasl_auth_enable = yes
# Interdit les méthodes qui autorisent l&#039;authentification anonyme.
smtpd_sasl_security_options = noanonymous
# Active l’interopérabilité avec les clients SMTP qui implémentent une version obsolète de la commande AUTH (RFC 2554). MicroSoft Outlook Express version 4 et Exchange version 5.0 sont des exemples de tels clients.
broken_sasl_auth_clients = no
# Pour autoriser le relais de courriels des utilisateurs authentifiés
smtpd_recipient_restrictions = permit_sasl_authenticated,permit_mynetworks,reject_unauth_destination </pre>

</div>

<h4 id="configurer_le_serveur_d_authentification_cyrus">Configurer le serveur d&#039;authentification Cyrus</h4>
<div class="level4">

<p>
Créer et éditer le fichier smtpd.conf (<code>kate /etc/postfix/sasl/smtpd.conf</code>) avec ces valeurs :
</p>
<pre class="file">pwcheck_method: saslauthd # Fonctionnement avec le service saslauthd de Cyrus
mech_list: PLAIN LOGIN # Les méthodes d&#039;authentifications PLAIN et LOGIN sont permises</pre>

<p>
Créer un fichier de configuration Cyrus saslauthd-postfix pour Postfix :
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">cp</span> <span class="sy0">/</span>etc<span class="sy0">/</span>default<span class="sy0">/</span>saslauthd <span class="sy0">/</span>etc<span class="sy0">/</span>default<span class="sy0">/</span>saslauthd-postfix</pre>

<p>
Modifier le fichier saslauthd-postfix (<code>kate /etc/default/saslauthd-postfix</code>) suivant :
</p>
<pre class="file">START=yes
NAME=&quot;saslauthd-postf&quot; # Maximum 15 caractères
OPTIONS=&quot;-c -m /var/spool/postfix/var/run/saslauthd&quot; # Chroot du serveur Postfix dans /var/spool/postfix</pre>

<p>
Créer le sous répertoire dans le chroot de Postfix :
</p>
<pre class="code bash"><span class="kw2">sudo</span> dpkg-statoverride <span class="re5">--add</span> root sasl <span class="nu0">710</span> <span class="sy0">/</span>var<span class="sy0">/</span>spool<span class="sy0">/</span>postfix<span class="sy0">/</span>var<span class="sy0">/</span>run<span class="sy0">/</span>saslauthd</pre>

<p>
Redémarrer le service saslauthd :
</p>
<pre class="code bash">systemctl restart saslauthd</pre>

<p>
Pour valider la configuration de postfix, tapez :
</p>
<pre class="code bash">systemctl restart postfix</pre>

</div>

<h4 id="configurer_le_client_mail_mua_systeme_pour_l_authentification_sasl">Configurer le client mail MUA système pour l&#039;authentification SASL</h4>
<div class="level4">

<p>
Le client Mutt devrait fonctionner de façon transparente en local avec cette configuration.
</p>

<p>
Pour vérifier l’authentification au serveur SMTP en TLS SASL.
Créer un Hash (code crypté) pour votre utilisateur local.
</p>
<pre class="code bash">python3 <span class="re5">-c</span> <span class="st_h">'import sys; from base64 import b64encode; print(b64encode(bytes(f&quot;utilisateur@local.fr&quot;, encoding=&quot;ascii&quot;)).decode(&quot;ascii&quot;))'</span></pre>

<p>
ou en perl:
</p>
<pre class="code bash"><span class="kw2">perl</span> -MMIME::Base64 <span class="re5">-le</span> <span class="st_h">'print encode_base64(&quot;utilisateur\@local.fr&quot;);'</span></pre>

<p>
Ce qui donne en sortie :
</p>
<pre class="code">dXRpbGlzYXRldXJAbG9jYWwuZnI=</pre>

<p>
Créer un Hash pour le mot de passe de l&#039;utilisateur local.
</p>
<pre class="code bash">python3 <span class="re5">-c</span> <span class="st_h">'import sys; from base64 import b64encode; print(b64encode(bytes(f&quot;mdp_de_utilisateur&quot;, encoding=&quot;ascii&quot;)).decode(&quot;ascii&quot;))'</span></pre>

<p>
ou en perl:
</p>
<pre class="code bash"><span class="kw2">perl</span> -MMIME::Base64 <span class="re5">-le</span> <span class="st_h">'print encode_base64(&quot;mdp_de_utilisateur&quot;);'</span></pre>

<p>
Ce qui donne en sortie :
</p>
<pre class="code">bWRwX2RlX3V0aWxpc2F0ZXVy</pre>

<p>
Créer un Hash (code crypté de connexion) pour l&#039;identifiant avec mot de passe de l&#039;utilisateur local.
</p>
<pre class="code bash">python3 <span class="re5">-c</span> <span class="st_h">'import sys; from base64 import b64encode; print(b64encode(bytes(f&quot;\000utilisateur@local.fr\000mdp_de_utilisateur&quot;, encoding=&quot;ascii&quot;)).decode(&quot;ascii&quot;))'</span></pre>

<p>
ou en perl:
</p>
<pre class="code bash"><span class="kw2">perl</span> -MMIME::Base64 <span class="re5">-le</span> <span class="st_h">'print encode_base64(&quot;\000utilisateur\@local.fr\000mdp_de_utilisateur&quot;);'</span></pre>

<p>
Ce qui donne en sortie :
</p>
<pre class="code">AHV0aWxpc2F0ZXVyQGxvY2FsLmZyAG1kcF9kZV91dGlsaXNhdGV1cg==</pre>

<p>
Pour vérifier qu&#039;il n&#039;y a pas d&#039;erreurs :
</p>
<pre class="code bash">python3 <span class="re5">-c</span> <span class="st_h">'import sys; from base64 import b64decode; print(b64decode(&quot;AHV0aWxpc2F0ZXVyQGxvY2FsLmZyAG1kcF9kZV91dGlsaXNhdGV1cg==&quot;).decode(&quot;ascii&quot;))'</span></pre>

<p>
ou en perl
</p>
<pre class="code bash"><span class="kw2">perl</span> -MMIME::Base64 <span class="re5">-le</span> <span class="st_h">'print decode_base64(&quot;AHV0aWxpc2F0ZXVyQGxvY2FsLmZyAG1kcF9kZV91dGlsaXNhdGV1cg==&quot;);'</span></pre>

<p>
Pour vous connecter avec cet identifiant crypté :
</p>
<pre class="code bash">openssl s_client <span class="re5">-starttls</span> smtp <span class="re5">-connect</span> localhost:<span class="nu0">587</span></pre>

<p>
Pour l&#039;authentification en login :
</p>
<pre class="code">AUTH LOGIN</pre>

<p>
retourne
</p>
<pre class="code">334 VXNlcm5hbWU6</pre>

<p>
VXNlcm5hbWU6 c&#039;est «Username:» en crypté.
</p>

<p>
Saisissez votre identifiant utilisateur@local.fr crypté :
</p>
<pre class="code">dXRpbGlzYXRldXJAbG9jYWwuZnI=</pre>

<p>
retourne
</p>
<pre class="code">334 UGFzc3dvcmQ6</pre>

<p>
UGFzc3dvcmQ6 c&#039;est «Password:» en crypté.
</p>

<p>
Saisissez votre mot de passe utilisateur crypté :
</p>
<pre class="code">bWRwX2RlX3V0aWxpc2F0ZXVy</pre>

<p>
retourne
</p>
<pre class="code">235 2.7.0 Authentification successful</pre>

<p>
Pour l&#039;authentification en direct (PLAIN) :
</p>

<p>
Maintenant c&#039;est le code de Hash de l&#039;identifiant avec le mot de passe applicatif qu&#039;il faut saisir pour l&#039;authentification en clair :
</p>
<pre class="code">AUTH PLAIN AHV0aWxpc2F0ZXVyQGxvY2FsLmZyAG1kcF9kZV91dGlsaXNhdGV1cg==</pre>

<p>
retourne
</p>
<pre class="code">325 2.7.0 Authentification successful</pre>

<p>
Si le compte de connexion n&#039;est pas bon vous aurez :
</p>
<pre class="code">535 5.7.8 Error: authentication failed: no mechanism available</pre>

<p>
Si l&#039;identifiant PLAIN crypté n&#039;est pas bon vous aurez :
</p>
<pre class="code">535 5.7.8 Error: authentication failed: another step is needed in authentication</pre>

<p>
Si le protocole de connexion n&#039;est pas bon vous aurez:
</p>
<pre class="code">535 5.7.8 Error: authentication failed: bad protocol / cancel</pre>

<p>
Etc.
</p>

<p>
Maintenant nous avons un système de messagerie très sécurisé. On peut encore améliorer le système d&#039;authentification SASL pour cela il faut voir <a href="/configuration_avancee_de_sasl_cyrus_avec_postfix" class="wikilink1" title="configuration_avancee_de_sasl_cyrus_avec_postfix">Configuration avancée de SASL Cyrus avec Postfix</a>.
</p>

<p>
On peut aussi étendre cette configuration avec <a href="/postfix_en_serveur_local_avec_un_serveur_de_messagerie_relaie_sur_internet" class="wikilink1" title="postfix_en_serveur_local_avec_un_serveur_de_messagerie_relaie_sur_internet"> un relaie sur un serveur de messagerie du réseau ou d&#039;internet</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Mettre en place l&#039;authentification SASL] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="mettre_en_place_l_authentification_sasl" /><input type="hidden" name="codeblockOffset" value="88" /><input type="hidden" name="range" value="15890-22867" /><button type="submit" title="Mettre en place l&#039;authentification SASL" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit13 page-header" id="considerations_de_securites_sur_une_architecture_lan_et_au-dela">Considérations de sécurités sur une architecture LAN et au-delà</h2>
<div class="level2">

<p>
Pour renforcer la sécurité si votre poste de travail est dans un réseau local, il vous faudra centraliser les messages sur des boites aux lettres postales pour éviter les failles de sécurités des utilisateurs locaux peux respectueux des consignes de sécurités.
Pour un poste de travail multi-utilisateurs chez soit, ce genre de configuration de boîtes aux lettres par utilisateurs peut-être intéressante pour la messagerie système et entre utilisateurs locaux du poste de travail.
</p>

<p>
Dans un environnement professionnel où le serveur de messagerie est sur un réseau local, il est préférable d&#039;avoir des boites aux lettres postales (/var/mail/utilisateur). Cela permet d&#039;avoir plusieurs niveaux de contrôles de sécurités. 
</p>

<p>
Le premier aux niveau du serveur de messagerie MTA (filtrages SPAM et antivirus). 
</p>

<p>
Le deuxième au niveau du MDA (Mail Delivery Agent aussi avec des outils anti-SPAMs et anti-virus) qu&#039;il faudra installer voir <a href="/comment_configurer_sa_distribution_de_courriels_locale_mda" class="wikilink1" title="comment_configurer_sa_distribution_de_courriels_locale_mda">Comment configurer sa distribution de courriels locale MDA ?</a>. 
</p>

<p>
Un troisième niveau peut-être mis en place au niveau du client de messagerie MUA sur le poste de travail avec un serveur local sur le modèle ci-dessus complété par un <a href="/postfix_en_serveur_local_avec_un_serveur_de_messagerie_relaie_sur_internet" class="wikilink1" title="postfix_en_serveur_local_avec_un_serveur_de_messagerie_relaie_sur_internet">relaie vers le serveur de messagerie du réseau</a>
</p>

<p>
Pour cela il faut supprimer la directive 
</p>
<pre class="file">home_mailbox= ...</pre>

<p>
 du fichier de configuration main.cf de Postfix. Et modifier le client MUA Mutt avec 
</p>
<pre class="file">set spoolfile=/var/mail/$USER</pre>

<p>
 dans le fichier .muttrc du répertoire home de l&#039;utilisateur.
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Considérations de sécurités sur une architecture LAN et au-delà] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="considerations_de_securites_sur_une_architecture_lan_et_au-dela" /><input type="hidden" name="codeblockOffset" value="125" /><input type="hidden" name="range" value="22868-24591" /><button type="submit" title="Considérations de sécurités sur une architecture LAN et au-delà" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit14 page-header" id="filtrage_des_courriels_indesirables">Filtrage des courriels indésirables</h2>
<div class="level2">

<p>
* <a href="https://guide.ubuntu-fr.org/server/mail-filtering.html" class="urlextern" title="https://guide.ubuntu-fr.org/server/mail-filtering.html" rel="nofollow">Comment filtrer les courriels indésirables d&#039;Internet du serveur de messagerie</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/installer_postfix_en_local_pour_un_poste_de_travail"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1630574814" /><input type="hidden" name="summary" value="[Filtrage des courriels indésirables] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="filtrage_des_courriels_indesirables" /><input type="hidden" name="codeblockOffset" value="127" /><input type="hidden" name="range" value="24592-" /><button type="submit" title="Filtrage des courriels indésirables" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="installer_postfix_en_local_pour_un_poste_de_travail.txt">installer_postfix_en_local_pour_un_poste_de_travail.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 02/09/2021, 11:26">Le 02/09/2021, 11:26</span></li><li class="text-muted">par sefran</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=installer_postfix_en_local_pour_un_poste_de_travail&amp;1635554103" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

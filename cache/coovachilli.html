<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>coovachilli [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="wifi,reseau,securite,portail captif,brouillon"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/coovachilli?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/coovachilli?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/coovachilli"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/coovachilli"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/coovachilli"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"coovachilli","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="coovachilli">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/coovachilli?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/coovachilli?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/coovachilli?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/coovachilli?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/coovachilli?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/coovachilli?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/coovachilli?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">coovachilli</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/coovachilli?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/coovachilli?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/coovachilli?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#fonctionnement","title":"Fonctionnement","level":1},{"link":"#initialisation_du_reseau","title":"Initialisation du reseau","level":1},{"link":"#configuration_du_ssh","title":"Configuration du SSH","level":2},{"link":"#configuration_du_reseau","title":"Configuration du r\u00e9seau :","level":2},{"link":"#installation_et_configuration_du_serveur_radius","title":"Installation et configuration du serveur Radius","level":1},{"link":"#telechargement_de_freeradius_depuis_les_depots_officiels","title":"T\u00e9l\u00e9chargement de Freeradius depuis les d\u00e9p\u00f4ts officiels","level":2},{"link":"#installation_de_la_base_de_donnee_mysql","title":"Installation de la base de donn\u00e9e MySQL","level":2},{"link":"#deplacement_des_autorisations_pour_integrer_mysql","title":"D\u00e9placement des autorisations pour int\u00e9grer MySql","level":2},{"link":"#ajouter_un_utilisateur_dans_la_base_de_donnee_mysql","title":"Ajouter un  utilisateur dans la base de donn\u00e9e MySql:","level":2},{"link":"#installation_et_configuration_de_coovachilli","title":"Installation et configuration de Coovachilli","level":1},{"link":"#installation_de_coovachilli_a_partir_des_fichiers_sources","title":"Installation de CoovaChilli \u00e0 partir des fichiers Sources","level":2},{"link":"#installation_du_packet_haserl_pour_permettre_au_serveur_chilli_de_rediriger_les_clients_vers_la_page_d_accueil","title":"Installation du packet haserl pour permettre au serveur chilli de rediriger les clients vers la page d'accueil","level":2},{"link":"#parametrage_du_serveur_hotspot","title":"Param\u00e9trage du serveur hotspot","level":2},{"link":"#configuration_du_serveur_chilli","title":"Configuration du serveur chilli","level":2},{"link":"#creer_et_configurer_une_page_de_connexion","title":"Cr\u00e9er et configurer une page de connexion","level":2},{"link":"#securite_et_certification_d_authenticite","title":"S\u00e9curit\u00e9 et certification d\u2019authenticit\u00e9","level":1},{"link":"#installation_du_par-feu","title":"Installation du par-feu :","level":2},{"link":"#installation_de_la_certification_ssl_au_server_apache_2","title":"Installation de la certification SSL au server Apache 2","level":2},{"link":"#configuration1","title":"Configuration","level":1},{"link":"#utilisation","title":"Utilisation","level":1},{"link":"#desinstallation","title":"D\u00e9sinstallation","level":1},{"link":"#voir_aussi","title":"Voir aussi","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis</a></li>
<li class="level1"><a href="#fonctionnement">Fonctionnement</a></li>
<li class="level1"><a href="#initialisation_du_reseau">Initialisation du reseau</a>
<ul class="nav toc">
<li class="level2"><a href="#configuration_du_ssh">Configuration du SSH</a></li>
<li class="level2"><a href="#configuration_du_reseau">Configuration du réseau :</a></li>
</ul>
</li>
<li class="level1"><a href="#installation_et_configuration_du_serveur_radius">Installation et configuration du serveur Radius</a>
<ul class="nav toc">
<li class="level2"><a href="#telechargement_de_freeradius_depuis_les_depots_officiels">Téléchargement de Freeradius depuis les dépôts officiels</a></li>
<li class="level2"><a href="#installation_de_la_base_de_donnee_mysql">Installation de la base de donnée MySQL</a></li>
<li class="level2"><a href="#deplacement_des_autorisations_pour_integrer_mysql">Déplacement des autorisations pour intégrer MySql</a></li>
<li class="level2"><a href="#ajouter_un_utilisateur_dans_la_base_de_donnee_mysql">Ajouter un  utilisateur dans la base de donnée MySql:</a></li>
</ul>
</li>
<li class="level1"><a href="#installation_et_configuration_de_coovachilli">Installation et configuration de Coovachilli</a>
<ul class="nav toc">
<li class="level2"><a href="#installation_de_coovachilli_a_partir_des_fichiers_sources">Installation de CoovaChilli à partir des fichiers Sources</a></li>
<li class="level2"><a href="#installation_du_packet_haserl_pour_permettre_au_serveur_chilli_de_rediriger_les_clients_vers_la_page_d_accueil">Installation du packet haserl pour permettre au serveur chilli de rediriger les clients vers la page d&#039;accueil</a></li>
<li class="level2"><a href="#parametrage_du_serveur_hotspot">Paramétrage du serveur hotspot</a></li>
<li class="level2"><a href="#configuration_du_serveur_chilli">Configuration du serveur chilli</a></li>
<li class="level2"><a href="#creer_et_configurer_une_page_de_connexion">Créer et configurer une page de connexion</a></li>
</ul>
</li>
<li class="level1"><a href="#securite_et_certification_d_authenticite">Sécurité et certification d’authenticité</a>
<ul class="nav toc">
<li class="level2"><a href="#installation_du_par-feu">Installation du par-feu :</a></li>
<li class="level2"><a href="#installation_de_la_certification_ssl_au_server_apache_2">Installation de la certification SSL au server Apache 2</a></li>
</ul>
</li>
<li class="level1"><a href="#configuration1">Configuration</a></li>
<li class="level1"><a href="#utilisation">Utilisation</a></li>
<li class="level1"><a href="#desinstallation">Désinstallation</a></li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/wifi" class="wikilink1" title="wifi" rel="tag">wifi</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/securite" class="wikilink1" title="securite" rel="tag">sécurité</a>,
	<a href="/portail_captif" class="wikilink1" title="portail_captif" rel="tag">portail captif</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="coovachilli">CoovaChilli</h1>
<div class="level1">

<p>
<strong>CoovaChilli</strong>,  <a href="https://fr.wikipedia.org/wiki/Fork_(développement_logiciel)" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Fork_(développement_logiciel)">fork</a> du projet abandonné <a href="/chillispot" class="wikilink1" title="chillispot">ChilliSpot</a>, est un <strong><a href="/portail_captif" class="wikilink1" title="portail_captif">portail captif</a></strong>. 
</p>

<p>
Il permet de rediriger tous les clients HTTP d&#039;un réseau vers une page web qui peut demander une authentification et/ou un paiement ou tout simplement demander d&#039;accepter les conditions d&#039;utilisation avant d&#039;accéder à Internet. Cette technique est souvent employée pour les accès Wi-Fi et peut être utilisée aussi pour l&#039;accès à des réseaux filaires (ex. hôtels, campus etc.).
</p>

<p>
Cette page visera à décrire :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> L&#039;installation puis la configuration d&#039;un serveur Freeradius et d&#039; un serveur Freeradius-mysql (en version 2 uniquement ),</div>
</li>
<li class="level1"><div class="li"> L&#039;installation puis la configuration d&#039;un serveur <a href="http://coova.org/CoovaChilli/Binaries" class="urlextern" title="http://coova.org/CoovaChilli/Binaries" rel="nofollow">Coova-chilli-1.2.6</a>, complété d&#039;un par-feu,</div>
</li>
<li class="level1"><div class="li"> L&#039;installation puis l&#039;intégration d&#039;une certification <a href="/tutoriel/securiser_apache2_avec_ssl" class="wikilink1" title="tutoriel:securiser_apache2_avec_ssl">SSL</a> à  CoovaChilli,</div>
</li>
<li class="level1"><div class="li"> La personnalisation de la page d’accès.</div>
</li>
</ul>
<div class="notetip">Les serveurs Freeradius et CoovaChilli fonctionnent cependant la documentation étant toujours en cours de développement,  faites attention car plusieurs informations sont erronées, notamment le chapitre sur CoovaChilli. Alors ne vous lancez pas directement si vous n&#039;avez pas d&#039;expérience sur le sujet.

</div>
</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[CoovaChilli] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="coovachilli" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="64-1421" /><button type="submit" title="CoovaChilli" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Tout pc avec 2 interfaces réseaux.</div>
</li>
<li class="level1"><div class="li"> Un <a href="/lamp" class="wikilink1" title="lamp">serveur LAMP</a>.</div>
</li>
<li class="level1"><div class="li"> Un <a href="/dns" class="wikilink1" title="dns">DNS</a>.</div>
</li>
</ul>
<div class="noteimportant">Le portail captif Coovachilli ne fonctionne qu&#039;avec les édition d&#039;Ubuntu 32 bits (X86 - i386) 
</div>
</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1422-1666" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="fonctionnement">Fonctionnement</h2>
<div class="level2">

<p>
Ceci est le schéma de fonctionnement par défaut :
</p>
<pre class="code">                    ________________                               _____________
                    |    Serveur   |                               |           |
                    |    Hotspot   |                               | Pc-Client |
                    |______________|                               | (Abonné)  |
  Internet          | Radius-Mysql |              )))Wifi((( ======&gt;           | 
     ^              |      ^       |                  ^            |___________| 
     |              |      |       |                  |            
     V              |      V       |                  V             
    DHCP ====Eth0===&gt; CoovaChilli  =Eth1===========&gt;DHCP ou périphérique personnel.          
</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Le périphérique <strong>Eth0</strong> a par exemple l&#039;adresse IP <strong>192.168.0.1</strong></div>
</li>
<li class="level1"><div class="li"> Le périphérique <strong>Eth1</strong> a par exemple l&#039;adresse IP <strong>192.168.1.1</strong></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Fonctionnement] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="fonctionnement" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1667-2634" /><button type="submit" title="Fonctionnement" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="initialisation_du_reseau">Initialisation du reseau</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Initialisation du reseau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="initialisation_du_reseau" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2635-2671" /><button type="submit" title="Initialisation du reseau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="configuration_du_ssh">Configuration du SSH</h3>
<div class="level3">

<p>
En supposant que votre machine soit connectée à votre routeur <strong><abbr title="Asymetric Digital Subscriber Line">ADSL</abbr></strong> (serveur <strong><abbr title="Dynamic Host Configuration Protocol">DHCP</abbr></strong>), vous devrez trouver votre adresse IP en saisissant dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> la <a href="/commande_shell" class="wikilink1" title="commande_shell">commande</a> suivante :
</p>
<pre class="code">ip addr</pre>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Du mal à comprendre le rapport avec la configuration SSH.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Configuration du SSH] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_du_ssh" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2672-2999" /><button type="submit" title="Configuration du SSH" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="configuration_du_reseau">Configuration du réseau :</h3>
<div class="level3">
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/network/interfaces</strong> pour y ajouter ou modifiez les lignes suivantes :<pre class="file">
# L&#039;interface réseau de loopback
auto lo
iface lo inet loopback

# L&#039;interface réseau principale en provenance du routeur
auto eth0
iface eth0 inet dhcp

# L&#039;interface réseau secondaire destinée aux clients
auto eth1</pre>
</div>
</li>
</ol>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Si dans le fichier <strong>/etc/network/interfaces</strong> il y a d&#039;autres nom d&#039;interfaces tel que <strong>ens160 et ens192</strong> à la place de <strong>eth0 eth1</strong> conservez les sinon vous obtiendrez une erreur en tapant <em>service networking restart</em> pour relancer les interface réseaux.
</p>

<p>
On indique ici que :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> l&#039;interface <em>eth0</em> sera reliée au modem adsl/serveur en mode dhcp.</div>
</li>
<li class="level2"><div class="li"> l&#039;interface <em>eth1</em> sera celle qui servira de passerelle avec les clients abonnés.</div>
</li>
</ul>
<ol class=" fix-media-list-overlap">
<li class="level2"><div class="li"> <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez avec les droits d&#039;administration</a> le fichier <strong>/etc/sysctl.conf</strong> pour activer <sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup> le paramètre <em>net.ip4.ip_forward</em><sup><a href="#fn__2" id="fnt__2" class="fn_top">2)</a></sup>. Vous devriez obtenir ceci : <pre class="file"># Uncomment the next line to enable packet forwarding for IPv4
net.ipv4.ip_forward=1</pre>
</div>
</li>
<li class="level2"><div class="li"> Relancez ensuite les interfaces réseaux :<pre class="code">sudo service networking restart</pre>
</div>
</li>
</ol>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Configuration du réseau :] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_du_reseau" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="3000-4349" /><button type="submit" title="Configuration du réseau :" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="installation_et_configuration_du_serveur_radius">Installation et configuration du serveur Radius</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Installation et configuration du serveur Radius] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_et_configuration_du_serveur_radius" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="4350-4409" /><button type="submit" title="Installation et configuration du serveur Radius" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="telechargement_de_freeradius_depuis_les_depots_officiels">Téléchargement de Freeradius depuis les dépôts officiels</h3>
<div class="level3">

<p>
 <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://freeradius,freeradius-mysql" class="interwiki iw_apt" title="apt://freeradius,freeradius-mysql">freeradius freeradius-mysql</a></strong>
</p>

<p>
Ou en ligne de commande : 
</p>
<pre class="code"> sudo apt-get install freeradius freeradius-mysql -y</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Téléchargement de Freeradius depuis les dépôts officiels] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="telechargement_de_freeradius_depuis_les_depots_officiels" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="4410-4709" /><button type="submit" title="Téléchargement de Freeradius depuis les dépôts officiels" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="installation_de_la_base_de_donnee_mysql">Installation de la base de donnée MySQL</h3>
<div class="level3">
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Création de la base de données pour stocker les noms d&#039;utilisateurs et mots de passe :<pre class="code">mysql -u root -p
#Entrer le mot de passe de Mysql.
mysql&gt; CREATE DATABASE radius;
mysql&gt; quit  </pre>
</div>
</li>
<li class="level1"><div class="li"> Importation de la base de données avec les tables créées par les fabricants de Freeradius : <pre class="code">mysql -u root -p radius &lt; /etc/freeradius/sql/mysql/schema.sql
mysql -u root -p radius &lt; /etc/freeradius/sql/mysql/nas.sql
mysql -u root -p
#Entrer le mot de passe de Mysql.
mysql&gt; GRANT ALL PRIVILEGES ON radius.* TO &#039;radius&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;le mot de passe de my sql&#039;;
mysql&gt; FLUSH PRIVILEGES;
mysql&gt; quit</pre>

<p>
<strong>Si vous avez des doutes <img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> (Lesquels?) faites le en <a href="/sudo" class="wikilink1" title="sudo">Superutilisateur</a></strong>
</p>
</div>
</li>
<li class="level1"><div class="li"> Exportez votre base de données pour vérifier : <pre class="code">mysqldump -u root -p radius &gt; /home/&#039;votre_nom_d&#039;utilisateur&#039;/backup.sql</pre>
</div>
</li>
<li class="level1"><div class="li"> <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Modifiez avec les droits d&#039;administration</a> le paramètre suivant dans le fichier <strong>/etc/freeradius/clients.conf</strong> : <pre class="file">client localhost {
    ipaddr = 127.0.0.1
    [# explication commentée
     #sur plusieurs lignes
     #...]
    secret = votre_secret_radius 
     #par defaut : testing123 
}</pre>

<p>
 Utilisez la fonction recherche Ctrl+W sur nano par exemple pour trouver les lignes dans le fichier
</p>
</div>
</li>
</ol>

</div>

<h4 id="reglage_du_fichier_de_configuration">Réglage du fichier de configuration</h4>
<div class="level4">

<p>
La configuration de Freeradius par défaut autorise les noms d&#039;utilisateurs et mots de passe à partir d&#039;un <strong>fichier</strong> se trouvant dans <strong>/etc/freeradius/users</strong>.<br/>

Afin de tester cette configuration avant de déplacer le lien d&#039; autorisation provenant de la fonction <strong>fichier</strong> à la fonction <strong>mysql</strong>, il sera pris pour exemple le nom d&#039;utilisateur « John Doe » auquel le mot de passe « hello » lui sera associé.
</p>

<p>
Éditez le fichier <strong>/etc/freeradius/users</strong> pour décommenter les lignes suivantes :
</p>
<pre class="file"># This is an entry for a user with a space in their name.
# Note the double quotes surrounding the name.
#
&quot;John Doe&quot;      Cleartext-Password := &quot;hello&quot;
                Reply-Message = &quot;Hello, %{User-Name}&quot;
</pre>

<p>
puis redémarrez votre système.
</p>
<pre class="code">sudo shutdown -r now</pre>

</div>

<h4 id="verifier_les_fichiers_de_configuration_freeradius">Vérifier les fichiers de configuration FreeRadius</h4>
<div class="level4">
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> saisissez la <a href="/commande_shell" class="wikilink1" title="commande_shell">commande</a> suivante:<pre class="code">sudo /etc/init.d/freeradius stop
sudo freeradius -XXX</pre>

<p>
Si tout va bien la dernière ligne devrait afficher :
</p>
<pre class="code">Mon Jun 20 18:33:54 2011 : Debug: Ready to process requests. </pre>

<p>
Appuyer sur les touches « Ctrl+C » de votre clavier pour quitter.
</p>
</div>
</li>
<li class="level1"><div class="li"> Redémarrez le serveur Freeradius : <pre class="code">sudo /etc/init.d/freeradius start</pre>
</div>
</li>
<li class="level1"><div class="li"> Testez les autorisations du mot de passe précédemment configuré dans <strong>/etc/freeradius/users</strong> :<pre class="code">sudo radtest &quot;John Doe&quot; hello 127.0.0.1 0 votre_secret_radius</pre>

<p>
Si tout va bien, vous devriez obtenir une réponse comme ceci :
</p>
<pre class="code">Sending Access-Request of id 136 to 127.0.0.1 port 1812
        User-Name = &quot;John Doe&quot;
        User-Password = &quot;hello&quot;
        NAS-IP-Address = 255.255.255.255
        NAS-Port = 0
rad_recv: Access-Accept packet from host 127.0.0.1:1812, id=136, length=37
        Reply-Message = &quot;Hello, John Doe&quot;</pre>
</div>
</li>
</ol>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Installation de la base de donnée MySQL] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_de_la_base_de_donnee_mysql" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="4710-7958" /><button type="submit" title="Installation de la base de donnée MySQL" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="deplacement_des_autorisations_pour_integrer_mysql">Déplacement des autorisations pour intégrer MySql</h3>
<div class="level3">

<p>
Si les tests ci-dessus on réussi, vous pouvez désormais déplacer l&#039;autorisation de la fonction <strong>Fichier</strong> à la fonction <strong>MySql</strong>. Pour cela il faudra éditez le fichier <strong>/etc/freeradius/sites-available/default</strong> et remplacer l’autorisation en commentant/décommentant<sup><a href="#fn__3" id="fnt__3" class="fn_top">3)</a></sup> comme ceci :
</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<tr class="row0">
		<td class="col0"> Fichiers </td><td class="col1"> == </td><td class="col2 rightalign">  files </td><td class="col3 centeralign">  remplacer par   </td><td class="col4 centeralign">  # files  </td>
	</tr>
	<tr class="row1">
		<td class="col0"> MySql </td><td class="col1"> == </td><td class="col2 centeralign">  # sql  </td><td class="col3 centeralign">  remplacer par  </td><td class="col4 centeralign">  sql  </td>
	</tr>
</table></div>
<pre class="file">[...]
#       unix

        #
        #  Read the &#039;users&#039; file
#       files

        #
        #  Look in an SQL database.  The schema of the database
        #  is meant to mirror the &quot;users&quot; file.
        #
        #  See &quot;Authorization Queries&quot; in sql.conf
        sql

        #
        #  If you are using /etc/smbpasswd, and are also doing
        #  mschap authentication, the un-comment this line, and
        #  configure the &#039;smbpasswd&#039; module.
#       smbpasswd
[...]</pre>
<div class="noteimportant">Vous ne pouvez utiliser qu&#039;une seule méthode d&#039;autorisation à un moment, pas les deux. Par conséquent,la fonction <strong>Fichier</strong> a besoin d&#039;être commentée.
Par ailleurs Freeradius tentera toujours d&#039;autoriser <strong> /etc/freeradius/users</strong> avec la fonction<strong> Fichier</strong>, au lieu de la fonction <strong>MySql</strong>.
</div>
</div>

<h4 id="journalisation_de_mysql">Journalisation de MySQL :</h4>
<div class="level4">

<p>
Si vous voulez utiliser des logiciels comme <strong>ezRADIUS</strong> ou <strong>Admin Dialup</strong> vous avez besoin d&#039;activer la journalisation de MySQL.<br/>

</p>
<ol class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Éditez le fichier <strong>/etc/freeradius/sql.conf</strong> pour modifier comme ceci :<pre class="file">sql {
        driver = &quot;rlm_sql_mysql&quot;  
        server = &quot;localhost&quot;(ou x.x.x.x l&#039;ip de votre serveur mysql)
        login = &quot;Votre login mysql&quot;
        password = &quot;le mot de passe de my sql&quot;
        radius_db = &quot;radius&quot;
        [...]
        
}</pre>
</div>
</li>
<li class="level1"><div class="li"> Décommentez la fonction <strong>readclients</strong> pour permettre la lecture du client radius dans la base de donnée (table &#039;nas&#039;) : <pre class="file">readclients = yes ###Changer le manuellement </pre>
</div>
</li>
<li class="level1"><div class="li"> Éditez le fichier <strong>/etc/freeradius/sites-available/default</strong> pour modifier comme ceci :<pre class="file">$INCLUDE ${confdir}/sql.conf
authorize {
	preprocess

	chap
	suffix
	eap {
		ok = return
	}
#	files    ### Changer le manuellement
	sql	 ### Changer le manuellement
	pap
}
authenticate {
	
	Auth-Type PAP {
		pap
	}

	Auth-Type CHAP {
		chap
	}

	Auth-Type eap {
		eap {
			handled = 1  
		}
	}
#	files   ###Changer le manuellement
}
accounting {
	detail
	radutmp

	sql      ###Changer le manuellement
}
session {
	sql      ### Changer le manuellement
}
post-auth {	
	sql
}
#pre-proxy {
#	files  ###Changer le manuellement
#}
post-proxy {
	eap
}</pre>
</div>
</li>
<li class="level1"><div class="li"> Editez le fichier <strong>/etc/freeradius/radiusd.conf</strong> pour décommenter (~ ligne 683) : <pre class="file">$INCLUDE sql.conf   ### Changer le manuellement</pre>
</div>
</li>
</ol>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Déplacement des autorisations pour intégrer MySql] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="deplacement_des_autorisations_pour_integrer_mysql" /><input type="hidden" name="codeblockOffset" value="17" /><input type="hidden" name="range" value="7959-10775" /><button type="submit" title="Déplacement des autorisations pour intégrer MySql" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="ajouter_un_utilisateur_dans_la_base_de_donnee_mysql">Ajouter un  utilisateur dans la base de donnée MySql:</h3>
<div class="level3">

<p>
Exemple :
</p>
<pre class="code">echo &quot;INSERT INTO radcheck (UserName, Attribute, Value) VALUES (&#039;mysqltest&#039;, &#039;Password&#039;, &#039;testsecret&#039;);&quot; | mysql -u root -p radius
#Entrer le mot de passe de Mysql.</pre>

<p>
Coovachilli utilise &quot;chillispot&quot; comme nom d&#039;utilisateur et &quot;chillispot&quot; comme mot de passe pour se connecter au radius par défaut. Ajoutez également cet utilisateur dans la table <em>radcheck</em>.
</p>

<p>
Il faut le définir dans le fichier <strong>/etc/chilli/config</strong> <img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Il n&#039;existe pas de répertoire /chilli dans /etc sur Ubuntu 16.04.2 LTS
</p>
<pre class="code">HS_ADMUSR=chillispot
HS_ADMPWD=chillispot</pre>

<p>
Puis les insérer comme ceci :
</p>
<pre class="code">echo &quot;INSERT INTO radcheck (UserName, Attribute, Value) VALUES (&#039;chillispot&#039;, &#039;Password&#039;, &#039;chillispot&#039;);&quot; | mysql -u root -p radius
#Entrer le mot de passe de Mysql.</pre>

<p>
Ou d&#039;une manière plus détaillé comme ceci :
</p>

</div>

<h5 id="table_usergroup">Table usergroup</h5>
<div class="level5">
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  UserName  </th><th class="col2 centeralign">  GroupName  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  utilisateur  </td><td class="col2 centeralign">  groupe  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  prof1  </td><td class="col2 centeralign">  professeurs  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élève1  </td><td class="col2 centeralign">  élèves  </td>
	</tr>
</table></div>

</div>

<h5 id="table_radcheck">Table radcheck</h5>
<div class="level5">
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  UserName  </th><th class="col2 centeralign">  Attribute  </th><th class="col3 centeralign">  Op  </th><th class="col4 centeralign">  Value  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  utilisateur  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passuser  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  prof1  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passprof  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élève1  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passeleve  </td>
	</tr>
</table></div>

</div>

<h4 id="test_de_la_configuration_de_freeradius_et_de_mysql">Test de la configuration de Freeradius et de Mysql</h4>
<div class="level4">

<p>
Redémarrez le serveur radius: 
</p>
<pre class="code">sudo /etc/init.d/freeradius restart</pre>

<p>
Vérifiez que Freeradius lit bien la base de données :
</p>
<pre class="code">sudo radtest mysqltest testsecret 127.0.0.1 0 votre_secret_radius
sudo radtest chillispot chillispot 127.0.0.1 0 votre_secret_radius</pre>

<p>
Si tout ce passe bien vous devriez avoir le message suivant,
</p>
<pre class="code">Sending Access-Request of id 169 to 127.0.0.1 port 1812
	User-Name = &quot;chillispot&quot;
	User-Password = &quot;chillispot&quot;
	NAS-IP-Address = 127.0.1.1
	NAS-Port = 0
rad_recv: Access-Accept packet from host 127.0.0.1 port 1812, id=169, length=20
</pre>

<p>
<strong>Vous pouvez passer a l&#039;<a href="#installation_et_configuration_de_coovachilli" title="coovachilli ↵" class="wikilink1">installation de Coovachilli</a>.</strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Ajouter un  utilisateur dans la base de donnée MySql:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ajouter_un_utilisateur_dans_la_base_de_donnee_mysql" /><input type="hidden" name="codeblockOffset" value="22" /><input type="hidden" name="range" value="10776-12850" /><button type="submit" title="Ajouter un  utilisateur dans la base de donnée MySql:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit15 page-header" id="installation_et_configuration_de_coovachilli">Installation et configuration de Coovachilli</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Installation et configuration de Coovachilli] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_et_configuration_de_coovachilli" /><input type="hidden" name="codeblockOffset" value="28" /><input type="hidden" name="range" value="12851-12907" /><button type="submit" title="Installation et configuration de Coovachilli" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="installation_de_coovachilli_a_partir_des_fichiers_sources">Installation de CoovaChilli à partir des fichiers Sources</h3>
<div class="level3">
<div class="noteclassic">Pensez à vérifier les mises à jour et utilisez la dernière version. Version 1.4 au 15 déc 2016
</div>
<p>
Dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> saisissez les <a href="/commande_shell" class="wikilink1" title="commande_shell">commandes</a> suivantes:
Installation des prérequis : 
</p>
<pre class="code">sudo apt-get install -y g++ automake autoconf libtool libltdl-dev gengetopt make cmake libssl-dev git</pre>

<p>
Clone du git
</p>
<pre class="code">cd /tmp
git clone https://github.com/coova/coova-chilli/
cd coova-chilli/</pre>

<p>
Changement de branche pour acceder à la v 1.4
</p>
<pre class="code">git checkout -b 1.4
git branch</pre>

<p>
Premier script 
</p>
<pre class="code">./bootstrap</pre>

<p>
Deuxième script : configuration pour la compilation avec options (à rentrer ligne par ligne)
</p>
<pre class="code">./configure  --prefix=/usr --mandir=\$${prefix}/share/man \
--infodir=\$${prefix}/share/info \
--sysconfdir=/etc --localstatedir=/var --enable-largelimits \
--enable-binstatusfile --enable-statusfile --enable-chilliproxy \
--enable-chilliradsec --enable-chilliredir --with-openssl --with-curl \
--with-poll --enable-dhcpopt --enable-sessgarden --enable-dnslog \
--enable-ipwhitelist --enable-redirdnsreq --enable-miniconfig \
--enable-libjson --enable-layer3 --enable-proxyvsa --enable-miniportal \
--enable-chilliscript --enable-eapol --enable-uamdomainfile \
--enable-modules --enable-multiroute</pre>

<p>
Installation 
</p>
<pre class="code">make &amp;&amp; make install</pre>
<div class="noteimportant">Les paquets préfabriqués de Coova-Chilli sont compilés pour i386.<br/>

Pour un PC 64bits et pour éviter les soucis d&#039;identification (MD5, <abbr title="Secure Hash Algorithm">SHA</abbr>, SSL,…), il faudra (pour le moment) compiler à partir des sources téléchargeables sur le site de Coova.org
</div>
</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Installation de CoovaChilli à partir des fichiers Sources] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_de_coovachilli_a_partir_des_fichiers_sources" /><input type="hidden" name="codeblockOffset" value="28" /><input type="hidden" name="range" value="12908-14590" /><button type="submit" title="Installation de CoovaChilli à partir des fichiers Sources" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit17" id="installation_du_packet_haserl_pour_permettre_au_serveur_chilli_de_rediriger_les_clients_vers_la_page_d_accueil">Installation du packet haserl pour permettre au serveur chilli de rediriger les clients vers la page d&#039;accueil</h3>
<div class="level3">
<pre class="code">cd /usr/src
wget http://downloads.sourceforge.net/project/haserl/haserl-devel/haserl-0.9.35.tar.gz
tar zxvf haserl-0.9.35.tar.gz
cd haserl-0.9.35</pre>

<p>
Compilation puis installation de Haserl
</p>
<pre class="code">./configure &amp;&amp; make &amp;&amp; make install</pre>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Installation du packet haserl pour permettre au serveur chilli de rediriger les clients vers la page d&#039;accueil] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_du_packet_haserl_pour_permettre_au_serveur_chilli_de_rediriger_les_clients_vers_la_page_d_accueil" /><input type="hidden" name="codeblockOffset" value="34" /><input type="hidden" name="range" value="14591-14963" /><button type="submit" title="Installation du packet haserl pour permettre au serveur chilli de rediriger les clients vers la page d&#039;accueil" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit18" id="parametrage_du_serveur_hotspot">Paramétrage du serveur hotspot</h3>
<div class="level3">

<p>
Copie du fichier de configuration, et déplacement du dossier <strong>hotspot</strong> sur apache2.
</p>
<pre class="code">sudo -s
cp /etc/chilli/defaults /etc/chilli/config
mkdir /var/www/hotspot
cd /var/www/hotspot
cp /etc/chilli/www/* /var/www/hotspot
mkdir /var/www/hotspot/images
cp /var/www/hotspot/coova.jpg /var/www/hotspot/images/
mkdir /var/www/hotspot/uam
cd /var/www/hotspot/uam</pre>

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> : adresse introuvable : 
</p>
<pre class="code">wget http://ap.coova.org/uam/
wget http://ap.coova.org/js/chilli.js
exit</pre>
<div class="notewarning">Il n&#039;y a plus les IP dans le scripte ChilliLibrary.js. Les modifications suivantes ne sont plus valides (les 3 commandes &#039;sed&#039;)<br/>

Par contre vous devez re-adresser en local le scripte chilli.js<br/>

sed -i &#039;s/ap.coova.org\/js\/chilli.js/.\/chilli.js/g&#039; /var/www/hotspot/uam/index.html
</div>
<p>
Vous donnerez ici l&#039;adresse de l&#039;interface local eth1 au dossier <strong>hotspot</strong>. Pour l&#039;exemple il s&#039;agira de 192.168.1.1 :
</p>
<pre class="code">sed -i &#039;s/ap.coova.org\/js\/chilli.js/192.168.1.1\/uam\/chilli.js/g&#039; /var/www/hotspot/uam/index.html</pre>

<p>
Faites le pont entre l&#039;interface <em>eth0</em> qui héberge le serveur chilli et l&#039;interface du réseau <em>eth1</em> qui hébergera les client abonnés :
</p>
<pre class="code">sed -i &#039;s/192.168.182.1/192.168.1.1/g&#039; /etc/chilli/www/ChilliLibrary.js
sed -i &#039;s/192.168.182.1/192.168.1.1/g&#039; /var/www/hotspot/ChilliLibrary.js</pre>
<div class="noteclassic">Vous pouvez donner à l&#039;interface <em>eth0</em> la valeur 192.168.0.1/24, la valeur 192.168.182.1 étant celle par defaut <img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> du mal à comprendre le sens de la phrase et les adresses 
</div>
</div>

<h4 id="configuration_de_coovachill">Configuration de CoovaChill</h4>
<div class="level4">

<p>
A la fin du fichier <strong>/etc/chilli/up.sh</strong> ajouter la ligne :
</p>
<pre class="code">iptables -I POSTROUTING -t nat -o $HS_WANIF -j MASQUERADE</pre>

<p>
Elle va permettre de transférer ce qui arrive par le Wifi vers l’Ethernet
</p>

<p>
Editer le fichier <strong>/etc/default/chilli</strong> et remplacer
</p>
<pre class="code">START_CHILLI=0</pre>

<p>
par
</p>
<pre class="code">START_CHILLI=1</pre>

<p>
Cela autorise le démarrage de CoovaChilli
</p>

<p>
Editer le fichier <strong>/etc/chilli/wwwsh</strong> et donner l’emplacement exact de haserl à la ligne 9
</p>
<pre class="code">haserl=/usr/local/bin/haserl</pre>

<p>
Editer le fichier <strong>/etc/chilli/config</strong> et modifier ces valeurs en fonction de votre réseau : 
</p>
<pre class="code">HS_WANIF=eth0
HS_LANIF=wlan0
HS_NETWORK=192.168.10.0
HS_UAMLISTEN=192.168.10.1
HS_UAMALLOW=192.168.10.0/24
HS_SSID=PiHomeServerAP
...
HS_RADSECRET=testing123 # Set to be your RADIUS shared secret</pre>

<p>
Le détail des paramètres configurés :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> HS_WANIF est l’interface reliée à Internet</div>
</li>
<li class="level1"><div class="li"> HS_LANIF est l’interface du Wifi/Hotspot</div>
</li>
<li class="level1"><div class="li"> HS_NETWORK le réseau du hotspot</div>
</li>
<li class="level1"><div class="li"> HS_UAMLISTEN la gateway du réseau du hotspot</div>
</li>
<li class="level1"><div class="li"> HS_UAMALLOW les IP du réseau du hotspot autorisées à se connecter</div>
</li>
<li class="level1"><div class="li"> HS_SSID le SSID (ne semble pas avoir d’effet)</div>
</li>
<li class="level1"><div class="li"> HS_RADSECRET la clée secrète du radius défini précédemment dans <strong>/etc/freeradius/clients.conf</strong></div>
</li>
</ul>

<p>
Redémarrez votre ordinateur.<br/>

Testez si la configuration de réseau s&#039;est bien passée en démarrant tout simplement le serveur Chilli :
</p>
<pre class="code">sudo /etc/init.d/chilli start</pre>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Paramétrage du serveur hotspot] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="parametrage_du_serveur_hotspot" /><input type="hidden" name="codeblockOffset" value="36" /><input type="hidden" name="range" value="14964-18031" /><button type="submit" title="Paramétrage du serveur hotspot" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit19" id="configuration_du_serveur_chilli">Configuration du serveur chilli</h3>
<div class="level3">

</div>

<h4 id="instruction">Instruction</h4>
<div class="level4">

<p>
Vous venez de copier le fichier de configuration par <strong>défaults</strong> dans le fichier <strong>config</strong> . Pour charger ces paramètres et démarrer le serveur Chilli, exécutez la commande suivante :
</p>
<pre class="code">sudo service chilli start</pre>

<p>
Cela va générer automatiquement des fichiers <strong>main.conf</strong>, <strong>local.conf</strong> et <strong>hs.conf</strong> dans le dossier <strong>/etc/chili/</strong>. Si vous apportez des modifications aux paramètres à une date ultérieure, ré-exécutez un &quot;chilli start&quot;.
</p>
<div class="noteclassic">Le script d’initialisation <strong>/etc/init.d/chilli</strong> du serveur chilli régénère un fichier <strong>main.conf</strong>. Lorsque vous démarrez le serveur chilli en mode débogage, on obtient le démarrage de Coovachilli sans la régénération de ce <strong>main.conf</strong>. Ainsi, le mode débogage permet d&#039;éditer <strong>main.conf</strong> pour ensuite redémarrer le service normalement.<br/>

Si vous souhaitez redémarrer le serveur chilli en mode débogage il faudra donc taper ceci.
<pre class="code">/etc/init.d/chilli start --debug --fg</pre>

<p>
ou avec les dernières versions simplement :
</p>
<pre class="code">chilli -fd</pre>

</div>
<p>
Par défaut, il sera supposé que :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> le périphérique <em>eth0</em> sera relié à votre connexion internet.</div>
</li>
<li class="level1"><div class="li"> le périphérique <em>eth1</em> sera quand a lui l&#039;interface (passerelle) que vous voudrez connecter avec des clients abonnés. </div>
</li>
</ul>
<div class="noteclassic">Si ce n&#039;était pas le cas, il faudra pratiquer par exemple un changement de configuration avec la fonction <strong>HS_WANIF</strong><sup><a href="#fn__4" id="fnt__4" class="fn_top">4)</a></sup> pour la relier à votre périphérique internet et relier également la fonction <strong>HS_LANIF</strong><sup><a href="#fn__5" id="fnt__5" class="fn_top">5)</a></sup> directement à votre périphérique WiFi.
</div>
<p>
Ensuite avec les dispositifs adéquats vous pourrez configurer et redémarrer le serveur Chilli.
</p>

</div>

<h4 id="configuration">Configuration</h4>
<div class="level4">
<div class="noteclassic">Dans les exemples si dessous. L&#039;adresse de l&#039;interface réseau <em>eth0</em> sera nommé 192.168.<strong>0</strong>.1 et les interfaces <em>eth1</em> ou <em>wlan0</em> seront  nommées 192.168.<strong>1</strong>.1 .
</div>
<p>
Configuration du fichier <strong>/etc/chilli/config</strong>:
</p>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0">Paramètres </th><th class="col1">Explications </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> HS_WANIF=eth0 </td><td class="col1 centeralign">  Nom du périphérique WAN relié vers internet. Laissez le commentaire si vous n&#039;utilisez pas votre propre périphérique wifi.  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> HS_LANIF=eth1 </td><td class="col1 centeralign">  Nom du périphérique relié au point d’accès client (eth1 ou wlan0)  </td>
	</tr>
	<tr class="row3">
		<td class="col0"> HS_NETWORK=192.168.182.0 </td><td class="col1 centeralign">  Définition du réseau d&#039;accueil des clients, ici avec 192.168.182.0, on attribut aux clients des IP du type 192.168.182.x  </td>
	</tr>
	<tr class="row4">
		<td class="col0"> HS_NETMASK=255.255.255.0 </td><td class="col1 centeralign">  Masque du réseau hotspots  </td>
	</tr>
	<tr class="row5">
		<td class="col0"> HS_UAMLISTEN=192.168.182.1 </td><td class="col1 centeralign">  Adresse IP de la passerelle client (eth1 ou wlan0) - doit faire partie du réseau client  </td>
	</tr>
	<tr class="row6">
		<td class="col0"> HS_DNS1=208.67.222.222 </td><td class="col1 centeralign">  Le <abbr title="Domain Name System">DNS</abbr> de votre fournisseur d’accès. Laissez commenté pour utiliser la configuration par défaut. Les <abbr title="Domain Name System">DNS</abbr> utilisés seront alors ceux spécifiés dans votre fichier <strong>/etc/resolv.conf</strong>  </td>
	</tr>
	<tr class="row7">
		<td class="col0"> HS_NASID=nas01 </td><td class="col1 centeralign">  Décommentez sinon l’adresse 0.0.0.0 (NAS-IP-Address) apparaît dans les logs de freeradius  </td>
	</tr>
	<tr class="row8">
		<td class="col0"> HS_RADIUS=localhost </td><td class="col1 centeralign">  Ip ou nom de l’hôte local que vous avez configuré dans <strong>/etc/freeradius/clients.conf</strong> (127.0.0.1)  </td>
	</tr>
	<tr class="row9">
		<td class="col0"> HS_RADIUS2=localhost </td><td class="col1 centeralign">  Ip ou nom de l’hôte local que vous avez configuré dans <strong>/etc/freeradius/clients.conf</strong> (127.0.0.1)  </td>
	</tr>
	<tr class="row10">
		<td class="col0"> HS_RADSECRET=testing123 </td><td class="col1 centeralign">  Votre secret_radius que vous avez configuré dans <strong>/etc/freeradius/clients.conf</strong>  </td>
	</tr>
	<tr class="row11">
		<td class="col0"> HS_UAMAAAURL=<a href="http://my-site/script.php" class="urlextern" title="http://my-site/script.php" rel="nofollow">http://my-site/script.php</a> </td><td class="col1 centeralign">  <a href="http://www.cisco.com/en/US/tech/tk59/technologies_tech_note09186a008069bdc5.shtml" class="urlextern" title="http://www.cisco.com/en/US/tech/tk59/technologies_tech_note09186a008069bdc5.shtml" rel="nofollow">(en) Documentation Cisco sur AAAURL</a>  </td>
	</tr>
	<tr class="row12">
		<td class="col0"> HS_UAMDOMAINS=&quot;.paypal.com,.wikipedia.org&quot; </td><td class="col1 centeralign">  Permet de filtrer des noms de domaine ou <abbr title="Domain Name System">DNS</abbr> dans une &quot;boite secrète&quot;. Attention ceci bloque l&#039;accès aux autres <abbr title="Uniform Resource Locator">URL</abbr>  </td>
	</tr>
	<tr class="row13">
		<td class="col0"> HS_SSID=&lt;ssid&gt; </td><td class="col1 centeralign">  Nom du réseau du SSID si vous utilisez la <abbr title="Wireless Fidelity">WIFI</abbr>  </td>
	</tr>
	<tr class="row14">
		<td class="col0"> HS_UAMSERVER= </td><td class="col1 centeralign">  Il faut remplacer <strong>$HS_UAMLISTEN</strong> par l&#039;adresse du périphérique <em>eth0</em> (<strong>$HS_NETWORK</strong> ou 192.168.0.1)  </td>
	</tr>
	<tr class="row15">
		<td class="col0"> HS_UAMFORMAT= </td><td class="col1 centeralign">  Il faut remplacer l&#039;ancienne syntaxe par <em class="u">https: \$HS_UAMSERVER/uam/</em>   </td>
	</tr>
	<tr class="row16">
		<td class="col0"> HS_UAMSERVICE= </td><td class="col1 centeralign">  Il faut ajouter l&#039;adresse du périphérique <em>eth1</em> <a href="https://peripherique_eth1/cgi-bin/hotspotlogin.cgi" class="urlextern" title="https://peripherique_eth1/cgi-bin/hotspotlogin.cgi" rel="nofollow">https://peripherique_eth1/cgi-bin/hotspotlogin.cgi</a>  </td>
	</tr>
	<tr class="row17">
		<td class="col0"> HS_ADMUSR=chillispot </td><td class="col1 centeralign">  Nom du superutilisateur du serveur chilli (permet la jonction avec MySql).  </td>
	</tr>
	<tr class="row18">
		<td class="col0"> HS_ADMPWD=chillispot </td><td class="col1 centeralign">  Mot de passe du superutilisateur du serveur chilli (permet la jonction avec MySql).  </td>
	</tr>
	<tr class="row19">
		<td class="col0"> HS_LOC_NETWORK=&quot;My Network&quot; </td><td class="col1 centeralign">  Nom du réseau, ou SSID si vous utiliser la <abbr title="Wireless Fidelity">WIFI</abbr>  </td>
	</tr>
	<tr class="row20">
		<td class="col0"> HS_LOC_AC=408 </td><td class="col1 centeralign">  HS_LOC_AC=87000  </td>
	</tr>
	<tr class="row21">
		<td class="col0"> HS_LOC_CC=1 </td><td class="col1 centeralign">  HS_LOC_CC=33 (suffix téléphonique +33)  </td>
	</tr>
	<tr class="row22">
		<td class="col0"> HS_LOC_ISOCC=US </td><td class="col1 centeralign">  HS_LOC_ISOCC=FR ( <a href="http://fr.wikipedia.org/wiki/ISO_3166-2" class="urlextern" title="http://fr.wikipedia.org/wiki/ISO_3166-2" rel="nofollow">Voir doc wikipedia</a> )  </td>
	</tr>
</table></div>

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Configuration du serveur chilli] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_du_serveur_chilli" /><input type="hidden" name="codeblockOffset" value="46" /><input type="hidden" name="range" value="18032-22643" /><button type="submit" title="Configuration du serveur chilli" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit21" id="creer_et_configurer_une_page_de_connexion">Créer et configurer une page de connexion</h3>
<div class="level3">

<p>
Vous avez besoin de créer une page de connexion qu&#039; heureusement les créateurs de Coovachilli fournisse avec le paquet .deb à travers le script <strong>hotspotlogin.cgi</strong><br/>

Pour trouver ce fichier, saisissez dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> la <a href="/commande_shell" class="wikilink1" title="commande_shell">commande</a> suivante:
</p>
<pre class="code">sudo find / | grep &#039;hotspotlogin.cgi&#039;</pre>

<p>
L&#039;exemple donné ici sera <strong>/usr/share/doc/coova-chilli/hotspotlogin.cgi.gz</strong><br/>

</p>

<p>
Créez un nouveau répertoire dans la racine du serveur Apache2 et copiez-y le fichier <strong>hotspotlogin.cgi</strong>
</p>
<pre class="code">sudo mkdir -p /var/www/hotspot/cgi-bin
zcat -c /usr/share/doc/coova-chilli/hotspotlogin.cgi.gz | sudo tee /var/www/hotspot/cgi-bin/hotspotlogin.cgi</pre>

<p>
Rendez-le exécutable :
</p>
<pre class="code">sudo chmod a+x /var/www/hotspot/cgi-bin/hotspotlogin.cgi</pre>

<p>
Editez le script <strong>/var/www/hotspot/cgi-bin/hotspotlogin.cgi</strong> afin de décommenter et de modifier le « secret UAM » comme ceci :
</p>
<pre class="code">$uamsecret = &quot;votre_secret_UAM&quot;;
$userpassword=1;</pre>
<div class="noteclassic">Le langage de ce <strong>.cgi</strong> (Common Gateway Interface) étant du Perl<sup><a href="#fn__6" id="fnt__6" class="fn_top">6)</a></sup>, si vous souhaitiez modifier le script, n&#039;incluez pas de balise <abbr title="HyperText Markup Language">HTML</abbr> classique. Editez-le comme ceci :
<pre class="code">print &lt;&lt;ENDHTML;
....Ici vous pourrez coder en Html.....

ENDHTML </pre>

</div>
</div>
<div class='secedit editbutton_section editbutton_21'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Créer et configurer une page de connexion] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="creer_et_configurer_une_page_de_connexion" /><input type="hidden" name="codeblockOffset" value="49" /><input type="hidden" name="range" value="22644-24011" /><button type="submit" title="Créer et configurer une page de connexion" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit22 page-header" id="securite_et_certification_d_authenticite">Sécurité et certification d’authenticité</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_22'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Sécurité et certification d’authenticité] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="securite_et_certification_d_authenticite" /><input type="hidden" name="codeblockOffset" value="54" /><input type="hidden" name="range" value="24012-24070" /><button type="submit" title="Sécurité et certification d’authenticité" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit23" id="installation_du_par-feu">Installation du par-feu :</h3>
<div class="level3">

<p>
Les créateurs de CoovaChilli ont des règles prédéfinies pour <a href="/iptables" class="wikilink1" title="iptables">iptables</a>, mais leur script a besoin d&#039;un peu d&#039;aide avant que ça fonctionne. L&#039; iptables de CoovaChilli est configuré dans le script <strong>/etc/chili/up.sh</strong> qui déclenche l&#039;interface TUN/TAP mise en place.
Ce déclenchement se fait en fonction du contenu du script <strong>/etc/chili/ipup.sh</strong> qui n&#039;existe pas par défaut. Créez le fichier <strong>/etc/chili/ipup.sh</strong> si besoin est.
</p>
<div class="noteclassic">Dans les réseaux informatiques, TUN et TAP sont  des périphériques virtuels dans le &quot;Kernel réseau&quot; (Noyaux réseau). Ce sont des dispositifs réseau qui sont entièrement à la charge du logiciel. Ils sont différents des périphériques réseaux ordinaires qui sont eux des adaptateurs réseaux matériel.
</div>
<p>
Pour &quot;aider&quot; Coova Chilli, ajoutez ces lignes à la fin du fichier  <strong>/etc/chilli/ipup.sh</strong> :
</p>
<pre class="code">[ -e &quot;/var/run/chilli.iptables&quot; ] &amp;&amp; sh /var/run/chilli.iptables 2&gt;/dev/null
iptables -I POSTROUTING -t nat -o $HS_WANIF -j MASQUERADE
# Exemple HTTP :
iptables -t nat -A logging -p tcp --dport 80 -j LOG --log-prefix &quot;HTTP: &quot; \
--log-level info
# Exemple HTTPS :
iptables -t nat -A logging -p tcp --dport 443 -j LOG --log-prefix &quot;HTTPS: &quot; \
--log-level info
# Exemple MSN :
iptables -t nat -A logging -p tcp --dport 1863 -j LOG --log-prefix &quot;MSN: &quot; \
--log-level info</pre>

<p>
Pour le rendre exécutable :
</p>
<pre class="code">chmod +x /etc/chilli/ipup.sh</pre>

<p>
Dans la configuration ci-dessus, vous avez relié le serveur <abbr title="Domain Name System">DNS</abbr> au périphériques locaux. C&#039;est pourquoi, votre système doit posséder un serveur <abbr title="Domain Name System">DNS</abbr> que vous pouvez installer à partir de <a href="/tasksel" class="wikilink1" title="tasksel">tasksel</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_23'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Installation du par-feu :] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_du_par-feu" /><input type="hidden" name="codeblockOffset" value="54" /><input type="hidden" name="range" value="24071-25744" /><button type="submit" title="Installation du par-feu :" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit24" id="installation_de_la_certification_ssl_au_server_apache_2">Installation de la certification SSL au server Apache 2</h3>
<div class="level3">

<p>
Suivre cette documentation : <a href="/tutoriel/securiser_apache2_avec_ssl" class="wikilink1" title="tutoriel:securiser_apache2_avec_ssl">securiser_apache2_avec_ssl</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_24'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Installation de la certification SSL au server Apache 2] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_de_la_certification_ssl_au_server_apache_2" /><input type="hidden" name="codeblockOffset" value="56" /><input type="hidden" name="range" value="25745-25881" /><button type="submit" title="Installation de la certification SSL au server Apache 2" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit25 page-header" id="configuration1">Configuration</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>
<div class='secedit editbutton_section editbutton_25'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration1" /><input type="hidden" name="codeblockOffset" value="56" /><input type="hidden" name="range" value="25882-25916" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit26 page-header" id="utilisation">Utilisation</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>
<div class='secedit editbutton_section editbutton_26'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation" /><input type="hidden" name="codeblockOffset" value="56" /><input type="hidden" name="range" value="25917-25948" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit27 page-header" id="desinstallation">Désinstallation</h2>
<div class="level2">

<p>
Pour désinstaller CoovaChilli saisissez dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> les <a href="/commande_shell" class="wikilink1" title="commande_shell">commandes</a> suivantes :
</p>
<pre class="code">sudo rm /var/lib/dpkg/info/coova-chilli.prerm
sudo dpkg --remove --force-remove-reinstreq coova-chilli
sudo dpkg --purge --force-remove-reinstreq coova-chilli</pre>

</div>
<div class='secedit editbutton_section editbutton_27'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Désinstallation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="desinstallation" /><input type="hidden" name="codeblockOffset" value="56" /><input type="hidden" name="range" value="25949-26264" /><button type="submit" title="Désinstallation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit28 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>(en)</strong> <a href="http://www.coova.org/CoovaChilli" class="urlextern" title="http://www.coova.org/CoovaChilli" rel="nofollow">Site officiel</a></div>
</li>
<li class="level1"><div class="li"> <strong>(en-us)</strong> <a href="https://help.ubuntu.com/community/WifiDocs/CoovaChilli" class="urlextern" title="https://help.ubuntu.com/community/WifiDocs/CoovaChilli" rel="nofollow">Documentation Ubuntu Officiel </a> de Coova Chilli.</div>
</li>
<li class="level1"><div class="li"> <strong>(en)</strong> <a href="http://linux.xvx.cz/2010/03/debian-wi-fi-hotspot-using-coovachilli-freeradius-mysql-and-daloradius/" class="urlextern" title="http://linux.xvx.cz/2010/03/debian-wi-fi-hotspot-using-coovachilli-freeradius-mysql-and-daloradius/" rel="nofollow">linux.xvx.cz Documentation de Coova Chilli</a> sous la distribution linux debian.</div>
</li>
<li class="level1"><div class="li"> <strong>(en-hindou)</strong> <a href="http://manajung.blogspot.com/2010/09/ubuntu-wi-fi-hotspot-using-coovachilli.html" class="urlextern" title="http://manajung.blogspot.com/2010/09/ubuntu-wi-fi-hotspot-using-coovachilli.html" rel="nofollow">Le Blogspot de Manajung</a> qui explique comment installer Coova Chilli.</div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs principaux : <a href="/utilisateurs/erwik666" class="wikilink1" title="utilisateurs:erwik666">erwik666</a>, <a href="/utilisateurs/herrleiche" class="wikilink1" title="utilisateurs:herrleiche">Herrleiche</a>, <a href="/utilisateur/benjy4537" class="wikilink2" title="utilisateur:benjy4537" rel="nofollow">benjy4537</a></em>
</p>

</div>
<div class='secedit editbutton_section editbutton_28'><form class="button btn_secedit form-inline" method="post" action="/coovachilli"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1580765450" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="voir_aussi" /><input type="hidden" name="codeblockOffset" value="57" /><input type="hidden" name="range" value="26265-" /><button type="submit" title="Voir aussi" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div><hr/><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">décommenter en retirant le dièse #</div></div>
<div class="fn"><sup><a href="#fnt__2" id="fn__2" class="fn_bot">2)</a></sup> 
<div class="content">ligne 28</div></div>
<div class="fn"><sup><a href="#fnt__3" id="fn__3" class="fn_bot">3)</a></sup> 
<div class="content">ajouter/ôter un dièse #</div></div>
<div class="fn"><sup><a href="#fnt__4" id="fn__4" class="fn_bot">4)</a></sup> 
<div class="content"><strong>W</strong>ireless</div></div>
<div class="fn"><sup><a href="#fnt__5" id="fn__5" class="fn_bot">5)</a></sup> 
<div class="content"><strong>L</strong>an</div></div>
<div class="fn"><sup><a href="#fnt__6" id="fn__6" class="fn_bot">6)</a></sup> 
<div class="content">langage interprété par le navigateur, tout comme le Php, ou le Java Script</div></div>
</div>

</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="coovachilli.txt">coovachilli.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 03/02/2020, 22:30">Le 03/02/2020, 22:30</span></li><li class="text-muted">par 86.234.166.156</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=coovachilli&amp;1635547769" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

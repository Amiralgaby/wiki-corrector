<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>proftpd [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="xenial,serveur,reseau,ftp,brouillon"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/proftpd?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/proftpd?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/proftpd"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/proftpd"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/proftpd"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"proftpd","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="proftpd">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/proftpd?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/proftpd?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/proftpd?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/proftpd?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/proftpd?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/proftpd?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/proftpd?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">proftpd</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/proftpd?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/proftpd?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/proftpd?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#installation","title":"Installation","level":1},{"link":"#configuration","title":"Configuration","level":1},{"link":"#configuration_avec_inetd","title":"Configuration avec inetd","level":2},{"link":"#configuration_pour_le_mode_passif","title":"Configuration pour le mode passif","level":2},{"link":"#redemarrer_proftpd","title":"Red\u00e9marrer Proftpd","level":2},{"link":"#utiliser_votre_serveur_ftp","title":"Utiliser votre serveur ftp","level":1},{"link":"#interface_graphique","title":"Interface graphique","level":1},{"link":"#bugs_frequents","title":"Bugs fr\u00e9quents","level":1},{"link":"#activation_de_proftpd","title":"Activation de ProFTPd","level":2},{"link":"#module_memcache","title":"Module memcache","level":2}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#installation">Installation</a></li>
<li class="level1"><a href="#configuration">Configuration</a>
<ul class="nav toc">
<li class="level2"><a href="#configuration_avec_inetd">Configuration avec inetd</a></li>
<li class="level2"><a href="#configuration_pour_le_mode_passif">Configuration pour le mode passif</a></li>
<li class="level2"><a href="#redemarrer_proftpd">Redémarrer Proftpd</a></li>
</ul>
</li>
<li class="level1"><a href="#utiliser_votre_serveur_ftp">Utiliser votre serveur ftp</a></li>
<li class="level1"><a href="#interface_graphique">Interface graphique</a></li>
<li class="level1"><a href="#bugs_frequents">Bugs fréquents</a>
<ul class="nav toc">
<li class="level2"><a href="#activation_de_proftpd">Activation de ProFTPd</a></li>
<li class="level2"><a href="#module_memcache">Module memcache</a></li>
</ul></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/xenial" class="wikilink1" title="xenial" rel="tag">Xenial</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/ftp" class="wikilink1" title="ftp" rel="tag">ftp</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="serveur_ftpproftpd">Serveur FTP : PROFTPD</h1>
<div class="level1">

<p>
Proftpd est sûrement l&#039;un des meilleurs serveurs <abbr title="File Transfer Protocol">FTP</abbr> disponibles. Il vous offrira énormément de possibilités mais n&#039;est pas facile à maîtriser pour un débutant,
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Serveur FTP : PROFTPD] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="serveur_ftpproftpd" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="54-259" /><button type="submit" title="Serveur FTP : PROFTPD" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="installation">Installation</h2>
<div class="level2">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez le paquet</a> <strong><a href="apt://proftpd-basic" class="interwiki iw_apt" title="apt://proftpd-basic">proftpd-basic</a></strong>.
</p>

<p>
A la question « Lancer ProFTPd à partir d&#039;inetd ou indépendamment ? », à moins de savoir ce que vous faites, répondez <strong>indépendamment</strong> (en fait si c&#039;est pour un &quot;petit serveur <abbr title="File Transfer Protocol">FTP</abbr> léger&quot; préférez <a href="https://fr.wikipedia.org/wiki/inetd" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/inetd">inetd</a>, pour un &quot;gros serveur <abbr title="File Transfer Protocol">FTP</abbr> puissant&quot; choisissez indépendant).
</p>

<p>
Et voilà, vous avez un serveur ftp, enfin presque !
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="260-716" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="configuration">Configuration</h2>
<div class="level2">

<p>
<a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditer le fichier</a> de configuration de proftpd : <strong>/etc/proftpd/proftpd.conf</strong>
</p>

<p>
Voilà les paramètres intéressants à changer pour une utilisation de base (si vous voulez plus de détail référez-vous à la documentation) :
</p>
<pre class="file">ServerName : le nom de votre serveur ftp</pre>

<p>
Quotas on : enlevez le # devant la ligne pour la décommenter si vous voulez utiliser les quotas
</p>

<p>
Trouvez et décommentez les lignes suivantes (en retirant les # au début de chaque ligne) pour autoriser un accès anonyme &quot;standard&quot; :
</p>
<pre class="file"># A basic anonymous configuration, no upload directories.

 &lt;Anonymous ~ftp&gt;
   User                         ftp
   Group                        nogroup
   # We want clients to be able to login with &quot;anonymous&quot; as well as &quot;ftp&quot;
   UserAlias                    anonymous ftp
   # Cosmetic changes, all files belongs to ftp user
   DirFakeUser  on ftp
   DirFakeGroup on ftp
 
   RequireValidShell            off
 
   # Limit the maximum number of anonymous logins
   MaxClients                   10
 
   # We want &#039;welcome.msg&#039; displayed at login, and &#039;.message&#039; displayed
   # in each newly chdired directory.
   DisplayLogin                 welcome.msg
   DisplayFirstChdir            .message
 
   # Limit WRITE everywhere in the anonymous chroot
   &lt;Directory *&gt;
     &lt;Limit WRITE&gt;
       DenyAll
     &lt;/Limit&gt;
   &lt;/Directory&gt;
 &lt;/Anonymous&gt;</pre>

<p>
Faites bien attention à décommenter le dernier paragraphe (intitulé &quot;Limit WRITE everywhere in the anonymous chroot&quot;), sinon l&#039;utilisateur anonyme aura un accès en écriture dans le répertoire /home/ftp.
Par contre, ne décommentez pas la suite (intitulée &quot;Uncomment this if you&#039;re brave&quot;: &quot;Décommentez ceci si vous en avez le courage&quot;).
</p>

<p>
Vous pouvez autoriser de se logger en root sur le ftp en ajoutant la ligne suivante (le root login est interdit par défaut) : 
</p>
<pre class="file">RootLogin on</pre>

<p>
 puis en enlevant l&#039;utilisateur <code>root</code> du fichier <strong>/etc/ftpusers</strong>.
</p>

<p>
Une fois la configuration modifiée, relancez le serveur avec la commande suivante :
</p>
<pre class="code">sudo service proftpd restart</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="717-2847" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="configuration_avec_inetd">Configuration avec inetd</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez le paquet</a> <strong><a href="apt://inetd" class="interwiki iw_apt" title="apt://inetd">inetd</a></strong>.
</p>

<p>
Puis <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">ajoutez</a> dans <strong>/etc/inetd.conf</strong> :
</p>
<dl class="file">
<dt><a href="/_export/code/proftpd?codeblock=3" title="Télécharger cet extrait" class="mediafile mf_conf">/etc/inetd.conf</a></dt>
<dd><pre class="file">ftp stream tcp nowait root /usr/sbin/tcpd /usr/sbin/proftpd</pre>
</dd></dl>

<p>
Si vous n&#039;avez pas installé proftpd avec l&#039;option inetd, vous pouvez changer ce paramètre dans le fichier de configuration de proftpd : 
</p>
<dl class="file">
<dt><a href="/_export/code/proftpd?codeblock=4" title="Télécharger cet extrait" class="mediafile mf_conf">/etc/proftpd/proftpd.conf</a></dt>
<dd><pre class="file">ServerType inetd</pre>
</dd></dl>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Configuration avec inetd] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_avec_inetd" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="2848-3336" /><button type="submit" title="Configuration avec inetd" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="configuration_pour_le_mode_passif">Configuration pour le mode passif</h3>
<div class="level3">

<p>
Concernant le transfert de fichiers en <abbr title="File Transfer Protocol">FTP</abbr> il existe deux méthodes : passif ou actif
</p>

<p>
Le mode le plus simple est le transfert en mode actif, où le port utilisé est le port 20 (le port 21 ne sert qu&#039;à initier la connexion et envoyer des commandes)
</p>

<p>
La deuxième méthode consiste à utiliser le mode passif : une plage de ports est utilisée, ces ports étant attribués selon la configuration du serveur et le nombre d&#039;utilisateurs.
Par défaut, la plupart des clients <abbr title="File Transfer Protocol">FTP</abbr> transfèrent les fichiers en mode passif et il est donc utile de s&#039;occuper de cette partie de la configuration.
</p>

<p>
Pour configurer la plage de ports utilisée on rajoute au fichier dans la partie générale :
</p>
<pre class="code">PassivePorts 5000 5100</pre>

<p>
Où 5000 représente le premier port utilisé et 5100 le dernier. Il est déconseillé d&#039;utiliser des numéros de ports trop bas (inférieurs à 1024) généralement réservés (HTTP, SSH etc…)
</p>

<p>
Chaque utilisateur occupe environ 5 ports à chaque transferts, à vous de voir combien de ports vous devrez ouvrir.
</p>

<p>
Si cette configuration suffit pour un réseau local (après ouverture des ports dans votre pare-feu), il sera plus problématique d&#039;utiliser le <abbr title="File Transfer Protocol">FTP</abbr> à distance (sur internet) si vous utilisez un routeur et le <abbr title="Network Address Translation">NAT</abbr> (partage de connexion).
Pour ce faire, il vous faudra tout d&#039;abord rediriger les ports 20 et 21 (si on conserve la configuration de base à ce niveau) puis les ports utilisés pour le <abbr title="File Transfer Protocol">FTP</abbr> passif (ici 5000 à 5100). Consultez la documentation de votre routeur pour cela.
</p>

<p>
Le reste de la configuration s&#039;effectue au niveau du serveur: en effet pour effectuer un transfert en mode passif, le serveur doit spécifier l&#039;adresse ip publique du serveur. Il faut donc lui indiquer dans le fichier de configuration (si vous avez une connexion avec IP dynamique cela risque de poser problème et je vous déconseille de faire du <abbr title="File Transfer Protocol">FTP</abbr> en passif dans ce cas-là)
</p>
<pre class="file">#
# /etc/proftpd.conf -- Masquerade avec Virtual Host Local .
# 
ServerType			standalone

MultilineRFC2228		on

# To prevent DoS attacks, set the maximum number of child processes
# to 30.  If you need to allow more than 30 concurrent connections
# at once, simply increase this value.  Note that this ONLY works
# in standalone mode, in inetd mode you should use an inetd server
# that allows you to limit maximum number of processes per service
# (such as xinetd)
MaxInstances			30

# Some logging formats
LogFormat         default &quot;%h %l %u %t \&quot;%r\&quot; %s %b&quot;
LogFormat			auth    &quot;%v [%P] %h %t \&quot;%r\&quot; %s&quot;
LogFormat			write   &quot;%h %l %u %t \&quot;%r\&quot; %s %b&quot;

# Global settings
&lt;Global&gt;

DeferWelcome			off

#DefaultServer			on
#ShowSymlinks			on
ListOptions                	&quot;-l&quot;
DenyFilter			\*.*/
# Utilisation de NIS ou LDAP:
#PersistentPasswd		off
# Utilisation de TLS:
#TLSEngine 			on
# Utilisation des Quotas:
#Quotas				on
# Utilisation des Ratio:
#Ratios				on

DisplayConnect 			before.msg
DisplayLogin                    welcome.msg
DisplayFirstChdir               .message

MaxLoginAttempts	2
RequireValidShell	no
MaxClients		50

# Umask 022 interdit l&#039;écriture et la creation de fichier et de répertoire.
Umask				022  022
TimeoutLogin         		120
TimeoutNoTransfer		900
TimeoutStalled			3600
TimeoutIdle			600
# Delay engine reduces impact of the so-called Timing Attack described in
# http://security.lss.hr/index.php?page=details&amp;ID=LSS-2004-10-02
# It is on by default. 
#DelayEngine 			off

# utilisateur et groupe du serveur.
User				ftp
Group				nogroup
# Chroot PROFTPD
DefaultRoot ~

# Logging options
TransferLog			/var/spool/syslog/proftpd/xferlog.legacy


# Turn off Ident lookups
	#
	IdentLookups         off
	#
	# Logging
	#
	# file/dir access
	#
	ExtendedLog		/var/spool/syslog/proftpd/globaccess.log WRITE,READ write
	#
	#
	# Record all logins
	#
	ExtendedLog		/var/spool/syslog/proftpd/globauth.log AUTH auth
	#
	# Paranoia logging level....
	#
   ##ExtendedLog    /var/spool/syslog/proftpd/paranoid.log ALL default

#
# Deny writing to the base server...
#
&lt;Limit WRITE&gt;
	DenyAll
&lt;/Limit&gt;

# --------------------------------------------
	# Got a Frontpage customer who keeps breaking things????
	#  - stick &#039;em in group fpage
	# --------------------------------------------
	&lt;Directory ~/public_html&gt;
	#
	# Block them from doing anything other than reading...
	#
		&lt;Limit STOR RNFR DELE&gt;
			DenyGroup fpage
		&lt;/Limit&gt;	
	&lt;/Directory&gt;
	#
	# ditto for ftp_root if it&#039;s there...
	#
	&lt;Directory ~/ftp_root&gt;
		&lt;Limit STOR RNFR DELE&gt;
			DenyALL
		&lt;/Limit&gt;	
	&lt;/Directory&gt;
	#
	# Limit by IP...
	#
	#&lt;Directory /web/zsl&gt;
	#	&lt;Limit ALL&gt;
	#		Order Allow,Deny
	#		Allow 195.200.31.220
	#		Allow 212.32.17.0/26
	#		Deny ALL
	#	&lt;/Limit&gt;
	#&lt;/Directory&gt;	


 &lt;Anonymous ~ftp&gt;
   User				ftp
   Group			nogroup
#   # Alias pour la connection de l utilisateur anonyme
   UserAlias			anonymous ftp
#   # n&#039;utiliser que des alias authentifiés
   AuthAliasOnly on
#   # Cosmetic changes, all files belongs to ftp user
   DirFakeUser	on ftp
   DirFakeGroup on ftp
# Hide all files owned by user &#039;root&#039;
   HideUser			root
# 
   RequireValidShell		off
# 
  # Message et nombre maximum de connections
  MaxClients			50 &quot;Désolé, le maximum de %m utilisateurs est atteint -- réessayez plus tard&quot;

#   # Limit WRITE everywhere in the anonymous chroot
   &lt;Directory *&gt;
     &lt;Limit RMD DELE MKD STOR WRITE&gt;
        DenyAll
     &lt;/Limit&gt;
     &lt;Limit CWD READ&gt;
        AllowAll
     &lt;/Limit&gt;
	
   &lt;/Directory&gt;
&lt;/Anonymous&gt;

&lt;/Global&gt;



# Connexion anonyme et des utilisateur à partir du net de du réseau local
# --------------------------------------------
&lt;VirtualHost 192.168.2.2&gt;
	ServerAdmin		aide_gnu_linux@yahoo.fr
	ServerName		&quot;ftp.cereli.org&quot;
	# Port mode PASSV 
        PassivePorts 5000 5100
        # Addresse de Masquage !!! A REMPLACER PAR LA VOTRE !!!
        MasqueradeAddress  XXX.XXX.XXX.XXX
	Port			21
	
&lt;/VirtualHost&gt;

# Hôte Virtuel Pour le réseau local
# !!! A remplacer par l&#039;adresse</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Configuration pour le mode passif] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_pour_le_mode_passif" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="3337-9309" /><button type="submit" title="Configuration pour le mode passif" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="redemarrer_proftpd">Redémarrer Proftpd</h3>
<div class="level3">

<p>
- Pour le mode &quot;indépendant&quot;:
Une fois les deux paramètres modifiés, on demande au serveur de prendre en compte la nouvelle configuration en le relançant:
</p>
<pre class="code">sudo service proftpd restart</pre>

<p>
- Pour le mode &quot;inetd&quot;:
il suffit de se (re)connecter.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Redémarrer Proftpd] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="redemarrer_proftpd" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="9310-9589" /><button type="submit" title="Redémarrer Proftpd" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="utiliser_votre_serveur_ftp">Utiliser votre serveur ftp</h2>
<div class="level2">

<p>
Les utilisateurs de la machine ont un accès ftp en lecture/écriture à leur dossier personnel avec leur login et leur mot de passe habituel.
</p>

<p>
De plus, tout le monde a un accès anonyme avec le login &quot;anonymous&quot; ou &quot;ftp&quot; et n&#039;importe quel mot de passe. Le dossier auquel ils ont accès est /home/ftp : tous les fichiers et dossiers que vous y mettrez pourront être consultés par tous.
</p>

<p>
Vous pouvez à tout moment voir qui est connecté à votre serveur avec la commande
</p>
<pre class="code">ftpwho</pre>

<p>
et voir les statistiques avec :
</p>
<pre class="code">ftpstats</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Utiliser votre serveur ftp] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utiliser_votre_serveur_ftp" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="9590-10155" /><button type="submit" title="Utiliser votre serveur ftp" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit8 page-header" id="interface_graphique">Interface graphique</h2>
<div class="level2">

<p>
Vous pouvez malgré tout utiliser une interface graphique pour gérer proftpd.
</p>

<p>
Elle se nomme <a href="/gproftpd" class="wikilink1" title="gproftpd">gproftpd</a>.
</p>

<p>
Remarque : attention Gadmin est buggé, à ne pas utiliser pour la 12.04 LTS
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Interface graphique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interface_graphique" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="10156-10376" /><button type="submit" title="Interface graphique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit9 page-header" id="bugs_frequents">Bugs fréquents</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Bugs fréquents] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="bugs_frequents" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="10377-10405" /><button type="submit" title="Bugs fréquents" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="activation_de_proftpd">Activation de ProFTPd</h3>
<div class="level3">

<p>
Il est possible que l&#039;on n&#039;arrive pas à activer proftpd, diverses erreurs s&#039;affichent donc dans le terminal.
</p>

<p>
Pour corriger ce problème il suffit de créer le dossier var de proftpd via cette commande:
</p>
<pre class="code">sudo mkdir /var/run/proftpd/</pre>

<p>
Tout devrait fonctionner maintenant.
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Activation de ProFTPd] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="activation_de_proftpd" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="10406-10713" /><button type="submit" title="Activation de ProFTPd" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="module_memcache">Module memcache</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Il faut commenter le chargement du module memcache dans &quot;/etc/proftpd/modules.conf&quot;. Pour cela, procédez comme suit :
</p>
<pre class="file">$ sudo nano /etc/proftpd/modules.conf</pre>

<p>
Et commentez la ligne :
</p>
<pre class="file">LoadModule mod_tls_memcache.c</pre>

<p>
Ajouter un # en début de ligne.
</p>

<p>
Redémarrer le service &quot;proftpd&quot; :
</p>
<pre class="file">$ sudo /etc/init.d/proftpd restart</pre>

<p>
Aucun message d&#039;avertissement ne devrait plus apparaître.
</p>
<hr />

<p>
<em>Contributeurs: <a href="/utilisateurs/eks" class="wikilink2" title="utilisateurs:eks" rel="nofollow">eks</a>, <a href="/utilisateurs/skateinmars" class="wikilink1" title="utilisateurs:skateinmars">skateinmars</a>, <a href="/utilisateurs/benje" class="wikilink1" title="utilisateurs:benje">benje</a>, <a href="/utilisateurs/boris_le_hachoir" class="wikilink2" title="utilisateurs:boris_le_hachoir" rel="nofollow">Boris Le Hachoir</a>,</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/proftpd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1570463208" /><input type="hidden" name="summary" value="[Module memcache] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="module_memcache" /><input type="hidden" name="codeblockOffset" value="7" /><input type="hidden" name="range" value="10714-" /><button type="submit" title="Module memcache" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="proftpd.txt">proftpd.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 07/10/2019, 17:46">Le 07/10/2019, 17:46</span></li><li class="text-muted">par L&#039;Africain</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=proftpd&amp;1635561253" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

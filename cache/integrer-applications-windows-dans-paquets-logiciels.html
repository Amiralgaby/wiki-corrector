<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>integrer-applications-windows-dans-paquets-logiciels [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="integrer-applications-windows-dans-paquets-logiciels"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/integrer-applications-windows-dans-paquets-logiciels?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/integrer-applications-windows-dans-paquets-logiciels?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/integrer-applications-windows-dans-paquets-logiciels"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/integrer-applications-windows-dans-paquets-logiciels"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/integrer-applications-windows-dans-paquets-logiciels"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"integrer-applications-windows-dans-paquets-logiciels","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="integrer-applications-windows-dans-paquets-logiciels">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/integrer-applications-windows-dans-paquets-logiciels?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">integrer-applications-windows-dans-paquets-logiciels</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/integrer-applications-windows-dans-paquets-logiciels?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#etape_1recuperer_le_prefixe_wine","title":"\u00c9tape 1 : R\u00e9cup\u00e9rer le pr\u00e9fixe Wine","level":1},{"link":"#etape_2modifier_puis_compiler_wine","title":"\u00c9tape 2 : Modifier  puis compiler Wine","level":1},{"link":"#etape_3script_bash_pour_lancer_le_programme","title":"\u00c9tape 3 : Script bash pour lancer le programme","level":1},{"link":"#etape_4script_python_zenity_gui_gtk_pour_lancer_votre_script_d_application","title":"\u00c9tape 4 : Script python zenity (gui GTK) pour lancer votre script d'application","level":1},{"link":"#etape_5creer_votre_paquet_logiciel","title":"\u00c9tape 5 : Cr\u00e9er votre paquet logiciel","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#etape_1recuperer_le_prefixe_wine">Étape 1 : Récupérer le préfixe Wine</a></li>
<li class="level1"><a href="#etape_2modifier_puis_compiler_wine">Étape 2 : Modifier  puis compiler Wine</a></li>
<li class="level1"><a href="#etape_3script_bash_pour_lancer_le_programme">Étape 3 : Script bash pour lancer le programme</a></li>
<li class="level1"><a href="#etape_4script_python_zenity_gui_gtk_pour_lancer_votre_script_d_application">Étape 4 : Script python zenity (gui GTK) pour lancer votre script d&#039;application</a></li>
<li class="level1"><a href="#etape_5creer_votre_paquet_logiciel">Étape 5 : Créer votre paquet logiciel</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page n'a pas encore d'<a href="/wiki/tags">étiquettes</a>.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>

<h1 class="sectionedit1 page-header" id="integrer_une_application_windows_dans_un_paquet_logiciel">Intégrer une application Windows dans un paquet logiciel</h1>
<div class="level1">
<div class="noteimportant">Veuillez notez que cette manipulation peut différer partiellement en fonction des applications visées, et sera donc à adapter à vos besoins.
</div>
<p>
Pour la petite histoire, cette manipulation me trottait dans la tête depuis un petit moment, et à force d&#039;aide et de recherches, j&#039;ai fini par trouver quelques réponses sur le forum PlayOnLinux, je remercie d&#039;ailleurs Tinou de m&#039;avoir donné quelques indications, n&#039;étant pas développeur pour deux sous.
</p>

<p>
Très clairement, le but recherché est l&#039;intégration d&#039;une application Windows au sein d&#039;un environnement Linux, telle une application Linux, pas question donc de devoir avoir un menu wine, ou playonlinux, ou de dépendre de l&#039;installation de ces programmes pour exécuter les logiciels ciblés, on recherchera donc à installer le programme et son environnement d’exécution dans son propre répertoire, et à avoir un fichier caché dans le dossier utilisateur qui contiendra fichiers de configurations, sauvegarde &amp; cie du programme ciblé.
</p>

<p>
Ainsi, le programme en question sera installable en seulement quelques clics, ne nécessitera pas la réinstallation ou certaines reconfiguration d’exécutables, base de registres, ou librairies, du prêt à l&#039;emploi, pour faire simple.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/integrer-applications-windows-dans-paquets-logiciels"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1372456351" /><input type="hidden" name="summary" value="[Intégrer une application Windows dans un paquet logiciel] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="integrer_une_application_windows_dans_un_paquet_logiciel" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1-1341" /><button type="submit" title="Intégrer une application Windows dans un paquet logiciel" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="etape_1recuperer_le_prefixe_wine">Étape 1 : Récupérer le préfixe Wine</h2>
<div class="level2">

<p>
C&#039;est une condition obligatoire pour créer le paquet prêt à l&#039;emploi, vous devez déjà disposer d&#039;un préfixe wine (propre) sur votre machine dédié exclusivement au logiciel/jeu ciblé, et ce dernier devra déjà être pleinement fonctionnel (dépendances du logiciel windows installées, exécutable patché, etc…) et ça fonctionnera aussi bien pour les préfixes issus de wine, accessibles dans <strong>/home/votre-user/</strong>.wine, que dans <strong>/home/votre-user/PlayOnLinux/wineprefix</strong>
</p>

<p>
Plus généralement, un préfixe contient généralement les dossiers &quot;<strong>dosdevices</strong>&quot; &quot;<strong>drive_c</strong>&quot; &quot;<strong>harddiskvolume0</strong>&quot; , les fichiers &quot;<strong>system.reg</strong>&quot; &quot;<strong>user.reg</strong>&quot; &quot;<strong>userdef.reg</strong>&quot;, et un fichier caché &quot;<strong>.update-timestamp</strong>&quot;
</p>

<p>
Une fois que vous avez trouvé son dossier d&#039;origine, vous allez copier son contenu dans /opt/catégorie-de-votre-programme/nom-de-votre-programme/prefixe
</p>
<div class="notetip">Concernant les catégories de programmes, afin que la hiérarchie des dossiers reste homogène pour tout le monde et en cas d&#039;échange de paquets, je vous conseille de diviser les possibilités en 7 catégories (comme le menu Gnome), avec le nom anglais. (Par exemple &quot;accessories, games, internet, etc…)
</div>
<p>
Il faudra ensuite recréer les liens symboliques <strong>harddiskvolume0</strong> et <strong>dosdevices/c:</strong> ceux ci ne pointant pas vers le bon dossier, car ils devront désormais pointer vers /opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c ;)
</p>

<p>
Pour ça, on supprime d&#039;abord ces deux derniers
</p>
<pre class="code">cd  /opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix</pre>
<pre class="code">rm harddiskvolume0 &amp;&amp; rm dosdevices/c:</pre>

<p>
Il ne reste plus qu&#039;à recréer les bons liens :
</p>
<pre class="code">ln -s drive_c/ harddiskvolume0</pre>
<pre class="code">ln -s drive_c/ dosdevices/c:</pre>

<p>
Ensuite on transfère tous les propriétés de dossiers, sous dossiers, et fichiers à root
</p>
<pre class="code">sudo chown root:root /opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix -R</pre>

<p>
Et pour les droits, on les accorde à tous les utilisateurs
</p>
<pre class="code">sudo chmod 777  /opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix -R</pre>

<p>
Puis on supprime votre nom d&#039;utilisateur dans votre dossier personnel, situé généralement dans  <strong>/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/users</strong> (je parlerais de la possibilité de le déplacer automatiquement dans votre dossier personnel plus loin.)
</p>

<p>
Par ailleurs, vous pouvez également modifier les fichiers reg à votre convenance, en supprimant toute élocution de votre nom d&#039;utilisateur et en le remplaçant par root par exemple.
</p>

<p>
Et voilà une bonne chose de faite. ;)
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/integrer-applications-windows-dans-paquets-logiciels"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1372456351" /><input type="hidden" name="summary" value="[Étape 1 : Récupérer le préfixe Wine] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="etape_1recuperer_le_prefixe_wine" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1342-4041" /><button type="submit" title="Étape 1 : Récupérer le préfixe Wine" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="etape_2modifier_puis_compiler_wine">Étape 2 : Modifier  puis compiler Wine</h2>
<div class="level2">

<p>
Nous accédons désormais à une autre étape importante, de base, wine ne permet pas à tous les utilisateurs d&#039;un système de pouvoir exécuter un préfixe dont les droits appartiennent à un autre utilisateur.
La modification proposée va permettre d&#039;outrepasser cette limite, afin que tous les utilisateurs puissent y avoir accès ensuite ! <img src="/lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

<p>
Tout d&#039;abord, vous devrez récupérer les sources de wine, de la version désirée, ici ⇒ <a href="http://www.ibiblio.org/pub/linux/system/emulators/wine/" class="urlextern" title="http://www.ibiblio.org/pub/linux/system/emulators/wine/" rel="nofollow">http://www.ibiblio.org/pub/linux/system/emulators/wine/</a>
</p>

<p>
Dans mon cas, je choisit donc de télécharger wine-1.3.26.tar.bz2, dernière version en date
</p>
<pre class="code">wget http://www.ibiblio.org/pub/linux/system/emulators/wine/wine-1.3.26.tar.bz2</pre>

<p>
Ensuite je décompresse
</p>
<pre class="code">bsdtar -xf wine-1.3.26.tar.bz2</pre>

<p>
Et je me place dans le dossier des sources de wine
</p>
<pre class="code">cd wine-1.3.26</pre>

<p>
installation des dépendance avec le script de wine
</p>
<pre class="code">wget http://winezeug.googlecode.com/svn/trunk/install-wine-deps.sh</pre>
<pre class="code">sudo sh http://winezeug.googlecode.com/svn/trunk/install-wine-deps.sh</pre>

<p>
Ensuite, il est nécessaire d&#039;éditer 3 fichiers
</p>
<pre class="code">gedit libs/wine/config.c</pre>
<pre class="code">gedit dlls/ntdll/server.c</pre>
<pre class="code">gedit server/request.c</pre>

<p>
Dans ces 3 fichiers, vous devez rechercher les termes &quot;<strong>is not owned by you</strong>&quot; contenant peu avant l&#039;occurence &quot;<strong>fatal_error</strong>&quot; que vous devrez à chaque fois remplacer par &quot;<strong>printf</strong>&quot;, dans mon cas, j&#039;ai aussi pris la précaution de remplacer la valeur &quot;<strong>fatal_error</strong>&quot; des allocutions &quot;<strong>must not be accessible by other users</strong>&quot;, cette dernière faisant référence aux droits des utilisateurs 
</p>
<pre class="code c"><span class="kw1">if</span> <span class="br0">&#40;</span>st.<span class="me1">st_mode</span> <span class="sy0">&amp;</span> <span class="nu8">077</span><span class="br0">&#41;</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span> <span class="st0">&quot;'%s' must not be accessible by other users<span class="es1">\n</span>&quot;</span><span class="sy0">,</span> serverdir <span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Une fois ceci fait, nous pouvons enfin passer à la compilation.
</p>
<div class="noteimportant">Dans l&#039;exemple ci dessous, vous devez adapter la commande au chemin choisit du dossier qui contiendra votre préfixe wine, vous pouvez également y rajouter l&#039;option  –disable-win16 s&#039;il ne s&#039;agira pas d&#039;un vieux programme 16bits, et  pour le &quot;make&quot; l&#039;option -j3 si votre processeur dispose de 2 cœurs, -j8 s&#039;il en a 7, etc… Ça permettra d&#039;exploiter pleinement ce dernier pour compiler plus vite <img src="/lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" />
</div><pre class="code">./configure --prefix=&quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/.wine/version-choisie-de-wine&quot;</pre>

<p>
Premièrement, on lance la compilation des dépendances propres au fonctionnement de wine
</p>
<pre class="code">make depend</pre>

<p>
Ensuite on lance la compilation de wine
</p>
<pre class="code">make</pre>

<p>
Une fois celle ci terminée (ce qui devrait prendre un peu de temps), il n&#039;y a plus qu&#039;à installer les fichiers dans le répertoire choisit précédemment 
</p>
<pre class="code">sudo make install</pre>

<p>
Vous devriez maintenant retrouver tous les fichiers liés à cette version de wine modifié dans &quot;<strong>/opt/catégorie-de-votre-programme/nom-de-votre-programme/.wine/version-choisie-de-wine/</strong>&quot;
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/integrer-applications-windows-dans-paquets-logiciels"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1372456351" /><input type="hidden" name="summary" value="[Étape 2 : Modifier  puis compiler Wine] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="etape_2modifier_puis_compiler_wine" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="4042-7006" /><button type="submit" title="Étape 2 : Modifier  puis compiler Wine" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit4 page-header" id="etape_3script_bash_pour_lancer_le_programme">Étape 3 : Script bash pour lancer le programme</h2>
<div class="level2">

<p>
Et oui… Faudra bien lancer le logiciel en question, et pour le coup, j&#039;ai un petit script à vous proposer, à adapter en fonction de vos besoins :
</p>

<p>
D&#039;abord on crée le dossier qui contiendra le/les script(s) (car rien ne vous empêche d&#039;intégrer divers programmes exécutables complémentaires à votre programme après tout…)
</p>
<pre class="code">mkdir /opt/catégorie-de-votre-programme/nom-de-votre-programme/scripts</pre>
<pre class="code">#!/bin/bash

#Vérification de la présence du répertoire personnel de l&#039;utilisateur, si non, création du dossier
VerifHOME() {
if [ ! -d &quot;$HOME/.nom-de-votre-programme&quot; ]; then
	 mkdir &quot;$HOME/.nom-de-votre-programme&quot;
fi
}

#Vérification de la présence du répertoire personnel de l&#039;utilisateur dans le préfixe wine de l&#039;application windows, si non, création du dossier
VerifUSER() {
if [ ! -d &quot; /opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/users/$USER&quot; ]; then
	 mkdir &quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/users/$USER&quot;
fi
}
#Vérification de la présence du dossier &quot;Mes documents&quot; dans le dossier personnel  de l&#039;utilisateur voulant exécuter l&#039;application, création du lien symbolique vers le dossier personnel s&#039;il n&#039;existe pas
VerifMyDoc() {
if [ ! -d &quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/users/$USER/Mes documents&quot; ]; then
	 ln -s &quot;$HOME/.nom-de-votre-programme&quot; &quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/users/$USER/Mes documents&quot;
fi
}

#Exécution des vérifications
VerifHOME
VerifUSER
VerifMyDoc

PATH=&quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/.wine/version-choisie-de-wine/bin/:$PATH&quot;
export WINEPREFIX=&quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/&quot;
export WINEDEBUG=&quot;-all&quot;
#Forcer la langue FR pour l&#039;environnement et les applications
export LANG=&quot;fr.FR-utf8&quot;
cd &quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/Program Files/chemin-du-dossier-de-l&#039;executable-windows-de-votre-programme&quot;
#Conserver ci dessous une syntaxe des dossiers propre à windows, avec \ et non /
wine &quot;c:\Program Files\chemin-du-dossier-de-l&#039;executable-windows-de-votre-programme\executable.exe&quot;  $@</pre>

<p>
Voici un exemple similaire, pour lancer simplement wineconfig sur ce préfixe avec la version de wine modifiée
</p>
<pre class="code">PATH=&quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/.wine/version-choisie-de-wine/bin/:$PATH&quot;
export WINEPREFIX=&quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/&quot;
export WINEDEBUG=&quot;-all&quot;
#Forcer la langue FR pour l&#039;environnement et les applications
export LANG=&quot;fr.FR-utf8&quot;
wine &quot;winecfg&quot;  $@</pre>

<p>
Bref, à vous de modifier ces exemples en fonction des besoins, des répertoires de configuration/sauvegardes utilisés par les applications concernées ! ;)
</p>

<p>
Pour pouvoir utiliser ces scripts, n&#039;oubliez pas de les rendre exécutables !
</p>
<pre class="code">sudo chmod u+x /opt/catégorie-de-votre-programme/nom-de-votre-programme/scripts/nom-du-script</pre>

<p>
Q
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/integrer-applications-windows-dans-paquets-logiciels"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1372456351" /><input type="hidden" name="summary" value="[Étape 3 : Script bash pour lancer le programme] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="etape_3script_bash_pour_lancer_le_programme" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="7007-10092" /><button type="submit" title="Étape 3 : Script bash pour lancer le programme" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="etape_4script_python_zenity_gui_gtk_pour_lancer_votre_script_d_application">Étape 4 : Script python zenity (gui GTK) pour lancer votre script d&#039;application</h2>
<div class="level2">

<p>
Parce que si vous avez plusieurs exécutables à lancer, ça sera quand même plus pratique ! (au moins avoir le choix entre l&#039;application à lancer, et wineconfig)
</p>
<pre class="code">gksudo gedit /usr/bin/nom-de-votre-programme</pre>
<pre class="code">#!/bin/bash

# Affichage de l&#039;avertissement
choix=$(zenity  --list --radiolist  \
#À compléter selon vos besoins :
	--text=&quot;[Choisir le texte d&#039;avertissement&quot; \
	--column &quot;&quot; --column &quot;Choix&quot; --column &quot;Description&quot; \
#À compléter selon vos besoins :
	TRUE &quot;nom-de-votre-programme&quot; &quot;Lancer nom-de-votre-programme&quot; \
	FALSE &quot;Winecfg&quot; &quot;Configuration de l&#039;environnement Windows&quot;);

case ${choix} in

#À compléter selon vos besoins :
	&quot;nom-de-votre-programme&quot;)
	# L&#039;utilisateur a choisit nom-de-votre-programme		
		sh &quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/scripts/nom-du-script&quot;
		exit
		;;

#À compléter selon vos besoins :
	&quot;Winecfg&quot;)
	# L&#039;utilisateur a choisit de configurer Wine		
		sh &quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/scripts/nom-du-script&quot;
		exit
		;;

	*)
	#L&#039;utilisateur n&#039;a pas validé (soit cliqué sur &quot;fermer&quot; ou a fermé la fenêtre)
		exit
		;;

esac</pre>

<p>
Pour moi Billou ce script ne fonctionne pas aussi pourquoi créer un autre script avant si ont peut métre les variable dans le zenity un example qui fonctionne
</p>
<pre class="code">#!/bin/bash
PATH=&quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/.wine/version-choisie-de-wine/bin/:$PATH&quot;
export WINEPREFIX=&quot;/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/&quot;
export WINEDEBUG=&quot;-all&quot;
#Forcer la langue FR pour l&#039;environnement et les applications
export LANG=&quot;fr.FR-utf8&quot;

programme=`zenity --list \
  --title=&quot;faite votre choix dnas la liste&quot; \
  --column=&quot;Choix&quot; \
    &quot;lancer nom de votre programme&quot; \
    &quot;winecfg&quot;`
if [ &quot;$programme&quot; == &quot;winecfg&quot; ]
then
# commande pour lancer winecfg
wine winecfg
elif [ &quot;$programme&quot; == &quot;lancer nom de votre programme&quot; ]
then
# commande pour lancer votre programme
wine &quot;c:\Program Files\chemin-du-dossier-de-l&#039;executable-windows-de-votre-programme\executable.exe&quot;
else
exit 1
fi
exit 0</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/integrer-applications-windows-dans-paquets-logiciels"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1372456351" /><input type="hidden" name="summary" value="[Étape 4 : Script python zenity (gui GTK) pour lancer votre script d&#039;application] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="etape_4script_python_zenity_gui_gtk_pour_lancer_votre_script_d_application" /><input type="hidden" name="codeblockOffset" value="23" /><input type="hidden" name="range" value="10093-12288" /><button type="submit" title="Étape 4 : Script python zenity (gui GTK) pour lancer votre script d&#039;application" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="etape_5creer_votre_paquet_logiciel">Étape 5 : Créer votre paquet logiciel</h2>
<div class="level2">
<div class="noteimportant">Attention, comme pour beaucoup de programmes Linux, il est conseiller de divisier votre paquet en deux parties, l&#039;un contenant les données &quot;simples&quot;, l&#039;autre des données plus lourdes, afin de faciliter la mise à jour d&#039;une partie des fichiers, sans devoir tout re-télécharger / réinstaller ! 
Par exemple, pour un jeu, un paquet contenant tout les fichiers sauf <strong>/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/Program Files/chemin-du-dossier-de-votre-programme-windows</strong>, et l&#039;autre contenant ce dossier, ainsi, si vous mettez à jour le premier petit paquet, vous n&#039;aurez pas à vous soucier de l&#039;autre vu que les données ne devraient pas changer.
</div>
<p>
En fait, créer un paquet est très simple, il suffit de créer un dossier contenant l&#039;arborescence complète des fichiers qui seront copiés.
</p>

<p>
Ainsi, vous retrouverez le plus souvent dans le dossier créé,  un dossier opt, un dossier usr, etc… L&#039;important étant d&#039;y copier tel que présents sur le systèmes, tous les fichiers concernés jusque là, tout doit correspondre ! (vous comprendrez facilement ce que je veux dire, en décompressant n&#039;importe quel paquet *.deb ;) )
</p>

<p>
Il faudra juste rajouter les fichiers nécessaires pour qu&#039;un raccourci apparaisse dans votre menu Applications :
</p>

<p>
<em class="u">Dans votre dossier, créez les dossiers suivant cette arborescence :</em>
</p>

<p>
<strong>/usr/share/applications</strong>
</p>

<p>
<strong>/usr/share/pixmaps</strong>
</p>

<p>
Dans le dossier applications, vous devez créer le fichier de configuration du raccourci dans le menu :
</p>
<pre class="code">cd usr/share/applications</pre>
<pre class="code">gksudo gedit nom-du-programme.desktop</pre>
<pre class="code">#!/usr/bin/env xdg-open

[Desktop Entry]
Version=version du programme
Encoding=UTF-8
Name=
GenericName=
Comment=
Name[fr_FR]=
Comment[fr_FR]=
Commen[fr_FR]t=
Exec=&quot;/usr/bin/nom-de-l&#039;executable-du-script-zenithy-du-programme&quot;
Icon=nom-de-l&#039;icone-du-dossier-pixmaps
Terminal=false
Type=Application
Categories=Game/Internet/Accesories/etc-au-choix</pre>

<p>
Concernant &quot;<strong>usr/share/pixmaps</strong>&quot;, le dossier doit contenir l’icône du programme en question (nom-de-l&#039;icone-du-dossier-pixmaps) en deux formats, PNG, et XPM !
</p>

<p>
Une fois tout ceci fait, il faudra créer le fichier de configuration du paquet debian.
</p>

<p>
Pour celà, dans le dossier du paquet à créer, à coté de l&#039;arborescence habituelle ou l&#039;on peut voir opt, et usr, vous devez créer un dossier nommé &quot;<strong>DEBIAN</strong>&quot;
</p>
<pre class="code">mkdir DEBIAN</pre>

<p>
Puis dans ce dossier on crée le fichier &quot;<strong>control</strong>&quot;
</p>
<pre class="code">gksudo gedit control</pre>
<pre class="code">Package: nom-du-paquet
Version: version du paquet (en chiffre)
Section: main
Priority: extra
Architecture: i386
Depends: (séparer les dépendances du paquet par une virgule)
Installed-Size: spécifier en Ko, la taille du programme une fois installée
Maintainer: C&#039;est vous, laissez votre griffe
Description: Donner la description du programme</pre>

<p>
Voilà, vous enregistrez, puis on corrige une quelconque erreur de droit (au cas ou)
</p>
<pre class="code">sudo chown root:root /chemin/nom-du-dossier-du-paquet -R</pre>
<pre class="code">sudo chmod 755 /chemin/nom-du-dossier-du-paquet -R</pre>
<pre class="code">sudo chmod 777 /chemin/opt/catégorie-de-votre-programme/nom-de-votre-programme/prefix/drive_c/ -R</pre>

<p>
Et maintenant, il ne reste plus… Qu&#039;à créer le/les paquets (à refaire avec chaque paquet créé évidemment, si vous avez dissocié les fichiers et dossiers en plusieurs paquets) 
</p>
<pre class="code">cd ..
dpkg --build nom-du-dossier-du-paquet nom-du-paquet.deb</pre>

<p>
Selon la taille de votre paquet, ça sera plus ou moins long, attention toutefois, les paquets de plusieurs Go ne sont pas pris en charge par les outils graphiques d&#039;Ubuntu et Debian à l&#039;installation (synaptic, gdebi…), il faudra les installer avec un sudo dpkg -i nom-du-paquet.deb ! :)
</p>

<p>
Voilà, ce tutoriel est terminé, en l&#039;état, il n&#039;appartient plus qu&#039;à vous d&#039;améliorer tout ça, je vous ai donné les bases de l&#039;écosystème pour vous en sortir, libre à vous d&#039;adapter à vos besoin, de créer des gui  ou scripts simplifiant la transposition préfixe ⇒ paquet, etc ! =D
</p>

<p>
<strong>Billou, du forum ubuntu-fr, à votre service ! ^^</strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/integrer-applications-windows-dans-paquets-logiciels"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1372456351" /><input type="hidden" name="summary" value="[Étape 5 : Créer votre paquet logiciel] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="etape_5creer_votre_paquet_logiciel" /><input type="hidden" name="codeblockOffset" value="26" /><input type="hidden" name="range" value="12289-" /><button type="submit" title="Étape 5 : Créer votre paquet logiciel" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="integrer-applications-windows-dans-paquets-logiciels.txt">integrer-applications-windows-dans-paquets-logiciels.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 28/06/2013, 23:52">Le 28/06/2013, 23:52</span></li><li class="text-muted">par 80.236.125.176</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=integrer-applications-windows-dans-paquets-logiciels&amp;1635554146" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

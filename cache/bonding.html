<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>bonding [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="reseau"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/bonding?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/bonding?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/bonding"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/bonding"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/bonding"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"bonding","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="bonding">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/bonding?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/bonding?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/bonding?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/bonding?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/bonding?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/bonding?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/bonding?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">bonding</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/bonding?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/bonding?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/bonding?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#descriptif","title":"Descriptif","level":1},{"link":"#prerequis","title":"Pr\u00e9requis","level":2},{"link":"#les_modes","title":"Les modes","level":2},{"link":"#autres_parametres","title":"autres param\u00e8tres","level":2},{"link":"#installation","title":"Installation","level":2},{"link":"#installation_depuis_ubuntu_2004_et","title":"Installation depuis ubuntu 20.04 et +","level":1},{"link":"#installation_graphique","title":"Installation graphique","level":2},{"link":"#installation_terminal","title":"Installation terminal","level":2}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#descriptif">Descriptif</a>
<ul class="nav toc">
<li class="level2"><a href="#prerequis">Prérequis</a></li>
<li class="level2"><a href="#les_modes">Les modes</a></li>
<li class="level2"><a href="#autres_parametres">autres paramètres</a></li>
<li class="level2"><a href="#installation">Installation</a></li>
</ul>
</li>
<li class="level1"><a href="#installation_depuis_ubuntu_2004_et">Installation depuis ubuntu 20.04 et +</a>
<ul class="nav toc">
<li class="level2"><a href="#installation_graphique">Installation graphique</a></li>
<li class="level2"><a href="#installation_terminal">Installation terminal</a></li>
</ul></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">reseau</a>
</span></div>

<h1 class="sectionedit1 page-header" id="bondingagregation_de_plusieurs_interfaces_reseaux_en_une_interface_logique">Bonding : Agrégation de plusieurs Interfaces réseaux en une Interface logique</h1>
<div class="level1">

<p>
Bonding est un pilote qui permet d&#039;agréger plusieurs cartes réseaux de sorte à augmenter la bande passante et avoir une «haute disponibilité».
</p>

<p>
Si une interface Bond est montée avec 2 cartes réseaux à 100 Mbits/s, selon le mode utilisé le débit obtenu pourra être de 200 Mbits/s .
La machine restera accessible si l&#039;une des interfaces ne répond plus.
</p>

<p>
<strong>wikipedia</strong> : <a href="https://fr.wikipedia.org/wiki/Agrégation de liens" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/Agrégation de liens">Agrégation de liens</a>
</p>

<p>
<a href="http://www.cyberciti.biz/howto/question/static/linux-ethernet-bonding-driver-howto.php" class="urlextern" title="http://www.cyberciti.biz/howto/question/static/linux-ethernet-bonding-driver-howto.php" rel="nofollow">http://www.cyberciti.biz/howto/question/static/linux-ethernet-bonding-driver-howto.php</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Bonding : Agrégation de plusieurs Interfaces réseaux en une Interface logique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="bondingagregation_de_plusieurs_interfaces_reseaux_en_une_interface_logique" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="16-616" /><button type="submit" title="Bonding : Agrégation de plusieurs Interfaces réseaux en une Interface logique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="descriptif">Descriptif</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Descriptif] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="descriptif" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="617-642" /><button type="submit" title="Descriptif" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="prerequis">Prérequis</h3>
<div class="level3">

<p>
3 Normes peuvent être utilisées au niveau du switch pour mettre en place une interface bond :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> configuration en mode &quot;port trunking&quot;</div>
</li>
<li class="level1"><div class="li"> norme 802.1Q permet Vlan trunking</div>
</li>
<li class="level1"><div class="li"> norme 802.3ad permet l&#039;agrégation de lien</div>
</li>
</ul>

<p>
Le serveur doit avoir :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> des cartes réseaux compatibles : ethtools et/ou miitools</div>
</li>
<li class="level1"><div class="li"> le module bonding installé.</div>
</li>
</ul>

<p>
Le module bonding.ko est installé par défaut :
</p>
<pre class="code">ls /lib/modules/`uname -r`/kernel/drivers/net/bonding/bonding.ko</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Prérequis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="prerequis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="643-1128" /><button type="submit" title="Prérequis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="les_modes">Les modes</h3>
<div class="level3">

<p>
Comme cela à été précisé, en fonction du mode sélectionné l&#039;agrégat fonctionnera de façon différente.
</p>

</div>

<h4 id="mode_0round_robin_equilibrage_de_charge">Mode 0 : Round Robin , équilibrage de charge</h4>
<div class="level4">

<p>
La transmission des paquets se fait de façon séquentielle sur chacune des cartes actives dans l&#039;agrégat. Ce mode augmente la bande passante et gère la tolérance de panne.
</p>

</div>

<h4 id="mode_1active_-_passive">Mode 1 : Active - passive</h4>
<div class="level4">

<p>
Ce mode ne gère que la tolérance de panne. Si une des interfaces est désactivée, une autre lien du bond prend le relais.
</p>

</div>

<h4 id="mode_2balance_xor">Mode 2 : Balance xor</h4>
<div class="level4">

<p>
Une interface est affectée à l&#039;envoi vers une même adresse <abbr title="Medium Access Control">MAC</abbr>. Ainsi les transferts sont parallélisés et le choix de l&#039;interface suit la règle :
(Adresse <abbr title="Medium Access Control">MAC</abbr> de la source XOR Adresse <abbr title="Medium Access Control">MAC</abbr> de la destination) modulo nombre d&#039;interfaces.
</p>

</div>

<h4 id="mode_3broadcast">Mode 3 : Broadcast</h4>
<div class="level4">

<p>
Tout le trafic est envoyé par toutes les interfaces
</p>

</div>

<h4 id="mode_48023ad">mode 4 : 802.3ad</h4>
<div class="level4">

<p>
Ce mode s&#039;appuie sur la norme IEEE 802.3ad Dynamic link aggregation.
Toutes les interfaces du groupe sont agrégées de façon dynamique, ce qui augmente la bande passante et gère la tolérance de panne.
</p>

<p>
Cela implique que le switch gère le 802.ad et les interfaces soient compatibles mii-tool et/ou ethtool.   
</p>

</div>

<h4 id="mode_5balance-tlb">mode 5 : balance-tlb</h4>
<div class="level4">

<p>
Adaptive transmit load balancing : seule la bande passante en sortie est load balancée selon la charge calculée en fonction de la vitesse, ceci pour chaque interface.
Le flux entrant est affecté à l&#039;interface courante. Si celle-ci devient inactive, une autre prend alors l&#039;adresse <abbr title="Medium Access Control">MAC</abbr> et devient l&#039;interface courante.
</p>

</div>

<h4 id="mode_6balance-alb">mode 6 : balance-alb</h4>
<div class="level4">

<p>
Adaptive load balancing : ce mode inclut en plus du tlb un load balancing sur le flux entrant et seulement pour un trafic <abbr title="Internet Protocol Version 4">IPV4</abbr>.
L&#039;équilibrage est réalisé au niveau <abbr title="Adress Resolution Protocol">ARP</abbr>. Le module intercepte les réponses pour y réécrire l&#039;adresse <abbr title="Medium Access Control">MAC</abbr> de l&#039;une des interfaces du bond tout en tenant compte des spécificités du protocole <abbr title="Adress Resolution Protocol">ARP</abbr>.
La répartition entre les différentes interfaces, se fait de façon séquentielle ( round robin ).
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Les modes] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_modes" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1129-3165" /><button type="submit" title="Les modes" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="autres_parametres">autres paramètres</h3>
<div class="level3">

</div>

<h4 id="arp_interval">arp_interval</h4>
<div class="level4">

<p>
Définit le délais en millisecondes entre chaque requête monitor <abbr title="Adress Resolution Protocol">ARP</abbr> compatible avec le mode 0 ou 2 . Si la valeur est à 0 alors <abbr title="Adress Resolution Protocol">ARP</abbr> monitoring est désactivé.
</p>

<p>
0 est la valeur par défaut 
</p>

</div>

<h4 id="arp_ip_target">arp_ip_target</h4>
<div class="level4">

<p>
Définit les adresses IP si l&#039;option arp_interval &gt; 0 .
Il peut être affecté un maximum de 16 adresses à l&#039;agrégat dont le caractère de séparation est la virgule
no adresse ip est la valeur par défaut 
</p>

</div>

<h4 id="downdelay">downdelay</h4>
<div class="level4">

<p>
Définit le temps en millisecondes pour qu&#039;une interface soit détectée down
</p>

<p>
0 est la valeur par défaut 
</p>

</div>

<h4 id="lacp_rate">lacp_rate</h4>
<div class="level4">

<p>
Définit  le type d&#039;intervalle entre chaque packet LACPDU pour le mode 802.3ad
soit :
slow ou 0 une requête toutes les 30 seconds
</p>

<p>
fast ou 1 une requête toutes les seconds
</p>

<p>
slow est la valeur par défaut 
</p>

</div>

<h4 id="max_bonds">max_bonds</h4>
<div class="level4">

<p>
Définit le nombre maximum d&#039;agrégat pour cette instance
</p>

<p>
1 est la valeur par défaut 
</p>

</div>

<h4 id="miimon">miimon</h4>
<div class="level4">

<p>
Définit la fréquence des MII link monitoring en millisecondes. Il est conseillé de positionner cette valeur à 100.
</p>

<p>
0 est la valeur par défaut 
</p>

</div>

<h4 id="primary">primary</h4>
<div class="level4">

<p>
Option utilisable pour les modes actif-passif. Favorise une interface dans un agrégat. Si celle-ci venait à redevenir active, elle prend la main sur les autres.
</p>

</div>

<h4 id="updelay">updelay</h4>
<div class="level4">

<p>
Définit le temps en millisecondes pour qu&#039;une interface soit détectée comme active.
</p>

<p>
0 est la valeur par défaut 
</p>

</div>

<h4 id="use_carrier">use_carrier</h4>
<div class="level4">

<p>
Définit si on utilise le monitoring de MII ou ETHTOOL ou non
</p>

<p>
1 est la valeur par défaut 
</p>

</div>

<h4 id="xmi_hash_policy">xmi_hash_policy</h4>
<div class="level4">

<p>
Définit la règle à utiliser pour déterminer l&#039;interface pour les modes balance-xor et 802.3ad.
Cette option peut prendre 2 valeur :
</p>

<p>
layer2 : utilise XOR de l&#039;adresse <abbr title="Medium Access Control">MAC</abbr> dont la formule est : (source <abbr title="Medium Access Control">MAC</abbr> XOR destination <abbr title="Medium Access Control">MAC</abbr> ) modulo le nombre d&#039;interfaces 
</p>

<p>
layer3+4 : cette valeur n&#039;est pas compatible avec toutes les implémentation 802.3ad. De plus elle fonctionne avec des protocoles de haut niveau ( <abbr title="Transmission Control Protocol">TCP</abbr> ou UDP )
</p>

<p>
layer2 est la valeur par défaut 
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[autres paramètres] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="autres_parametres" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="3166-5200" /><button type="submit" title="autres paramètres" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="installation">Installation</h3>
<div class="level3">

<p>
Installation du package ifenslave pour le kernel 2.6 qui permet de gérer le bonding
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet ifenslave-2.6</a>
</p>
<pre class="code">sudo apt-get install ifenslave-2.6 </pre>

<p>
Ajout d&#039;un alias pour que le module bond soit activé avec les bonnes options
</p>
<pre class="code">sudo vim /etc/modprobe.d/aliase-bond.conf</pre>

<p>
ajouter
</p>
<pre class="code">alias bond0 bonding
options bonding mode=1 miimon=100 downdelay=200 updelay=200</pre>

<p>
Création de l&#039;interface bond0 
</p>
<pre class="code">sudo vim /etc/network/interfaces</pre>

<p>
Insérer
</p>
<pre class="code">auto bond0
iface bond0 inet static
      address 192.168.0.2
      netmask 255.255.255.0
      network 192.168.0.0
      gateway 192.168.0.1
      broadcast 192.168.0.255
      up /sbin/ifenslave bond0 eth0 eth1
      down /sbin/ifenslave -d bond0 eth0 eth1</pre>

<p>
address : l&#039;adresse IP de votre machine<br/>

 netmask : le masque de votre réseau<br/>

 gateway : l&#039;adresse IP de votre routeur/box internet<br/>

</p>

<p>
Activation de l&#039;interface bond0
</p>
<pre class="code">sudo ifup bond0</pre>

<p>
ou
</p>
<pre class="code">/etc/init.d/networking restart</pre>

<p>
<strong>Autre méthode, avec prise en charge du dhcp</strong>
</p>

<p>
Si vous avez essayé la méthode précédente avec une adresse dynamique, vous pouvez obtenir ceci :
</p>
<pre class="code">DHCPDISCOVER on bond0 to 255.255.255.255 port 67 interval 7
DHCPDISCOVER on bond0 to 255.255.255.255 port 67 interval 16
DHCPDISCOVER on bond0 to 255.255.255.255 port 67 interval 13
DHCPDISCOVER on bond0 to 255.255.255.255 port 67 interval 8
DHCPDISCOVER on bond0 to 255.255.255.255 port 67 interval 17
No DHCPOFFERS received.
No working leases in persistent database - sleeping.</pre>

<p>
D’après ce <a href="https://bugs.launchpad.net/ubuntu/+source/ifupdown/+bug/63988" class="urlextern" title="https://bugs.launchpad.net/ubuntu/+source/ifupdown/+bug/63988" rel="nofollow">rapport de bug</a>, une méthode &#039;temporaire&#039; à été trouvé.
</p>

<p>
D’après ce <a href="http://wiki.bolay.net/doku.php?id=operating_systems:linux:debian:bonding_on_debian" class="urlextern" title="http://wiki.bolay.net/doku.php?id=operating_systems:linux:debian:bonding_on_debian" rel="nofollow">wiki</a> :
</p>
<pre class="code">auto bond0
iface bond0 inet dhcp
      pre-up modprobe bonding
      pre-up ifconfig bond0 up
      pre-up /sbin/ifenslave bond0 eth0 eth1
      down /sbin/ifenslave -d bond0 eth0 eth1</pre>

<p>
Exemple Ethernet + Wifi → <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>
</p>
<pre class="code">auto eth0
iface eth0 inet manual
      bond-master bond0
      bond-primary eth0 wlan0

auto wlan0
iface wlan0 inet manual
      bond-master bond0
      bond-mode 1
      bond-miimon 100
      bond-give-a-chance 10
      wpa-bridge bond0
      wpa-key-mgmt WPA-PSK
      wpa-proto WPA
      wpa-group CCMP
      wpa-ssid my-ssid
      wpa-psk &quot;my-secret-password&quot;

auto bond0
iface bond0 inet dhcp
      bond-slaves none
      bond-mode 1
      bond-miimon 100</pre>

<p>
Exemple 2 X Ethernet → <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>
</p>
<pre class="code">auto eth0
iface eth0 inet manual
      bond-master bond0
      bond-primary eth0 eth1

auto eth1
iface eth1 inet manual
      bond-master bond0
      bond-primary eth0 eth1

auto bond0
iface bond0 inet dhcp
      bond-slaves none
      bond-mode 1
      bond-miimon 100
      
      </pre>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="5201-8118" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="installation_depuis_ubuntu_2004_et">Installation depuis ubuntu 20.04 et +</h2>
<div class="level2">
<div class="notewarning">J&#039;ai ajouté cette partie concernant l&#039;agrégation car tout est différent depuis ubuntu 20.04, j&#039;invite quelqu&#039;un a améliorer l’explication, mais cette piste est la bonne
</div><div class="notewarning">Attention : suivant le type de switch que vous avez, il se peut que l&#039;aggregation, bien que configurée et indiquée comme opérationnelle côté <abbr title="Operating System">OS</abbr>, ne fonctionne pas comme il faut côté Switch, et vous empêche donc de communiquer avec le reste de votre réseau.
<p>
Dans ce cas, il faut créer le fichier /etc/systemd/network/98-bond-mac.link avec le contenu ci-dessous :
</p>
<pre class="code">[Match]
Type=bond

[Link]
MACAddressPolicy=none</pre>

</div>
</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Installation depuis ubuntu 20.04 et +] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_depuis_ubuntu_2004_et" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="8119-8819" /><button type="submit" title="Installation depuis ubuntu 20.04 et +" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="installation_graphique">Installation graphique</h3>
<div class="level3">

<p>
Lancer dans un terminal
</p>
<pre class="code"> nm-connection-editor</pre>

<p>
puis ajouter un connexion «LIEN» sur les carte réseaux existences.
La désactivation des lien actuel est nécessaire.
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Installation graphique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_graphique" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="8820-9024" /><button type="submit" title="Installation graphique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="installation_terminal">Installation terminal</h3>
<div class="level3">

<p>
Lancer dans un terminal
</p>
<pre class="code"> nmtui</pre>

<p>
puis ajouter un connexion «LIEN» sur les carte réseaux existences.
La désactivation des lien actuel est nécessaire.
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/bonding"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1633680128" /><input type="hidden" name="summary" value="[Installation terminal] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_terminal" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="9025-" /><button type="submit" title="Installation terminal" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="bonding.txt">bonding.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 08/10/2021, 10:02">Le 08/10/2021, 10:02</span></li><li class="text-muted">par 194.51.206.17</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=bonding&amp;1635546178" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

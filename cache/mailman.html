<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>mailman [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="xenial,serveur,brouillon"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/mailman?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/mailman?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/mailman"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/mailman"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/mailman"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"mailman","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="mailman">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/mailman?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/mailman?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/mailman?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/mailman?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/mailman?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/mailman?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/mailman?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">mailman</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/mailman?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/mailman?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/mailman?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#apache2","title":"Apache2","level":2},{"link":"#exim4","title":"Exim4","level":2},{"link":"#mailman","title":"Mailman","level":2},{"link":"#configuration","title":"Configuration","level":1},{"link":"#apache","title":"Apache","level":2},{"link":"#exim41","title":"Exim4","level":2},{"link":"#mailman1","title":"Mailman","level":2},{"link":"#administration","title":"Administration","level":1},{"link":"#gestion_des_rebonds","title":"Gestion des rebonds","level":2},{"link":"#utilisateurs","title":"Utilisateurs","level":1},{"link":"#handlers","title":"Handlers","level":1},{"link":"#principe","title":"Principe","level":2},{"link":"#handlers_personnalises","title":"Handlers personnalis\u00e9s","level":2},{"link":"#faq","title":"FAQ","level":1},{"link":"#envoi_de_mails_avec_exim","title":"Envoi de mails avec Exim","level":2},{"link":"#je_ne_recois_pas_mes_propres_mails_depuis_mon_entreprise","title":"Je ne re\u00e7ois pas mes propres mails depuis mon entreprise","level":2},{"link":"#migrer_mailman_entre_2_serveurs","title":"Migrer MailMan entre 2 serveurs","level":2},{"link":"#mailman_ne_fonctionne_qu_en_local_apres_migration_vers_precise_1204_relay_access_denied","title":"Mailman ne fonctionne qu'en local apr\u00e8s migration vers Precise 12.04 (Relay access denied)","level":2},{"link":"#dbmail","title":"Dbmail","level":1},{"link":"#lien","title":"Lien","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis</a>
<ul class="nav toc">
<li class="level2"><a href="#apache2">Apache2</a></li>
<li class="level2"><a href="#exim4">Exim4</a></li>
<li class="level2"><a href="#mailman">Mailman</a></li>
</ul>
</li>
<li class="level1"><a href="#configuration">Configuration</a>
<ul class="nav toc">
<li class="level2"><a href="#apache">Apache</a></li>
<li class="level2"><a href="#exim41">Exim4</a></li>
<li class="level2"><a href="#mailman1">Mailman</a></li>
</ul>
</li>
<li class="level1"><a href="#administration">Administration</a>
<ul class="nav toc">
<li class="level2"><a href="#gestion_des_rebonds">Gestion des rebonds</a></li>
</ul>
</li>
<li class="level1"><a href="#utilisateurs">Utilisateurs</a></li>
<li class="level1"><a href="#handlers">Handlers</a>
<ul class="nav toc">
<li class="level2"><a href="#principe">Principe</a></li>
<li class="level2"><a href="#handlers_personnalises">Handlers personnalisés</a></li>
</ul>
</li>
<li class="level1"><a href="#faq">FAQ</a>
<ul class="nav toc">
<li class="level2"><a href="#envoi_de_mails_avec_exim">Envoi de mails avec Exim</a></li>
<li class="level2"><a href="#je_ne_recois_pas_mes_propres_mails_depuis_mon_entreprise">Je ne reçois pas mes propres mails depuis mon entreprise</a></li>
<li class="level2"><a href="#migrer_mailman_entre_2_serveurs">Migrer MailMan entre 2 serveurs</a></li>
<li class="level2"><a href="#mailman_ne_fonctionne_qu_en_local_apres_migration_vers_precise_1204_relay_access_denied">Mailman ne fonctionne qu&#039;en local après migration vers Precise 12.04 (Relay access denied)</a></li>
</ul>
</li>
<li class="level1"><a href="#dbmail">Dbmail</a></li>
<li class="level1"><a href="#lien">Lien</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/xenial" class="wikilink1" title="xenial" rel="tag">Xenial</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="les_liste_de_diffusions_mailman">Les liste de diffusions Mailman</h1>
<div class="level1">

<p>
<a href="/_detail/serveur/mailman.jpg?id=mailman" class="media" title="serveur:mailman.jpg"><img src="/_media/serveur/mailman.jpg" class="medialeft img-responsive" title="mailman.jpg" alt="mailman.jpg" /></a>
</p>

<p>
<strong>Mailman</strong> est une application libre pour gérer des listes de diffusion électroniques, les listes de discussion et les « newsletters » (traduisez littéralement par « lettres d&#039;information »). La plupart des listes de diffusions de logiciel libre utilisent Mailman comme programme de gestion des messages. Ce dernier est performant, facile à installer et facile à maintenir. 
</p>
<div class="notewarning">Avant de commencer, déterminez bien la version (et stratégie) que vous souhaitez utiliser : <br/>

la version inclue par défaut dans le <a href="http://packages.ubuntu.com/allpackages" class="interwiki iw_pu" title="http://packages.ubuntu.com/allpackages">dépôt principale de Xenial (16.04)</a> est la 2.1 qui est la plus répandue alors que la dernière release est la  <a href="http://docs.mailman3.org/en/latest/" class="urlextern" title="http://docs.mailman3.org/en/latest/" rel="nofollow">v. 3.1</a> avec des ruptures importantes: installation via pip (python), django… <abbr title="Application Programming Interface">API</abbr> REST… docker.
</div>
</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Les liste de diffusions Mailman] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_liste_de_diffusions_mailman" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="41-936" /><button type="submit" title="Les liste de diffusions Mailman" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">

<p>
Il est nécessaire, pour la suite de ce tutoriel, de connaître les commandes Linux, <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">savoir éditer un fichier</a>, et démarrer/arrêter un service sous Linux. Il est aussi requis que vous soyez actuellement sous un système Ubuntu, que vous ayez un accès root (super-utilisateur), et bien sûr que vous souhaitiez utiliser le programme Mailman.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="937-1347" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="apache2">Apache2</h3>
<div class="level3">

<p>
<a href="/apache2" class="wikilink1" title="apache2">Apache2</a> est déjà disponible dans les dépôts, donc <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez-le</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Apache2] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="apache2" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1348-1480" /><button type="submit" title="Apache2" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="exim4">Exim4</h3>
<div class="level3">
<div class="noteimportant">L&#039;installation d&#039;exim4 <strong>supprimera postfix</strong> si celui ci est présent. (cf. <a href="/exim4-satellite" class="wikilink1" title="exim4-satellite">installation d&#039;exim4</a>)
</div>
<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://exim4,exim4-base,exim4-config" class="interwiki iw_apt" title="apt://exim4,exim4-base,exim4-config">exim4 exim4-base exim4-config</a></strong>.
</p>

<p>
Une fois Exim4 installé, les fichiers de configuration se trouvent dans « /etc/exim4/ ». Dans Ubuntu, par défaut, les fichiers de configuration de Exim4 sont répartis en plusieurs fichiers.
</p>

<p>
Vous pouvez changer ceci en éditant la variable ci-dessous dans « /etc/exim4/update-exim4.conf.conf » :
</p>
<pre class="file">  dc_use_split_config=&#039;true&#039; # =&#039;false&#039; pour désactiver l&#039;option</pre>

<p>
Si vous faites face à un problème durant l&#039;installation et que vous êtes incapable de résoudre ce dernier, référez-vous à la liste de diffusion appropriée pour plus d&#039;assistance.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Exim4] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="exim4" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1481-2350" /><button type="submit" title="Exim4" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="mailman">Mailman</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez le paquet</a> <strong><a href="apt://mailman" class="interwiki iw_apt" title="apt://mailman">mailman</a></strong>.
</p>

<p>
Cette dernière copiera les fichiers d&#039;installation dans le dossier « /var/lib/mailman » et installera les scripts CGI dans le dossier « /usr/lib/cgi-bin/mailman ».
Enfin, le programme créera le groupe et l&#039;utilisateur « list ». Notez que le processus « mailman » doit être lancé avec les privilèges super-utilisateur.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Mailman] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="mailman" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2351-2786" /><button type="submit" title="Mailman" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="configuration">Configuration</h2>
<div class="level2">

<p>
Pour cette section, il est nécessaire que vous ayez complété avec succès l&#039;installation de Mailman, Apache et Exim4. Ici, nous allons voir les étapes de configuration. À la fin de cette section, Mailman devrait être prêt à être utilisé.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="2787-3062" /><button type="submit" title="Configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="apache">Apache</h3>
<div class="level3">

<p>
Une fois l&#039;installation d&#039;Apache2 effectuée, vous pouvez le démarrer avec la commande suivante :
</p>
<pre class="code">sudo /etc/init.d/apache2 start</pre>

<p>
Mailman utilise Apache pour créer un rendu de ses scripts CGI. Les scripts de Mailman se trouvent dans le dossier « /usr/lib/cgi-bin/mailman ». Dans le fichier « /etc/apache2/apache2.conf », rajoutez une ligne :
</p>
<pre class="code file xml">ScriptAlias /mailman/ /usr/lib/cgi-bin/mailman/</pre>

<p>
Ceci aura pour effet de poser le répertoire <strong>/usr/lib/cgi-bin/mailman/</strong> à la racine du serveur, c&#039;est-à-dire en <a href="http://votre_domaine/mailman" class="urlextern" title="http://votre_domaine/mailman" rel="nofollow">http://votre_domaine/mailman</a>. Faites de même pour que les archives soient accessibles en <a href="http://votre_domaine/archives" class="urlextern" title="http://votre_domaine/archives" rel="nofollow">http://votre_domaine/archives</a> :
</p>
<pre class="code"> Alias /archives/ /var/lib/mailman/archives/public/</pre>

<p>
Vous pouvez évidemment fignoler les préférences, par exemple en ajoutant dans ce même fichier :
</p>
<pre class="code file xml"><span class="sc3"><span class="re1">&lt;Directory</span> /usr/lib/cgi-bin/mailman<span class="re2">/&gt;</span></span>
    AllowOverride None
    Options ExecCGI
    Order allow,deny
    Allow from all
<span class="sc3"><span class="re1">&lt;/Directory<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;Directory</span> /var/lib/mailman/archives/public<span class="re2">&gt;</span></span>
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
<span class="sc3"><span class="re1">&lt;/Directory<span class="re2">&gt;</span></span></span></pre>

<p>
Pensez à activer le module cgi de Apache2 par la commande suivante :
</p>
<pre class="code">sudo a2enmod cgi</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Apache] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="apache" /><input type="hidden" name="codeblockOffset" value="1" /><input type="hidden" name="range" value="3063-4300" /><button type="submit" title="Apache" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="exim41">Exim4</h3>
<div class="level3">

<p>
Pour que Mailman puisse fonctionner avec Exim4, vous êtes supposé configurer ce dernier. Comme mentionné plus haut, par défaut, Exim4 utilise de multiples fichiers de configurations, et de tout type. Pour plus de détails, merci de vous référer au site <a href="http://www.exim.org" class="urlextern" title="http://www.exim.org" rel="nofollow">officiel d&#039;Exim</a>.
</p>

<p>
Pour démarrer Mailman, nous devons ajouter un nouveau fichier de configuration avec les catégories suivantes :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Configuration globale (main)</div>
</li>
<li class="level1"><div class="li"> Transport</div>
</li>
<li class="level1"><div class="li"> Routeur (router)</div>
</li>
</ul>

<p>
Exim crée un fichier principal de configuration, ainsi que plusieurs mini-fichiers de configuration. C&#039;est pourquoi, l&#039;ordre de ces fichiers de configuration est important. Une fois ces fichiers créés, vous pouvez lancer Exim4 avec la commande :
</p>
<pre class="code">sudo /etc/init.d/exim4 start</pre>

</div>

<h4 id="configuration_globale_main">Configuration globale (main)</h4>
<div class="level4">

<p>
Tous les fichiers de configuration concernant le type « main » sont stockés dans le dossier « /etc/exim4/conf.d/main/ ». Vous pouvez <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">ajouter</a> les lignes suivantes dans un nouveau fichier nommé « 04_exim4-config_mailman » :
</p>
<pre class="file"># start
# Home dir for your Mailman installation -- aka Mailman&#039;s prefix
# directory.
# By default this is set to &quot;/usr/local/mailman&quot;
# On a Red Hat/Fedora system using the RPM use &quot;/var/mailman&quot;
# On Debian using the deb package use &quot;/var/lib/mailman&quot;
# This is normally the same as ~mailman
MM_HOME=/var/lib/mailman
#
# User and group for Mailman, should match your --with-mail-gid
# switch to Mailman&#039;s configure script.  Value is normally &quot;mailman&quot;
MM_UID=list
MM_GID=list
#
# Domains that your lists are in - colon separated list
# you may wish to add these into local_domains as well
domainlist mm_domains=bluestar.co.in
#
# -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
#
# These values are derived from the ones above and should not need
# editing unless you have munged your mailman installation
#
# The path of the Mailman mail wrapper script
MM_WRAP=MM_HOME/mail/mailman
#
# The path of the list config file (used as a required file when
# verifying list addresses)
MM_LISTCHK=MM_HOME/lists/${lc::$local_part}/config.pck
# end</pre>

</div>

<h4 id="transport">Transport</h4>
<div class="level4">

<p>
Tous les fichiers de configuration concernant le type « transport » sont stockés dans le dossier « /etc/exim4/conf.d/transport/ ». Vous pouvez ajouter les lignes suivantes dans un nouveau fichier nommé « 04_exim4-config_mailman »:
</p>
<pre class="file">mailman_transport:
 driver = pipe
 command = MM_WRAP \
             &#039;${if def:local_part_suffix \
                   {${sg{$local_part_suffix}{-(\\w+)(\\+.*)?}{\$1}}} \
                   {post}}&#039; \
             $local_part
  current_directory = MM_HOME
  home_directory = MM_HOME
  user = MM_UID
  group = MM_GID</pre>

</div>

<h4 id="routeur_router">Routeur (router)</h4>
<div class="level4">

<p>
Tous les fichiers de configuration concernant le type « router » sont stockés dans le dossier « /etc/exim4/conf.d/router/ ». Vous pouvez ajouter les lignes suivantes dans un nouveau fichier nommé « 04_exim4-config_mailman »:
</p>
<pre class="file">mailman_router:
 driver = accept
 require_files = MM_HOME/lists/$local_part/config.pck
 local_part_suffix_optional
 local_part_suffix = -bounces : -bounces+* : \
                     -confirm+* : -join : -leave : \
                     -owner : -request : -admin
 transport = mailman_transport</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Exim4] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="exim41" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="4301-7622" /><button type="submit" title="Exim4" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="mailman1">Mailman</h3>
<div class="level3">

<p>
Modifiez d&#039;abord les paramètres de mailman afin qu&#039;il reconnaisse votre nom de domaine. Éditez le fichier /etc/mailman/mm_cfg.py et ajoutez-y :
</p>
<pre class="code">DEFAULT_EMAIL_HOST = &#039;votre_domaine.fr&#039;
DEFAULT_URL_HOST = &#039;votre_domaine.fr&#039;</pre>

<p>
L&#039;adresse de la liste sera du type <strong>nom_liste@votre_domaine.fr</strong>.
</p>

<p>
<a href="https://wiki.list.org/DOC/How%20do%20I%20configure%20postfix_to_mailman.py%3F" class="urlextern" title="https://wiki.list.org/DOC/How%20do%20I%20configure%20postfix_to_mailman.py%3F" rel="nofollow">infos sur postfix_to_mailman.py</a>
</p>

<p>
Créez ensuite une liste de diffusion, ici « mailman »:
</p>
<pre class="code bash"><span class="kw2">sudo</span> newlist mailman
&nbsp;
Entrez l<span class="st_h">'adresse courriel du gestionnaire de la liste : utilisateur@serveur.com
Mot de passe initial de la liste mailman :
Pour achever la création de votre liste de diffusion, vous devez
modifier votre fichier /etc/aliases (ou équivalent) en y ajoutant les
lignes suivantes et peut être exécuter le programme « newaliases »:
&nbsp;
liste de diffusion ## mailman
mailman:              &quot;|/var/lib/mailman/mail/mailman post mailman&quot;
mailman-admin:        &quot;|/var/lib/mailman/mail/mailman admin mailman&quot;
mailman-bounces:      &quot;|/var/lib/mailman/mail/mailman bounces mailman&quot;
mailman-confirm:      &quot;|/var/lib/mailman/mail/mailman confirm mailman&quot;
mailman-join:         &quot;|/var/lib/mailman/mail/mailman join mailman&quot;
mailman-leave:        &quot;|/var/lib/mailman/mail/mailman leave mailman&quot;
mailman-owner:        &quot;|/var/lib/mailman/mail/mailman owner mailman&quot;
mailman-request:      &quot;|/var/lib/mailman/mail/mailman request mailman&quot;
mailman-subscribe:    &quot;|/var/lib/mailman/mail/mailman subscribe mailman&quot;
mailman-unsubscribe:  &quot;|/var/lib/mailman/mail/mailman unsubscribe mailman&quot;
&nbsp;
Tapez sur Entrée pour aviser le propriétaire de mailman...</span></pre>

<p>
Nous avons configuré Exim afin qu&#039;il reconnaisse tous les courriels de Mailman. Ainsi, il n&#039;est plus obligatoire de créer des entrées dans « /etc/aliases ». Si vous avez effectué un changement quelconque, merci de vous assurer que vous ayez redémarré tous les services, avant de passer à la section suivante.
</p>

<p>
Enfin, démarrez Mailman :
</p>
<pre class="code">sudo /etc/init.d/mailman start</pre>

<p>
Pour avoir le site web en français, modifier la ligne suivante du fichier:
</p>
<dl class="file">
<dt><a href="/_export/code/mailman?codeblock=7" title="Télécharger cet extrait" class="mediafile mf_py">/etc/mailman/mm_cfg.py</a></dt>
<dd><pre class="file">DEFAULT_SERVER_LANGUAGE = &#039;fr&#039;</pre>
</dd></dl>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Mailman] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="mailman1" /><input type="hidden" name="codeblockOffset" value="6" /><input type="hidden" name="range" value="7623-9809" /><button type="submit" title="Mailman" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit10 page-header" id="administration">Administration</h2>
<div class="level2">

<p>
<a href="/_detail/serveur/mailman-webbased-admin2.png?id=mailman" class="media" title="serveur:mailman-webbased-admin2.png"><img src="/_media/serveur/mailman-webbased-admin2.png" class="mediacenter img-responsive" alt="" /></a>
</p>

<p>
Nous allons maintenant voir comment administrer Mailman. Cette étape considère que l&#039;installation de ce dernier a correctement été effectuée. 
</p>

<p>
Mailman fournit une administration web facile d&#039;utilisation. Pour y accéder, entrez le lien suivant dans votre navigateur internet : <a href="http://serveur/cgi-bin/mailman/admin" class="urlextern" title="http://serveur/cgi-bin/mailman/admin" rel="nofollow">http://serveur/cgi-bin/mailman/admin</a>
</p>

<p>
La liste de diffusion par défaut « mail » devrait apparaître sur l&#039;écran. Si vous cliquez sur celle-ci, on vous demandera un mot de passe pour vous identifier. Si vous entrez le bon mot de passe, vous pourrez changer les options d&#039;administration de la liste de diffusion.
</p>

<p>
Vous pouvez créer une nouvelle liste de diffusion en utilisant l&#039;utilitaire « <code>newlist</code> » en ligne de commande. Alternativement, vous pourez utiliser l&#039;interface web pour en créer une nouvelle.
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Administration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="administration" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="9810-10680" /><button type="submit" title="Administration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="gestion_des_rebonds">Gestion des rebonds</h3>
<div class="level3">

<p>
Les rebonds (bounces) correspondent à des refus de distribution du serveur de mail du destinataire. Les rebonds sont tracés dans le fichier /var/log/mailman/bounce
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Gestion des rebonds] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="gestion_des_rebonds" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="10681-10877" /><button type="submit" title="Gestion des rebonds" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit12 page-header" id="utilisateurs">Utilisateurs</h2>
<div class="level2">

<p>
Mailman fournit aussi une interface web pour les utilisateurs. Pour y accéder, entrez le lien suivant dans votre navigateur : 
<a href="http://serveur/cgi-bin/mailman/listinfo" class="urlextern" title="http://serveur/cgi-bin/mailman/listinfo" rel="nofollow">http://serveur/cgi-bin/mailman/listinfo</a>
</p>

<p>
La liste de diffusion par défaut, « mailman », devrait apparaître à l&#039;écran. Si vous cliquez sur le nom de la liste de diffusion, l&#039;interface affichera le formulaire de souscription. Vous pouvez entrer votre adresse électronique, votre nom (optionnel), et un mot de passe, afin de vous inscrire. Suivez les instructions contenues dans le courriel envoyé à la fin de l&#039;inscription, pour finir cette dernière.
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Utilisateurs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisateurs" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="10878-11491" /><button type="submit" title="Utilisateurs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit13 page-header" id="handlers">Handlers</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Handlers] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="handlers" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="11492-11512" /><button type="submit" title="Handlers" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="principe">Principe</h3>
<div class="level3">

<p>
Il peut être utile de modifier les mails que l’on envoie d’une manière n’étant pas prévue par Mailman. Dans cette optique on peut vouloir par exemple changer les en-têtes d’un mail, le corps des messages ou tout simplement effectuer une modération selon certains critères préprogrammés.  Un exemple concret est disponible dans la <a href="/mailman#je_ne_recois_pas_mes_propres_mails_depuis_mon_entreprise" class="wikilink1 curid" title="mailman" data-curid="true">FAQ de cette page</a>.
</p>

<p>
Le traitement des mails depuis leur réception jusqu’à leur renvoi à la liste est décomposé par Mailman en plusieurs phases, appelées « Handlers », dont l’ordre et l’usage est défini dans le fichier « Mailman/defaults.py » par la ligne suivante :
</p>
<pre class="code">GLOBAL_PIPELINE = [
    &#039;SpamDetect&#039;,
    &#039;Approve&#039;,
…
    &#039;Acknowledge&#039;,
    &#039;ToOutgoing&#039;,
    ]</pre>

<p>
Tous les handlers de cette liste sont des fichiers contenant du code en Python et sont situés dans le répertoire « Mailman/Handlers ». Bien entendu il est possible de les modifier directement afin de personnaliser le comportement de l’application, mais un meilleur moyen est de créer un handler personnalisé et de l’insérer à l’endroit où on le souhaite dans le traitement.
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Principe] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="principe" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="11513-12738" /><button type="submit" title="Principe" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="handlers_personnalises">Handlers personnalisés</h3>
<div class="level3">

</div>

<h4 id="avantages">Avantages</h4>
<div class="level4">

<p>
Les handlers personnalisés ont plusieurs avantages :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Ils permettent de ne pas modifier le code original de l’application. Cela évite les dommages collatéraux non prévus et facilite la maintenance ultérieure par une tierce personne.</div>
</li>
<li class="level2"><div class="li"> Ils ne seront pas affectés par une mise à jour de l’application.</div>
</li>
<li class="level2"><div class="li"> Ils permettent de n’être appliqués qu’à une collection spécifique de listes. Le code du handler n’a donc pas à effectuer de filtre pour savoir s’il doit, ou non, s’appliquer en fonction de la liste qui l’appelle.</div>
</li>
<li class="level2"><div class="li"> Tous les changements sont regroupés ce qui permet une désactivation ou suppression aisée du comportement modifié.</div>
</li>
</ul>

</div>

<h4 id="code">Code</h4>
<div class="level4">

<p>
Un handler est codé en python. Il doit nécessairement définir la fonction « process(mlist, msg, msgdata) » qui sera appelée par Mailman avec ces trois arguments :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> mlist est l’instance de la liste</div>
</li>
<li class="level2"><div class="li"> msg est l’instance du mail</div>
</li>
<li class="level2"><div class="li"> msgdata contient les méta-données du mail</div>
</li>
</ul>

<p>
Toutes les méthodes relatives à la liste ou au message peuvent donc être appelées à l’intérieur de cette fonction.
Toutes les modifications qui sont effectuées dans cette fonction affecteront le message et donc le traitement qui sera effectué par les handlers suivants. Il convient donc de placer le handler personnalisé au bon endroit dans le pipeline de traitement du mail.
</p>

</div>

<h4 id="insertion_du_handler">Insertion du handler</h4>
<div class="level4">

<p>
Considérons que notre handler personnalisé a bien été créé et est sauvegardé dans le répertoire « Mailman/Handlers » sous le doux nom « MonHandler ». Il faut alors choisir où insérer le code créé.
Pour cela je vous laisse vous reporter à la liste de handlers que nous avons vu plus haut (le champ GLOBAL_PIPELINE dans le fichier « Defaults.py »).
Pour l’exemple nous allons le positionner avant le handler « Moderate ». 
Une fois que l’on sait où placer notre code, il existe plusieurs moyens de le faire prendre en compte par l’application :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> L’insertion globale qui va l’appliquer à toutes les listes sans modifier les autres handlers. Nous allons alors éditer le fichier de configuration de Mailman (/etc/mailman/mm_cfg.py) et y ajouter la ligne suivante :</div>
</li>
</ul>
<pre class="code">GLOBAL_PIPELINE.insert(GLOBAL_PIPELINE.index(&#039;Moderate&#039;), &#039; MonHandler&#039;)</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Le remplacement global, qui va remplacer un des handlers par défaut par notre nouveau handler. Comme au dessus, nous allons ajouter dans le fichier de configuration de Mailman la ligne suivante :</div>
</li>
</ul>
<pre class="code">GLOBAL_PIPELINE[GLOBAL_PIPELINE.index(&#039;Moderate&#039;)] = &#039; MonHandler&#039;</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> L’insertion/remplacement spécifique, qui ne va impacter que les listes que nous aurons déterminées. Pour cela nous allons utiliser le fichier « bin/config_list ». Pour ce faire, il nous faut créer un fichier contenant les informations que nous voulons injecter dans la liste. Nous allons donc créer un fichier « MonFichier » qui contiendra les informations suivantes :</div>
</li>
</ul>
<pre class="code">mlist.pipeline = [
&#039;SpamDetect&#039;,
   &#039;Approve&#039;,
   …
   &#039;Replybot&#039;,
   &#039;MonHandler&#039;,
   &#039;Moderate&#039;,
   …
   &#039;Acknowledge&#039;,
   &#039;ToOutgoing&#039;,
    ]</pre>

<p>
Soit le pipeline global au complet ainsi que notre handler personnalisé inséré au bon endroit. Bien sûr si vous souhaitez remplacer « Moderate » par « MonHandler », vous supprimez « Moderate » du pipeline.
</p>

<p>
Ensuite pour l’appliquer à la liste « MaListe » il ne reste qu’à exécuter la commande :
</p>
<pre class="code">bin/config_list -i MonFichier MaListe</pre>

<p>
Enfin redémarrez Mailman :
</p>
<pre class="code">sudo /etc/init.d/mailman restart</pre>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Handlers personnalisés] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="handlers_personnalises" /><input type="hidden" name="codeblockOffset" value="9" /><input type="hidden" name="range" value="12739-16362" /><button type="submit" title="Handlers personnalisés" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit16 page-header" id="faq">FAQ</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[FAQ] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="faq" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="16363-16378" /><button type="submit" title="FAQ" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit17" id="envoi_de_mails_avec_exim">Envoi de mails avec Exim</h3>
<div class="level3">

<p>
Si vous n&#039;arrivez pas à envoyer de mails avec exim, vérifiez que vos fichiers logs ne contiennent pas une des erreurs suivantes :
</p>

</div>

<h4 id="smtp_service_not_available">554 SMTP service not available</h4>
<div class="level4">

<p>
Il suffit d&#039;autorisez l&#039;accès au service exim en ajoutant dans le fichier /etc/hosts.allow la ligne :
</p>
<pre class="code">exim : ALL</pre>

</div>

<h4 id="sorry_your_envelope_sender_domain_must_exist_571">553 sorry, your envelope sender domain must exist (#5.7.1)</h4>
<div class="level4">

<p>
Modifiez le paramètre <strong>primary_hostname</strong> dans le fichier de configuration d&#039;exim, /etc/mail/exim.conf, de telle sorte qu&#039;il contienne votre nom de domaine :
</p>
<pre class="code">primary_hostname = mon_domaine.fr</pre>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Envoi de mails avec Exim] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="envoi_de_mails_avec_exim" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="16379-16966" /><button type="submit" title="Envoi de mails avec Exim" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit18" id="je_ne_recois_pas_mes_propres_mails_depuis_mon_entreprise">Je ne reçois pas mes propres mails depuis mon entreprise</h3>
<div class="level3">

<p>
Avec mon adresse professionnelle, je ne recevais pas mes propres mails, ni ceux venant d’autres personnes de ma société. Cela venait du fait que le serveur de messagerie de l’entreprise n’autorisait pas de mails entrant si le nom de domaine était celui de la boite. Afin de contourner le problème il faut simplement supprimer le nom de domaine du champ d’en-tête « from ». Nous allons donc créer un handler personnalisé nommé « RemoveDomain.py » que l’on va placer dans le dossier « Mailman/Handlers ». Il contient le code suivant :
</p>
<pre class="code">&quot;&quot;&quot;Remove &#039;@domain&#039; from the messages From: header.
&quot;&quot;&quot;

import re

def process(mlist, msg, msgdata):
    from_val = msg.get(&#039;from&#039;)
    if from_val:
        from_val = re.sub(&#039;@[^ &gt;,]*&#039;, &#039;&#039;, from_val)
        del msg[&#039;from&#039;]
        msg[&#039;From&#039;] = from_val</pre>

<p>
Pour corriger le problème sur toutes les listes et éviter que cela arrive sur les listes futures, nous allons insérer ce handler de manière globale dans le pipeline :
</p>
<pre class="code">GLOBAL_PIPELINE.insert(GLOBAL_PIPELINE.index(&#039;Cleanse&#039;), &#039; RemoveDomain &#039;)</pre>

<p>
Pourquoi l’insérer avant « Cleanse » ? En fait on l’insère plutôt après « AvoidDuplicates ». Si nous l’avions inséré n’importe où avant ce handler, Mailman aurait considéré que vous n’étiez pas l’expéditeur du mail (vu que le nom de domaine est différent) et vous aurait donc envoyé une copie de votre propre mail malgré le fait que vous ayez configuré l’option « Recevez les messages que vous envoyez à la liste ? » à « Non ».
</p>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Je ne reçois pas mes propres mails depuis mon entreprise] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="je_ne_recois_pas_mes_propres_mails_depuis_mon_entreprise" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="16967-18594" /><button type="submit" title="Je ne reçois pas mes propres mails depuis mon entreprise" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit19" id="migrer_mailman_entre_2_serveurs">Migrer MailMan entre 2 serveurs</h3>
<div class="level3">
<pre class="code">for list in &lt;vos_listes_ici&gt;; do
echo $list
rsync -az --progress -e ssh &lt;ancien_serveur&gt;:/var/lib/mailman/archives/public/$list /var/lib/mailman/archives/public/
rsync -az --progress -e ssh &lt;ancien_serveur&gt;:/var/lib/mailman/archives/private/$list /var/lib/mailman/archives/private/
rsync -az --progress -e ssh &lt;ancien_serveur&gt;:/var/lib/mailman/archives/private/${list}.mbox /var/lib/mailman/archives/private/
rsync -az --progress -e ssh &lt;ancien_serveur&gt;:/var/lib/mailman/lists/$list /var/lib/mailman/lists/
done
# Vérifier les listes visibles sur le nouveau serveur
list_lists
# Si utilisation sur un nom DNS qui n&#039;est pas dédié aux listes mailman, on regénère les aliases à utiliser dans le MTA
/usr/lib/mailman/bin/genaliases
# Démarrage du service
/etc/init.d/mailman start
# Paramétrer le serveur web et le MTA (comme une nouvelle installation)
# Vérifier le bon fonctionnement</pre>

<p>
Ressources :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://wiki.list.org/display/DOC/How+do+I+move+a+list+to+a+different+server-Mailman+installation." class="urlextern" title="http://wiki.list.org/display/DOC/How+do+I+move+a+list+to+a+different+server-Mailman+installation." rel="nofollow">http://wiki.list.org/display/DOC/How+do+I+move+a+list+to+a+different+server-Mailman+installation.</a> </div>
</li>
<li class="level1"><div class="li"> <a href="http://www.mail-archive.com/mailman-users@python.org/msg08534.html" class="urlextern" title="http://www.mail-archive.com/mailman-users@python.org/msg08534.html" rel="nofollow">http://www.mail-archive.com/mailman-users@python.org/msg08534.html</a></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Migrer MailMan entre 2 serveurs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="migrer_mailman_entre_2_serveurs" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="18595-19740" /><button type="submit" title="Migrer MailMan entre 2 serveurs" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit20" id="mailman_ne_fonctionne_qu_en_local_apres_migration_vers_precise_1204_relay_access_denied">Mailman ne fonctionne qu&#039;en local après migration vers Precise 12.04 (Relay access denied)</h3>
<div class="level3">

<p>
Si l&#039;envoi de mails depuis l&#039;extérieur sur la liste échoue ou que mailman n&#039;arrive pas à envoyer les mails à tous les destinataires, cela peut provenir d&#039;un problème de résolution <abbr title="Domain Name System">DNS</abbr>.
</p>

<p>
Un exemple de log Postfix :
</p>
<pre class="code">May  1 10:46:08 server-mail postfix/smtpd[17869]: warning: hostname ns.****.** does not resolve to address 192.168.1.11: No address associated with hostname
May  1 10:46:08 server-mail postfix/smtpd[17869]: connect from unknown[192.168.1.11]
May  1 10:46:08 server-mail postfix/smtpd[17869]: Anonymous TLS connection established from unknown[192.168.1.11]: TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits)
May  1 10:46:08 server-mail postfix/smtpd[17869]: CCE521FCD0: client=unknown[192.168.1.11], sasl_method=PLAIN, sasl_username=truc
May  1 10:46:08 server-mail postfix/cleanup[17874]: CCE521FCD0: message-id=&lt;4F9FA2CF.1000208@****.**&gt;
May  1 10:46:08 server-mail postfix/qmgr[3072]: CCE521FCD0: from=&lt;*****@****.**&gt;, size=720, nrcpt=1 (queue active)
May  1 10:46:08 server-mail postfix/smtpd[17869]: disconnect from unknown[192.168.1.11]
May  1 10:46:09 server-mail postfix/pipe[17875]: CCE521FCD0: to=&lt;****@****.**&gt;, relay=mailman, delay=0.38, delays=0.09/0.01/0/0.29, dsn=2.0.0, status=sent (delivered via mailman service)
May  1 10:46:09 server-mail postfix/qmgr[3072]: CCE521FCD0: removed
May  1 10:46:11 server-mail postfix/smtpd[17869]: warning: hostname localhost does not resolve to address ::1: No address associated with hostname
May  1 10:46:11 server-mail postfix/smtpd[17869]: connect from unknown[::1]
May  1 10:46:11 server-mail postfix/smtpd[17869]: NOQUEUE: reject: RCPT from unknown[::1]: 554 5.7.1 &lt;*******@orange.fr&gt;: Relay access denied; from=&lt;***-bounces@***&gt; to=&lt;*******@****&gt; proto=ESMTP helo=&lt;[127.0.1.1]&gt;</pre>

<p>
Ubuntu lors de la migration vers Precise modifie le fichier <code>/etc/hosts</code>, il suffit d&#039;<a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditer le fichier</a> avec les droits d&#039;administrateur pour commenter les lignes suivantes :
</p>
<pre class="code">::1 localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts</pre>

<p>
<a href="http://ubuntuforums.org/showthread.php?t=1970483" class="urlextern" title="http://ubuntuforums.org/showthread.php?t=1970483" rel="nofollow">Source</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Mailman ne fonctionne qu&#039;en local après migration vers Precise 12.04 (Relay access denied)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="mailman_ne_fonctionne_qu_en_local_apres_migration_vers_precise_1204_relay_access_denied" /><input type="hidden" name="codeblockOffset" value="17" /><input type="hidden" name="range" value="19741-22060" /><button type="submit" title="Mailman ne fonctionne qu&#039;en local après migration vers Precise 12.04 (Relay access denied)" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit21 page-header" id="dbmail">Dbmail</h2>
<div class="level2">

<p>
<a href="/dbmail#mailman" class="wikilink1" title="dbmail">Dbmail et Mailman</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_21'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Dbmail] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="dbmail" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="22061-22117" /><button type="submit" title="Dbmail" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit22 page-header" id="lien">Lien</h2>
<div class="level2">

<p>
Site officiel <a href="http://www.gnu.org/software/mailman/" class="urlextern" title="http://www.gnu.org/software/mailman/" rel="nofollow">http://www.gnu.org/software/mailman/</a>
</p>
<hr />

<p>
<em>Contributeurs : <a href="/utilisateurs/kmeleon" class="wikilink2" title="utilisateurs:kmeleon" rel="nofollow">Kmeleon</a> (<a href="https://wiki.ubuntu.com/Mailman" class="urlextern" title="https://wiki.ubuntu.com/Mailman" rel="nofollow">traduction</a>), <a href="/utilisateurs/ner0lph" class="wikilink1" title="utilisateurs:ner0lph">Ner0lph</a> (mise aux normes), <a href="/utilisateurs/piccolo" class="wikilink1" title="utilisateurs:piccolo">piccolo</a> (handlers).</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_22'><form class="button btn_secedit form-inline" method="post" action="/mailman"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1596544862" /><input type="hidden" name="summary" value="[Lien] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="lien" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="22118-" /><button type="submit" title="Lien" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="mailman.txt">mailman.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 04/08/2020, 14:41">Le 04/08/2020, 14:41</span></li><li class="text-muted">par 80.8.5.240</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=mailman&amp;1635557111" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

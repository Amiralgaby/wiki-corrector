<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>glade2script [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="programmation,developpement,brouillon,vetuste"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/glade2script?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/glade2script?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/glade2script"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/glade2script"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/glade2script"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"glade2script","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="glade2script">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/glade2script?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/glade2script?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/glade2script?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/glade2script?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/glade2script?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/glade2script?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/glade2script?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">glade2script</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/glade2script?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/glade2script?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/glade2script?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#principe","title":"Principe","level":1},{"link":"#utilisation","title":"Utilisation","level":1},{"link":"#interface_statique","title":"Interface Statique:","level":2},{"link":"#interface_dynamique","title":"Interface dynamique:","level":2},{"link":"#petit_exemple","title":"Petit exemple:","level":2},{"link":"#quelques_precautions","title":"Quelques pr\u00e9cautions:","level":1},{"link":"#general","title":"G\u00e9n\u00e9ral:","level":2},{"link":"#glade","title":"Glade:","level":2},{"link":"#widgets_gtk","title":"Widgets Gtk:","level":2},{"link":"#script_associe","title":"Script associ\u00e9:","level":2},{"link":"#signaux_gtk_et_callback","title":"Signaux Gtk et callback","level":2},{"link":"#commandes_pygtk","title":"Commandes pyGtk","level":2},{"link":"#commandes_glade2script","title":"Commandes glade2script","level":2},{"link":"#voir_aussi","title":"Voir aussi","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#principe">Principe</a></li>
<li class="level1"><a href="#utilisation">Utilisation</a>
<ul class="nav toc">
<li class="level2"><a href="#interface_statique">Interface Statique:</a></li>
<li class="level2"><a href="#interface_dynamique">Interface dynamique:</a></li>
<li class="level2"><a href="#petit_exemple">Petit exemple:</a></li>
</ul>
</li>
<li class="level1"><a href="#quelques_precautions">Quelques précautions:</a>
<ul class="nav toc">
<li class="level2"><a href="#general">Général:</a></li>
<li class="level2"><a href="#glade">Glade:</a></li>
<li class="level2"><a href="#widgets_gtk">Widgets Gtk:</a></li>
<li class="level2"><a href="#script_associe">Script associé:</a></li>
<li class="level2"><a href="#signaux_gtk_et_callback">Signaux Gtk et callback</a></li>
<li class="level2"><a href="#commandes_pygtk">Commandes pyGtk</a></li>
<li class="level2"><a href="#commandes_glade2script">Commandes glade2script</a></li>
</ul>
</li>
<li class="level1"><a href="#voir_aussi">Voir aussi</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est considérée comme <a href="/vetuste">vétuste</a> et ne contient plus d'informations utiles.<br />
Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/programmation" class="wikilink1" title="programmation" rel="tag">programmation</a>,
	<a href="/developpement" class="wikilink1" title="developpement" rel="tag">développement</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>,
	<a href="/vetuste" class="wikilink1" title="vetuste" rel="tag">VÉTUSTE</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="glade2script">Glade2script</h1>
<div class="level1">

<p>
Surcouche <strong>pygtk-glade</strong> pour gestion interface graphique depuis un script <strong>bash</strong>, <strong>python</strong> ou autre.
</p>
<div class="notewarning">Cette doc n&#039;est pas du tout à jour, des erreurs sont présentes.
Merci de se référer à celle ci: <a href="http://code.google.com/p/glade2script/wiki/Principe" class="urlextern" title="http://code.google.com/p/glade2script/wiki/Principe" rel="nofollow">http://code.google.com/p/glade2script/wiki/Principe</a>.

</div>
</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Glade2script] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="glade2script" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="63-376" /><button type="submit" title="Glade2script" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="principe">Principe</h2>
<div class="level2">

<p>
L&#039;interface sera créée via glade­3 (projet libglade), un script bash, python ou autre, portant le même nom que le glade, y sera associé.
Dans ce script, on y placera les actions à effectuer en réaction à l&#039;interface (sous forme de fonctions) ou les commandes pour modifier/récupérer la valeur d&#039;un widget.
</p>

<p>
glade2script, écrit en python, sert de passerelle entre le script et l&#039;interface GTK. Il est connecté au stdout du script (chaque echo), traduit et envoie les commandes à GTK.
</p>

<p>
Pour envoyer des informations depuis GTK au script, il écrit dans un fichier (FIFO), sur lequel le script est connecté et en récupère les données pour les interpréter sous forme d&#039;appel à des fonctions ou de variables chargées dans l&#039;environnement.
</p>

<p>
Pour récupérer la valeur d&#039;un widget, 2 solutions, soit via les <strong>callbacks</strong> (qui appellent nos fonctions avec arguments, à renseigner dans le <strong>glade</strong>) ou via les commandes <strong>glade2script</strong> qui agissent sur l&#039;interface depuis notre script.
</p>

<p>
<em class="u">Les commandes seront du type :</em>
</p>
<pre class="code">    # Commande glade2script et pygtk
    echo &#039;SET@_label1.set_text(“mon texte”)&#039;
    echo &#039;GET@_entry1.get_text()&#039;
    # Commande glade2script
    echo &quot;TREE@@LOAD@@treeview1@@/tmp/liste_tree&quot;
    echo &quot;IMG@@_img_tux@@tux.png@@150@@150&quot;</pre>

<p>
<a href="/lib/exe/fetch.php?tok=efd41e&amp;media=http%3A%2F%2Fglade2script.tuxfamily.org%2Fdoc%2Frecup_var.jpg" class="media" title="http://glade2script.tuxfamily.org/doc/recup_var.jpg"><img src="/lib/exe/fetch.php?tok=efd41e&amp;media=http%3A%2F%2Fglade2script.tuxfamily.org%2Fdoc%2Frecup_var.jpg" class="media img-responsive" title="recup_var.jpg" alt="recup_var.jpg" /></a>
<a href="/lib/exe/fetch.php?tok=f91e72&amp;media=http%3A%2F%2Fglade2script.tuxfamily.org%2Fdoc%2Ffonction.jpg" class="media" title="http://glade2script.tuxfamily.org/doc/fonction.jpg"><img src="/lib/exe/fetch.php?tok=f91e72&amp;media=http%3A%2F%2Fglade2script.tuxfamily.org%2Fdoc%2Ffonction.jpg" class="media img-responsive" title="fonction.jpg" alt="fonction.jpg" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Principe] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="principe" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="377-1799" /><button type="submit" title="Principe" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="utilisation">Utilisation</h2>
<div class="level2">

<p>
Il y a 2 façons d&#039;utiliser glade2script:
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1800-1866" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="interface_statique">Interface Statique:</h3>
<div class="level3">

<p>
 Dans le script principal, on appelle l&#039;interface graphique et en sortie, on récupère les variables des différents
widgets référencés en argument (comme le fait <strong>zenity</strong> par exemple )
</p>
<pre class="code">    #/bin/bash
    SORTIE_GUI=$(glade2script -g ./MonFichier.glade -r &#039;_entry1.get_text&#039;)
    echo “$SORTIE_GUI”
    #Résultat:
    _entry1_get_text=”texte saisie dans l&#039;entrée”
    EXIT=”ok”
    </pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Interface Statique:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interface_statique" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1867-2312" /><button type="submit" title="Interface Statique:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="interface_dynamique">Interface dynamique:</h3>
<div class="level3">

<p>
 Des traitements seront réalisés en réaction à l&#039;interface, ce code se trouvera dans le script associé au glade, l&#039;interface ne devra pas être fermer pour pouvoir récupérer les données saisies.
 Pour lancer la machine, il suffit de créer un petit script où se trouve la commande glade2script.
 On peut mixer les deux, utilisation dynamique et récupération des variables en sortie quand même, selon les besoins.
</p>

<p>
Cela peut paraître compliqué, mais ca ne l&#039;est pas du tout à l&#039;usage, le petit exemple ci-dessous vous le prouvera.
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Interface dynamique:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="interface_dynamique" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2313-2888" /><button type="submit" title="Interface dynamique:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="petit_exemple">Petit exemple:</h3>
<div class="level3">

<p>
Je veux, depuis mon script, lancer une boite de dialogue avec une question et 2 boutons, un pour valider l&#039;autre pour refuser (Utilisation statique).
Il faut d&#039;abord créer la boite de dialogue dans glade.
Dans les signaux des boutons, renseigner pour le signal clicked ⇒ on_clicked
Donner un nom explicite aux boutons, ici, btn_ok, btn_no
C&#039;est le nom que les fonctions porteront dans le script associé.
</p>

<p>
 Le script associé au glade et portant le même nom.
</p>
<pre class="code">    #! /bin/bash
    PID=$$
    FIFO=/tmp/FIFO${PID}
    mkfifo $FIFO
    function btn_ok()
    {
    echo &#039;EXIT@@SAVE&#039;
    }
    function btn_no()
    {
    echo &#039;EXIT@@&#039;
    }
    # La boucle imbriquée qui suit est le coeur du système de
    # communication entre GTK et bash.
    # Elle devra toujours se trouver en bas du script associé au
    # glade. Vous n&#039;avez pas à vous en soucier, mais il y est possible
    # d&#039;intercepter les signaux pour en faire autre chose que
    # d&#039;appeler une fonction ou charger une variable...
    while read ligne; do
          if [[ &quot;$ligne&quot; =~ GET@ ]]; then
               eval ${ligne#*@}
               echo &quot;DEBUG =&gt; in boucle bash :&quot; ${ligne#*@}
          else
               echo &quot;DEBUG=&gt; in bash NOT GET&quot; $ligne
               $ligne
         fi
    done &lt; &lt;(while true; do
          read entree &lt; $FIFO
          [[ &quot;$entree&quot; == &quot;QuitNow&quot; ]] &amp;&amp; break
            echo $entree
    done)</pre>

<p>
Votre script maintenant :
</p>
<pre class="code">    #! /bin/bash
    # Déroulement de votre script
    # 2 façons de récupérer le résultat, soit par le code de sortie
    # ou en chargeant la variable EXIT dans l&#039;environement et traiter
    # le résultat.
    if glade2script -g ./mon_gui.glade; then
       echo “le bouton ok a été clické”
    else
       echo “le bouton no a été clické”
    fi
    #
    #
    # deuxième méthode, charger la variable EXIT
    GUI=$(glade2script -g ./mon_gui.glade)
    eval “${GUI}”
    If [[ “${EXIT}” == “yes” ]]; then
      echo “le bouton ok a été clické”
    else
      echo “le bouton no a été clické”
    fi
    # Il est possible de faire différent, à savoir qu&#039;en sortie,
    # il y a EXIT=”yes” ou EXIT=”no”, et le code de sortie 0 ou 1
    # selon le choix de l&#039;utilisateur.</pre>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Petit exemple:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="petit_exemple" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2889-5279" /><button type="submit" title="Petit exemple:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="quelques_precautions">Quelques précautions:</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Quelques précautions:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="quelques_precautions" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="5280-5312" /><button type="submit" title="Quelques précautions:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="general">Général:</h3>
<div class="level3">

<p>
 - Les * combinés avec les commandes HIZO peuvent poser problèmes, elles seront interprétées dans le shell bash.
Indiquer la commande set -f avant la boucle de fin pour y remedier, set +f pour inverser le comportement.
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Général:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="general" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="5313-5555" /><button type="submit" title="Général:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="glade">Glade:</h3>
<div class="level3">

<p>
 - Les widgets qui doivent être modifiés, ou dont les valeurs seront récupérées via le script associé, devront commencer par _ pour être référencés.
 - Les windows, statusbars, eventbox, treeviews et GtkAboutDialog n&#039;ont pas besoin d&#039;être référencés.
 - Par défaut, la visibilité d&#039;une fenêtre est sur non, basculer cette option pour la voir au lancement de votre soft.
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Glade:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="glade" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="5556-5958" /><button type="submit" title="Glade:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="widgets_gtk">Widgets Gtk:</h3>
<div class="level3">

<p>
 - AboutDialog: Il faut que le nom du logiciel soit le même que le nom de la fenêtre.
</p>

<p>
Commandes glade2script:
 - Les commandes GET@ et SET@ s&#039;utilisent avec des commandes pygtk, c&#039;est pour bien les différencier qu&#039;elles n&#039;ont qu&#039;un seul @
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Widgets Gtk:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="widgets_gtk" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="5959-6223" /><button type="submit" title="Widgets Gtk:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="script_associe">Script associé:</h3>
<div class="level3">

<p>
 - Il faut utiliser l&#039;unicode pour représenter le &amp;
 - Les sauts de ligne s&#039;écrivent \\n s&#039;ils sont encadrés par des &quot; et \n s&#039;ils sont encadrés par des &#039;
 - Tous les echo du script associé passeront par le script python qui gère GTK(glade2script), les @ ou les echo sans arguments feront planter le soft.
 - En cas d&#039;utilisation statique, chaque echo sera également évalué dans l&#039;environnement, donc plantage assuré en cas d&#039;eval :)
 - En cas d&#039;utilisation de sous-processus et la sortie via les callbacks gtk_widget_destroy, il faudra ajouter un echo après la boucle finale pour éviter le gel de l&#039;application.
 - Pour un affichage en console sans passer par le script python, il suffit de rediriger vers un autre fd.
</p>
<pre class="code">    exec 4&gt;$(tty)
    echo &#039;un truc qui ne passera pas par python&#039; &gt;&amp;4
    #Penser à refermer le fd en fin de script:
    exec 4&lt;&amp;-</pre>
<div class="noteclassic"><strong>A savoir :</strong>
Le PID de glade2script et du terminal sont accessibles via une commande GET@
GET@glade2script_PID et GET@terminal_PID
</div>
</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Script associé:] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="script_associe" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="6224-7269" /><button type="submit" title="Script associé:" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="signaux_gtk_et_callback">Signaux Gtk et callback</h3>
<div class="level3">

<p>
<strong>Dans le glade</strong>, pour chaque widget auquel vous voulez associer une action, il faut renseigner un signal. Ce signal, auquel on aura assigné un callback, lancera une fonction du script associé correspondant au nom du widget, avec un argument.
</p>

<p>
Quelques callbacks n&#039;ont pas de retour, ils agissent directement sur l&#039;interface.
</p>

<p>
Il peut être utile de renseigner les données utilisateurs. Le widget renseigné dans ces données, lancera le callback.
Par exemple, si on renseigne, en données utilisateur un widget entry sur le signal d&#039;un bouton,signal clicked, callback on_entry, c&#039;est la fonction de l&#039;entry qui sera lancée avec son contenu en argument lorsque le bouton sera enfoncé. En gros, le bouton se fait passer pour l&#039;entry.
Les données utilisateurs sont aussi nécessaire au fonctionnement des callbacks qui agissent directement sur l&#039;interface.
</p>

</div>

<h4 id="callbacks_qui_lancent_une_fonction_avec_argument">Callbacks qui lancent une fonction avec argument:</h4>
<div class="level4">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>

<h4 id="callbacks_sans_retourpour_modifier_interface_directement">Callbacks sans retour:(pour modifier interface directement)</h4>
<div class="level4">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>

<h4 id="details_callback">Détails callback</h4>
<div class="level4">

<p>
Les signaux, lorsqu&#039;il sont renseignés, ne sont là que pour l&#039;exemple, d&#039;autres peuvent être utilisés.
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Signaux Gtk et callback] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="signaux_gtk_et_callback" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="7270-8437" /><button type="submit" title="Signaux Gtk et callback" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="commandes_pygtk">Commandes pyGtk</h3>
<div class="level3">

<p>
Les commandes pyGtk agissent sur un widget, modifient sa valeur, sa taille, etc,etc …
Vous trouverez ces commandes dans la doc pyGTK (dans devhelp, installer avec glade sous Lucid, The gtk Class Reference).
Une grande partie de ces commandes ne nous sont pas nécessaires/disponibles. Certaines sont réglées dans glade, d&#039;autres serait trop compliquées à l&#039;utilisation pour être implantées. Dans la section Gtk Widget Reference, sont rassemblés les principaux widget avec leurs commandes, callback et signaux les plus utilisés.
</p>

<p>
Pour lancer les commandes pyGtk depuis le script associé, il faut passer par des commandes glade2script.
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Commandes pyGtk] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="commandes_pygtk" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="8438-9107" /><button type="submit" title="Commandes pyGtk" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="commandes_glade2script">Commandes glade2script</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Commandes glade2script] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="commandes_glade2script" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="9108-9145" /><button type="submit" title="Commandes glade2script" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit15 page-header" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://code.google.com/p/glade2script/" class="urlextern" title="http://code.google.com/p/glade2script/" rel="nofollow">Site officiel de glade2script</a></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/glade2script"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1486721366" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="voir_aussi" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="9146-" /><button type="submit" title="Voir aussi" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="glade2script.txt">glade2script.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 10/02/2017, 11:09">Le 10/02/2017, 11:09</span></li><li class="text-muted">par L&#039;Africain</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=glade2script&amp;1635551924" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

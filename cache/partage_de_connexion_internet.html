<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>partage_de_connexion_internet [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="partage,reseau,serveur,vetuste"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/partage_de_connexion_internet?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/partage_de_connexion_internet?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/partage_de_connexion_internet"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/partage_de_connexion_internet"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/partage_de_connexion_internet"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"partage_de_connexion_internet","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="partage_de_connexion_internet">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/partage_de_connexion_internet?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/partage_de_connexion_internet?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/partage_de_connexion_internet?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/partage_de_connexion_internet?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/partage_de_connexion_internet?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/partage_de_connexion_internet?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/partage_de_connexion_internet?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">partage_de_connexion_internet</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/partage_de_connexion_internet?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/partage_de_connexion_internet?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/partage_de_connexion_internet?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#configuration_cote_serveur","title":"Configuration c\u00f4t\u00e9 serveur","level":1},{"link":"#avec_network-manager","title":"Avec Network-Manager","level":2},{"link":"#avec_un_pont_reseau","title":"Avec un pont r\u00e9seau","level":2},{"link":"#ancienne_methode","title":"Ancienne m\u00e9thode","level":2},{"link":"#configuration_cote_client","title":"Configuration cot\u00e9 client","level":1},{"link":"#en_dhcp","title":"En DHCP","level":2},{"link":"#en_ip_fixe","title":"En IP Fixe","level":2},{"link":"#problemes_rencontres","title":"Probl\u00e8mes rencontr\u00e9s","level":1},{"link":"#les_dns_ne_fonctionnent_pas","title":"Les DNS ne fonctionnent pas","level":2},{"link":"#liens","title":"Liens","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#configuration_cote_serveur">Configuration côté serveur</a>
<ul class="nav toc">
<li class="level2"><a href="#avec_network-manager">Avec Network-Manager</a></li>
<li class="level2"><a href="#avec_un_pont_reseau">Avec un pont réseau</a></li>
<li class="level2"><a href="#ancienne_methode">Ancienne méthode</a></li>
</ul>
</li>
<li class="level1"><a href="#configuration_cote_client">Configuration coté client</a>
<ul class="nav toc">
<li class="level2"><a href="#en_dhcp">En DHCP</a></li>
<li class="level2"><a href="#en_ip_fixe">En IP Fixe</a></li>
</ul>
</li>
<li class="level1"><a href="#problemes_rencontres">Problèmes rencontrés</a>
<ul class="nav toc">
<li class="level2"><a href="#les_dns_ne_fonctionnent_pas">Les DNS ne fonctionnent pas</a></li>
</ul>
</li>
<li class="level1"><a href="#liens">Liens</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est considérée comme <a href="/vetuste">vétuste</a> et ne contient plus d'informations utiles.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/partage" class="wikilink1" title="partage" rel="tag">partage</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/vetuste" class="wikilink1" title="vetuste" rel="tag">vétuste</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="comment_partager_une_connexion_internet">Comment partager une connexion internet ?</h1>
<div class="level1">

<p>
Vous pouvez paramétrer votre carte réseau (wifi ou non) pour qu&#039;elle serve de pont entre plusieurs réseaux. Le plus fréquemment, on rencontre cette configuration lorsque votre ordinateur sous Ubuntu est relié directement au modem de votre fournisseur d&#039;accès à Internet, et que vous désirez partager votre accès à Internet avec un autre ordinateur supplémentaire.
</p>

<p>
Si vous avez un réseau avec un modem qui ne peut pas dupliquer la connexion lui même, ou, si vous voulez faire un sous réseau, avoir plus d&#039;emprise sur le filtrage en transformant un ordinateur en routeur, ou n&#039;importe quoi d&#039;autre, il vous faudra partager votre connexion internet avec les autres ordinateurs.
</p>

<p>
Si le contenu de cette page vous dépasse, vous pouvez opter pour l&#039;achat d&#039;un routeur ou 
modem-routeur. <a href="http://forum.ubuntu-fr.org/viewtopic.php?pid=3041586#p3041586" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?pid=3041586#p3041586" rel="nofollow">Son utilisation est décrite dans le forum</a>.
</p>
<div class="noteclassic">Si vous souhaitez simplement partager un réseau en wifi depuis un pc portable lui même connecté en filaire, rendez-vous sur la page <a href="/hotspot" class="wikilink1" title="hotspot">Hotspot</a> ou <a href="https://guide.ubuntu-fr.org/desktop/net-wireless-adhoc.html" class="urlextern" title="https://guide.ubuntu-fr.org/desktop/net-wireless-adhoc.html" rel="nofollow">ce guide</a>
</div>
</div>

<h4 id="un_peu_de_vocabulaire">Un peu de vocabulaire</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> L&#039;ordinateur qui met en place le partage de connexion sera nommé <strong>Serveur ICS</strong> <a href="http://en.wikipedia.org/wiki/Internet_Connection_Sharing" class="urlextern" title="http://en.wikipedia.org/wiki/Internet_Connection_Sharing" rel="nofollow">Internet Connection Sharing</a></div>
</li>
<li class="level1"><div class="li"> Un ordinateur relié au serveur ICS sera appelé <strong>Client</strong></div>
</li>
<li class="level1"><div class="li"> Une carte réseau ou Wi-Fi est une <strong>interface réseau</strong></div>
</li>
<li class="level1"><div class="li"> Une <strong>adresse IP</strong> ou une <strong>IP</strong> est l&#039;identifiant d&#039;un ordinateur sur le réseau</div>
</li>
</ul>

<p>
<a href="/_detail/applications/config_rl2.png?id=partage_de_connexion_internet" class="media" title="applications:config_rl2.png"><img src="/_media/applications/config_rl2.png" class="mediacenter img-responsive" alt="" /></a>
</p>
<div class="noteclassic">Petite note sur l&#039;illustration, le switch (sorte de multi-prises réseau) n&#039;est indispensable que si vous voulez relier plus d&#039;un ordinateur au serveur ICS.
</div>
<p>
Il y a plusieurs façons de faire, ici trois seront présentées. La première est très simple et efficace techniquement, la seconde est disponible si la première ne marche pas et la dernière est une ancienne technique très personnalisable et parfaitement opérationnelle, même si elle ne convient pas vraiment aux besoins des utilisateurs standard.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Comment partager une connexion internet ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="comment_partager_une_connexion_internet" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="48-2231" /><button type="submit" title="Comment partager une connexion internet ?" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="configuration_cote_serveur">Configuration côté serveur</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Configuration côté serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_cote_serveur" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2232-2273" /><button type="submit" title="Configuration côté serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="avec_network-manager">Avec Network-Manager</h3>
<div class="level3">

<p>
Reportez-vous à ce <a href="/network-manager#modifier_les_parametres_ip_pour_le_partage_d_une_connexion_internet" class="wikilink1" title="network-manager">paragraphe</a> de la page Network-Manager.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Avec Network-Manager] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="avec_network-manager" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2274-2453" /><button type="submit" title="Avec Network-Manager" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="avec_un_pont_reseau">Avec un pont réseau</h3>
<div class="level3">

<p>
Cette astuce est tirée du blog Only Ubuntu, et permet de partager une connexion avec le paquet bridge-utils, qui permet de gérer les ponts réseaux sous Ubuntu.
</p>

</div>

<h4 id="pre-requis">Pré-Requis</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez le paquet</a> <strong><a href="apt://bridge-utils" class="urlextern" title="apt://bridge-utils" rel="nofollow">bridge utils</a></strong> :</div>
</li>
</ul>
<pre class="code">sudo apt-get install bridge-utils</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Il faut connaître le nom de l&#039;interface réseau reliée à Internet et le nom de la carte qui servira au partage. Entrez, dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> :</div>
</li>
</ul>
<pre class="code"> ifconfig</pre>

<p>
 Vous devriez avoir un résultat semblable à celui-ci (si ce n&#039;est pas le cas, tentez &quot;<code>ifconfig -a</code>&quot;):
</p>
<pre class="file">eth0      Lien encap:Ethernet  HWaddr 00:11:22:33:44:55  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          (...) 

eth1      Lien encap:Ethernet  HWaddr 00:AA:BB:CC:DD:EE  
          inet adr:192.168.0.0  Bcast:192.168.0.255  Masque:255.255.255.0
          adr inet6: fe80::219:d2ff:fed6:e69/64 Scope:Lien
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          (...)</pre>

<p>
Dans ce cas, on voit clairement que l&#039;interface réseau possédant une connexion Internet est l&#039;interface eth1, grâce à la seconde ligne :
</p>
<pre class="code">inet adr:192.168.0.0  Bcast:192.168.0.255  Masque:255.255.255.0</pre>

<p>
L&#039;autre, eth0, sera donc celle de partage.
</p>
<div class="noteclassic"> Si vous avez des interfaces finissant par <em class="u">avah</em>, n&#039;en tenez pas compte, ce sont des duplications. L&#039;interface de partage ne pourra pas commencer par <strong>ppp</strong> ou <strong>lo</strong>
</div>
</div>

<h4 id="creation_du_pont">Création du pont</h4>
<div class="level4">

<p>
Stoppez le service des réseaux :
</p>
<pre class="code">sudo /etc/init.d/networking stop</pre>

<p>
Modifier le fichier /etc/network/interfaces :
</p>
<pre class="code">sudo gedit /etc/network/interfaces</pre>

<p>
Et remplacez son contenu par celui-ci, en modifiant bien entendu eth0 par l&#039;interface internet, et eth1 par l&#039;interface de partage : (Attention, cet exemple est à l&#039;inverse du précédent : eth0 devient eth1)
</p>
<pre class="file">auto lo
iface lo inet loopback

auto eth0
iface eth0 inet manual

auto eth1
iface eth1 inet manual

auto br0
iface br0 inet dhcp
bridge_ports eth0 eth1</pre>

<p>
Relancez les services : 
</p>
<pre class="code">sudo /etc/init.d/networking start</pre>

<p>
 ou (Si start ne fonctionne pas):
</p>
<pre class="code">sudo /etc/init.d/networking restart</pre>

<p>
 ou (si networking ne fonctionne pas)
</p>
<pre class="code">sudo ifdown --exclude=lo -a &amp;&amp; sudo ifup --exclude=lo -a</pre>

<p>
Et le partage est fait ! Les PC client peuvent se connecter au PC qui partage sa connexion de façon similaire à un routeur.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Avec un pont réseau] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="avec_un_pont_reseau" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2454-4851" /><button type="submit" title="Avec un pont réseau" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="ancienne_methode">Ancienne méthode</h3>
<div class="level3">

</div>

<h4 id="quelques_precisions">Quelques précisions</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Sur Intrepid, avec la disparition de <strong>gnome-network-admin</strong> (que vous pouvez tout de même <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installer</a> grâce au paquet du même nom), il est sûrement possible que ça ne marche sans rien faire, où en utilisant le programme de configuration de network manager, si vous en avez constaté la véracité, veuillez mettre une note ici même dans le wiki.</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Sur Hardy, il est possible qu&#039;il faille laisser l&#039;interface par laquelle on partage la connexion en itinérant, à tester si après avoir fait tout le nécessaire ça ne marche pas …</div>
</li>
</ul>
<div class="noteclassic">Sur Hardy Heron (8.04) si l&#039;interface réseau reliée à Internet est une connexion Wi-Fi il faut la laisser en itinérant 
</div><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Cette documentation a été testée sur Ubuntu 7.10 &quot;Gutsy&quot;, avec une carte Wi-Fi et une carte &quot;câble&quot;.</div>
</li>
</ul>

<p>
Pour une adaptation pour Kubuntu/Xubuntu et/ou si vous avez des problèmes, avec votre configuration : contactez-moi → <a href="/utilisateurs/fabien26" class="wikilink1" title="utilisateurs:fabien26">Fabien26</a>
</p>

<p>
Cette documentation est une simplification/actualisation/remise en forme de cette page : <a href="/tutoriel/comment_configurer_son_reseau_local#methode_avancee_configuration_dynamique_et_centralisee" class="wikilink1" title="tutoriel:comment_configurer_son_reseau_local">Configurer son réseau local</a>
</p>

</div>

<h4 id="pre-requis1">Pré-requis</h4>
<div class="level4">
<div class="noteimportant">Firestarter n&#039;est plus compatible avec dnsmasq, utiliser ICS <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> à la place.
Il serait bien de changer le tuto pour pouvoir utiliser dnsmasq quand même ou mettre un tuto pour installer ICS <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> à la place
</div><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Vous devez avoir deux interfaces réseau (une Wi-Fi et une câble, deux câbles, ou un modem et un câble)</div>
</li>
<li class="level1"><div class="li"> L&#039;interface réseau avec laquelle vous allez faire le partage doit être une interface câblée !</div>
</li>
<li class="level1"><div class="li"> Le câble doit être pour le moment débranché !</div>
</li>
<li class="level1"><div class="li"> <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez le paquet</a> <strong><a href="apt://dnsmasq" class="urlextern" title="apt://dnsmasq" rel="nofollow">dnsmasq</a></strong> </div>
</li>
<li class="level1 node"><div class="li"> Ouvrez la configuration du réseau (<strong>Système→Administration→Réseau</strong>)</div>
<ul class=" fix-media-list-overlap">
<li class="level2 node"><div class="li"> Cliquez sur la carte réseau avec laquelle vous voulez partager et changez les cases, dans l&#039;ordre :</div>
<ul class=" fix-media-list-overlap">
<li class="level3"><div class="li"> <em class="u">Configuration</em> : Adresse IP statique</div>
</li>
<li class="level3"><div class="li"> <em class="u">Adresse IP</em> : 192.168.10.1</div>
</li>
<li class="level3"><div class="li"> <em class="u">Masque de sous-réseau</em> : 255.255.255.0</div>
</li>
<li class="level3"><div class="li"> <em class="u">Passerelle</em> : Vide…</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> Faites <strong>Valider</strong> puis <strong>Fermer</strong></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Ensuite, pour trouver le nom de l&#039;interface réseau reliée à Internet et le nom de la carte qui servira au partage, entrez, dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a>:</div>
</li>
</ul>
<pre class="code">ifconfig</pre>

<p>
Vous devez retrouver quelque chose qui ressemble à ça :
</p>
<pre class="file">eth0      Lien encap:Ethernet  HWaddr 00:15:C5:79:59:B5  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          Packets reçus:0 erreurs:0 :0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 lg file transmission:1000 
          Octets reçus:0 (0.0 b) Octets transmis:0 (0.0 b)
          Interruption:17 

eth1      Lien encap:Ethernet  HWaddr 00:19:D2:D6:0E:69  
          inet adr:192.168.0.75  Bcast:192.168.0.255  Masque:255.255.255.0
          adr inet6: fe80::219:d2ff:fed6:e69/64 Scope:Lien
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Packets reçus:767 erreurs:4 :39 overruns:0 frame:0
          TX packets:825 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 lg file transmission:1000 
          Octets reçus:687753 (671.6 KB) Octets transmis:107141 (104.6 KB)
          Interruption:17 Adresse de base:0xe000 Mémoire:efdff000-efdfffff 

lo        Lien encap:Boucle locale  
          inet adr:127.0.0.1  Masque:255.0.0.0
          adr inet6: ::1/128 Scope:Hôte
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          Packets reçus:60 erreurs:0 :0 overruns:0 frame:0
          TX packets:60 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 lg file transmission:0 
          Octets reçus:3947 (3.8 KB) Octets transmis:3947 (3.8 KB)</pre>
<div class="noteclassic"><strong>Si vous trouvez des interfaces &quot;<em class="u">quelques chose:avah</em>&quot; ignorez-les, ce ne sont que des duplications des interfaces déjà présentes, qui ne servent pas pour notre configuration</strong>.
</div>
<p>
Dans mon cas, nous voyons clairement que l&#039;interface réseau qui va partager la connexion est <strong>eth0</strong>, car elle n&#039;a pas de ligne de ce genre : 
</p>
<pre class="code">inet adr:192.168.0.75  Bcast:192.168.0.255  Masque:255.255.255.0
adr inet6: fe80::219:d2ff:fed6:e69/64 Scope:Lien</pre>

<p>
Ce qui signifie qu&#039;elle n&#039;est pour l&#039;instant reliée à aucun réseau.
</p>

<p>
Par déduction, car je n&#039;ai que deux cartes réseau, <strong>eth1</strong> est l&#039;interface réseau reliée à Internet. (de plus elle a les lignes ci-dessus, ce qui veux dire qu&#039;un réseau y est branché, en l&#039;occurrence une freebox).
</p>
<div class="noteclassic">Si vous utilisez un modem branché en <abbr title="Universal Serial Bus">USB</abbr>, ou en port série, l&#039;interface réseau connectée à Internet est dans 99% des cas <strong>ppp0</strong>
</div><div class="noteimportant">L&#039;interface avec laquelle vous ferez le partage sera obligatoirement une <strong>eth</strong> <code>un numéro</code>, elle ne peut pas être une ppp, ni autre chose.
</div><div class="noteclassic"><strong>lo</strong> est l&#039;interface que l&#039;on appelle loopback, elle permet à l&#039;ordinateur de communiquer avec lui même via les protocoles réseau…Cette interface ne sera pas évoquée dans cette documentation
</div>
<p>
<strong>Retenez bien les valeurs que vous avez trouvées !</strong>
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong><em class="u">Attention !!!</em>: Dans la suite nous présumerons que vous avez une configuration comme la mienne, si ce n&#039;est pas le cas, effectuez les changements comme indiqué !</strong></div>
</li>
</ul>

</div>

<h4 id="configuration_de_dnsmasq">Configuration de dnsmasq</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Tous d&#039;abord sauvegardons le fichier de configuration originel ailleurs, en tapant dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a>, ceci:</div>
</li>
</ul>
<pre class="code">sudo cp /etc/dnsmasq.conf /etc/dnsmasq.conf.orig</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez le fichier</a> <strong>/etc/dnsmasq.conf</strong> pour y mettre ça :</div>
</li>
</ul>
<pre class="code"># Fichier de Configuration pour dnsmasq.
#
# pour éviter de fournir du trafic DHCP/DNS inutile du coté internet
##domain-needed
bogus-priv
# (Optionnel) Si vous avez une ip fixe,
# décommentez cette ligne.
# no-poll
# pour limiter l&#039;écoute de requêtes DHCP du coté réseau local
interface=eth0
# nom de votre domaine pour dnsmasq
domain=inet
# activez le serveur DHCP:
dhcp-range=192.168.10.100,192.168.10.150,255.255.255.0,12h</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Adaptez la ligne 10 selon ce que vous avez trouvé précedemment.</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Enregistrez le fichier.</div>
</li>
</ul>

</div>

<h4 id="faire_un_script_d_execution_automatique_du_partage_de_connexion">Faire un script d&#039;exécution automatique du partage de connexion</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Créez le fichier</a> <strong>/etc/init.d/iptables</strong> pour y mettre ça :</div>
</li>
</ul>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0">#</span>
<span class="co0"># Script de démarrage qui lance l'interface réseau internet,</span>
<span class="co0"># met en place un firewall basique et un partage de connexion</span>
<span class="co0">#</span>
<span class="co0"># Inspiré du script de Mjules_at_ifrance.com</span>
<span class="co0">#</span>
&nbsp;
<span class="re2">interface</span>=eth1
&nbsp;
start<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
<span class="co0"># init du la périphérique internet (ici derriere un modem ADSL ethernet, DHCP client)</span>
&nbsp;
<span class="sy0">/</span>sbin<span class="sy0">/</span><span class="kw2">ifup</span> <span class="re1">$interface</span>
&nbsp;
<span class="co0"># Dans cette partie, on met en place le firewall</span>
<span class="co0">#vidage des chaines</span>
iptables <span class="re5">-F</span>
<span class="co0">#destruction des chaines personnelles</span>
iptables <span class="re5">-X</span>
&nbsp;
<span class="co0">#stratégies par défaut</span>
iptables <span class="re5">-P</span> INPUT DROP
iptables <span class="re5">-P</span> FORWARD DROP
iptables <span class="re5">-P</span> OUTPUT ACCEPT
&nbsp;
<span class="co0">#init des tables NAT et MANGLE (pas forcément nécessaire)</span>
iptables <span class="re5">-t</span> nat <span class="re5">-F</span>
iptables <span class="re5">-t</span> nat <span class="re5">-X</span>
iptables <span class="re5">-t</span> nat <span class="re5">-P</span> PREROUTING ACCEPT
iptables <span class="re5">-t</span> nat <span class="re5">-P</span> POSTROUTING ACCEPT
iptables <span class="re5">-t</span> nat <span class="re5">-P</span> OUTPUT ACCEPT
&nbsp;
iptables <span class="re5">-t</span> mangle <span class="re5">-F</span>
iptables <span class="re5">-t</span> mangle <span class="re5">-X</span>
iptables <span class="re5">-t</span> mangle <span class="re5">-P</span> PREROUTING ACCEPT
iptables <span class="re5">-t</span> mangle <span class="re5">-P</span> OUTPUT ACCEPT
&nbsp;
&nbsp;
<span class="co0"># Acceptation de toutes les connexions en local (un process avec l'autre)</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> lo <span class="re5">-j</span> ACCEPT
iptables <span class="re5">-A</span> OUTPUT <span class="re5">-o</span> lo <span class="re5">-j</span> ACCEPT
&nbsp;
<span class="co0"># PORT FORWARDING:</span>
<span class="co0"># attention : on ne peut malheureusement pas mettre un nom de machine en destination, il faut mettre l'adresse IP.</span>
<span class="co0"># exemple : on veut qu'un serveur HTTP installé sur une machine du réseau local soit visible depuis l'extérieur.</span>
<span class="co0">###iptables -t nat -A PREROUTING -i $interface -p tcp --dport 80 -j DNAT --to-destination 192.168.10.121:80</span>
<span class="co0">###iptables -A FORWARD -p tcp -i $interface --dport 80 -j ACCEPT</span>
&nbsp;
&nbsp;
<span class="co0">#création d'une nouvelle règle</span>
iptables <span class="re5">-N</span> MAregle
&nbsp;
<span class="co0">#définition de la règle : accepter les nouvelles connexions ne venant pas de l'interface internet</span>
<span class="co0"># et accepter toutes les connexions établies et reliées (ex: une demande de page HTML provoque l'ouverture</span>
<span class="co0"># d'une connexion reliée pour acheminer cette page vers l'ordinateur)</span>
&nbsp;
iptables <span class="re5">-A</span> MAregle <span class="re5">-m</span> state <span class="re5">--state</span> NEW <span class="sy0">!</span> <span class="re5">-i</span> <span class="re1">$interface</span> <span class="re5">-j</span> ACCEPT
iptables <span class="re5">-A</span> MAregle <span class="re5">-m</span> state <span class="re5">--state</span> ESTABLISHED,RELATED <span class="re5">-j</span> ACCEPT
&nbsp;
<span class="co0">#application de la règle au partage de connexion</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-j</span> MAregle
iptables <span class="re5">-A</span> FORWARD <span class="re5">-j</span> MAregle
&nbsp;
<span class="co0"># activation du forwarding dans le noyau</span>
<span class="co0"># mise en place du partage de connexion sur le réseau local</span>
&nbsp;
<span class="kw3">echo</span> <span class="nu0">1</span> <span class="sy0">&gt;/</span>proc<span class="sy0">/</span>sys<span class="sy0">/</span>net<span class="sy0">/</span>ipv4<span class="sy0">/</span>ip_forward
iptables <span class="re5">-t</span> nat <span class="re5">-A</span> POSTROUTING <span class="re5">-s</span> 192.168.10.0<span class="sy0">/</span><span class="nu0">24</span> <span class="re5">-o</span> <span class="re1">$interface</span> <span class="re5">-j</span> MASQUERADE
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
stop<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw3">echo</span> <span class="nu0">0</span> <span class="sy0">&gt;/</span>proc<span class="sy0">/</span>sys<span class="sy0">/</span>net<span class="sy0">/</span>ipv4<span class="sy0">/</span>ip_forward
        <span class="kw2">ifdown</span> <span class="re1">$interface</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">case</span> <span class="st0">&quot;$1&quot;</span> <span class="kw1">in</span>
 start<span class="br0">&#41;</span>
        start
        <span class="sy0">;;</span>
&nbsp;
stop<span class="br0">&#41;</span>
        stop
        <span class="sy0">;;</span>
restart<span class="br0">&#41;</span>
        stop <span class="sy0">&amp;&amp;</span> start
        <span class="sy0">;;</span>
<span class="sy0">*</span><span class="br0">&#41;</span>
        <span class="kw3">echo</span> <span class="st0">&quot;Usage $0 {start|stop|restart}&quot;</span>
        <span class="kw3">exit</span> <span class="nu0">1</span>
<span class="kw1">esac</span>
&nbsp;
<span class="kw3">exit</span> <span class="nu0">0</span></pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Si vous avez comme <em class="u">interface réseau avec internet</em>: <strong>eth0</strong> ou <strong>ppp0</strong>, ou autre, et non pas <strong>eth1</strong>, changez la ligne 9 (<strong>interface=eth1</strong>), par <strong>interface=</strong> ce que vous avez.</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Enregistrez le fichier</div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Exécutez ensuite dans un <a href="/terminal" class="wikilink1" title="terminal">terminal</a> :</div>
</li>
</ul>
<pre class="code">sudo chmod +x /etc/init.d/iptables</pre>

<p>
puis :
</p>
<pre class="code">sudo update-rc.d iptables start 99 2 . stop 00 2 0 1 6 .</pre>

</div>

<h4 id="optionnel_-_configuration_du_client_dhcp_pour_permettre_l_affichage_des_noms_des_machines_locales">Optionnel - Configuration du client DHCP pour permettre l&#039;affichage des noms des machines locales</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez le fichier</a> <strong>/etc/dhcp3/dhclient.conf</strong></div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Enlevez le <strong>#</strong> devant la ligne <strong>prepend domain-name-servers 127.0.0.1;</strong> (ligne 18 ~)</div>
</li>
<li class="level1"><div class="li"> Enregistrez le fichier</div>
</li>
</ul>

</div>

<h4 id="optionnel_-_nom_d_hote_du_serveur_ics">Optionnel - Nom d&#039;hôte du serveur ICS</h4>
<div class="level4">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez le fichier</a> <strong>/etc/hosts</strong></div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Ajoutez dans ce fichier, <strong>192.168.10.1   serveurICS</strong> après la ligne : <strong>127.0.0.1	localhost</strong></div>
</li>
</ul>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Enregistrez le fichier</div>
</li>
</ul>

</div>

<h4 id="optionnel_si_besoin_-_configurer_le_pare-feu">Optionnel (si besoin) - Configurer le pare-feu</h4>
<div class="level4">
<div class="noteimportant">Etape à ne réaliser que si les ordinateurs clients n&#039;arrivent pas à se connecter à Internet
</div><ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Si ce n&#039;est déjà fait, <a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong><a href="apt://firestarter" class="urlextern" title="apt://firestarter" rel="nofollow">firestarter</a></strong></div>
</li>
<li class="level1"><div class="li"> lancer Système/Administration/Firestarter ;</div>
</li>
<li class="level1"><div class="li"> cliquer sur Préférences/configuration du réseau ;</div>
</li>
<li class="level1"><div class="li"> cocher &quot;Autoriser le partage de la connexion internet&quot; ;</div>
</li>
<li class="level1"><div class="li"> Accepter la modification des Préférences ;</div>
</li>
<li class="level1"><div class="li"> Arrêter puis redémarrer le pare-feu ;</div>
</li>
<li class="level1"><div class="li"> Quitter Firestarter.</div>
</li>
</ul>

</div>

<h4 id="c_est_fini_comment_ca_marche">C&#039;est fini, comment ça marche ?</h4>
<div class="level4">

<p>
Et voila, branchez enfin les câbles, redémarrer votre serveur ICS, puis redémarrer les autres machines de votre réseau local.
</p>

<p>
Quand une machine du réseau local démarre, voici ce qu&#039;elle fait :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> recherche d&#039;un serveur <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> –&gt; le serveur ICS répond.</div>
</li>
<li class="level1"><div class="li"> le serveur ICS fourni une adresse <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> dans la plage 192.168.10.100 à 192.168.10.150.</div>
</li>
<li class="level1"><div class="li"> le serveur ICS renseigne le fichier /etc/resolv.conf de votre machine automatiquement : il se met lui-même (192.168.10.1), car il est serveur relais <abbr title="Domain Name System">DNS</abbr>.</div>
</li>
<li class="level1"><div class="li"> le serveur ICS renseigne la route par défaut. Il se donne lui-même en route par défaut car c&#039;est lui qui effectue le partage de la connexion internet.</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Ancienne méthode] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="ancienne_methode" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="4852-16145" /><button type="submit" title="Ancienne méthode" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="configuration_cote_client">Configuration coté client</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Configuration coté client] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_cote_client" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="16146-16185" /><button type="submit" title="Configuration coté client" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="en_dhcp">En DHCP</h3>
<div class="level3">

<p>
Sous linux mettre l&#039;interface réseau du client en mode dhcp (c&#039;est la configuration par défaut).
</p>

<p>
Sur une machine Windows laissez le paramétrage <abbr title="Transmission Control Protocol">TCP</abbr>/IP et les <abbr title="Domain Name System">DNS</abbr> sur &quot;obtenir automatiquement&quot;, elle sera reconnue automatiquement.
</p>

<p>
Tous les ordinateurs reliés devraient marcher, qu&#039;ils soient sous windows, linux, <abbr title="Berkeley Software Distribution">BSD</abbr> ou autre.
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[En DHCP] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="en_dhcp" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="16186-16536" /><button type="submit" title="En DHCP" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="en_ip_fixe">En IP Fixe</h3>
<div class="level3">

<p>
Logiquement, nous pouvons assigner une ip statique (du moment qu&#039;elle est comprise entre 192.168.10.100 et 192.168.10.150 pour l&#039;ancienne méthode).
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Ouvrez la configuration du réseau (<strong>Système→Administration→Réseau</strong>)</div>
</li>
<li class="level1 node"><div class="li"> Ouvrez la carte réseau du client et changer les cases, dans l&#039;ordre:</div>
<ul class=" fix-media-list-overlap">
<li class="level2"><div class="li"> <em class="u">Configuration</em>: Adresse IP statique</div>
</li>
<li class="level2"><div class="li"> <em class="u">Adresse IP:</em> 192.168.10.*  <br/>
<em>remplacer * par un numéro entre 100 et 150, en tous cas vous ne devez surtout pas mettre le même sur deux pc différents !!!</em></div>
</li>
<li class="level2"><div class="li"> <em class="u">Masque de sous-réseau:</em> 255.255.255.0</div>
</li>
<li class="level2"><div class="li"> <em class="u">Passerelle:</em> 192.168.10.1</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Faites <strong>Valider</strong> puis <strong>Fermer</strong></div>
</li>
</ul>
<div class="table-responsive"><table class="inline table table-striped table-condensed">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Action         </th><th class="col1 leftalign"> ? Avant Jaunty ?         </th><th class="col2 leftalign"> Jaunty Jackalope 9.04                             </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Ouvrez la configuration du réseau </td><td class="col1 leftalign"><strong>Système → Administration → Réseau</strong>   </td><td class="col2 leftalign"> <strong>Système → Préférences → Connexions Réseau</strong>     </td>
	</tr>
	<tr class="row2">
		<td class="col0">Ouvrez la carte réseau du client</td><td class="col1 leftalign"> Sélectionner la carte concernée puis <strong>Propriétés</strong> <br/>
remplir comme suit :   </td><td class="col2"> Dans l&#039;onglet <strong>Filaire</strong><br/>
Choisir la carte réseau concernée<br/>
Puis Modifier</td>
	</tr>
	<tr class="row3">
		<td class="col0">Remplissez les paramètres</td><td class="col1 leftalign"> <em class="u">Configuration</em>: Adresse IP statique<br/>
IP statique : 192.168.1.20<br/>
Masque : 255.255.255.0<br/>
Passerelle :<br/>
passerelle du modem pour avoir Internet<br/>
(avec alice : 192.168.1.1) (avec freebox : 192.168.0.254)   </td><td class="col2">Dans l&#039;onglet IPv4<br/>
Choisir Méthode: Mannuel<br/>
Puis remplir comme ci-contre</td>
	</tr>
	<tr class="row4">
		<td class="col0" colspan="3">Validez <br/>
Puis fermez</td>
	</tr>
</table></div>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[En IP Fixe] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="en_ip_fixe" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="16537-17989" /><button type="submit" title="En IP Fixe" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit10 page-header" id="problemes_rencontres">Problèmes rencontrés</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Problèmes rencontrés] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="problemes_rencontres" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="17990-18024" /><button type="submit" title="Problèmes rencontrés" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="les_dns_ne_fonctionnent_pas">Les DNS ne fonctionnent pas</h3>
<div class="level3">

<p>
La solution est d&#039;installer un serveur <abbr title="Domain Name System">DNS</abbr> sur son ordinateur, pour résoudre soi-même les noms de domaine, et ne pas dépendre d&#039;autrui (typiquement, de son <abbr title="Fournisseur d&#039;Accès à Internet">FAI</abbr>). Pour cela, il faut installer le paquet <a href="apt://bind9" class="urlextern" title="apt://bind9" rel="nofollow">apt://bind9</a>.
</p>

<p>
Les 2 commandes suivantes sont a exécuter après chaque redémarrage, dès que les deux interfaces sont connectées :
</p>
<pre class="code">sudo su
echo &#039;nameserver 127.0.0.1&#039; &gt; /etc/resolv.conf</pre>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Les DNS ne fonctionnent pas] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_dns_ne_fonctionnent_pas" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="18025-18465" /><button type="submit" title="Les DNS ne fonctionnent pas" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit12 page-header" id="liens">Liens</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://blog.creaone.fr/post/2008/05/29/Partager-sa-connexion-3G-entre-Linux-et-Windows" class="urlextern" title="http://blog.creaone.fr/post/2008/05/29/Partager-sa-connexion-3G-entre-Linux-et-Windows" rel="nofollow">http://blog.creaone.fr/post/2008/05/29/Partager-sa-connexion-3G-entre-Linux-et-Windows</a> Partage de connexion avec firestarter</div>
</li>
</ul>

<p>
—-
<em>Contributeurs: <a href="/utilisateurs/sksbir" class="wikilink2" title="utilisateurs:sksbir" rel="nofollow">sksbir</a>, <a href="/utilisateurs/borislehachoir" class="wikilink2" title="utilisateurs:borislehachoir" rel="nofollow">BorisLeHachoir</a>, <a href="/utilisateurs/fabien26" class="wikilink1" title="utilisateurs:fabien26">Fabien26</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/partage_de_connexion_internet"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1591176560" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens" /><input type="hidden" name="codeblockOffset" value="5" /><input type="hidden" name="range" value="18466-" /><button type="submit" title="Liens" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="partage_de_connexion_internet.txt">partage_de_connexion_internet.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 03/06/2020, 11:29">Le 03/06/2020, 11:29</span></li><li class="text-muted">par 93.23.248.184</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=partage_de_connexion_internet&amp;1635560126" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

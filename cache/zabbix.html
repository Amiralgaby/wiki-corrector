<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>zabbix [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="administration,serveur,reseau,supervision,brouillon"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/zabbix?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/zabbix?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/zabbix"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/zabbix"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/zabbix"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"zabbix","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="zabbix">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/zabbix?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/zabbix?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/zabbix?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/zabbix?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/zabbix?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/zabbix?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/zabbix?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">zabbix</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/zabbix?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/zabbix?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/zabbix?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#pre-requis","title":"Pr\u00e9-requis","level":1},{"link":"#installation","title":"Installation","level":1},{"link":"#installation_du_serveur_zabbix_202","title":"Installation du serveur Zabbix 2.0.2","level":2},{"link":"#lancement_du_serveur_zabbix","title":"Lancement du serveur zabbix :","level":1},{"link":"#activer_le_serveur","title":"Activer le serveur","level":2},{"link":"#preparation_de_la_base_de_donnees","title":"Pr\u00e9paration de la base de donn\u00e9es","level":1},{"link":"#mysql","title":"MySQL","level":2},{"link":"#postgresql","title":"PostgreSQL","level":2},{"link":"#configuration_du_serveur","title":"Configuration du serveur","level":1},{"link":"#installation_de_l_interface_web_de_gestion_de_zabbix","title":"Installation de l\u2019interface web de gestion de Zabbix","level":1},{"link":"#methode_1alias","title":"M\u00e9thode 1 : Alias","level":2},{"link":"#methode_2virtualhost","title":"M\u00e9thode 2 : Virtualhost","level":2},{"link":"#supervision_-_agent_zabbix","title":"Supervision - Agent Zabbix","level":1},{"link":"#agent_linux","title":"Agent Linux","level":2},{"link":"#agent_windows","title":"Agent Windows","level":2},{"link":"#utilisation_et_configuration","title":"Utilisation et configuration","level":1},{"link":"#en_cas_de_probleme","title":"En cas de probl\u00e8me","level":1},{"link":"#compilation_du_serveur","title":"compilation du serveur","level":1},{"link":"#references","title":"R\u00e9f\u00e9rences","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#pre-requis">Pré-requis</a></li>
<li class="level1"><a href="#installation">Installation</a>
<ul class="nav toc">
<li class="level2"><a href="#installation_du_serveur_zabbix_202">Installation du serveur Zabbix 2.0.2</a></li>
</ul>
</li>
<li class="level1"><a href="#lancement_du_serveur_zabbix">Lancement du serveur zabbix :</a>
<ul class="nav toc">
<li class="level2"><a href="#activer_le_serveur">Activer le serveur</a></li>
</ul>
</li>
<li class="level1"><a href="#preparation_de_la_base_de_donnees">Préparation de la base de données</a>
<ul class="nav toc">
<li class="level2"><a href="#mysql">MySQL</a></li>
<li class="level2"><a href="#postgresql">PostgreSQL</a></li>
</ul>
</li>
<li class="level1"><a href="#configuration_du_serveur">Configuration du serveur</a></li>
<li class="level1"><a href="#installation_de_l_interface_web_de_gestion_de_zabbix">Installation de l’interface web de gestion de Zabbix</a>
<ul class="nav toc">
<li class="level2"><a href="#methode_1alias">Méthode 1 : Alias</a></li>
<li class="level2"><a href="#methode_2virtualhost">Méthode 2 : Virtualhost</a></li>
</ul>
</li>
<li class="level1"><a href="#supervision_-_agent_zabbix">Supervision - Agent Zabbix</a>
<ul class="nav toc">
<li class="level2"><a href="#agent_linux">Agent Linux</a></li>
<li class="level2"><a href="#agent_windows">Agent Windows</a></li>
</ul>
</li>
<li class="level1"><a href="#utilisation_et_configuration">Utilisation et configuration</a></li>
<li class="level1"><a href="#en_cas_de_probleme">En cas de problème</a></li>
<li class="level1"><a href="#compilation_du_serveur">compilation du serveur</a></li>
<li class="level1"><a href="#references">Références</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="notetag">Cette page est en cours de rédaction.<br />
<a href="/wiki/participer_wiki">Apportez votre aide…</a>
</div>
<div class="tags"><span>
	<a href="/administration" class="wikilink1" title="administration" rel="tag">administration</a>,
	<a href="/serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/supervision" class="wikilink1" title="supervision" rel="tag">supervision</a>,
	<a href="/brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="zabbix_moniteur_de_supervision">Zabbix, moniteur de supervision</h1>
<div class="level1">

<p>
La gestion d&#039;un parc de serveur est un travail de chaque instant. Un bon administrateur système doit savoir à tout moment l&#039;état des différentes machines et des différents services. Un autre aspect clé est que l&#039;administrateur ne peut pas se permettre de passer son temps devant un tableau avec des voyants verts en attendant qu&#039;un voyant passe au rouge pour agir. Son temps est occupé à d&#039;autres 
tâches et il ne peut donc pas surveiller le tableau de statut en permanence.
</p>

<p>
L&#039;examen journalier des logs systèmes est un bon début. Cependant, si un problème survient, on s&#039;en rend compte seulement le lendemain. Ce qui peut être très (trop ?) tard.
</p>

<p>
Pour se simplifier le travail, nous allons utiliser un <em>moniteur de supervision</em>. Le but d&#039;un tel programme est de surveiller les services et les machines se trouvant sous notre responsabilité. Si un problème survient, le moniteur de supervision nous prévient (email, SMS, etc.).
</p>

<p>
Le moniteur de supervision que nous allons envisager est <strong>Zabbix</strong>.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Zabbix, moniteur de supervision] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="zabbix_moniteur_de_supervision" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="70-1135" /><button type="submit" title="Zabbix, moniteur de supervision" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="pre-requis">Pré-requis</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Disposer des <a href="/sudo" class="wikilink1" title="sudo">droits d&#039;administration</a> ;</div>
</li>
<li class="level1"><div class="li"> Avoir activé l&#039;accès aux <a href="/depots#universe_et_multiverse" class="wikilink1" title="depots">dépôts Universe</a> ;</div>
</li>
<li class="level1"><div class="li"> Avoir un serveur Web installé et gérant le <a href="/php" class="wikilink1" title="php">PHP</a> et <a href="/mysql" class="wikilink1" title="mysql">MySQL</a> (ou <a href="/postgresql" class="wikilink1" title="postgresql">PostgreSQL</a>), voir la page « <a href="/lamp" class="wikilink1" title="lamp">LAMP</a> ».</div>
</li>
<li class="level1"><div class="li"> positionner la variable date.timezone dans php.ini (par ex: /etc/php5/apache2/php.ini) : <code>date.timezone = Europe/Paris</code> (nous y reviendrons)</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1136-1568" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit3 page-header" id="installation">Installation</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1569-1594" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="installation_du_serveur_zabbix_202">Installation du serveur Zabbix 2.0.2</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installer les paquets</a> :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong><a href="apt://zabbix-server-mysql" class="interwiki iw_apt" title="apt://zabbix-server-mysql">zabbix-server-mysql</a></strong> pour utiliser une base MySQL <em class="u">ou</em> <strong><a href="apt://zabbix-server-pgsql" class="interwiki iw_apt" title="apt://zabbix-server-pgsql">zabbix-server-pgsql</a></strong> pour utiliser une base PostGRES ;</div>
</li>
<li class="level1"><div class="li"> <strong><a href="apt://zabbix-frontend-php" class="interwiki iw_apt" title="apt://zabbix-frontend-php">zabbix-frontend-php</a></strong> : l&#039;interface PHP ;</div>
</li>
<li class="level1"><div class="li"> <strong><a href="apt://zabbix-agent" class="interwiki iw_apt" title="apt://zabbix-agent">zabbix-agent</a></strong> : pour pouvoir monitorer le serveur lui-même.</div>
</li>
</ul>
<div class="notetip">Nous utiliseront dans ce tutoriel la version mysql de zabbix 
</div>
</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Installation du serveur Zabbix 2.0.2] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_du_serveur_zabbix_202" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="1595-2060" /><button type="submit" title="Installation du serveur Zabbix 2.0.2" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit5 page-header" id="lancement_du_serveur_zabbix">Lancement du serveur zabbix :</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Lancement du serveur zabbix :] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="lancement_du_serveur_zabbix" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2061-2103" /><button type="submit" title="Lancement du serveur zabbix :" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit6" id="activer_le_serveur">Activer le serveur</h3>
<div class="level3">

<p>
Le serveur zabbix n&#039;est pas activé par défaut : la commande
</p>
<pre class="code">sudo service zabbix-server restart</pre>

<p>
renvoie :
</p>
<pre class="code">zabbix_server is disabled in /etc/default/zabbix-server.</pre>

<p>
Pour l&#039;activer, avec les <a href="/sudo" class="wikilink1" title="sudo">droits d&#039;administration</a> <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">modifier</a> le fichier  &quot;/etc/default/zabbix-server&quot; comme suit :
</p>
<pre class="file">START=yes</pre>

<p>
Redémarrer le serveur :
</p>
<pre class="code">sudo service zabbix-server restart</pre>

<p>
Consulter les logs du serveur :
</p>
<pre class="code">tail -100 /var/log/zabbix-server/zabbix_server.log</pre>

<p>
L&#039;observation des logs montre que le serveur Zabbix ne peut pas se connecter à la base de données MySQL car la base n&#039;est pas remplie, n&#039;est pas paramétrée, et la configuration de Zabbix n&#039;est pas terminée.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Activer le serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="activer_le_serveur" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="2104-2876" /><button type="submit" title="Activer le serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit7 page-header" id="preparation_de_la_base_de_donnees">Préparation de la base de données</h2>
<div class="level2">

<p>
Zabbix a besoin de stocker les informations de supervision dans une base de données. 
</p>

<p>
Zabbix est capable de fonctionner avec un moteur de base de données MySQL ou PostgreSQL. Mais c&#039;est à vous de choisir, et d&#039;installer les packages mysql-server ou postgresql-server en conséquence…
</p>

<p>
Cela signifie que l&#039;installation du package Zabbix-server ne s&#039;accompagne pas automatiquement de la création de la base de données et de l&#039;ajout des données de base. Il faut que vous réalisiez cette opération. 
</p>

<p>
Afin de vous aider à créer la base de données Zabbix, l&#039;installation du package Zabbix-server vous fournit les scripts de création des structures (schema), des données (data) et des images (images). L&#039;emplacement de ces scripts dépend de la version d&#039;Ubuntu sur laquelle vous travaillez (vois plus loin).
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Préparation de la base de données] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="preparation_de_la_base_de_donnees" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="2877-3744" /><button type="submit" title="Préparation de la base de données" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="mysql">MySQL</h3>
<div class="level3">

<p>
Pour créer et remplir la base Zabbix dans MySQL :
</p>

<p>
Se connecter avec le compte root MySQL :
</p>
<pre class="code">mysql -uroot -p</pre>

<p>
Indiquer le mot de passe root de mysql (celui qui a été défini lors de l&#039;installation de MySQL)
</p>

<p>
Créer la base de données zabbix :
</p>
<pre class="code"> mysql &gt; create database zabbix;</pre>

<p>
Créer un utilisateur MySQL qui se nomme zabbix et qui a pour mot de passe zabbix :
</p>
<pre class="code"> mysql &gt; grant all privileges on zabbix.* to zabbix@localhost identified by &#039;zabbix&#039;;
 mysql &gt; flush privileges;</pre>

<p>
Quitter la console mysql
</p>
<pre class="code">mysql &gt; exit</pre>
<div class="noteclassic">S&#039;il faut, après coup ou suite à une erreur, changer le mot de passe de l&#039;utilisateur &#039;zabbix&#039;, voici les commandes à utiliser depuis un terminal de commande (ici le nouveau mot de passe est mysql) :
<pre class="code">user#  mysql -uroot -p
mysql &gt; USE mysql ;
mysql &gt; SET PASSWORD FOR &#039;zabbix&#039;@&#039;localhost&#039; = PASSWORD(&#039;mysql&#039;);
mysql &gt; FLUSH PRIVILEGES ;</pre>

</div>
</div>

<h4 id="importer_la_structure_de_base_de_donnees_zabbix">Importer la structure de base de données zabbix</h4>
<div class="level4">
<div class="notetip">Attention l&#039;ordre des commandes est important. Il faut d&#039;abord créer les tables avant de pouvoir y mettre les données.
</div>
</div>

<h5 id="ubuntu_12042">ubuntu &gt; =12.04.2</h5>
<div class="level5">
<pre class="code">  zcat /usr/share/zabbix-server-mysql/schema.sql.gz | mysql -uzabbix -pmotdepassezabbix zabbix
  zcat /usr/share/zabbix-server-mysql/images.sql.gz | mysql -uzabbix -pmotdepassezabbix zabbix
  zcat /usr/share/zabbix-server-mysql/data.sql.gz | mysql -uzabbix -pmotdepassezabbix zabbix </pre>
<div class="noteclassic"> On remplacera  motdepassezabbix par le mot de passe que nous avons utilisé lors de la création du compte MySQL &#039;zabbix&#039;.
</div>
</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[MySQL] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="mysql" /><input type="hidden" name="codeblockOffset" value="3" /><input type="hidden" name="range" value="3745-5312" /><button type="submit" title="MySQL" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="postgresql">PostgreSQL</h3>
<div class="level3">

<p>
Pour créer et remplir la base de donnée Zabbix dans PostgreSQL:
</p>

<p>
On edite tout d&#039;abord <a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">modifier</a> le fichier <em>pg_hba.conf</em> (il faut être en <a href="/sudo" class="wikilink1" title="sudo">root</a> pour cela):
</p>
<pre class="code">sudo nano /etc/postgresql/&quot;votre_version_de_postgresql&quot;/main/pg_hba.conf</pre>

<p>
On descend tout en bas du fichier, on commente toutes les lignes qui ne le sont pas (pour éviter les conflits) et on ajoute les deux suivantes:
</p>
<pre class="file">local    all            zabbix                                     md5
local   all             postgres                                  trust</pre>

<p>
Les utilisateurs <em>zabbix</em> et <em>postgres</em> (l&#039;utilisateur créé par défaut et ne possédant pas de mot de passe) sont ainsi autorisés à se connecter à la Base de Données. Le premier n&#039;étant pas encore créé, il faudra lors de sa création, lui attribuer un mot de passe.
</p>

<p>
On redémarre le service pour que les modifications soient prises en compte:
</p>
<pre class="code">pedro@pedro-pc:~#service postgresql restart</pre>

<p>
On se connecte à la base de données :
</p>
<pre class="code">root@pedro-pc:~#su postgres
postgres@pedro-pc:/root$psql
postgres=#create role zabbix with password &#039;votre_mot_de_passe&#039; login createdb;</pre>
<div class="notetip">Le paramètre &quot;login&quot; autorise l&#039;utilisateur à se connecter à la base et &quot;createdb&quot; à créer une base de donnée.. <img src="/lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" />
</div>
<p>
On se déconnecte de la base:
</p>
<pre class="code">postgres=#\q</pre>

<p>
Et on se reconnecte avec l&#039;utilisateur <em>zabbix</em> en spécifiant la base de donnée <em>postgres</em> car c&#039;est la seule qui est actuellement créée. Puis, on crée la base de donnée <em>zabbix</em> :
</p>
<pre class="code">pedro@pedro-pc:~#psql -Uzabbix postgres
Password for user zabbix:
postres=&gt;create database zabbix;</pre>

<p>
On se déconnecte de la bdd:
</p>
<pre class="code">postgres=&gt;\q</pre>

</div>

<h4 id="importer_la_structure_de_la_base_dans_postgresql">Importer la structure de la base dans postgresql</h4>
<div class="level4">

<p>
C&#039;est exactement la même manipulation qu&#039;avec mysql adaptée à postgresql :
</p>
<div class="notetip">Attention, il faut exécuter les 3 commandes une à une et bien respecter l&#039;ordre d&#039;exécution de celles-ci.
</div><pre class="code">zcat /usr/share/zabbix-server-pgsql/schema.sql.gz | psql -Uzabbix zabbix
zcat /usr/share/zabbix-server-pgsql/images.sql.gz | psql -Uzabbix zabbix
zcat /usr/share/zabbix-server-pgsql/data.sql.gz | psql -Uzabbix zabbix 
  </pre>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[PostgreSQL] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="postgresql" /><input type="hidden" name="codeblockOffset" value="4" /><input type="hidden" name="range" value="5313-7600" /><button type="submit" title="PostgreSQL" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit10 page-header" id="configuration_du_serveur">Configuration du serveur</h2>
<div class="level2">

<p>
Il faut maintenant indiquer au serveur Zabbix les paramètres qui lui permettront de se connecter à la base de données Zabbix. En particulier, il nous faut indiquer le mot de passe pour le compte MySQL &#039;Zabbix&#039; (dans notre cas, c&#039;est &#039;zabbix&#039;)
</p>

<p>
Ajuster les paramètres du serveur en éditant le fichier de configuration comme suit :
</p>
<pre class="code">sudo nano /etc/zabbix/zabbix_server.conf</pre>

<p>
Ajuster au minimum le paramètre DBPassword en ajoutant au fichier la ligne suivante  :
</p>
<pre class="code">DBPassword=zabbix</pre>

<p>
Sauvegarder les modification, quitter l&#039;éditeur et relancer le serveur :
</p>
<pre class="code"> sudo service zabbix-server restart</pre>

<p>
Pour confirmer que le serveur fonctionne correctement, la commande:
</p>
<pre class="code"> tail -100 /var/log/zabbix-server/zabbix_server.log</pre>

<p>
ne doit pas retourner d&#039;erreurs. (En l&#039;absence totale d&#039;erreurs, il est possible que ce fichier n&#039;existe même pas !)
</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Configuration du serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="configuration_du_serveur" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="7601-8488" /><button type="submit" title="Configuration du serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit11 page-header" id="installation_de_l_interface_web_de_gestion_de_zabbix">Installation de l’interface web de gestion de Zabbix</h2>
<div class="level2">

<p>
Il est possible de paramétrer l&#039;accès à zabbix de deux manières distinctes :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Utilisation d&#039;un alias (accès par <a href="http://server/zabbix" class="urlextern" title="http://server/zabbix" rel="nofollow">http://server/zabbix</a>)</div>
</li>
<li class="level1"><div class="li"> Utilisation d&#039;un virtualhost (accès par <a href="http://server" class="urlextern" title="http://server" rel="nofollow">http://server</a>)</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Installation de l’interface web de gestion de Zabbix] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_de_l_interface_web_de_gestion_de_zabbix" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="8489-8759" /><button type="submit" title="Installation de l’interface web de gestion de Zabbix" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit12" id="methode_1alias">Méthode 1 : Alias</h3>
<div class="level3">

<p>
La première méthode de configuration de l&#039;accès à l&#039;interface web de Zabbix consiste à déclarer un nouvel alias dans Apache2. De cette manière, il sera possible d&#039;accéder à l&#039;interface web de Zabbix en utilisant l&#039;adresse web suivante : <a href="http://ip_du_server/zabbix" class="urlextern" title="http://ip_du_server/zabbix" rel="nofollow">http://ip_du_server/zabbix</a>.
</p>

<p>
Créer un fichier de configuration Apache2 dédié. L&#039;emplacement de ce fichier dépend de la version d&#039;ubuntu utilisée.
</p>

<p>
Version Ubuntu &gt;= 14.04 : <strong>/etc/apache2/conf-available/zabbix-server.conf </strong>
</p>

<p>
Le contenu du fichier de configuration apache à créer est le suivant :
</p>
<pre class="file"># Directives pour zabbix serveur

# Définition d&#039;un alias /zabbix
&lt;IfModule mod_alias.c&gt;
    Alias /zabbix /usr/share/zabbix
&lt;/IfModule&gt;

# Définition des droits d&#039;accès au dossier contenant les fichiers web de zabbix
&lt;Directory /usr/share/zabbix&gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
&lt;/Directory&gt;</pre>

<p>
Après avoir sauvegardé le fichier, il faut activer la configuration et relancer le serveur Apache2 : 
</p>
<pre class="code">sudo a2enconf zabbix-server
sudo service apache2 reload</pre>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Méthode 1 : Alias] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="methode_1alias" /><input type="hidden" name="codeblockOffset" value="12" /><input type="hidden" name="range" value="8760-9923" /><button type="submit" title="Méthode 1 : Alias" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="methode_2virtualhost">Méthode 2 : Virtualhost</h3>
<div class="level3">

<p>
Une autre méthode de configuration de l&#039;accès à l&#039;interface web de Zabbix consiste à déclarer un virtualhost. Dans ce cas, l&#039;interface web de Zabbix sera accessible en utilisation l&#039;adresse web : <a href="http://ip_du_serveur" class="urlextern" title="http://ip_du_serveur" rel="nofollow">http://ip_du_serveur</a>
</p>

<p>
Créer un fichier de configuration Apache :
</p>
<pre class="code">nano /etc/apache2/sites-available/zabbix</pre>

<p>
Dans ce fichier, insérez le paramétrage du VirtualHost apache comme suit :
</p>
<pre class="code">&lt;VirtualHost *:80&gt; 
      ServerAdmin webmaster@localhost 
      DocumentRoot /usr/share/zabbix/ 
         &lt;Directory /&gt; 
              Options FollowSymLinks 
              AllowOverride None 
      &lt;/Directory&gt; 
      &lt;Directory /usr/share/zabbix/&gt; 
              Options Indexes FollowSymLinks MultiViews 
              AllowOverride None 
              Order allow,deny 
              allow from all 
      &lt;/Directory&gt; 
      &lt;Directory /usr/share/zabbix/&gt; 
              Options Indexes FollowSymLinks MultiViews 
              AllowOverride None 
              Order allow,deny 
              allow from all 
      &lt;/Directory&gt;
       ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/ 
      &lt;Directory &quot;/usr/lib/cgi-bin&quot;&gt; 
              AllowOverride None 
              Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch 
              Order allow,deny 
              Allow from all 
      &lt;/Directory&gt; 
      ErrorLog ${APACHE_LOG_DIR}/error.log 
      # Possible values include: debug, info, notice, warn, error, crit, 
      # alert, emerg. 
      LogLevel warn
      CustomLog ${APACHE_LOG_DIR}/access.log combined 
&lt;/VirtualHost&gt;  </pre>

<p>
Modifier le fichier de configuration de php (php.ini) pour les pré-requis de l&#039;installation de Zabbix :
</p>
<pre class="code"> nano /etc/php5/apache2/php.ini :
 </pre>

<p>
ubuntu &gt;=Ubuntu 16.04.1 LTS
</p>
<pre class="code"> sudo nano /etc/php/7.0/apache2/php.ini</pre>

<p>
Modifiez les options ci-dessous :
</p>
<pre class="code">max_execution_time = 600
max_input_time = 600
memory_limit = 256M
post_max_size = 32M
upload_max_filesize = 16M
date.timezone = &quot;Europe/Paris&quot;</pre>

<p>
Enregistrez puis redémarrez Apache2 :
</p>
<pre class="code"> /etc/init.d/apache2 restart</pre>

<p>
Créez le fichier de configuration de l&#039;interface zabbix (vide et avec les permissions ajustées), il sera rempli automatiquement par l&#039;installateur zabbix :
</p>
<pre class="code"> sudo touch /etc/zabbix/zabbix.conf.php
 sudo chown root:www-data /etc/zabbix/zabbix.conf.php
 sudo chmod 660 /etc/zabbix/zabbix.conf.php</pre>

<p>
<strong>Il est maintenant possible de se connecter avec son navigateur via <a href="http://adress_ip_du_serveur" class="urlextern" title="http://adress_ip_du_serveur" rel="nofollow">http://adress_ip_du_serveur</a> ou <a href="http://adress_ip_du_serveur/zabbix" class="urlextern" title="http://adress_ip_du_serveur/zabbix" rel="nofollow">http://adress_ip_du_serveur/zabbix</a> suivant votre configuration</strong>
</p>

<p>
Une fois connecté sur l&#039;interface web (cf. l&#039;image ci-dessous), vous n&#039;avez plus qu&#039;à suivre les instructions, et remplir les champs en fonction de votre configuration.
</p>

<p>
<a href="/_detail/capture_du_2012-01-28_13/43/zabbix_202_install.png?id=zabbix" class="media" title="capture_du_2012-01-28_13:43:zabbix_202_install.png"><img src="/_media/capture_du_2012-01-28_13/43/zabbix_202_install.png?w=800&amp;tok=b27788" class="mediacenter img-responsive" title="Votre serveur est presque opérationnel " alt="Votre serveur est presque opérationnel " width="800" /></a>
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Méthode 2 : Virtualhost] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="methode_2virtualhost" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="9924-12778" /><button type="submit" title="Méthode 2 : Virtualhost" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit14 page-header" id="supervision_-_agent_zabbix">Supervision - Agent Zabbix</h2>
<div class="level2">

<p>
Zabbix propose un &#039;agent&#039; qui s&#039;installe sur les ordinateurs à superviser et peut transmettre au serveur principal des informations plus précises que ce que l&#039;on pourrait obtenir par interrogation SNMP. 
</p>

<p>
L&#039;installation de l&#039;agent Zabbix n&#039;est toutefois pas possible sur des imprimantes ou des équipements d&#039;infrastructure réseau comme des routeurs ou des commutateurs, pour lesquels il faudra se reposer sur les fonctions des agents SNMP proposées par les équipements. 
</p>

<p>
Un agent Zabbix est un service qui fonctionne en arrière plan sur l&#039;ordinateur sur lequel il est installé. A ce titre, il s&#039;apparente à un programme de type serveur.
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Supervision - Agent Zabbix] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="supervision_-_agent_zabbix" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="12779-13465" /><button type="submit" title="Supervision - Agent Zabbix" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="agent_linux">Agent Linux</h3>
<div class="level3">

<p>
<a href="/tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez le paquet</a> <a href="apt://zabbix-agent" class="urlextern" title="apt://zabbix-agent" rel="nofollow">zabbix-agent</a> et éditer le fichier <code>/etc/zabbix/zabbix_agentd.conf</code> pour y indiquer l&#039;adresse IP du serveur Zabbix dans la variable &quot;Server&quot; .
</p>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Agent Linux] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="agent_linux" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="13466-13719" /><button type="submit" title="Agent Linux" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="agent_windows">Agent Windows</h3>
<div class="level3">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://www.zabbix.com/download.php" class="urlextern" title="http://www.zabbix.com/download.php" rel="nofollow">Télécharger l&#039;agent</a>.</div>
</li>
<li class="level1"><div class="li"> Créer le fichier <em>c:\zabbix_agentd.conf</em> contenant la ligne <em>Server=xxx.xxx.xxx.xxx</em> où xxx.xxx.xxx.xxx est l&#039;adresse IP du serveur Zabbix.</div>
</li>
<li class="level1"><div class="li"> Ouvrir la ligne de commande Windows, se placer dans le répertoire contenant le fichier téléchargé puis lancer la commande suivante : <pre class="code">zabbix_agentd.exe --install</pre>
</div>
</li>
<li class="level1"><div class="li"> Lancer le service en lançant la commande :<pre class="code">zabbix_agentd.exe --start</pre>
</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Agent Windows] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="agent_windows" /><input type="hidden" name="codeblockOffset" value="14" /><input type="hidden" name="range" value="13720-14229" /><button type="submit" title="Agent Windows" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit17 page-header" id="utilisation_et_configuration">Utilisation et configuration</h2>
<div class="level2">

<p>
Pour accéder à Zabbix, lancez votre navigateur préféré et rendez-vous à l&#039;adresse :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://localhost/zabbix" class="urlextern" title="http://localhost/zabbix" rel="nofollow">http://localhost/zabbix</a> si vous êtes sur le serveur ;</div>
</li>
<li class="level1"><div class="li"> <a href="http://mon_serveur/zabbix" class="urlextern" title="http://mon_serveur/zabbix" rel="nofollow">http://mon_serveur/zabbix</a> si vous êtes sur une autre machine.</div>
</li>
</ul>

<p>
<strong>Fevrier 2016</strong> / Ubuntu 14.04. : Zabbix-serveur MySQL version 5.5.47 :
Par défaut le login est  <strong><em class="u">Admin</em></strong> et le mot de passe est <strong><em class="u">zabbix</em></strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Utilisation et configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation_et_configuration" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="14230-14648" /><button type="submit" title="Utilisation et configuration" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit18 page-header" id="en_cas_de_probleme">En cas de problème</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Si le message <em>Warning: include_once(/etc/zabbix/dbconfig.php) [function.include-once]: failed to open stream: Permission denied in /usr/share/zabbix/include/db.inc.php on line 24</em> est affiché en haut de la page,  <a href="/permissions#modifier_les_permissions" class="wikilink1" title="permissions">donnez un accès en lecture</a> au fichier  /etc/zabbix/dbconfig.php au serveur Web :<pre class="code">sudo chmod +r /etc/zabbix/dbconfig.php</pre>
</div>
</li>
<li class="level1"><div class="li"> Si le message <em>Warning: mysql_pconnect() [function.mysql-pconnect]: Access denied for user &#039;zabbix&#039;@&#039;localhost&#039; (using password: NO) in /usr/share/zabbix/include/db.inc.php on line 32</em> s&#039;affiche, <a href="/tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditez le fichier</a> <strong>/etc/zabbix/dbconfig.php</strong> et complétez le champ DB_PASSWORD avec le mot de passe que vous avez saisi lors de l&#039;installation du paquet zabbix-server-mysql :</div>
</li>
<li class="level1"><div class="li"> Si vous avez utilisé la génération automatique du mot de passe à l&#039;installation de zabbix alors, il faut que vous repreniez le mot de passe inclus dans le fichier /etc/zabbix/zabbix_server.conf et il faut l&#039;inclure dans le fichier /etc/zabbix/dbconfig.php :<pre class="code">sudo grep DBPassword /etc/zabbix/zabbix_server.conf</pre>

<p>
Le résultat va être le mot de passe généré par zabbix
</p>
<pre class="code">sudo nano /etc/zabbix/dbconfig.php</pre>

<p>
Là dans le champ &quot;$DB[&quot;PASSWORD&quot;]  = &quot;, vous remplacez le mot de passe contenu par celui obtenu lors de la commande précédente.
</p>
</div>
</li>
<li class="level1"><div class="li"> Pour ces deux erreurs un bug report à été lancé sur <a href="https://bugs.launchpad.net/ubuntu/ source/zabbix/ bug/112029" class="urlextern" title="https://bugs.launchpad.net/ubuntu/ source/zabbix/ bug/112029" rel="nofollow">launchpad</a></div>
</li>
<li class="level1 node"><div class="li"> Si le serveur Zabbix ne se relance pas automatiquement après redémarrage de la machine, il faut remplacer le contenu des fichiers :</div>
<ol class=" fix-media-list-overlap">
<li class="level2"><div class="li"> &quot;<em>/etc/init.d/zabbix-server</em>&quot; par <a href="https://bugs.launchpad.net/ubuntu/+source/zabbix/+bug/172775" class="urlextern" title="https://bugs.launchpad.net/ubuntu/+source/zabbix/+bug/172775" rel="nofollow">https://bugs.launchpad.net/ubuntu/+source/zabbix/+bug/172775</a></div>
</li>
<li class="level2"><div class="li"> &quot;<em>/etc/init.d/zabbix-agent</em>&quot; par <a href="https://bugs.launchpad.net/ubuntu/+source/zabbix/+bug/96644/comments/2" class="urlextern" title="https://bugs.launchpad.net/ubuntu/+source/zabbix/+bug/96644/comments/2" rel="nofollow">https://bugs.launchpad.net/ubuntu/+source/zabbix/+bug/96644/comments/2</a> </div>
</li>
</ol>
</li>
<li class="level1"><div class="li">  Depuis systemd pour le démarrage automatique</div>
</li>
</ul>

<p>
   pour le serveur :     
</p>
<pre class="code">sudo systemctl enable zabbix-server</pre>

<p>
     pour l&#039;agent:     
</p>
<pre class="code">sudo systemctl enable zabbix-agent</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Si le mot de passe fourni lors de l&#039;installation ne fonctionne pas pour accéder à l&#039;interface web, essayez login : admin, mdp : zabbix. (notamment sur les paquets du <a href="https://launchpad.net/~verwilst/+archive/ppa" class="urlextern" title="https://launchpad.net/~verwilst/+archive/ppa" rel="nofollow">PPA de Bart Verwilst</a>)</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[En cas de problème] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="en_cas_de_probleme" /><input type="hidden" name="codeblockOffset" value="16" /><input type="hidden" name="range" value="14649-16990" /><button type="submit" title="En cas de problème" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit19 page-header" id="compilation_du_serveur">compilation du serveur</h2>
<div class="level2">
<pre class="code">sudo apt-get install libsnmp9-dev libmysqlclient15-dev

1 - Make the zabbix user and group:

sudo adduser zabbix
enter in new password
confirm
use the remaining defaults.

Add zabbix to the admin group:

sudo adduser zabbix admin


2 - Download and Untar the sources:

su - zabbix
récupration des sources sur http://www.zabbix.com/download.php
tar zxvpf zabbix-1.4.tar.gz


3 - Create a zabbix database and populate it:

mysql -u root -p
create database zabbix;
quit;

mysql -u root -p zabbix &lt; /home/zabbix/zabbix-1.4/create/schema/mysql.sql
mysql -u root -p zabbix &lt; /home/zabbix/zabbix-1.4/create/data/data.sql


4 - Configure, compile and install the server:

cd zabbix-1.4/
./configure --prefix=/usr --with-mysql --with-net-snmp \
--enable-server --enable-agent &amp;&amp;
make
sudo make install


5 - Prepare the rest of the system:

sudo nano /etc/services

Add at the end:

zabbix_agent 10050/tcp # Zabbix ports
zabbix_trap 10051/tcp

Save and exit.

sudo mkdir /etc/zabbix
sudo chown -R zabbix.zabbix /etc/zabbix/
cp misc/conf/zabbix_* /etc/zabbix/

Edit /etc/zabbix/zabbix_agentd.conf:

nano /etc/zabbix/zabbix_agentd.conf

Make sure that the Server parameter points to the server address, for the agent that runs on the server it is like this:

Server=127.0.0.1

Edit /etc/zabbix/zabbix_server.conf:

nano /etc/zabbix/zabbix_server.conf

For small sites this default file will do, however if you are into tweaking your config for your 10+ hosts site, this is the place.

Change this:

# Database password
# Comment this line if no password used

DBPassword=Secret

Start the server :

zabbix_server

Start the client:

zabbix_agentd &amp;


6 - Configure web interface

mkdir /home/zabbix/public_html
cp -R frontends/php/* /home/zabbix/public_html/

Edit /etc/apache2/sites-enabled/000-default:

sudo nano /etc/apache2/sites-enabled/000-default

Work into file:

Alias /zabbix/ /home/zabbix/public_html/
&lt;Directory /home/zabbix/public_html&gt;
AllowOverride FileInfo AuthConfig Limit Indexes
Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
&lt;Limit GET POST OPTIONS PROPFIND&gt;
Order allow,deny
Allow from all
&lt;/Limit&gt;
&lt;LimitExcept GET POST OPTIONS PROPFIND&gt;
Order deny,allow
Deny from all
&lt;/LimitExcept&gt;
&lt;/Directory&gt;

Save and exit.

Make php.ini adjustments:

sudo nano /etc/php5/apache2/php.ini

Change the following values:

max_execution_time = 300 ; Maximum execution time of each script, in seconds
date.timezone = America/Kentucky/Louisville
(use this url to find your correct timezone format: http://us3.php.net/manual/en/timezones.php )


Restart Apache:

sudo /etc/init.d/apache2 restart


Now point your browser to:

http://&lt;servername or ip&gt;/zabbix/

1. Introduction

read and click Next

2. License Agreement

Read, check &#039;I Agree&#039;, click Next

3. Check of Pre-Requisites

Fix any problems, click retry. Click Next when all pre-requisites are OK.

4. Configure DB Connection

Enter appropriate settings and click Test Connection.
Click Next when OK.

5. Pre-Installation Summary

Verify installation settings, click Next.

6. Install

Click Save Configuration file and save to machine.
Copy zabbix.conf.php to /home/zabbix/public_html/conf/zabbix.conf.php

One way to do this from a desktop machine (requires ssh installed):
scp zabbix.conf.php zabbix@&lt;serverip&gt;:/home/zabbix/public_html/conf/

Click Retry and click Next when OK.

7. Finish

Click Finish to complete installation.


Your New Zabbix install will now be shown.

Log in with username: Admin
No Password

First go to the tab Configuration and then Hosts.

Now create a host-group, see that you can give it some templates, e.g: Application.MySQL, Host.SNMP, Host.Standalone, Host.Unix.

Then some hosts:

Select your host-group and use Link with Template Host.Unix

Now a lot of triggers are imported and the game begins.

Go to the monitoring tab and watch the latest values roll in.

For specifics on configuration, please refer to the Zabbix user manual.

www.zabbix.com</pre>

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[compilation du serveur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="compilation_du_serveur" /><input type="hidden" name="codeblockOffset" value="21" /><input type="hidden" name="range" value="16991-20999" /><button type="submit" title="compilation du serveur" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit20 page-header" id="references">Références</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="http://www.zabbix.com" class="urlextern" title="http://www.zabbix.com" rel="nofollow">Le site officiel</a> (en).</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.zabbix.com/manual/v1.1/" class="urlextern" title="http://www.zabbix.com/manual/v1.1/" rel="nofollow">L&#039;aide en ligne de la version 1.1</a> (en).</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.zabbix.com/screenshots.php" class="urlextern" title="http://www.zabbix.com/screenshots.php" rel="nofollow">Quelques captures d&#039;écran</a> (en).</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.generation-linux.fr/index.php?post/2009/06/03/Zabbix-un-excellent-logiciel-de-supervision-reseau" class="urlextern" title="http://www.generation-linux.fr/index.php?post/2009/06/03/Zabbix-un-excellent-logiciel-de-supervision-reseau" rel="nofollow">Présentation de l&#039;interface de supervision et de configuration en images</a> (fr).</div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.monitoring-fr.org/zabbix/start" class="urlextern" title="http://wiki.monitoring-fr.org/zabbix/start" rel="nofollow"> Un dossier complet sur le wiki monitoring-fr</a> (fr).</div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs : <a href="/utilisateurs/loack" class="wikilink1" title="utilisateurs:loack">loack</a>.</em>
</p>

<p>
<em>Descriptif basé sur celui de <a href="/nagios" class="wikilink1" title="nagios">Nagios</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/zabbix"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1559064291" /><input type="hidden" name="summary" value="[Références] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="references" /><input type="hidden" name="codeblockOffset" value="22" /><input type="hidden" name="range" value="21000-" /><button type="submit" title="Références" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="zabbix.txt">zabbix.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 28/05/2019, 19:24">Le 28/05/2019, 19:24</span></li><li class="text-muted">par 193.250.138.66</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=zabbix&amp;1635568592" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr"
  lang="fr" dir="ltr" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>hosts [Wiki ubuntu-fr]</title>
  <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="shortcut icon" href="/_media/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/bootstrap3/images/apple-touch-icon.png" />
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="pare-feu,reseau,securite"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/fonts/united.fonts.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/font-awesome/css/font-awesome.min.css"/>
<link type="text/css" rel="stylesheet" href="/lib/tpl/bootstrap3/assets/bootstrap/united/bootstrap.min.css"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Wiki ubuntu-fr"/>
<link rel="start" href="/"/>
<link rel="contents" href="/hosts?do=index" title="Plan du site"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Catégorie courante" href="/feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="/hosts?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="/_export/xhtml/hosts"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="/_export/raw/hosts"/>
<link rel="canonical" href="http://doc.ubuntu-fr.org/hosts"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"bootstrap3":{"mode":"show","toc":[],"config":{"collapsibleSections":0,"fixedTopNavbar":1,"showSemanticPopup":0,"sidebarOnNavbar":0,"tagsOnTop":1,"tocAffix":1,"tocCollapseOnScroll":1,"tocCollapsed":0,"tocLayout":"default","useAnchorJS":1}},"id":"hosts","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=bootstrap3&amp;tseed=b4a19b95bb4d08daf02b6dd52d7e6abc"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/anchorjs/anchor.min.js"></script>
<script type="text/javascript" src="/lib/tpl/bootstrap3/assets/typeahead/bootstrap3-typeahead.min.js"></script>
<!--<![endif]-->
<style type="text/css">@media screen { body { margin-top: 70px; }  #dw__toc.affix { top: 60px; position: fixed !important; }  #dw__toc .nav .nav .nav { display: none; } }</style>
    <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="united dokuwiki mode_show tpl_bootstrap3 dw-page-on-panel" data-page-id="hosts">

  <header id="dokuwiki__header" class="dokuwiki container">
    <nav id="dw__navbar" class="navbar navbar-fixed-top navbar-default" role="navigation">

  <div class="container">

    <div class="navbar-header">

      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="/accueil"  accesskey="h" title="[H]" class="navbar-brand"><span class="uf uf-cof" id="dw__accueil" style="font-size: 35px;" ></span> <span id="dw__title" style="margin-top:-5px">Wiki ubuntu-fr<span id="dw__tagline">La Documentation francophone</span></span></a>
    </div>

    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav">
        <li>
          <a href="//ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-home"></i><span> Accueil</span></a>        </li>
        <li>
          <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-comments"></i><span> Forum</span></a>        </li>
        <li>
          <a href="//planet.ubuntu-fr.org/" ><i class="fa fa-2x fa-fw fa-globe"></i><span> Planet</span></a>        </li>
      </ul>

            
      
      <div class="navbar-right" id="dw__navbar_items">

        <form action="//forum.ubuntu-fr.org/search_ubuntufr.php" accept-charset="utf-8" class="navbar-form navbar-left search" id="dw__search" method="get" role="search"><div class="no"><input id="qsearch" autocomplete="off" type="search" placeholder="Rechercher" accesskey="f" name="q" class="form-control" title="[F]" /><button type="submit" title="Rechercher"><i class="fa fa-fw fa-search"></i></button><input type="hidden" name="do" value="search" /><input type="hidden" name="tsearch" value="wiki" /></div></form>
        
<ul class="nav navbar-nav dw-action-icon" id="dw__tools">


  <li class="dropdown">

    <a href="" class="dropdown-toggle" data-target="#" data-toggle="dropdown" title="" role="button" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-2x fa-fw fa-wrench"></i> <span class="hidden-lg hidden-md hidden-sm">Outils</span> <span class="caret"></span>
    </a>

    <ul class="dropdown-menu tools" role="menu">
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-cubes"></i> Outils du site      </li>
      <li><a href="/hosts?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li><li><a href="/hosts?do=media&amp;ns="  class="action media" rel="nofollow" title="Gestionnaire Multimédia">Gestionnaire Multimédia</a></li><li><a href="/hosts?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
            <li class="divider" role="separator"></li>
      
    
      <li class="dropdown-header">
        <i class="fa fa-fw fa-file"></i> Outils de la page      </li>
      <li><a href="/hosts?do=edit"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li><li><a href="/hosts?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li><li><a href="/hosts?do=backlink"  class="action backlink" rel="nofollow" title="Liens de retour">Liens de retour</a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Haut de page [T]">Haut de page</a></li>
      
        </ul>
  </li>


</ul>


        <ul class="nav navbar-nav">

          
          
                    <li>
            <span class="dw__actions dw-action-icon">
              <a href="/hosts?do=login&amp;sectok="  class="action btn btn-default navbar-btn login" rel="nofollow" title="S&#039;identifier"><span class="">S'identifier</span></a>            </span>
          </li>
          
        </ul>

        
        

      </div>

    </div>
  </div>
</nav>
  </header>

  <div id="dokuwiki__top" class="dokuwiki container">

    <div id="dokuwiki__pageheader">

      
      
      <p class="pageId text-right small">
        <span class="label label-primary">hosts</span>      </p>

      <div id="dw__msgarea" class="small">
              </div>

    </div>

    <main class="main row" role="main">

      
      <article id="dokuwiki__content" class="container" itemscope itemtype="http://schema.org/Article" itemref="dw__license">

        
<nav id="dw__pagetools" class="hidden-print">
  <div class="tools panel panel-default pull-right ">
    <ul class="nav nav-stacked nav-pills">
      <li><a href="/hosts?do=edit"  class="action text-muted edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]"><i class="fa fa-fw fa-pencil-square-o"></i><span class="sr-only"> Modifier cette page</span></a></li><li><a href="/hosts?do=revisions"  class="action text-muted revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]"><i class="fa fa-fw fa-clock-o"></i><span class="sr-only"> </span></a></li><li><a href="/hosts?do=backlink"  class="action text-muted backlink" rel="nofollow" title="Liens de retour"><i class="fa fa-fw fa-link"></i><span class="sr-only"> Liens de retour</span></a></li>    </ul>
  </div>
</nav>

        <div class="panel panel-default" itemprop="articleBody">
          <div class="page panel-body">

            <div class="dw-content-page "><div class="dw-toc hidden-print"><script>JSINFO.bootstrap3.toc = [{"link":"#les_fichiers","title":"Les fichiers","level":1},{"link":"#hostname","title":"hostname","level":2},{"link":"#hosts","title":"hosts","level":2},{"link":"#trouver_et_modifier_le_fichier_hosts","title":"Trouver et modifier le fichier hosts","level":2},{"link":"#utiliser_le_fichier_hosts_pour_bloquer_des_sites_web","title":"Utiliser le fichier Hosts pour bloquer des sites web","level":1},{"link":"#divers_fichiers_hosts","title":"Divers fichiers hosts","level":2},{"link":"#pre-requis","title":"Pr\u00e9-requis","level":2},{"link":"#installation_et_mise_a_jour_automatique","title":"Installation et mise \u00e0 jour automatique","level":2},{"link":"#desinstallation","title":"D\u00e9sinstallation","level":2},{"link":"#site_en_rapport","title":"Site en rapport","level":2},{"link":"#remplacer_les_messages_d_erreurs_impossible_de_charger_l_url_lors_de_la_navigation","title":"Remplacer les messages d\u2019erreurs \"Impossible de charger l'URL\" lors de la navigation","level":1},{"link":"#installation","title":"Installation","level":2},{"link":"#utilisation","title":"Utilisation","level":2},{"link":"#desinstallation1","title":"D\u00e9sinstallation","level":2},{"link":"#problemesremarques","title":"Probl\u00e8mes \/ Remarques","level":2},{"link":"#heberger_simultanement_un_site_local_et_une_page_speciale_de_blocage","title":"H\u00e9berger simultan\u00e9ment un site local et une page sp\u00e9ciale de blocage","level":1},{"link":"#la_page_indexphp","title":"La page index.php","level":2},{"link":"#la_page_bloquephp","title":"La page bloque.php","level":2},{"link":"#liens","title":"Liens","level":1}];</script>
<!-- TOC START -->
<nav id="dw__toc" role="navigation" class="toc-panel panel panel-default small">
<h6 data-toggle="collapse" data-target="#dw__toc .toc-body" title="Table des matières" class="panel-heading toc-title"><i class="fa fa-fw fa-th-list"></i> <span>Table des matières</span> <i class="caret"></i></h6>
<div class="panel-body  toc-body collapse in">

<ul class="nav toc">
<li class="level1"><a href="#les_fichiers">Les fichiers</a>
<ul class="nav toc">
<li class="level2"><a href="#hostname">hostname</a></li>
<li class="level2"><a href="#hosts">hosts</a></li>
<li class="level2"><a href="#trouver_et_modifier_le_fichier_hosts">Trouver et modifier le fichier hosts</a></li>
</ul>
</li>
<li class="level1"><a href="#utiliser_le_fichier_hosts_pour_bloquer_des_sites_web">Utiliser le fichier Hosts pour bloquer des sites web</a>
<ul class="nav toc">
<li class="level2"><a href="#divers_fichiers_hosts">Divers fichiers hosts</a></li>
<li class="level2"><a href="#pre-requis">Pré-requis</a></li>
<li class="level2"><a href="#installation_et_mise_a_jour_automatique">Installation et mise à jour automatique</a></li>
<li class="level2"><a href="#desinstallation">Désinstallation</a></li>
<li class="level2"><a href="#site_en_rapport">Site en rapport</a></li>
</ul>
</li>
<li class="level1"><a href="#remplacer_les_messages_d_erreurs_impossible_de_charger_l_url_lors_de_la_navigation">Remplacer les messages d’erreurs &quot;Impossible de charger l&#039;URL&quot; lors de la navigation</a>
<ul class="nav toc">
<li class="level2"><a href="#installation">Installation</a></li>
<li class="level2"><a href="#utilisation">Utilisation</a></li>
<li class="level2"><a href="#desinstallation1">Désinstallation</a></li>
<li class="level2"><a href="#problemesremarques">Problèmes / Remarques</a></li>
</ul>
</li>
<li class="level1"><a href="#heberger_simultanement_un_site_local_et_une_page_speciale_de_blocage">Héberger simultanément un site local et une page spéciale de blocage</a>
<ul class="nav toc">
<li class="level2"><a href="#la_page_indexphp">La page index.php</a></li>
<li class="level2"><a href="#la_page_bloquephp">La page bloque.php</a></li>
</ul>
</li>
<li class="level1"><a href="#liens">Liens</a></li>
</ul>

</div>
</nav>
<!-- TOC END -->
</div><!-- CONTENT --><div class="dw-content"><div class="tags"><span>
	<a href="/pare-feu" class="wikilink1" title="pare-feu" rel="tag">pare-feu</a>,
	<a href="/reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="/securite" class="wikilink1" title="securite" rel="tag">sécurité</a>
</span></div>
<hr />

<h1 class="sectionedit1 page-header" id="les_fichiers_hosts_et_hostname">Les fichiers Hosts et hostname</h1>
<div class="level1">

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Les fichiers Hosts et hostname] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_fichiers_hosts_et_hostname" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="45-89" /><button type="submit" title="Les fichiers Hosts et hostname" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit2 page-header" id="les_fichiers">Les fichiers</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Les fichiers] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="les_fichiers" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="90-114" /><button type="submit" title="Les fichiers" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit3" id="hostname">hostname</h3>
<div class="level3">

<p>
<strong>Le fichier /etc/hostname</strong> contient le nom du PC. Il faut le modifier <a href="/sudo" class="wikilink1" title="sudo">avec les droits administrateur</a> en l&#039;éditant avec votre éditeur préféré ou en tapant :
</p>
<pre class="code">sudo sh -c &quot;echo nouveau_nom_du_pc &gt; /etc/hostname&quot;</pre>

<p>
Un redémarrage est nécessaire pour la prise en compte.
De façon temporaire on peut simplement utiliser la commande du même nom :
</p>
<pre class="code">sudo hostname nouveau_nom_du_pc</pre>

<p>
Attention à garder la cohérence avec le fichier de configuration de Samba, cf. <a href="/samba_smb.conf#parametres_generaux_de_global" class="wikilink1" title="samba_smb.conf">samba_smb.conf paramètres généraux [global]</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[hostname] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="hostname" /><input type="hidden" name="codeblockOffset" value="0" /><input type="hidden" name="range" value="115-730" /><button type="submit" title="hostname" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit4" id="hosts">hosts</h3>
<div class="level3">

<p>
<strong>Le fichier hosts</strong> est utilisé sous tous les systèmes d’exploitations lors de l’accès à Internet, ce fichier est consulté avant l’accès au serveur <abbr title="Domain Name System">DNS</abbr>. C’est un simple fichier qui contient sur la même ligne une adresse IP et parfois le nom de domaine.<br/>

</p>

<p>
Ce fichier permet de bloquer l’accès à un site Internet, de le rediriger, de bloquer les pubs et d’améliorer l’accès à des sites en fonction de la configuration de celui-ci. Il peut être utile pour protéger votre ordinateur, empêcher un enfant (par exemple) d’accéder à un site particulier.<br/>

Ce fichier peut aussi servir à définir les noms des machines sur un réseau local (ou pas), cf. <a href="/tutoriel/comment_configurer_son_reseau_local#renseigner_le_fichieretchosts" class="wikilink1" title="tutoriel:comment_configurer_son_reseau_local">renseigner_le_fichier etc hosts</a>
</p>

<p>
Le fichier hosts est l’ancêtre des <a href="/dns" class="wikilink1" title="dns">DNS</a> utilisé dans <a href="https://fr.wikipedia.org/wiki/ARPANET" class="interwiki iw_wpfr" title="https://fr.wikipedia.org/wiki/ARPANET">ARPANET</a> - servant à adresser les adresses des réseaux.
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <strong>Voir également <a href="/moblock" class="wikilink1" title="moblock">PGLD</a>, pour bloquer à partir de la liste peerguardian.</strong></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[hosts] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="hosts" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="731-1764" /><button type="submit" title="hosts" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit5" id="trouver_et_modifier_le_fichier_hosts">Trouver et modifier le fichier hosts</h3>
<div class="level3">

<p>
Le fichier hosts se trouve dans /etc/. Son chemin est donc <strong>/etc/hosts</strong>.
</p>
<div class="notewarning">Avant modification, comme pour tout fichier-système, il est prudent d&#039;en faire une <strong>copie de sauvegarde</strong>, datée :
<pre class="code">sudo cp -av /etc/hosts /etc/hosts.&lt;date-de-la-veille&gt;</pre>

<p>
Les deux premières lignes de hosts sont <strong>cruciales</strong>, n&#039;y touchez pas si vous ne savez pas exactement ce que vous faites - risque de rendre votre session inaccessible.
</p>

</div>
<p>
Pour modifier le fichier hosts, il faut les droits d&#039;administrateur.<br/>

<em class="u">En ligne de commande</em> :
</p>
<pre class="code">sudo nano /etc/hosts</pre>

<p>
Pour enregistrer : <strong>Ctrl o</strong> puis <strong>Entrée</strong>. Pour quitter : <strong>Ctrl x</strong>.<br/>
<br/>
<br/>

<em class="u">En mode graphique</em> :<br/>

…jusqu&#039;à la version 17.04 incluse,<br/>

……..dans les variantes Kubuntu ou Neon, faites 
</p>
<pre class="code">kdesudo xdg-open /etc/hosts</pre>

<p>
……..et dans les autres variantes, faites
</p>
<pre class="code">gksudo xdg-open /etc/hosts</pre>

<p>
…à partir de la 17.10 (mais cette méthode est utilisable dans toutes les versions) :
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Copier le fichier (sans changer son nom) dans votre home (et pas dans un de ses sous-répertoires) :</div>
</li>
</ul>
<pre class="code">cp -v /etc/hosts ~</pre>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Modifier cette copie dans votre home avec votre éditeur de texte favori ;</div>
</li>
<li class="level1"><div class="li"> L&#039;enregistrer (toujours sans changer son nom) ;</div>
</li>
<li class="level1"><div class="li"> Le déplacer dans /etc/ (c&#039;est le seul moment qui nécessite les droits d&#039;administrateur) :</div>
</li>
</ul>
<pre class="code">sudo mv -v ~/hosts /etc/hosts</pre>
<div class="noteimportant">La modification de /etc/hosts, est <strong>instantanément</strong> appliquée par le système, sans autre intervention de votre part. (Testé avec Trusty).
</div>
</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Trouver et modifier le fichier hosts] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="trouver_et_modifier_le_fichier_hosts" /><input type="hidden" name="codeblockOffset" value="2" /><input type="hidden" name="range" value="1765-3391" /><button type="submit" title="Trouver et modifier le fichier hosts" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit6 page-header" id="utiliser_le_fichier_hosts_pour_bloquer_des_sites_web">Utiliser le fichier Hosts pour bloquer des sites web</h2>
<div class="level2">

<p>
En définissant comme adresse IP, une adresse autre, on peut éviter d&#039;aller sur certains sites web ou par exemple, bloquer les publicités.
</p>

<p>
La plupart du temps c&#039;est l&#039;adresse de la boucle locale (127.0.0.1) qui est utilisée, cependant il est conseillé d&#039;utiliser 0.0.0.0 à la place car il n&#039;y a pas d&#039;attente de timeout. Résultat : beaucoup moins de lenteurs. De plus, de cette façon, le fichier hosts n&#039;interfère pas avec les serveurs Web qui peuvent être hébergés en local.
</p>
<div class="notewarning">A priori, <strong>de trop grosses listes et/ou non adaptées peuvent ralentir votre accès au réseau</strong>. Faire des test (via la commande <a href="/faq_reseau#tests_vers_une_machine_distante" class="wikilink1" title="faq_reseau">ping</a> par exemple).
<p>
A partir d&#039;Ubuntu 17.04, systemd-resolved est utilisé comme <a href="https://doc.ubuntu-fr.org/zesty#changements_apportes_depuis_la_version_precedente" class="urlextern" title="https://doc.ubuntu-fr.org/zesty#changements_apportes_depuis_la_version_precedente" rel="nofollow">résolveur DNS par défaut</a> et un trop gros fichier hosts (plusieurs Mo) peut bloquer complètement l&#039;accès à internet. Pour palier à ce problème, il suffirait de supprimer systemd-resolved. Plus d&#039;infos dans <a href="https://forum.ubuntu-fr.org/viewtopic.php?id=2029407" class="urlextern" title="https://forum.ubuntu-fr.org/viewtopic.php?id=2029407" rel="nofollow">cette discussion</a>.
</p>

</div><div class="noteclassic">Pour aller plus loin et dans une perspective de sécurité, l&#039;utilisation d&#039;un <a href="/pare-feu" class="wikilink1" title="pare-feu">pare-feu</a> est préférable.<br/>

Voir aussi l&#039;utilisation de <a href="/configuration_serveur_dns_dhcp#bloquer_un_domaine_avec_dnsmasq" class="wikilink1" title="configuration_serveur_dns_dhcp">dnsmasq</a>.
</div>
</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Utiliser le fichier Hosts pour bloquer des sites web] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utiliser_le_fichier_hosts_pour_bloquer_des_sites_web" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="3392-4831" /><button type="submit" title="Utiliser le fichier Hosts pour bloquer des sites web" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit7" id="divers_fichiers_hosts">Divers fichiers hosts</h3>
<div class="level3">

<p>
<em>Liste non exhaustive. Liens classés par ordre alphabétique.</em>
</p>
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <del><a href="https://adzhosts.eu/" class="urlextern" title="https://adzhosts.eu/" rel="nofollow">AdZHosts</a></del> <em>Projet abandonné fin août 2018. Merci à Hajdar pour ses 10 années de travail.</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/mitchellkrogza/Badd-Boyz-Hosts" class="urlextern" title="https://github.com/mitchellkrogza/Badd-Boyz-Hosts" rel="nofollow">Badd Boyz Hosts</a> (GitHub) <em>Bloque principalement les sites interdits aux mineurs.</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.encrypt-the-planet.com/downloads/hosts" class="urlextern" title="https://www.encrypt-the-planet.com/downloads/hosts" rel="nofollow">Encrypt The Planet</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://filterlists.com/" class="urlextern" title="https://filterlists.com/" rel="nofollow">Filter Lists</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://hosts-file.net/?s=Download" class="urlextern" title="https://hosts-file.net/?s=Download" rel="nofollow">hpHosts</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://winhelp2002.mvps.org/hosts.txt" class="urlextern" title="http://winhelp2002.mvps.org/hosts.txt" rel="nofollow">MVPS.org</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://rlwpx.free.fr/WPFF/hosts.htm" class="urlextern" title="http://rlwpx.free.fr/WPFF/hosts.htm" rel="nofollow">rlwpx.free.fr</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://someonewhocares.org/hosts/" class="urlextern" title="https://someonewhocares.org/hosts/" rel="nofollow">Someonewhocares.org</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/StevenBlack/hosts" class="urlextern" title="https://github.com/StevenBlack/hosts" rel="nofollow">Steven Black&#039;s hosts</a> (GitHub) <em>Plus d&#039;infos <a href="https://magnier.io/bloquer-pubs-hosts" class="urlextern" title="https://magnier.io/bloquer-pubs-hosts" rel="nofollow">ICI</a>.</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/mitchellkrogza/Ultimate.Hosts.Blacklist" class="urlextern" title="https://github.com/mitchellkrogza/Ultimate.Hosts.Blacklist" rel="nofollow">Ultimate Hosts Blacklist</a> (GitHub) <em>Fournit également un fichier <a href="/denyhosts" class="wikilink1" title="denyhosts">hosts.deny</a>.</em></div>
</li>
</ul>

<p>
<em>D&#039;autres listes et sources sont disponibles <a href="https://github.com/StevenBlack/hosts#sources-of-hosts-data-unified-in-this-variant" class="urlextern" title="https://github.com/StevenBlack/hosts#sources-of-hosts-data-unified-in-this-variant" rel="nofollow">ICI</a>, <a href="https://github.com/notracking/hosts-blocklists#sources" class="urlextern" title="https://github.com/notracking/hosts-blocklists#sources" rel="nofollow">ICI</a> ou encore <a href="https://github.com/mitchellkrogza/Ultimate.Hosts.Blacklist#information-data-sources-copyrights-and-credits" class="urlextern" title="https://github.com/mitchellkrogza/Ultimate.Hosts.Blacklist#information-data-sources-copyrights-and-credits" rel="nofollow">ICI</a>.</em>
</p>
<div class="noteclassic">Pour Windows, il y a <a href="http://www.abelhadigital.com/hostsman" class="urlextern" title="http://www.abelhadigital.com/hostsman" rel="nofollow">HostsMan</a> (freeware), <a href="https://www.brightfort.com/spywareblaster.html" class="urlextern" title="https://www.brightfort.com/spywareblaster.html" rel="nofollow">SpywareBlaster</a> (gratuit pour les particuliers et l&#039;éducation) et <a href="https://www.safer-networking.org/products/spybot-free-edition" class="urlextern" title="https://www.safer-networking.org/products/spybot-free-edition" rel="nofollow">Spybot</a> (freeware) qui ont des listes à leur disposition. Il serait utile de les récupérer et de les partager. 
<p>
Il est théoriquement possible de convertir des listes peerguardian pour mettre à jour hosts - mais autant utiliser <a href="/moblock" class="wikilink1" title="moblock">PGLD</a> qui fait déjà cela automatiquement.
</p>

</div>
</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Divers fichiers hosts] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="divers_fichiers_hosts" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="4832-6759" /><button type="submit" title="Divers fichiers hosts" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit8" id="pre-requis">Pré-requis</h3>
<div class="level3">

<p>
Être familiarisé avec les <a href="/tutoriel/console_commandes_de_base" class="wikilink1" title="tutoriel:console_commandes_de_base">commandes de bases</a>.<br/>

</p>

<p>
Penser à sauvegarder le fichier hosts original ou précédent avec :<br/>

</p>
<pre class="code">cd /etc/</pre>
<pre class="code">cp hosts hosts.backup</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="pre-requis" /><input type="hidden" name="codeblockOffset" value="8" /><input type="hidden" name="range" value="6760-7005" /><button type="submit" title="Pré-requis" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit9" id="installation_et_mise_a_jour_automatique">Installation et mise à jour automatique</h3>
<div class="level3">

<p>
Je vous propose une méthode simple de mise à jour automatique mensuel du fichier host.
</p>

<p>
Dans une console :
</p>
<pre class="code">sudo touch /etc/cron.monthly/hosts ; sudo xdg-open /etc/cron.monthly/hosts</pre>

<p>
Collez-y le code ci-dessous (&quot;ubuntu&quot; est à changer par le nom de votre machine) :
</p>
<pre class="code">#!/bin/bash
wget --directory-prefix=/tmp  http://winhelp2002.mvps.org/hosts.txt ||exit
mv /tmp/hosts.txt /etc/hosts
echo &quot;127.0.1.1 ubuntu&quot; &gt;&gt; /etc/hosts
echo &quot;::1 ip6-localhost ip6-loopback&quot; &gt;&gt; /etc/hosts
echo &quot;fe00::0 ip6-localnet&quot; &gt;&gt; /etc/hosts
echo &quot;ff00::0 ip6-mcastprefix&quot; &gt;&gt; /etc/hosts
echo &quot;ff02::1 ip6-allnodes&quot; &gt;&gt; /etc/hosts
echo &quot;ff02::2 ip6-allrouters&quot; &gt;&gt; /etc/hosts</pre>

<p>
Fermez l’éditeur de texte puis exécutez :
</p>
<pre class="code">sudo chmod +x /etc/cron.monthly/hosts</pre>

<p>
et voilà la mise à jour est automatique !
</p>

<p>
Remarque :
</p>

<p>
- ce script ne modifie rien si il n’arrive pas à télécharger
</p>

<p>
- ce script s&#039;adapte en ajoutant les lignes par défaut du fichier de Ubuntu
</p>

<p>
- ce script est exécuté automatiquement tout les mois sans intervention de l&#039;utilisateur
</p>

<p>
- il est possible de l’exécuter n’importe quand avec &quot;sudo /etc/cron.monthly/hosts&quot;
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Installation et mise à jour automatique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation_et_mise_a_jour_automatique" /><input type="hidden" name="codeblockOffset" value="10" /><input type="hidden" name="range" value="7006-8214" /><button type="submit" title="Installation et mise à jour automatique" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit10" id="desinstallation">Désinstallation</h3>
<div class="level3">

<p>
Il faut tout simplement supprimer le fichier hosts qui a été remplacé et remettre l’original précieusement sauvegardé :)<br/>

</p>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Désinstallation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="desinstallation" /><input type="hidden" name="codeblockOffset" value="13" /><input type="hidden" name="range" value="8215-8373" /><button type="submit" title="Désinstallation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit11" id="site_en_rapport">Site en rapport</h3>
<div class="level3">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> Autre lien pour script automatique : <a href="https://fl4t.blogspot.com/2009/05/script-pour-linuxien-adzhosts.html" class="urlextern" title="https://fl4t.blogspot.com/2009/05/script-pour-linuxien-adzhosts.html" rel="nofollow">Script pour linuxien AdZHosts</a> (Projet AdZHosts abandonné).<br/>
</div>
</li>
<li class="level1"><div class="li"> Le fil de discussion : <a href="https://forum.ubuntu-fr.org/viewtopic.php?pid=2575813#p2575813" class="urlextern" title="https://forum.ubuntu-fr.org/viewtopic.php?pid=2575813#p2575813" rel="nofollow">forum.ubuntu-fr.org</a><br/>
</div>
</li>
<li class="level1"><div class="li"> Introduction et personnalisation du fichier hosts : <a href="https://www.donnemoilinfo.com/sujet/Securiser/fichier-hosts.php" class="urlextern" title="https://www.donnemoilinfo.com/sujet/Securiser/fichier-hosts.php" rel="nofollow">www.donnemoilinfo.com</a><br/>
</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Site en rapport] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="site_en_rapport" /><input type="hidden" name="codeblockOffset" value="13" /><input type="hidden" name="range" value="8374-8842" /><button type="submit" title="Site en rapport" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit12 page-header" id="remplacer_les_messages_d_erreurs_impossible_de_charger_l_url_lors_de_la_navigation">Remplacer les messages d’erreurs &quot;Impossible de charger l&#039;URL&quot; lors de la navigation</h2>
<div class="level2">

<p>
Vous l’aurez certainement remarqué, le fait de blacklister un site dans le fichier HOST provoque des erreurs d’affichage assez désagréables lors de la navigation.
</p>

<p>
En effet, le fichier HOST redirige l’adresse du site indésirable vers une adresse nulle (0.0.0.0) ou bien votre ordinateur (127.0.0.1). Votre PC n’est donc pas capable de répondre à la requête car aucun serveur HTTP n’est actif ou dans le cas contraire, votre serveur HTTP ne peut servir l’URL demandée car elle n&#039;existe pas sur votre ordinateur.
</p>

<p>
La méthode de contournement consiste à lancer un serveur HTTP bidon qui va répondre à toute les requêtes en envoyant comme réponse un code <abbr title="HyperText Markup Language">HTML</abbr> défini par l&#039;utilisateur.
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Remplacer les messages d’erreurs &quot;Impossible de charger l&#039;URL&quot; lors de la navigation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="remplacer_les_messages_d_erreurs_impossible_de_charger_l_url_lors_de_la_navigation" /><input type="hidden" name="codeblockOffset" value="13" /><input type="hidden" name="range" value="8843-9652" /><button type="submit" title="Remplacer les messages d’erreurs &quot;Impossible de charger l&#039;URL&quot; lors de la navigation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit13" id="installation">Installation</h3>
<div class="level3">

<p>
- Installer les dépendances
</p>
<pre class="code">sudo apt-get install libcurl4-gnutls-dev </pre>

<p>
- Télécharger et décompresser l’archive (le lien semble mort le 03/01/2014)
</p>
<pre class="code">wget http://fab.homelinux.org/nullsrvd/nullsrvd.tar.gz
tar xzvf nullsrvd.tar.gz</pre>

<p>
- Compiler
</p>
<pre class="code">cd nullsrvd
make</pre>

<p>
- Installer 
</p>
<pre class="code">sudo make install</pre>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="installation" /><input type="hidden" name="codeblockOffset" value="13" /><input type="hidden" name="range" value="9653-10028" /><button type="submit" title="Installation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit14" id="utilisation">Utilisation</h3>
<div class="level3">

<p>
Le serveur nullsrvd est un démon, c’est-à-dire que celui-ci se lance tout seul dès le démarrage de la machine
</p>

</div>

<h4 id="arretdemarrage">Arrêt / Démarrage</h4>
<div class="level4">
<pre class="code">sudo service nullsrvd start|stop</pre>

</div>

<h4 id="consultation_de_la_log">Consultation de la log</h4>
<div class="level4">
<pre class="code">cat /var/log/nullsrvd/nullsrvd.log</pre>

</div>

<h4 id="changer_le_code_html_renvoye_par_nullsrvd">Changer le code HTML renvoyé par nullsrvd</h4>
<div class="level4">

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Editer le fichier</a> /etc/nullsrvd/response.html
</p>

</div>

<h4 id="changer_le_chemin_d_acces_du_fichier_html_renvoye_par_nullsrvd">Changer le chemin d&#039;accès du fichier HTML renvoyé par nullsrvd</h4>
<div class="level4">

<p>
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Editer le fichier</a> /etc/default/nullsrvd
</p>

</div>

<h4 id="rajouter_des_entrees_hosts_utilisateur">Rajouter des entrées hosts utilisateur</h4>
<div class="level4">

<p>
Si vous souhaitez que nullsrvd rajoute des entrées au fichier hosts après l&#039;installation d&#039;un nouveau fichier issu d’AdzHosts, 
<a href="/tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">éditer le fichier</a> /etc/nullsrvd/user.hosts
</p>

</div>
<div class='secedit editbutton_section editbutton_14'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Utilisation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="utilisation" /><input type="hidden" name="codeblockOffset" value="17" /><input type="hidden" name="range" value="10029-10892" /><button type="submit" title="Utilisation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit15" id="desinstallation1">Désinstallation</h3>
<div class="level3">

<p>
Penser à arrêter nullsrvd avant sa désinstallation.
</p>
<pre class="code">sudo make uninstall</pre>

</div>
<div class='secedit editbutton_section editbutton_15'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Désinstallation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="desinstallation1" /><input type="hidden" name="codeblockOffset" value="19" /><input type="hidden" name="range" value="10893-11011" /><button type="submit" title="Désinstallation" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit16" id="problemesremarques">Problèmes / Remarques</h3>
<div class="level3">

<p>
S’adresser à <a href="http://forum.ubuntu-fr.org/profile.php?id=45561" class="urlextern" title="http://forum.ubuntu-fr.org/profile.php?id=45561" rel="nofollow">darunia</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_16'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Problèmes / Remarques] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="problemesremarques" /><input type="hidden" name="codeblockOffset" value="20" /><input type="hidden" name="range" value="11012-11123" /><button type="submit" title="Problèmes / Remarques" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit17 page-header" id="heberger_simultanement_un_site_local_et_une_page_speciale_de_blocage">Héberger simultanément un site local et une page spéciale de blocage</h2>
<div class="level2">

<p>
Si vous hébergez un site sur votre ordinateur, il sera accessible à l’adresse 127.0.0.1, mais vous ne voulez pas forcément que ce soit ce site qui s’affiche pour une url bloquée par le fichier hosts.
</p>

<p>
La première chose à faire est une page en php qui va analyser l&#039;adresse et rediriger vers votre site si l&#039;adresse appartient à une liste définie (localhost, votre ip locale, le nom de la machine…) et rediriger vers une page bloquant l’accès au site pour toutes les autres adresses (soit celles contenues dans le fichier host).
</p>

</div>
<div class='secedit editbutton_section editbutton_17'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Héberger simultanément un site local et une page spéciale de blocage] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="heberger_simultanement_un_site_local_et_une_page_speciale_de_blocage" /><input type="hidden" name="codeblockOffset" value="20" /><input type="hidden" name="range" value="11124-11752" /><button type="submit" title="Héberger simultanément un site local et une page spéciale de blocage" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit18" id="la_page_indexphp">La page index.php</h3>
<div class="level3">

<p>
La page index.php sera la page chargée par défaut si vous indiquer uniquement un nom de domaine sans indiquer de fichier, c&#039;est donc celle la qui va analyser l&#039;adresse
</p>
<pre class="code">&lt;!DOCTYPE html&gt; 
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;index.php&lt;/title&gt;
    &lt;/head&gt;

    &lt;body&gt;
  

&lt;?php
$monUrl = &quot;http://&quot;.$_SERVER[&#039;HTTP_HOST&#039;].&quot;/&quot;;
switch ($monUrl)
{
case &quot;http://127.0.0.1/&quot;:
include (&#039;./mapagedaccueil.php&#039;);
break;

case &quot;http://192.168.1.95/&quot;:
include (&#039;./mapagedaccueil.php&#039;);
break;

case &quot;http://localhost/&quot;:
include (&#039;./mapagedaccueil.php&#039;);
break;

default:
include (&#039;./bloque.php&#039;);

}
			
?&gt; 
	
    &lt;/body&gt;
&lt;/html&gt;</pre>

<p>
Cette page va donc récupérer l’adresse courante avec   $_SERVER[&#039;HTTP_HOST&#039;]  et inclure la page qui convient. Bien sûr, il faut remplacer 192.168.1.95 par votre adresse ip locale et rajouter si besoin d’autres  case  si vous voulez que d’autres adresses affichent votre site. Elle affichera soit la page bloque.php que nous verrons au chapitre suivant soit votre page d’accueil, qui s’appelait index.php avant de suivre ce tuto et que vous devez renommer en mapagedaccueil.php ou un autre nom mais il faudra adapter la page index.php et y mettre le même nom.
</p>

</div>
<div class='secedit editbutton_section editbutton_18'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[La page index.php] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_page_indexphp" /><input type="hidden" name="codeblockOffset" value="20" /><input type="hidden" name="range" value="11753-13027" /><button type="submit" title="La page index.php" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h3 class="sectionedit19" id="la_page_bloquephp">La page bloque.php</h3>
<div class="level3">

<p>
C’est cette page qui s’affichera pour toute les adresses qui ne sont pas précisément recensées. Elle s’affichera donc pour les url contenues dans le fichier host.
Elle indique le nom du site, affiche un sens interdit, explique que la page est bloquée et redirige vers une autre page après quelques secondes.
</p>
<pre class="code">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Page bloque par le fichier host&lt;/title&gt;

    &lt;/head&gt;

&lt;img src=&quot;./sens-interdit.jpg&quot; alt=&quot;sens interdit&quot; /&gt;

    &lt;body&gt;
    

 

&lt;?
$monUrl = &quot;http://&quot;.$_SERVER[&#039;HTTP_HOST&#039;].$_SERVER[&#039;REQUEST_URI&#039;];
echo &quot;&lt;h1&gt; La page que vous tentez de charger &lt;/p&gt;&quot;  .$monUrl.&quot; est bloquée.&lt;/h1&gt; &lt;/p&gt;&quot;;


echo &quot;vous allez etre redirigez vers duckduckgo dans 5s&lt;/p&gt;&quot;;

header (&quot;Refresh: 5;URL=https://duckduckgo.com/&quot;);



?&gt; 
	
    &lt;/body&gt;
&lt;/html&gt;</pre>

<p>
Vous pouvez adapter le temps avant la redirection en secondes, changez l&#039;adresse…
Vous pouvez maintenant afficher une page différente en fonction que se soit l&#039;adresse du site local ou une autre même si elle possède la même adresse ip dans votre fichier host.
</p>

</div>
<div class='secedit editbutton_section editbutton_19'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[La page bloque.php] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="la_page_bloquephp" /><input type="hidden" name="codeblockOffset" value="21" /><input type="hidden" name="range" value="13028-14176" /><button type="submit" title="La page bloque.php" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
<h2 class="sectionedit20 page-header" id="liens">Liens</h2>
<div class="level2">
<ul class=" fix-media-list-overlap">
<li class="level1"><div class="li"> <a href="https://fr.wikipedia.org/wiki/Hosts" class="urlextern" title="https://fr.wikipedia.org/wiki/Hosts" rel="nofollow">Hosts</a> (Wikipédia FR) et <a href="https://en.wikipedia.org/wiki/Hosts_(file)" class="urlextern" title="https://en.wikipedia.org/wiki/Hosts_(file)" rel="nofollow">Hosts</a> (Wikipédia EN)</div>
</li>
<li class="level1"><div class="li"> Le fichier hosts sur <a href="http://lelogiciellibre.net/tutoriaux/fichier-hosts.php" class="urlextern" title="http://lelogiciellibre.net/tutoriaux/fichier-hosts.php" rel="nofollow">lelogiciellibre.net</a>.</div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs principaux : <a href="/utilisateurs/fl4t" class="wikilink2" title="utilisateurs:fl4t" rel="nofollow">Fl4t</a>, <a href="/utilisateurs/psychederic" class="wikilink1" title="utilisateurs:psychederic">PsychedÉric</a>, <a href="/utilisateurs/gb1yop" class="wikilink2" title="utilisateurs:gb1yop" rel="nofollow">gb1yop</a>, <a href="http://forum.ubuntu-fr.org/profile.php?id=45561" class="urlextern" title="http://forum.ubuntu-fr.org/profile.php?id=45561" rel="nofollow">darunia</a>, <a href="/utilisateurs/anonyme68" class="wikilink2" title="utilisateurs:anonyme68" rel="nofollow">anonyme68</a> (suppression de paragraphes et des scripts étranges pour une meilleure clarté).</em>
</p>

<p>
<em>Basé sur <a href="http://forum.ubuntu-fr.org/viewtopic.php?id=350476" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?id=350476" rel="nofollow">forum</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_20'><form class="button btn_secedit form-inline" method="post" action="/hosts"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1593536056" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="hid" value="liens" /><input type="hidden" name="codeblockOffset" value="22" /><input type="hidden" name="range" value="14177-" /><button type="submit" title="Liens" class=" btn btn-default btn btn-xs btn-default">Modifier</button></div></form></div>
</div><!-- /CONTENT --></div>
          </div>
        </div>

        <div class="small text-right">

                    <span class="docInfo">
            <ul class="list-inline"><li><i class="fa fa-fw fa-file-text-o text-muted"></i> <span title="hosts.txt">hosts.txt</span></li><li><i class="fa fa-fw fa-calendar text-muted"></i> Dernière modification: <span title="Le 30/06/2020, 18:54">Le 30/06/2020, 18:54</span></li><li class="text-muted">par 88.123.216.65</li></ul>          </span>
          
          
        </div>

      </article>

      
    </main>

    <footer id="dw__footer" class="navbar navbar-default">
  <div class="container">

    <div class="small navbar-text">

            <div class="footer-dw-title row">
        <div class="media col-sm-4">
          <!--<div class="media-left">
            <img src="/_media/logo.png" alt="Wiki ubuntu-fr" class="media-object" style="width:32px" />
          </div> -->
          <div class="media-body">
            <h4 class="media-heading">Documentation ubuntu-fr</h4>
            <p>
              Les pages de cette documentation sont rédigées par les utilisateurs
              pour les utilisateurs. Apportez-nous votre aide pour améliorer
              le contenu de cette documentation.
            </p>
          </div>
        </div>
        <div class="col-sm-4">
          <h4>Liens utiles</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/debutant" ><i class="fa fa-fw fa-child" style="font-size: 1.3em;"></i> Débuter sur Ubuntu</a>            </li>
            <li>
              <a href="/wiki/participer_wiki" ><i class="fa fa-fw fa-edit" style="font-size: 1.3em;"></i> Participer à la documentation</a>            </li>
            <li>
              <a href="/documentation_hors_ligne" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Documentation hors ligne</a>            </li>
            <li>
              <a href="//www.ubuntu-fr.org/telechargement" ><i class="fa fa-fw fa-arrow-circle-down" style="font-size: 1.3em;"></i> Télécharger Ubuntu</a>            </li>
          </ul>
        </div>
        <div class="col-sm-4">
          <h4>Obtenir de l'aide</h4>
          <ul class="list-group list-unstyled">
            <li>
              <a href="/tutoriel/comment_obtenir_une_reponse_satisfaisante" ><i class="fa fa-fw fa-info-circle" style="font-size: 1.3em;"></i> Chercher de l'aide</a>            </li>
            <li>
              <a href="//doc.ubuntu-fr.org/" ><i class="fa fa-fw fa-book" style="font-size: 1.3em;"></i> Consulter la documentation</a>            </li>
            <li>
              <a href="//forum.ubuntu-fr.org/" ><i class="fa fa-fw fa-comments" style="font-size: 1.3em;"></i> Consulter le Forum</a>            </li>
            <li>
              <a href="//guide.ubuntu-fr.org/" ><i class="fa fa-fw fa-question-circle" style="font-size: 1.3em;"></i> Lisez le guide</a>            </li>
          </ul>
        </div>
        <p>&nbsp;</p>
      </div>
      
      
      <div class="footer-license row">

        <div class="col-sm-6">
                    <p>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license"><img src="/lib/tpl/bootstrap3/images/license/cc.png" width="24" height="24" alt="cc" /> <img src="/lib/tpl/bootstrap3/images/license/by.png" width="24" height="24" alt="by" /> <img src="/lib/tpl/bootstrap3/images/license/sa.png" width="24" height="24" alt="sa" /> </a>          </p>
          <p class="small">
            Sauf mention contraire, le contenu de ce wiki est placé sous les termes de la licence suivante :<br/><a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" title="CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported" target="" itemscope itemtype="http://schema.org/CreativeWork" itemprop="license" rel="license" class="license">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a>          </p>
                  </div>

        <div class="col-sm-6">
                    <ul id="dw__badges" class="list-inline text-right hidden-print">

  <li>
    <a href="https://www.dokuwiki.org/template:bootstrap3" title="Bootstrap template for DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/bootstrap.png" width="20" alt="Bootstrap template for DokuWiki" />
    </a>
  </li>

  <li>
    <a href="https://www.php.net" title="Powered by PHP" target="">
      <img src="/lib/tpl/bootstrap3/images/php.png" width="20" alt="Powered by PHP" />
    </a>
  </li>

  <li>
    <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="">
      <img src="/lib/tpl/bootstrap3/images/html5.png" width="20" alt="Valid HTML5" />
    </a>
  </li>

  <li>
    <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="">
      <img src="/lib/tpl/bootstrap3/images/css3.png" width="20" alt="Valid CSS" />
    </a>
  </li>

  <li>
    <a href="https://www.dokuwiki.org/" title="Driven by DokuWiki" target="">
      <img src="/lib/tpl/bootstrap3/images/logo.png" width="20" alt="Driven by DokuWiki" />
    </a>
  </li>

</ul>
                  </div>

      </div>

    </div>

  </div>
</footer>
<img src="/lib/exe/indexer.php?id=hosts&amp;1635553416" width="2" height="1" alt="" />
    <a href="#dokuwiki__top" class="back-to-top hidden-print btn btn-default btn-sm" title="Aller au contenu" accesskey="t"><i class="fa fa-chevron-up"></i></a>

    <div id="screen__mode">      <span class="visible-xs-block"></span>
      <span class="visible-sm-block"></span>
      <span class="visible-md-block"></span>
      <span class="visible-lg-block"></span>
    </div>

  </div>

    <!-- Piwik -->
		<script type="text/javascript">
		  var _paq = _paq || [];
		  _paq.push(["setDomains", ["*.doc.ubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.xubuntu-fr.org","*.doc.edubuntu-fr.org","*.doc.lubuntu-fr.org","*.doc.ubuntu-fr.org","*.doc.xubuntu-fr.org"]]);
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//piwik.ubuntu-fr.org/";
		    _paq.push(['setTrackerUrl', u+'piwik.php']);
		    _paq.push(['setSiteId', 3]);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<noscript><p><img src="//piwik.ubuntu-fr.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
		<!-- End Piwik Code -->

</body>
</html>

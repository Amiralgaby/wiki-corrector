5 Mot inconnu : LVM => ====== Sauvegarder son système à chaud avec LVM ======

8 Mot inconnu : LVM => Ce tutoriel décrit les étapes pour faire une sauvegarde à chaud de son système. Il faut avoir sa racine "/" encapsulée dans un volume LVM.

9 Espace(s) surnuméraire(s) à supprimer. => Les étapes décrites se feront en ligne de commande, bien que certaines d'entre elles peuvent être faites via  [[apt://system-config-lvm|system-config-lvm]]

14 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Disposer des [[:sudo|droits d'administration]].

15 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Avoir son fichier racine / à sauvegarder dans un volume logique (lvm)
15 Mot inconnu : lvm =>   * Avoir son fichier racine / à sauvegarder dans un volume logique (lvm)

16 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Avoir un peu d'espace disque disponible

20 Mot inconnu : snapshot => Vérifier que nous disposons d'espace libre pour la sauvegarde et le snapshot dans notre volume group.
20 Mot inconnu : group => Vérifier que nous disposons d'espace libre pour la sauvegarde et le snapshot dans notre volume group.

21 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo vgs
21 Mot inconnu : sudo =>   sudo vgs
21 Mot inconnu : vgs =>   sudo vgs

22 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>     VG        #PV #LV #SN Attr   VSize   VFree  
22 Espace(s) surnuméraire(s) à supprimer. =>     VG        #PV #LV #SN Attr   VSize   VFree  
22 Mot inconnu : Attr =>     VG        #PV #LV #SN Attr   VSize   VFree  
22 Espace(s) surnuméraire(s) à supprimer. =>     VG        #PV #LV #SN Attr   VSize   VFree  
22 Mot inconnu : VSize =>     VG        #PV #LV #SN Attr   VSize   VFree  
22 Espace(s) surnuméraire(s) à supprimer. =>     VG        #PV #LV #SN Attr   VSize   VFree  
22 Mot inconnu : VFree =>     VG        #PV #LV #SN Attr   VSize   VFree  
22 Espace(s) en fin de ligne à supprimer. =>     VG        #PV #LV #SN Attr   VSize   VFree  

23 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Mot inconnu : corsair =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Espace(s) surnuméraire(s) à supprimer. =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Espace(s) surnuméraire(s) à supprimer. =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Espace(s) surnuméraire(s) à supprimer. =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Mot inconnu : wz =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Avec une unité de mesure, mettez un espace insécable. =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Espace(s) surnuméraire(s) à supprimer. =>   corsair     1   4   0 wz--n-  29,81g  18,32g
23 Avec une unité de mesure, mettez un espace insécable. =>   corsair     1   4   0 wz--n-  29,81g  18,32g

24 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   

25 Guillemets typographiques ouvrants. => Ici notre groupe de volumes appelé "corsair" possède 18Go d'espace disponible
25 Mot inconnu : corsair => Ici notre groupe de volumes appelé "corsair" possède 18Go d'espace disponible
25 Guillemets typographiques fermants. => Ici notre groupe de volumes appelé "corsair" possède 18Go d'espace disponible

28 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * On cherche a savoir quelle taille de données on va sauvegarder
28 Confusion probable : “a” est la conjugaison du verbe “avoir”. Utilisez la préposition “à”. =>   * On cherche a savoir quelle taille de données on va sauvegarder

30 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   df -h /
30 Mot inconnu : df =>   df -h /
30 Il manque un espace à côté du tiret. =>   df -h /

31 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   Sys. de fichiers            Taille  Uti. Disp. Uti% Monté sur
31 Mot inconnu : Sys =>   Sys. de fichiers            Taille  Uti. Disp. Uti% Monté sur
31 Espace(s) surnuméraire(s) à supprimer. =>   Sys. de fichiers            Taille  Uti. Disp. Uti% Monté sur
31 Espace(s) surnuméraire(s) à supprimer. =>   Sys. de fichiers            Taille  Uti. Disp. Uti% Monté sur
31 Mot inconnu : Uti =>   Sys. de fichiers            Taille  Uti. Disp. Uti% Monté sur
31 Mot inconnu : Disp =>   Sys. de fichiers            Taille  Uti. Disp. Uti% Monté sur
31 Mot inconnu : Uti =>   Sys. de fichiers            Taille  Uti. Disp. Uti% Monté sur

32 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   /dev/mapper/corsair-maracine

33 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>                       4,0G  1,8G  2,0G  47% /
33 Si “G” est une unité de mesure, il manque un espace insécable. Si le nombre se rapporte au mot suivant, c’est aussi valable. =>                       4,0G  1,8G  2,0G  47% /
33 Espace(s) surnuméraire(s) à supprimer. =>                       4,0G  1,8G  2,0G  47% /
33 Si “G” est une unité de mesure, il manque un espace insécable. Si le nombre se rapporte au mot suivant, c’est aussi valable. =>                       4,0G  1,8G  2,0G  47% /
33 Espace(s) surnuméraire(s) à supprimer. =>                       4,0G  1,8G  2,0G  47% /
33 Si “G” est une unité de mesure, il manque un espace insécable. Si le nombre se rapporte au mot suivant, c’est aussi valable. =>                       4,0G  1,8G  2,0G  47% /
33 Espace(s) surnuméraire(s) à supprimer. =>                       4,0G  1,8G  2,0G  47% /
33 Avec une unité de mesure, mettez un espace insécable. =>                       4,0G  1,8G  2,0G  47% /

36 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Création d'un volume de sauvegarde

38 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo lvcreate -n monbackup -L 2G corsair
38 Mot inconnu : sudo =>   sudo lvcreate -n monbackup -L 2G corsair
38 Mot inconnu : lvcreate =>   sudo lvcreate -n monbackup -L 2G corsair
38 Il manque un espace à côté du tiret. =>   sudo lvcreate -n monbackup -L 2G corsair
38 Mot inconnu : monbackup =>   sudo lvcreate -n monbackup -L 2G corsair
38 Il manque un espace à côté du tiret. =>   sudo lvcreate -n monbackup -L 2G corsair
38 Mot inconnu : corsair =>   sudo lvcreate -n monbackup -L 2G corsair

39 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   Logical volume "monbackup" created
39 Mot inconnu : Logical =>   Logical volume "monbackup" created
39 Guillemets typographiques ouvrants. =>   Logical volume "monbackup" created
39 Mot inconnu : monbackup =>   Logical volume "monbackup" created
39 Guillemets typographiques fermants. =>   Logical volume "monbackup" created
39 Mot inconnu : created =>   Logical volume "monbackup" created

40 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   

41 Mot inconnu : monbackup => Ici un nouveau volume appelé monbackup d'une taille de 2Go est créé dans le groupe de volume "corsair"
41 Guillemets typographiques ouvrants. => Ici un nouveau volume appelé monbackup d'une taille de 2Go est créé dans le groupe de volume "corsair"
41 Mot inconnu : corsair => Ici un nouveau volume appelé monbackup d'une taille de 2Go est créé dans le groupe de volume "corsair"
41 Guillemets typographiques fermants. => Ici un nouveau volume appelé monbackup d'une taille de 2Go est créé dans le groupe de volume "corsair"

43 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Création d'un systeme de fichiers
43 Mot inconnu : systeme =>   * Création d'un systeme de fichiers

45 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo mkfs.ext4 /dev/corsair/monbackup
45 Mot inconnu : sudo =>   sudo mkfs.ext4 /dev/corsair/monbackup
45 Mot inconnu : mkfs =>   sudo mkfs.ext4 /dev/corsair/monbackup
45 Mot inconnu : ext4 =>   sudo mkfs.ext4 /dev/corsair/monbackup

47 Mot inconnu : ext4 => Ici nous avons choisi ext4, mais il pourrait en être autrement.

49 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Montage du FileSystem de backup
49 Mot inconnu : FileSystem =>   * Montage du FileSystem de backup
49 Mot inconnu : backup =>   * Montage du FileSystem de backup

51 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo mkdir /ma_sauvegarde
51 Mot inconnu : sudo =>   sudo mkdir /ma_sauvegarde
51 Mot inconnu : mkdir =>   sudo mkdir /ma_sauvegarde
51 Mot inconnu : ma_sauvegarde =>   sudo mkdir /ma_sauvegarde

52 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo mount /dev/corsair/monbackup /ma_sauvegarde
52 Mot inconnu : sudo =>   sudo mount /dev/corsair/monbackup /ma_sauvegarde
52 Mot inconnu : mount =>   sudo mount /dev/corsair/monbackup /ma_sauvegarde
52 Mot inconnu : ma_sauvegarde =>   sudo mount /dev/corsair/monbackup /ma_sauvegarde

54 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>  Voila, nous avons notre File System /ma_sauvegarde qui pourra accueillir la sauvegarde.
54 Mot inconnu : System =>  Voila, nous avons notre File System /ma_sauvegarde qui pourra accueillir la sauvegarde.
54 Mot inconnu : ma_sauvegarde =>  Voila, nous avons notre File System /ma_sauvegarde qui pourra accueillir la sauvegarde.

55 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   

56 Mot inconnu : Snapshot => ===== Snapshot et copie =====

58 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Faire un snapshot du système de fichiers racine /  afin de pouvoir copier les données tranquillement.
58 Mot inconnu : snapshot =>   * Faire un snapshot du système de fichiers racine /  afin de pouvoir copier les données tranquillement.

60 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Mot inconnu : sudo =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Mot inconnu : sync =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Mot inconnu : sudo =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Mot inconnu : lvcreate =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Il manque un espace à côté du tiret. =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Mot inconnu : monsnapshot =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Il manque un espace à côté du tiret. =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Mot inconnu : corsair =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine
60 Mot inconnu : maracine =>   sudo sync && sudo lvcreate -s -n monsnapshot -L 2G corsair/maracine

62 Mot inconnu : snapshot => Le volume de snapshot (temporaire) s'appelle "monsnapshot". En général, 2Go suffisent pour un snapshot de quelques heures de vie. Si le filesystem racine est beaucoup accédé/modifié, il faudra ajuster cette taille à la hausse.
62 Guillemets typographiques ouvrants. => Le volume de snapshot (temporaire) s'appelle "monsnapshot". En général, 2Go suffisent pour un snapshot de quelques heures de vie. Si le filesystem racine est beaucoup accédé/modifié, il faudra ajuster cette taille à la hausse.
62 Mot inconnu : monsnapshot => Le volume de snapshot (temporaire) s'appelle "monsnapshot". En général, 2Go suffisent pour un snapshot de quelques heures de vie. Si le filesystem racine est beaucoup accédé/modifié, il faudra ajuster cette taille à la hausse.
62 Guillemets typographiques fermants. => Le volume de snapshot (temporaire) s'appelle "monsnapshot". En général, 2Go suffisent pour un snapshot de quelques heures de vie. Si le filesystem racine est beaucoup accédé/modifié, il faudra ajuster cette taille à la hausse.
62 Mot inconnu : snapshot => Le volume de snapshot (temporaire) s'appelle "monsnapshot". En général, 2Go suffisent pour un snapshot de quelques heures de vie. Si le filesystem racine est beaucoup accédé/modifié, il faudra ajuster cette taille à la hausse.
62 Mot inconnu : filesystem => Le volume de snapshot (temporaire) s'appelle "monsnapshot". En général, 2Go suffisent pour un snapshot de quelques heures de vie. Si le filesystem racine est beaucoup accédé/modifié, il faudra ajuster cette taille à la hausse.

64 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Montage du snapshot
64 Mot inconnu : snapshot =>   * Montage du snapshot

66 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo mkdir /mon_snapshot
66 Mot inconnu : sudo =>   sudo mkdir /mon_snapshot
66 Mot inconnu : mkdir =>   sudo mkdir /mon_snapshot
66 Mot inconnu : mon_snapshot =>   sudo mkdir /mon_snapshot

67 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo mount /dev/corsair/monsnapshot /mon_snapshot
67 Mot inconnu : sudo =>   sudo mount /dev/corsair/monsnapshot /mon_snapshot
67 Mot inconnu : mount =>   sudo mount /dev/corsair/monsnapshot /mon_snapshot
67 Mot inconnu : mon_snapshot =>   sudo mount /dev/corsair/monsnapshot /mon_snapshot

69 Mot inconnu : mon_snapshot => Ici nous avons donc une image fixe de / qui se trouve dans /mon_snapshot, nous pouvons la copier.

71 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Copie des données

73 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo cp -ax /mon_snapshot/* /ma_sauvegarde/
73 Mot inconnu : sudo =>   sudo cp -ax /mon_snapshot/* /ma_sauvegarde/
73 Mot inconnu : cp =>   sudo cp -ax /mon_snapshot/* /ma_sauvegarde/
73 Il manque un espace à côté du tiret. =>   sudo cp -ax /mon_snapshot/* /ma_sauvegarde/
73 Mot inconnu : ax =>   sudo cp -ax /mon_snapshot/* /ma_sauvegarde/
73 Mot inconnu : mon_snapshot =>   sudo cp -ax /mon_snapshot/* /ma_sauvegarde/
73 Mot inconnu : ma_sauvegarde =>   sudo cp -ax /mon_snapshot/* /ma_sauvegarde/

75 Mot inconnu : snapshot => Ici nous avons donc copié notre snapshot dans notre volume de sauvegarde !
75 Il manque un espace insécable. => Ici nous avons donc copié notre snapshot dans notre volume de sauvegarde !

77 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   * Suppression du snapshot
77 Mot inconnu : snapshot =>   * Suppression du snapshot

79 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo umount /mon_snapshot
79 Mot inconnu : sudo =>   sudo umount /mon_snapshot
79 Mot inconnu : umount =>   sudo umount /mon_snapshot
79 Mot inconnu : mon_snapshot =>   sudo umount /mon_snapshot

80 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo lvremove corsair/monsnapshot
80 Mot inconnu : sudo =>   sudo lvremove corsair/monsnapshot
80 Mot inconnu : lvremove =>   sudo lvremove corsair/monsnapshot
80 Mot inconnu : corsair =>   sudo lvremove corsair/monsnapshot
80 Mot inconnu : monsnapshot =>   sudo lvremove corsair/monsnapshot

81 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Mot inconnu : you =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Mot inconnu : really =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Mot inconnu : want =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Mot inconnu : to =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Mot inconnu : remove =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Mot inconnu : logical =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Mot inconnu : monsnapshot =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y
81 Il manque un espace insécable. =>   Do you really want to remove active logical volume monsnapshot? [y/n]: y

82 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   Logical volume "monsnapshot" successfully removed
82 Mot inconnu : Logical =>   Logical volume "monsnapshot" successfully removed
82 Guillemets typographiques ouvrants. =>   Logical volume "monsnapshot" successfully removed
82 Mot inconnu : monsnapshot =>   Logical volume "monsnapshot" successfully removed
82 Guillemets typographiques fermants. =>   Logical volume "monsnapshot" successfully removed
82 Mot inconnu : successfully =>   Logical volume "monsnapshot" successfully removed
82 Mot inconnu : removed =>   Logical volume "monsnapshot" successfully removed

87 Guillemets typographiques ouvrants. => Les étapes précédentes nous permettent d'avoir un volume "monbackup" qui est une copie de la racine /.
87 Mot inconnu : monbackup => Les étapes précédentes nous permettent d'avoir un volume "monbackup" qui est une copie de la racine /.
87 Guillemets typographiques fermants. => Les étapes précédentes nous permettent d'avoir un volume "monbackup" qui est une copie de la racine /.

89 Mot inconnu : bootable => Pour pouvoir rendre cette copie bootable, il faut rendre la  fstab cohérente :
89 Espace(s) surnuméraire(s) à supprimer. => Pour pouvoir rendre cette copie bootable, il faut rendre la  fstab cohérente :
89 Mot inconnu : fstab => Pour pouvoir rendre cette copie bootable, il faut rendre la  fstab cohérente :
89 Il manque un espace insécable. => Pour pouvoir rendre cette copie bootable, il faut rendre la  fstab cohérente :

91 Mot inconnu : fstab => Modifier la fstab et changer le nom du volume de / par celui de la sauvegarde.

92 Guillemets typographiques ouvrants. => Dans notre exemple, il faudra remplacer "maracine" par "monbackup"
92 Mot inconnu : maracine => Dans notre exemple, il faudra remplacer "maracine" par "monbackup"
92 Guillemets typographiques fermants. => Dans notre exemple, il faudra remplacer "maracine" par "monbackup"
92 Guillemets typographiques ouvrants. => Dans notre exemple, il faudra remplacer "maracine" par "monbackup"
92 Mot inconnu : monbackup => Dans notre exemple, il faudra remplacer "maracine" par "monbackup"
92 Guillemets typographiques fermants. => Dans notre exemple, il faudra remplacer "maracine" par "monbackup"

94 Mot inconnu : Editer => Editer le fichier /ma_sauvegarde/etc/fstab :
94 Mot inconnu : ma_sauvegarde => Editer le fichier /ma_sauvegarde/etc/fstab :
94 Il manque un espace insécable. => Editer le fichier /ma_sauvegarde/etc/fstab :

96 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   /dev/mapper/corsair-monbackup /               ext4    errors=remount-ro 0       1
96 Mot inconnu : ext4 =>   /dev/mapper/corsair-monbackup /               ext4    errors=remount-ro 0       1
96 Espace(s) surnuméraire(s) à supprimer. =>   /dev/mapper/corsair-monbackup /               ext4    errors=remount-ro 0       1
96 Mot inconnu : errors =>   /dev/mapper/corsair-monbackup /               ext4    errors=remount-ro 0       1
96 Mot inconnu : remount-ro =>   /dev/mapper/corsair-monbackup /               ext4    errors=remount-ro 0       1
96 Espace(s) surnuméraire(s) à supprimer. =>   /dev/mapper/corsair-monbackup /               ext4    errors=remount-ro 0       1

97 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   

98 Mot inconnu : boot => Enfin, ajouter notre sauvegarde au menu boot de grub.
98 Mot inconnu : grub => Enfin, ajouter notre sauvegarde au menu boot de grub.

99 Espace(s) en début de ligne à supprimer : utilisez les retraits de paragraphe (ou les tabulations à la rigueur). =>   sudo update-grub
99 Mot inconnu : sudo =>   sudo update-grub
99 Mot inconnu : update-grub =>   sudo update-grub

104 Mot inconnu : bootable => Nous avons sauvegardé notre système de fichiers racine / à chaud, et notre sauvegarde est même bootable !
104 Il manque un espace insécable. => Nous avons sauvegardé notre système de fichiers racine / à chaud, et notre sauvegarde est même bootable !
